"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[34],{12149:function(Ft,D1,qe){qe.d(D1,{T5:function(){return Xf},dZ:function(){return Ym}});var $=qe(14334),jr=qe(68508),ss=qe(85418),fr=qe(45360),At=qe(4393),Th=qe(21612),oi=qe(65520),B1=qe(34041),us=qe(3303),Mi=qe(55742),Rt=qe(15867),qr=qe(5914),Ka=qe(84567),lt=qe(83062),Lh=qe(55241),Yn=qe(42075),Vn=qe(24383),In=qe(57953),cs=qe(28459),Rh=qe(69677),P1=qe(32983),L=qe(62435),sa=qe(61254),Ah=qe(48689),N1=qe(33160),F1=qe(37029),Ih=qe(40378);Ft=qe.hmd(Ft);var H1=Object.defineProperty,z1=Object.defineProperties,dc=Object.getOwnPropertyDescriptors,Ko=Object.getOwnPropertySymbols,Oh=Object.prototype.hasOwnProperty,Zo=Object.prototype.propertyIsEnumerable,Qo=(l,u,f)=>u in l?H1(l,u,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[u]=f,ye=(l,u)=>{for(var f in u||(u={}))Oh.call(u,f)&&Qo(l,f,u[f]);if(Ko)for(var f of Ko(u))Zo.call(u,f)&&Qo(l,f,u[f]);return l},pt=(l,u)=>z1(l,dc(u)),fn=(l,u)=>{var f={};for(var p in l)Oh.call(l,p)&&u.indexOf(p)<0&&(f[p]=l[p]);if(l!=null&&Ko)for(var p of Ko(l))u.indexOf(p)<0&&Zo.call(l,p)&&(f[p]=l[p]);return f};const G1={zh_CN:{\u9009\u62E9\u5206\u6790\u4FE1\u606F:"\u9009\u62E9\u5206\u6790\u4FE1\u606F",\u5207\u6362\u6307\u6807:"\u5207\u6362\u6307\u6807",\u786E\u5B9A:"\u786E\u5B9A",\u53D6\u6D88:"\u53D6\u6D88",\u91CD\u7F6E:"\u91CD\u7F6E",\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u641C\u7D22:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u641C\u7D22",\u641C\u7D22:"\u641C\u7D22",\u6062\u590D:"\u6062\u590D","\u5DF2\u9009 {} \u9879":"\u5DF2\u9009 {} \u9879",\u6240\u9009\u9879:"\u6240\u9009\u9879",\u9009\u62E9\u4E0B\u94BB\u7EF4\u5EA6:"\u9009\u62E9\u4E0B\u94BB\u7EF4\u5EA6",\u6062\u590D\u9ED8\u8BA4:"\u6062\u590D\u9ED8\u8BA4",\u641C\u7D22\u5B57\u6BB5:"\u641C\u7D22\u5B57\u6BB5",\u884C\u5217\u5207\u6362:"\u884C\u5217\u5207\u6362",\u884C\u5934:"\u884C\u5934",\u5217\u5934:"\u5217\u5934",\u503C:"\u503C",\u5C55\u5F00\u5B50\u9879:"\u5C55\u5F00\u5B50\u9879",\u9996\u5B57\u6BCD:"\u9996\u5B57\u6BCD",\u624B\u52A8\u6392\u5E8F:"\u624B\u52A8\u6392\u5E8F",\u5176\u4ED6\u5B57\u6BB5:"\u5176\u4ED6\u5B57\u6BB5",\u9AD8\u7EA7\u6392\u5E8F:"\u9AD8\u7EA7\u6392\u5E8F",\u8BBE\u7F6E\u987A\u5E8F:"\u8BBE\u7F6E\u987A\u5E8F",\u53EF\u9009\u5B57\u6BB5:"\u53EF\u9009\u5B57\u6BB5","\u6309\u4EE5\u4E0B\u89C4\u5219\u8FDB\u884C\u6392\u5E8F\uFF08\u4F18\u5148\u7EA7\u7531\u4F4E\u5230\u9AD8\uFF09":"\u6309\u4EE5\u4E0B\u89C4\u5219\u8FDB\u884C\u6392\u5E8F\uFF08\u4F18\u5148\u7EA7\u7531\u4F4E\u5230\u9AD8\uFF09",\u6309:"\u6309",\u8BF4\u660E:"\u8BF4\u660E\uFF1A",\u590D\u5236\u539F\u59CB\u6570\u636E:"\u590D\u5236\u539F\u59CB\u6570\u636E",\u590D\u5236\u683C\u5F0F\u5316\u6570\u636E:"\u590D\u5236\u683C\u5F0F\u5316\u6570\u636E",\u4E0B\u8F7D\u539F\u59CB\u6570\u636E:"\u4E0B\u8F7D\u539F\u59CB\u6570\u636E",\u4E0B\u8F7D\u683C\u5F0F\u5316\u6570\u636E:"\u4E0B\u8F7D\u683C\u5F0F\u5316\u6570\u636E",\u64CD\u4F5C\u6210\u529F:"\u64CD\u4F5C\u6210\u529F",\u64CD\u4F5C\u5931\u8D25:"\u64CD\u4F5C\u5931\u8D25",\u65F6\u95F4:"\u65F6\u95F4",\u6307\u6807:"\u6307\u6807",\u76EE\u6807\u503C:"\u76EE\u6807\u503C"},en_US:{\u9009\u62E9\u5206\u6790\u4FE1\u606F:"Select Analysis Information",\u5207\u6362\u6307\u6807:"Switch indicator",\u786E\u5B9A:"Ok",\u53D6\u6D88:"Cancel",\u91CD\u7F6E:"Reset",\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u641C\u7D22:"Please enter a keyword search",\u641C\u7D22:"Search",\u6062\u590D:"Recover","\u5DF2\u9009 {} \u9879":"selected {} item",\u6240\u9009\u9879:"selected items",\u9009\u62E9\u4E0B\u94BB\u7EF4\u5EA6:"Select drill down dimension",\u6062\u590D\u9ED8\u8BA4:"Restore default",\u641C\u7D22\u5B57\u6BB5:"Search field",\u884C\u5217\u5207\u6362:"Switch Dimensions",\u884C\u5934:"Rows",\u5217\u5934:"Cols",\u503C:"Values",\u5C55\u5F00\u5B50\u9879:"Expand Children",\u9996\u5B57\u6BCD:"Alphabetical order",\u624B\u52A8\u6392\u5E8F:"Custom order",\u5176\u4ED6\u5B57\u6BB5:"Other field",\u9AD8\u7EA7\u6392\u5E8F:"Advanced order",\u8BBE\u7F6E\u987A\u5E8F:"SetManual",\u53EF\u9009\u5B57\u6BB5:"Fields","\u6309\u4EE5\u4E0B\u89C4\u5219\u8FDB\u884C\u6392\u5E8F\uFF08\u4F18\u5148\u7EA7\u7531\u4F4E\u5230\u9AD8\uFF09":"Order according to the following rules (from low to high priority)",\u6309:"By",\u8BF4\u660E:"Description: ",\u590D\u5236\u539F\u59CB\u6570\u636E:"Copy raw data",\u590D\u5236\u683C\u5F0F\u5316\u6570\u636E:"Copy formatted data",\u4E0B\u8F7D\u539F\u59CB\u6570\u636E:"Download raw data",\u4E0B\u8F7D\u683C\u5F0F\u5316\u6570\u636E:"Download formatted data",\u64CD\u4F5C\u6210\u529F:"Operation successful",\u64CD\u4F5C\u5931\u8D25:"Operation failed",\u65F6\u95F4:"Date",\u6307\u6807:"Measure",\u76EE\u6807\u503C:"Target Value"}},$1={tooltip:{showTooltip:!0,autoAdjustBoundary:"body",operation:{hiddenColumns:!0,trend:!1,sort:!0}},showDefaultHeaderActionIcon:!0},Za=200,hc=()=>[{name:(0,$.agQ)("\u5347\u5E8F"),value:"ASC"},{name:(0,$.agQ)("\u964D\u5E8F"),value:"DESC"}],fs=()=>[{label:(0,$.agQ)("\u9996\u5B57\u6BCD"),value:"sortMethod"},{label:(0,$.agQ)("\u624B\u52A8\u6392\u5E8F"),value:"sortBy"},{label:(0,$.agQ)("\u5176\u4ED6\u5B57\u6BB5"),value:"sortByMeasure",children:[]}],Dt="antv-s2-advanced-sort",li="s2-drill-down",vc="s2-strategy-sheet-tooltip",$t=l=>l?`${vc}-${l}`:vc,pc=(...l)=>(0,$._Ge)($.WNh,$1,...l);var W1=typeof qe.g=="object"&&qe.g&&qe.g.Object===Object&&qe.g,gc=W1,Mh=typeof self=="object"&&self&&self.Object===Object&&self,Dh=gc||Mh||Function("return this")(),On=Dh,k1=On.Symbol,jt=k1,mc=Object.prototype,yc=mc.hasOwnProperty,U1=mc.toString,Qa=jt?jt.toStringTag:void 0;function Bh(l){var u=yc.call(l,Qa),f=l[Qa];try{l[Qa]=void 0;var p=!0}catch(y){}var m=U1.call(l);return p&&(u?l[Qa]=f:delete l[Qa]),m}var Y1=Object.prototype,V1=Y1.toString;function X1(l){return V1.call(l)}var j1="[object Null]",q1="[object Undefined]",Ph=jt?jt.toStringTag:void 0;function si(l){return l==null?l===void 0?q1:j1:Ph&&Ph in Object(l)?Bh(l):X1(l)}function hn(l){return l!=null&&typeof l=="object"}var K1="[object Symbol]";function hs(l){return typeof l=="symbol"||hn(l)&&si(l)==K1}function vs(l,u){for(var f=-1,p=l==null?0:l.length,m=Array(p);++f<p;)m[f]=u(l[f],f,l);return m}var Cc=Array.isArray,Bt=Cc,wc=1/0,Nh=jt?jt.prototype:void 0,Fh=Nh?Nh.toString:void 0;function ps(l){if(typeof l=="string")return l;if(Bt(l))return vs(l,ps)+"";if(hs(l))return Fh?Fh.call(l):"";var u=l+"";return u=="0"&&1/l==-wc?"-0":u}var Ja=/\s/;function Z1(l){for(var u=l.length;u--&&Ja.test(l.charAt(u)););return u}var gs=/^\s+/;function Hh(l){return l&&l.slice(0,Z1(l)+1).replace(gs,"")}function Wt(l){var u=typeof l;return l!=null&&(u=="object"||u=="function")}var xc=0/0,bc=/^[-+]0x[0-9a-f]+$/i,Q1=/^0b[01]+$/i,zh=/^0o[0-7]+$/i,J1=parseInt;function Sc(l){if(typeof l=="number")return l;if(hs(l))return xc;if(Wt(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=Wt(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=Hh(l);var f=Q1.test(l);return f||zh.test(l)?J1(l.slice(2),f?2:8):bc.test(l)?xc:+l}var Gh=1/0,ey=17976931348623157e292;function ty(l){if(!l)return l===0?l:0;if(l=Sc(l),l===Gh||l===-Gh){var u=l<0?-1:1;return u*ey}return l===l?l:0}function $h(l){var u=ty(l),f=u%1;return u===u?f?u-f:u:0}function Jo(l){return l}var Wh="[object AsyncFunction]",ry="[object Function]",kh="[object GeneratorFunction]",ny="[object Proxy]";function ua(l){if(!Wt(l))return!1;var u=si(l);return u==ry||u==kh||u==Wh||u==ny}var Uh=On["__core-js_shared__"],Ec=Uh,Yh=function(){var l=/[^.]+$/.exec(Ec&&Ec.keys&&Ec.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}();function iy(l){return!!Yh&&Yh in l}var ms=Function.prototype,ys=ms.toString;function ca(l){if(l!=null){try{return ys.call(l)}catch(u){}try{return l+""}catch(u){}}return""}var ay=/[\\^$.*+?()[\]{}|]/g,oy=/^\[object .+?Constructor\]$/,ly=Function.prototype,sy=Object.prototype,uy=ly.toString,cy=sy.hasOwnProperty,dy=RegExp("^"+uy.call(cy).replace(ay,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fy(l){if(!Wt(l)||iy(l))return!1;var u=ua(l)?dy:oy;return u.test(ca(l))}function hy(l,u){return l==null?void 0:l[u]}function da(l,u){var f=hy(l,u);return fy(f)?f:void 0}var vy=da(On,"WeakMap"),_c=vy,Tc=Object.create,Vh=function(){function l(){}return function(u){if(!Wt(u))return{};if(Tc)return Tc(u);l.prototype=u;var f=new l;return l.prototype=void 0,f}}(),fa=Vh;function Xh(l,u,f){switch(f.length){case 0:return l.call(u);case 1:return l.call(u,f[0]);case 2:return l.call(u,f[0],f[1]);case 3:return l.call(u,f[0],f[1],f[2])}return l.apply(u,f)}function el(){}function Cs(l,u){var f=-1,p=l.length;for(u||(u=Array(p));++f<p;)u[f]=l[f];return u}var py=800,gy=16,my=Date.now;function yy(l){var u=0,f=0;return function(){var p=my(),m=gy-(p-f);if(f=p,m>0){if(++u>=py)return arguments[0]}else u=0;return l.apply(void 0,arguments)}}function Cy(l){return function(){return l}}var wy=function(){try{var l=da(Object,"defineProperty");return l({},"",{}),l}catch(u){}}(),ws=wy,xy=ws?function(l,u){return ws(l,"toString",{configurable:!0,enumerable:!1,value:Cy(u),writable:!0})}:Jo,jh=xy,qh=yy(jh),xs=qh;function Lc(l,u){for(var f=-1,p=l==null?0:l.length;++f<p&&u(l[f],f,l)!==!1;);return l}function Rc(l,u,f,p){for(var m=l.length,y=f+(p?1:-1);p?y--:++y<m;)if(u(l[y],y,l))return y;return-1}function by(l){return l!==l}function Sy(l,u,f){for(var p=f-1,m=l.length;++p<m;)if(l[p]===u)return p;return-1}function Ac(l,u,f){return u===u?Sy(l,u,f):Rc(l,by,f)}function eo(l,u){var f=l==null?0:l.length;return!!f&&Ac(l,u,0)>-1}var tl=9007199254740991,rl=/^(?:0|[1-9]\d*)$/;function nl(l,u){var f=typeof l;return u=u==null?tl:u,!!u&&(f=="number"||f!="symbol"&&rl.test(l))&&l>-1&&l%1==0&&l<u}function ha(l,u,f){u=="__proto__"&&ws?ws(l,u,{configurable:!0,enumerable:!0,value:f,writable:!0}):l[u]=f}function ui(l,u){return l===u||l!==l&&u!==u}var bs=Object.prototype,va=bs.hasOwnProperty;function to(l,u,f){var p=l[u];(!(va.call(l,u)&&ui(p,f))||f===void 0&&!(u in l))&&ha(l,u,f)}function ci(l,u,f,p){var m=!f;f||(f={});for(var y=-1,x=u.length;++y<x;){var b=u[y],E=p?p(f[b],l[b],b,f,l):void 0;E===void 0&&(E=l[b]),m?ha(f,b,E):to(f,b,E)}return f}var Ic=Math.max;function Oc(l,u,f){return u=Ic(u===void 0?l.length-1:u,0),function(){for(var p=arguments,m=-1,y=Ic(p.length-u,0),x=Array(y);++m<y;)x[m]=p[u+m];m=-1;for(var b=Array(u+1);++m<u;)b[m]=p[m];return b[u]=f(x),Xh(l,this,b)}}function Ey(l,u){return xs(Oc(l,u,Jo),l+"")}var Mc=9007199254740991;function il(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=Mc}function Xn(l){return l!=null&&il(l.length)&&!ua(l)}function Kh(l,u,f){if(!Wt(f))return!1;var p=typeof u;return(p=="number"?Xn(f)&&nl(u,f.length):p=="string"&&u in f)?ui(f[u],l):!1}function _y(l){return Ey(function(u,f){var p=-1,m=f.length,y=m>1?f[m-1]:void 0,x=m>2?f[2]:void 0;for(y=l.length>3&&typeof y=="function"?(m--,y):void 0,x&&Kh(f[0],f[1],x)&&(y=m<3?void 0:y,m=1),u=Object(u);++p<m;){var b=f[p];b&&l(u,b,p,y)}return u})}var Ty=Object.prototype;function ro(l){var u=l&&l.constructor,f=typeof u=="function"&&u.prototype||Ty;return l===f}function Dc(l,u){for(var f=-1,p=Array(l);++f<l;)p[f]=u(f);return p}var Zh="[object Arguments]";function no(l){return hn(l)&&si(l)==Zh}var io=Object.prototype,Ss=io.hasOwnProperty,ao=io.propertyIsEnumerable,al=no(function(){return arguments}())?no:function(l){return hn(l)&&Ss.call(l,"callee")&&!ao.call(l,"callee")},Er=al;function Ly(){return!1}var Qh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Jh=Qh&&!0&&Ft&&!Ft.nodeType&&Ft,Ry=Jh&&Jh.exports===Qh,ev=Ry?On.Buffer:void 0,Ay=ev?ev.isBuffer:void 0,Iy=Ay||Ly,pa=Iy,tv="[object Arguments]",Oy="[object Array]",rv="[object Boolean]",ol="[object Date]",nv="[object Error]",Es="[object Function]",My="[object Map]",Bc="[object Number]",Kr="[object Object]",iv="[object RegExp]",av="[object Set]",Pc="[object String]",ov="[object WeakMap]",lv="[object ArrayBuffer]",Dy="[object DataView]",jn="[object Float32Array]",Nc="[object Float64Array]",Fc="[object Int8Array]",By="[object Int16Array]",Py="[object Int32Array]",Ny="[object Uint8Array]",sv="[object Uint8ClampedArray]",uv="[object Uint16Array]",cv="[object Uint32Array]",wt={};wt[jn]=wt[Nc]=wt[Fc]=wt[By]=wt[Py]=wt[Ny]=wt[sv]=wt[uv]=wt[cv]=!0,wt[tv]=wt[Oy]=wt[lv]=wt[rv]=wt[Dy]=wt[ol]=wt[nv]=wt[Es]=wt[My]=wt[Bc]=wt[Kr]=wt[iv]=wt[av]=wt[Pc]=wt[ov]=!1;function dv(l){return hn(l)&&il(l.length)&&!!wt[si(l)]}function _s(l){return function(u){return l(u)}}var fv=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ga=fv&&!0&&Ft&&!Ft.nodeType&&Ft,Fy=ga&&ga.exports===fv,ll=Fy&&gc.process,Hc=function(){try{var l=ga&&ga.require&&ga.require("util").types;return l||ll&&ll.binding&&ll.binding("util")}catch(u){}}(),oo=Hc,hv=oo&&oo.isTypedArray,Hy=hv?_s(hv):dv,ma=Hy,zy=Object.prototype,Gy=zy.hasOwnProperty;function vv(l,u){var f=Bt(l),p=!f&&Er(l),m=!f&&!p&&pa(l),y=!f&&!p&&!m&&ma(l),x=f||p||m||y,b=x?Dc(l.length,String):[],E=b.length;for(var A in l)(u||Gy.call(l,A))&&!(x&&(A=="length"||m&&(A=="offset"||A=="parent")||y&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||nl(A,E)))&&b.push(A);return b}function zc(l,u){return function(f){return l(u(f))}}var pv=zc(Object.keys,Object),$y=pv,gv=Object.prototype,Gc=gv.hasOwnProperty;function $c(l){if(!ro(l))return $y(l);var u=[];for(var f in Object(l))Gc.call(l,f)&&f!="constructor"&&u.push(f);return u}function di(l){return Xn(l)?vv(l):$c(l)}function mv(l){var u=[];if(l!=null)for(var f in Object(l))u.push(f);return u}var yv=Object.prototype,Cv=yv.hasOwnProperty;function Wy(l){if(!Wt(l))return mv(l);var u=ro(l),f=[];for(var p in l)p=="constructor"&&(u||!Cv.call(l,p))||f.push(p);return f}function sl(l){return Xn(l)?vv(l,!0):Wy(l)}var wv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Di=/^\w*$/;function Wc(l,u){if(Bt(l))return!1;var f=typeof l;return f=="number"||f=="symbol"||f=="boolean"||l==null||hs(l)?!0:Di.test(l)||!wv.test(l)||u!=null&&l in Object(u)}var ky=da(Object,"create"),lo=ky;function Uy(){this.__data__=lo?lo(null):{},this.size=0}function Yy(l){var u=this.has(l)&&delete this.__data__[l];return this.size-=u?1:0,u}var xv="__lodash_hash_undefined__",kc=Object.prototype,Vy=kc.hasOwnProperty;function Xy(l){var u=this.__data__;if(lo){var f=u[l];return f===xv?void 0:f}return Vy.call(u,l)?u[l]:void 0}var jy=Object.prototype,qy=jy.hasOwnProperty;function Ky(l){var u=this.__data__;return lo?u[l]!==void 0:qy.call(u,l)}var Zy="__lodash_hash_undefined__";function Qy(l,u){var f=this.__data__;return this.size+=this.has(l)?0:1,f[l]=lo&&u===void 0?Zy:u,this}function ya(l){var u=-1,f=l==null?0:l.length;for(this.clear();++u<f;){var p=l[u];this.set(p[0],p[1])}}ya.prototype.clear=Uy,ya.prototype.delete=Yy,ya.prototype.get=Xy,ya.prototype.has=Ky,ya.prototype.set=Qy;function Ts(){this.__data__=[],this.size=0}function Ls(l,u){for(var f=l.length;f--;)if(ui(l[f][0],u))return f;return-1}var ul=Array.prototype,Jy=ul.splice;function Uc(l){var u=this.__data__,f=Ls(u,l);if(f<0)return!1;var p=u.length-1;return f==p?u.pop():Jy.call(u,f,1),--this.size,!0}function eC(l){var u=this.__data__,f=Ls(u,l);return f<0?void 0:u[f][1]}function tC(l){return Ls(this.__data__,l)>-1}function bv(l,u){var f=this.__data__,p=Ls(f,l);return p<0?(++this.size,f.push([l,u])):f[p][1]=u,this}function $r(l){var u=-1,f=l==null?0:l.length;for(this.clear();++u<f;){var p=l[u];this.set(p[0],p[1])}}$r.prototype.clear=Ts,$r.prototype.delete=Uc,$r.prototype.get=eC,$r.prototype.has=tC,$r.prototype.set=bv;var Yc=da(On,"Map"),Ca=Yc;function rC(){this.size=0,this.__data__={hash:new ya,map:new(Ca||$r),string:new ya}}function Sv(l){var u=typeof l;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?l!=="__proto__":l===null}function Rs(l,u){var f=l.__data__;return Sv(u)?f[typeof u=="string"?"string":"hash"]:f.map}function nC(l){var u=Rs(this,l).delete(l);return this.size-=u?1:0,u}function iC(l){return Rs(this,l).get(l)}function aC(l){return Rs(this,l).has(l)}function oC(l,u){var f=Rs(this,l),p=f.size;return f.set(l,u),this.size+=f.size==p?0:1,this}function fi(l){var u=-1,f=l==null?0:l.length;for(this.clear();++u<f;){var p=l[u];this.set(p[0],p[1])}}fi.prototype.clear=rC,fi.prototype.delete=nC,fi.prototype.get=iC,fi.prototype.has=aC,fi.prototype.set=oC;var Ev="Expected a function";function Vc(l,u){if(typeof l!="function"||u!=null&&typeof u!="function")throw new TypeError(Ev);var f=function(){var p=arguments,m=u?u.apply(this,p):p[0],y=f.cache;if(y.has(m))return y.get(m);var x=l.apply(this,p);return f.cache=y.set(m,x)||y,x};return f.cache=new(Vc.Cache||fi),f}Vc.Cache=fi;var lC=500;function sC(l){var u=Vc(l,function(p){return f.size===lC&&f.clear(),p}),f=u.cache;return u}var uC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_v=/\\(\\)?/g,Tv=sC(function(l){var u=[];return l.charCodeAt(0)===46&&u.push(""),l.replace(uC,function(f,p,m,y){u.push(m?y.replace(_v,"$1"):p||f)}),u}),Lv=Tv;function Rv(l){return l==null?"":ps(l)}function As(l,u){return Bt(l)?l:Wc(l,u)?[l]:Lv(Rv(l))}var Av=1/0;function so(l){if(typeof l=="string"||hs(l))return l;var u=l+"";return u=="0"&&1/l==-Av?"-0":u}function Xc(l,u){u=As(u,l);for(var f=0,p=u.length;l!=null&&f<p;)l=l[so(u[f++])];return f&&f==p?l:void 0}function uo(l,u,f){var p=l==null?void 0:Xc(l,u);return p===void 0?f:p}function jc(l,u){for(var f=-1,p=u.length,m=l.length;++f<p;)l[m+f]=u[f];return l}var Iv=jt?jt.isConcatSpreadable:void 0;function Ov(l){return Bt(l)||Er(l)||!!(Iv&&l&&l[Iv])}function Mn(l,u,f,p,m){var y=-1,x=l.length;for(f||(f=Ov),m||(m=[]);++y<x;){var b=l[y];u>0&&f(b)?u>1?Mn(b,u-1,f,p,m):jc(m,b):p||(m[m.length]=b)}return m}function Mv(l){var u=l==null?0:l.length;return u?Mn(l,1):[]}function Dv(l){return xs(Oc(l,void 0,Mv),l+"")}var Bv=zc(Object.getPrototypeOf,Object),Is=Bv,Pv="[object Object]",hr=Function.prototype,Os=Object.prototype,wa=hr.toString,Ms=Os.hasOwnProperty,Wr=wa.call(Object);function cC(l){if(!hn(l)||si(l)!=Pv)return!1;var u=Is(l);if(u===null)return!0;var f=Ms.call(u,"constructor")&&u.constructor;return typeof f=="function"&&f instanceof f&&wa.call(f)==Wr}var Nv="\\ud800-\\udfff",dC="\\u0300-\\u036f",Bi="\\ufe20-\\ufe2f",Fv="\\u20d0-\\u20ff",Hv=dC+Bi+Fv,zv="\\ufe0e\\ufe0f",qc="\\u200d",Gv=RegExp("["+qc+Nv+Hv+zv+"]");function Pi(l){return Gv.test(l)}function $v(l,u,f,p){var m=-1,y=l==null?0:l.length;for(p&&y&&(f=l[++m]);++m<y;)f=u(f,l[m],m,l);return f}function Kc(){this.__data__=new $r,this.size=0}function Wv(l){var u=this.__data__,f=u.delete(l);return this.size=u.size,f}function Zc(l){return this.__data__.get(l)}function cl(l){return this.__data__.has(l)}var kv=200;function fC(l,u){var f=this.__data__;if(f instanceof $r){var p=f.__data__;if(!Ca||p.length<kv-1)return p.push([l,u]),this.size=++f.size,this;f=this.__data__=new fi(p)}return f.set(l,u),this.size=f.size,this}function Dn(l){var u=this.__data__=new $r(l);this.size=u.size}Dn.prototype.clear=Kc,Dn.prototype.delete=Wv,Dn.prototype.get=Zc,Dn.prototype.has=cl,Dn.prototype.set=fC;function hC(l,u){return l&&ci(u,di(u),l)}function vC(l,u){return l&&ci(u,sl(u),l)}var Uv=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Qc=Uv&&!0&&Ft&&!Ft.nodeType&&Ft,Yv=Qc&&Qc.exports===Uv,Vv=Yv?On.Buffer:void 0,Jc=Vv?Vv.allocUnsafe:void 0;function ed(l,u){if(u)return l.slice();var f=l.length,p=Jc?Jc(f):new l.constructor(f);return l.copy(p),p}function Xv(l,u){for(var f=-1,p=l==null?0:l.length,m=0,y=[];++f<p;){var x=l[f];u(x,f,l)&&(y[m++]=x)}return y}function td(){return[]}var pC=Object.prototype,gC=pC.propertyIsEnumerable,jv=Object.getOwnPropertySymbols,mC=jv?function(l){return l==null?[]:(l=Object(l),Xv(jv(l),function(u){return gC.call(l,u)}))}:td,rd=mC;function qv(l,u){return ci(l,rd(l),u)}var nd=Object.getOwnPropertySymbols,yC=nd?function(l){for(var u=[];l;)jc(u,rd(l)),l=Is(l);return u}:td,Kv=yC;function id(l,u){return ci(l,Kv(l),u)}function ad(l,u,f){var p=u(l);return Bt(l)?p:jc(p,f(l))}function Ds(l){return ad(l,di,rd)}function CC(l){return ad(l,sl,Kv)}var wC=da(On,"DataView"),Bs=wC,xC=da(On,"Promise"),od=xC,bC=da(On,"Set"),co=bC,fo="[object Map]",SC="[object Object]",Zv="[object Promise]",Qv="[object Set]",Jv="[object WeakMap]",ld="[object DataView]",ep=ca(Bs),Ps=ca(Ca),sd=ca(od),tp=ca(co),ud=ca(_c),xa=si;(Bs&&xa(new Bs(new ArrayBuffer(1)))!=ld||Ca&&xa(new Ca)!=fo||od&&xa(od.resolve())!=Zv||co&&xa(new co)!=Qv||_c&&xa(new _c)!=Jv)&&(xa=function(l){var u=si(l),f=u==SC?l.constructor:void 0,p=f?ca(f):"";if(p)switch(p){case ep:return ld;case Ps:return fo;case sd:return Zv;case tp:return Qv;case ud:return Jv}return u});var Ni=xa,rp=Object.prototype,EC=rp.hasOwnProperty;function Ns(l){var u=l.length,f=new l.constructor(u);return u&&typeof l[0]=="string"&&EC.call(l,"index")&&(f.index=l.index,f.input=l.input),f}var _C=On.Uint8Array,Fs=_C;function cd(l){var u=new l.constructor(l.byteLength);return new Fs(u).set(new Fs(l)),u}function TC(l,u){var f=u?cd(l.buffer):l.buffer;return new l.constructor(f,l.byteOffset,l.byteLength)}var np=/\w*$/;function ba(l){var u=new l.constructor(l.source,np.exec(l));return u.lastIndex=l.lastIndex,u}var ho=jt?jt.prototype:void 0,ip=ho?ho.valueOf:void 0;function ap(l){return ip?Object(ip.call(l)):{}}function op(l,u){var f=u?cd(l.buffer):l.buffer;return new l.constructor(f,l.byteOffset,l.length)}var LC="[object Boolean]",RC="[object Date]",lp="[object Map]",sp="[object Number]",AC="[object RegExp]",IC="[object Set]",OC="[object String]",MC="[object Symbol]",DC="[object ArrayBuffer]",Hs="[object DataView]",dd="[object Float32Array]",up="[object Float64Array]",cp="[object Int8Array]",zs="[object Int16Array]",Gs="[object Int32Array]",fd="[object Uint8Array]",$s="[object Uint8ClampedArray]",dp="[object Uint16Array]",fp="[object Uint32Array]";function Sa(l,u,f){var p=l.constructor;switch(u){case DC:return cd(l);case LC:case RC:return new p(+l);case Hs:return TC(l,f);case dd:case up:case cp:case zs:case Gs:case fd:case $s:case dp:case fp:return op(l,f);case lp:return new p;case sp:case OC:return new p(l);case AC:return ba(l);case IC:return new p;case MC:return ap(l)}}function Ws(l){return typeof l.constructor=="function"&&!ro(l)?fa(Is(l)):{}}var hd="[object Map]";function hp(l){return hn(l)&&Ni(l)==hd}var Ea=oo&&oo.isMap,vd=Ea?_s(Ea):hp,BC=vd,pd="[object Set]";function vp(l){return hn(l)&&Ni(l)==pd}var ks=oo&&oo.isSet,PC=ks?_s(ks):vp,pp=PC,gp=1,NC=2,FC=4,mp="[object Arguments]",qn="[object Array]",HC="[object Boolean]",Bn="[object Date]",zC="[object Error]",yp="[object Function]",Us="[object GeneratorFunction]",GC="[object Map]",$C="[object Number]",gd="[object Object]",WC="[object RegExp]",md="[object Set]",Fi="[object String]",kC="[object Symbol]",UC="[object WeakMap]",YC="[object ArrayBuffer]",VC="[object DataView]",XC="[object Float32Array]",Cp="[object Float64Array]",jC="[object Int8Array]",yd="[object Int16Array]",qC="[object Int32Array]",wp="[object Uint8Array]",dl="[object Uint8ClampedArray]",KC="[object Uint16Array]",ZC="[object Uint32Array]",xt={};xt[mp]=xt[qn]=xt[YC]=xt[VC]=xt[HC]=xt[Bn]=xt[XC]=xt[Cp]=xt[jC]=xt[yd]=xt[qC]=xt[GC]=xt[$C]=xt[gd]=xt[WC]=xt[md]=xt[Fi]=xt[kC]=xt[wp]=xt[dl]=xt[KC]=xt[ZC]=!0,xt[zC]=xt[yp]=xt[UC]=!1;function Ys(l,u,f,p,m,y){var x,b=u&gp,E=u&NC,A=u&FC;if(f&&(x=m?f(l,p,m,y):f(l)),x!==void 0)return x;if(!Wt(l))return l;var I=Bt(l);if(I){if(x=Ns(l),!b)return Cs(l,x)}else{var R=Ni(l),O=R==yp||R==Us;if(pa(l))return ed(l,b);if(R==gd||R==mp||O&&!m){if(x=E||O?{}:Ws(l),!b)return E?id(l,vC(x,l)):qv(l,hC(x,l))}else{if(!xt[R])return m?l:{};x=Sa(l,R,b)}}y||(y=new Dn);var N=y.get(l);if(N)return N;y.set(l,x),pp(l)?l.forEach(function(W){x.add(Ys(W,u,f,W,l,y))}):BC(l)&&l.forEach(function(W,U){x.set(U,Ys(W,u,f,U,l,y))});var H=A?E?CC:Ds:E?sl:di,Y=I?void 0:H(l);return Lc(Y||l,function(W,U){Y&&(U=W,W=l[U]),to(x,U,Ys(W,u,f,U,l,y))}),x}var Vs=4;function xp(l){return Ys(l,Vs)}var QC="__lodash_hash_undefined__";function Cd(l){return this.__data__.set(l,QC),this}function bp(l){return this.__data__.has(l)}function fl(l){var u=-1,f=l==null?0:l.length;for(this.__data__=new fi;++u<f;)this.add(l[u])}fl.prototype.add=fl.prototype.push=Cd,fl.prototype.has=bp;function JC(l,u){for(var f=-1,p=l==null?0:l.length;++f<p;)if(u(l[f],f,l))return!0;return!1}function Sp(l,u){return l.has(u)}var ew=1,tw=2;function Ep(l,u,f,p,m,y){var x=f&ew,b=l.length,E=u.length;if(b!=E&&!(x&&E>b))return!1;var A=y.get(l),I=y.get(u);if(A&&I)return A==u&&I==l;var R=-1,O=!0,N=f&tw?new fl:void 0;for(y.set(l,u),y.set(u,l);++R<b;){var H=l[R],Y=u[R];if(p)var W=x?p(Y,H,R,u,l,y):p(H,Y,R,l,u,y);if(W!==void 0){if(W)continue;O=!1;break}if(N){if(!JC(u,function(U,j){if(!Sp(N,j)&&(H===U||m(H,U,f,p,y)))return N.push(j)})){O=!1;break}}else if(!(H===Y||m(H,Y,f,p,y))){O=!1;break}}return y.delete(l),y.delete(u),O}function rw(l){var u=-1,f=Array(l.size);return l.forEach(function(p,m){f[++u]=[m,p]}),f}function wd(l){var u=-1,f=Array(l.size);return l.forEach(function(p){f[++u]=p}),f}var nw=1,iw=2,aw="[object Boolean]",_p="[object Date]",Tp="[object Error]",Lp="[object Map]",Rp="[object Number]",kr="[object RegExp]",Ye="[object Set]",xd="[object String]",ow="[object Symbol]",Kn="[object ArrayBuffer]",Xs="[object DataView]",Hi=jt?jt.prototype:void 0,zi=Hi?Hi.valueOf:void 0;function js(l,u,f,p,m,y,x){switch(f){case Xs:if(l.byteLength!=u.byteLength||l.byteOffset!=u.byteOffset)return!1;l=l.buffer,u=u.buffer;case Kn:return!(l.byteLength!=u.byteLength||!y(new Fs(l),new Fs(u)));case aw:case _p:case Rp:return ui(+l,+u);case Tp:return l.name==u.name&&l.message==u.message;case kr:case xd:return l==u+"";case Lp:var b=rw;case Ye:var E=p&nw;if(b||(b=wd),l.size!=u.size&&!E)return!1;var A=x.get(l);if(A)return A==u;p|=iw,x.set(l,u);var I=Ep(b(l),b(u),p,m,y,x);return x.delete(l),I;case ow:if(zi)return zi.call(l)==zi.call(u)}return!1}var Ap=1,_r=Object.prototype,K=_r.hasOwnProperty;function lw(l,u,f,p,m,y){var x=f&Ap,b=Ds(l),E=b.length,A=Ds(u),I=A.length;if(E!=I&&!x)return!1;for(var R=E;R--;){var O=b[R];if(!(x?O in u:K.call(u,O)))return!1}var N=y.get(l),H=y.get(u);if(N&&H)return N==u&&H==l;var Y=!0;y.set(l,u),y.set(u,l);for(var W=x;++R<E;){O=b[R];var U=l[O],j=u[O];if(p)var ee=x?p(j,U,O,u,l,y):p(U,j,O,l,u,y);if(!(ee===void 0?U===j||m(U,j,f,p,y):ee)){Y=!1;break}W||(W=O=="constructor")}if(Y&&!W){var Z=l.constructor,ae=u.constructor;Z!=ae&&"constructor"in l&&"constructor"in u&&!(typeof Z=="function"&&Z instanceof Z&&typeof ae=="function"&&ae instanceof ae)&&(Y=!1)}return y.delete(l),y.delete(u),Y}var sw=1,bd="[object Arguments]",vo="[object Array]",qs="[object Object]",uw=Object.prototype,Ip=uw.hasOwnProperty;function cw(l,u,f,p,m,y){var x=Bt(l),b=Bt(u),E=x?vo:Ni(l),A=b?vo:Ni(u);E=E==bd?qs:E,A=A==bd?qs:A;var I=E==qs,R=A==qs,O=E==A;if(O&&pa(l)){if(!pa(u))return!1;x=!0,I=!1}if(O&&!I)return y||(y=new Dn),x||ma(l)?Ep(l,u,f,p,m,y):js(l,u,E,f,p,m,y);if(!(f&sw)){var N=I&&Ip.call(l,"__wrapped__"),H=R&&Ip.call(u,"__wrapped__");if(N||H){var Y=N?l.value():l,W=H?u.value():u;return y||(y=new Dn),m(Y,W,f,p,y)}}return O?(y||(y=new Dn),lw(l,u,f,p,m,y)):!1}function hl(l,u,f,p,m){return l===u?!0:l==null||u==null||!hn(l)&&!hn(u)?l!==l&&u!==u:cw(l,u,f,p,hl,m)}var X_=1,dw=2;function fw(l,u,f,p){var m=f.length,y=m,x=!p;if(l==null)return!y;for(l=Object(l);m--;){var b=f[m];if(x&&b[2]?b[1]!==l[b[0]]:!(b[0]in l))return!1}for(;++m<y;){b=f[m];var E=b[0],A=l[E],I=b[1];if(x&&b[2]){if(A===void 0&&!(E in l))return!1}else{var R=new Dn;if(p)var O=p(A,I,E,l,u,R);if(!(O===void 0?hl(I,A,X_|dw,p,R):O))return!1}}return!0}function Op(l){return l===l&&!Wt(l)}function hw(l){for(var u=di(l),f=u.length;f--;){var p=u[f],m=l[p];u[f]=[p,m,Op(m)]}return u}function Sd(l,u){return function(f){return f==null?!1:f[l]===u&&(u!==void 0||l in Object(f))}}function Mp(l){var u=hw(l);return u.length==1&&u[0][2]?Sd(u[0][0],u[0][1]):function(f){return f===l||fw(f,l,u)}}function Dp(l,u){return l!=null&&u in Object(l)}function vw(l,u,f){u=As(u,l);for(var p=-1,m=u.length,y=!1;++p<m;){var x=so(u[p]);if(!(y=l!=null&&f(l,x)))break;l=l[x]}return y||++p!=m?y:(m=l==null?0:l.length,!!m&&il(m)&&nl(x,m)&&(Bt(l)||Er(l)))}function Bp(l,u){return l!=null&&vw(l,u,Dp)}var pw=1,gw=2;function po(l,u){return Wc(l)&&Op(u)?Sd(so(l),u):function(f){var p=uo(f,l);return p===void 0&&p===u?Bp(f,l):hl(u,p,pw|gw)}}function Ed(l){return function(u){return u==null?void 0:u[l]}}function Ks(l){return function(u){return Xc(u,l)}}function Pp(l){return Wc(l)?Ed(so(l)):Ks(l)}function hi(l){return typeof l=="function"?l:l==null?Jo:typeof l=="object"?Bt(l)?po(l[0],l[1]):Mp(l):Pp(l)}function Np(l){return function(u,f,p){for(var m=-1,y=Object(u),x=p(u),b=x.length;b--;){var E=x[l?b:++m];if(f(y[E],E,y)===!1)break}return u}}var Fp=Np(),mw=Fp;function Hp(l,u){return l&&mw(l,u,di)}function yw(l,u){return function(f,p){if(f==null)return f;if(!Xn(f))return l(f,p);for(var m=f.length,y=u?m:-1,x=Object(f);(u?y--:++y<m)&&p(x[y],y,x)!==!1;);return f}}var Cw=yw(Hp),vl=Cw,ww=function(){return On.Date.now()},_d=ww,xw="Expected a function",zp=Math.max,j_=Math.min;function bw(l,u,f){var p,m,y,x,b,E,A=0,I=!1,R=!1,O=!0;if(typeof l!="function")throw new TypeError(xw);u=Sc(u)||0,Wt(f)&&(I=!!f.leading,R="maxWait"in f,y=R?zp(Sc(f.maxWait)||0,u):y,O="trailing"in f?!!f.trailing:O);function N(ne){var fe=p,be=m;return p=m=void 0,A=ne,x=l.apply(be,fe),x}function H(ne){return A=ne,b=setTimeout(U,u),I?N(ne):x}function Y(ne){var fe=ne-E,be=ne-A,ge=u-fe;return R?j_(ge,y-be):ge}function W(ne){var fe=ne-E,be=ne-A;return E===void 0||fe>=u||fe<0||R&&be>=y}function U(){var ne=_d();if(W(ne))return j(ne);b=setTimeout(U,Y(ne))}function j(ne){return b=void 0,O&&p?N(ne):(p=m=void 0,x)}function ee(){b!==void 0&&clearTimeout(b),A=0,p=E=m=b=void 0}function Z(){return b===void 0?x:j(_d())}function ae(){var ne=_d(),fe=W(ne);if(p=arguments,m=this,E=ne,fe){if(b===void 0)return H(E);if(R)return clearTimeout(b),b=setTimeout(U,u),N(E)}return b===void 0&&(b=setTimeout(U,u)),x}return ae.cancel=ee,ae.flush=Z,ae}function pl(l,u,f){(f!==void 0&&!ui(l[u],f)||f===void 0&&!(u in l))&&ha(l,u,f)}function vr(l){return hn(l)&&Xn(l)}function Gi(l,u){if(!(u==="constructor"&&typeof l[u]=="function")&&u!="__proto__")return l[u]}function q_(l){return ci(l,sl(l))}function K_(l,u,f,p,m,y,x){var b=Gi(l,f),E=Gi(u,f),A=x.get(E);if(A){pl(l,f,A);return}var I=y?y(b,E,f+"",l,u,x):void 0,R=I===void 0;if(R){var O=Bt(E),N=!O&&pa(E),H=!O&&!N&&ma(E);I=E,O||N||H?Bt(b)?I=b:vr(b)?I=Cs(b):N?(R=!1,I=ed(E,!0)):H?(R=!1,I=op(E,!0)):I=[]:cC(E)||Er(E)?(I=b,Er(b)?I=q_(b):(!Wt(b)||ua(b))&&(I=Ws(E))):R=!1}R&&(x.set(E,I),m(I,E,p,y,x),x.delete(E)),pl(l,f,I)}function Sw(l,u,f,p,m){l!==u&&mw(u,function(y,x){if(m||(m=new Dn),Wt(y))K_(l,u,x,f,Sw,p,m);else{var b=p?p(Gi(l,x),y,x+"",l,u,m):void 0;b===void 0&&(b=y),pl(l,x,b)}},sl)}function Z_(l,u,f){for(var p=-1,m=l==null?0:l.length;++p<m;)if(f(u,l[p]))return!0;return!1}function Gp(l){return typeof l=="function"?l:Jo}function $p(l,u){var f=Bt(l)?Lc:vl;return f(l,Gp(u))}function Wp(l,u){var f=[];return vl(l,function(p,m,y){u(p,m,y)&&f.push(p)}),f}function go(l,u){var f=Bt(l)?Xv:Wp;return f(l,hi(u))}function Q_(l){return function(u,f,p){var m=Object(u);if(!Xn(u)){var y=hi(f);u=di(u),f=function(b){return y(m[b],b,m)}}var x=l(u,f,p);return x>-1?m[y?u[x]:x]:void 0}}var Ew=Math.max;function Td(l,u,f){var p=l==null?0:l.length;if(!p)return-1;var m=f==null?0:$h(f);return m<0&&(m=Ew(p+m,0)),Rc(l,hi(u),m)}var mo=Q_(Td),$i=mo;function _a(l){return l&&l.length?l[0]:void 0}function Ld(l,u){var f=-1,p=Xn(l)?Array(l.length):[];return vl(l,function(m,y,x){p[++f]=u(m,y,x)}),p}function Ht(l,u){var f=Bt(l)?vs:Ld;return f(l,hi(u))}var Rd="[object String]";function Ad(l){return typeof l=="string"||!Bt(l)&&hn(l)&&si(l)==Rd}function Id(l,u){return vs(u,function(f){return l[f]})}function _w(l){return l==null?[]:Id(l,di(l))}var vi=Math.max;function kt(l,u,f,p){l=Xn(l)?l:_w(l),f=f&&!p?$h(f):0;var m=l.length;return f<0&&(f=vi(m+f,0)),Ad(l)?f<=m&&l.indexOf(u,f)>-1:!!m&&Ac(l,u,f)>-1}var vn="[object Boolean]";function kp(l){return l===!0||l===!1||hn(l)&&si(l)==vn}var Tr="[object Map]",Se="[object Set]",de=Object.prototype,Od=de.hasOwnProperty;function tt(l){if(l==null)return!0;if(Xn(l)&&(Bt(l)||typeof l=="string"||typeof l.splice=="function"||pa(l)||ma(l)||Er(l)))return!l.length;var u=Ni(l);if(u==Tr||u==Se)return!l.size;if(ro(l))return!$c(l).length;for(var f in l)if(Od.call(l,f))return!1;return!0}function Md(l,u){return hl(l,u)}function Zs(l){return l==null}function pr(l,u){var f={};return u=hi(u),Hp(l,function(p,m,y){ha(f,m,u(p,m,y))}),f}function gr(l,u){for(var f,p=-1,m=l.length;++p<m;){var y=u(l[p]);y!==void 0&&(f=f===void 0?y:f+y)}return f}var Up=_y(function(l,u,f){Sw(l,u,f)}),Ge=Up;function Yp(l,u,f,p){if(!Wt(l))return l;u=As(u,l);for(var m=-1,y=u.length,x=y-1,b=l;b!=null&&++m<y;){var E=so(u[m]),A=f;if(E==="__proto__"||E==="constructor"||E==="prototype")return l;if(m!=x){var I=b[E];A=p?p(I,E,b):void 0,A===void 0&&(A=Wt(I)?I:nl(u[m+1])?[]:{})}to(b,E,A),b=b[E]}return l}function Qs(l,u,f){for(var p=-1,m=u.length,y={};++p<m;){var x=u[p],b=Xc(l,x);f(b,x)&&Yp(y,As(x,l),b)}return y}var Ur=Ed("length"),Js=Ur,Vp="\\ud800-\\udfff",Tw="\\u0300-\\u036f",Lw="\\ufe20-\\ufe2f",pn="\\u20d0-\\u20ff",Lr=Tw+Lw+pn,eu="\\ufe0e\\ufe0f",Xp="["+Vp+"]",pi="["+Lr+"]",Dd="\\ud83c[\\udffb-\\udfff]",Rw="(?:"+pi+"|"+Dd+")",Bd="[^"+Vp+"]",tu="(?:\\ud83c[\\udde6-\\uddff]){2}",Le="[\\ud800-\\udbff][\\udc00-\\udfff]",k="\\u200d",ru=Rw+"?",mr="["+eu+"]?",Q="(?:"+k+"(?:"+[Bd,tu,Le].join("|")+")"+mr+ru+")*",re=mr+ru+Q,Aw="(?:"+[Bd+pi+"?",pi,tu,Le,Xp].join("|")+")",Pd=RegExp(Dd+"(?="+Dd+")|"+Aw+re,"g");function Iw(l){for(var u=Pd.lastIndex=0;Pd.test(l);)++u;return u}function Ow(l){return Pi(l)?Iw(l):Js(l)}function Jt(l,u){return Qs(l,u,function(f,p){return Bp(l,p)})}var Mw=Dv(function(l,u){return l==null?{}:Jt(l,u)}),er=Mw;function jp(l,u,f,p,m){return m(l,function(y,x,b){f=p?(p=!1,y):u(f,y,x,b)}),f}function Dw(l,u,f){var p=Bt(l)?$v:jp,m=arguments.length<3;return p(l,hi(u),f,m,vl)}var Bw="[object Map]",gl="[object Set]";function Nd(l){if(l==null)return 0;if(Xn(l))return Ad(l)?Ow(l):l.length;var u=Ni(l);return u==Bw||u==gl?l.size:$c(l).length}function Pw(l,u){return l&&l.length?gr(l,hi(u)):0}var Nw="Expected a function";function Fw(l,u,f){var p=!0,m=!0;if(typeof l!="function")throw new TypeError(Nw);return Wt(f)&&(p="leading"in f?!!f.leading:p,m="trailing"in f?!!f.trailing:m),bw(l,u,{leading:p,maxWait:u,trailing:m})}function Hw(l){return Rv(l).toUpperCase()}var zw=1/0,qp=co&&1/wd(new co([,-0]))[1]==zw?function(l){return new co(l)}:el,Rr=qp,Pt=200;function Gw(l,u,f){var p=-1,m=eo,y=l.length,x=!0,b=[],E=b;if(f)x=!1,m=Z_;else if(y>=Pt){var A=u?null:Rr(l);if(A)return wd(A);x=!1,m=Sp,E=new fl}else E=u?[]:b;e:for(;++p<y;){var I=l[p],R=u?u(I):I;if(I=f||I!==0?I:0,x&&R===R){for(var O=E.length;O--;)if(E[O]===R)continue e;u&&E.push(R),b.push(I)}else m(E,R,f)||(E!==b&&E.push(R),b.push(I))}return b}function Yr(l){return l&&l.length?Gw(l):[]}const $w=(l,u)=>{var f,p,m;return kp(u)?{container:l,adaptiveWidth:!0,adaptiveHeight:!1}:{container:((f=u==null?void 0:u.getContainer)==null?void 0:f.call(u))||l,adaptiveWidth:(p=u==null?void 0:u.width)!=null?p:!0,adaptiveHeight:(m=u==null?void 0:u.height)!=null?m:!0}},Kp=l=>{let u=!0;const{s2:f,adaptive:p,container:m,wrapper:y}=l,{container:x,adaptiveWidth:b,adaptiveHeight:E}=$w(y,p);if(!x||!m||!p||!f)return;const A=(N,H)=>{f==null||f.changeSheetSize(N,H),f==null||f.render(!1)},I=bw(A,Za),R=()=>{const{clientWidth:N,clientHeight:H}=m,Y=b?Math.floor(N!=null?N:f.options.width):f.options.width,W=E?Math.floor(H!=null?H:f.options.height):f.options.height;if(!(!b&&!E)){if(u){A(Y,W),u=!1;return}I(Y,W)}},O=new ResizeObserver(([N]=[])=>{N&&R()});return O.observe(x,{box:"border-box"}),()=>{O.unobserve(x)}},Et=(l,u)=>{const f=l.store.get("drillDownDataCache",[]),p=f.find(m=>m.rowId===u.id);return{drillDownDataCache:f,drillDownCurrentCache:p}},Ww=l=>{const{meta:u,event:f,callback:p}=l,{spreadsheet:m}=u;m.store.set("drillDownNode",u);const{drillDownDataCache:y,drillDownCurrentCache:x}=Et(m,u),b=x!=null&&x.drillField?[x==null?void 0:x.drillField]:[],E=[];y.forEach(A=>{u.id.includes(A.rowId)&&u.id!==A.rowId&&E.push(A.drillField)}),f&&m.emit($.ch4.GLOBAL_ACTION_ICON_CLICK,f),p({sheetInstance:m,cacheDrillFields:b,disabledFields:E,event:f})},_e=l=>{var u;const f=l.spreadsheet,{fields:p}=f.dataCfg,m=((u=p.rows)==null?void 0:u.length)-1,y=tt(p.values)?!0:f.isValueInCols();return m<=l.level&&f.isHierarchyTreeType()&&y&&!l.isGrandTotals},kw=(l,u,f)=>{var p;const m=(p=l==null?void 0:l.headerActionIcons)!=null&&p.length?[...l.headerActionIcons]:[];if(!tt(u)){const y={belongsCell:"rowCell",iconNames:["DrillDownIcon"],defaultHide:!0,displayCondition:u.displayCondition||_e,action:x=>{const{iconName:b,meta:E,event:A}=x;b==="DrillDownIcon"&&(E.spreadsheet.store.set("drillDownNode",E),Ww({meta:E,event:A,callback:f}))}};m.push(y)}return pt(ye({},l),{headerActionIcons:m})},Zp=l=>{const{fetchData:u,spreadsheet:f,drillFields:p,drillItemsNum:m=-1}=l;f.store.set("drillItemsNum",m);const y=f.store.get("drillDownNode"),{drillDownDataCache:x,drillDownCurrentCache:b}=Et(f,y);let E=xp(x);b&&(E=go(x,A=>A.rowId!==y.id)),u&&u(y,p).then(A=>{const{drillData:I,drillField:R}=A;if(f.dataSet.transformDrillDownData(R,I,y),!tt(I)){const O=y.level+1,N={rowId:y.id,drillLevel:O,drillData:I,drillField:R};E.push(N),f.store.set("drillDownDataCache",E)}f.interaction.reset(),f.render(!1)})};(0,$.AfN)(G1);var Qp=function(u){return function(f,p){var m=(0,L.useRef)(!1);u(function(){return function(){m.current=!1}},[]),u(function(){if(!m.current)m.current=!0;else return f()},p)}},lr=Qp(L.useEffect);function nu(l){var u=(0,L.useRef)(l);return u.current=l,u}var Uw=globalThis&&globalThis.__read||function(l,u){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var p=f.call(l),m,y=[],x;try{for(;(u===void 0||u-- >0)&&!(m=p.next()).done;)y.push(m.value)}catch(b){x={error:b}}finally{try{m&&!m.done&&(f=p.return)&&f.call(p)}finally{if(x)throw x.error}}return y},Yw=function(){var u=Uw((0,L.useState)({}),2),f=u[1];return(0,L.useCallback)(function(){return f({})},[])},Vw=Yw,Fd={exports:{}};(function(l){(function(){var u={}.hasOwnProperty;function f(){for(var p=[],m=0;m<arguments.length;m++){var y=arguments[m];if(y){var x=typeof y;if(x==="string"||x==="number")p.push(y);else if(Array.isArray(y)){if(y.length){var b=f.apply(null,y);b&&p.push(b)}}else if(x==="object")if(y.toString===Object.prototype.toString)for(var E in y)u.call(y,E)&&y[E]&&p.push(E);else p.push(y.toString())}}return p.join(" ")}l.exports?(f.default=f,l.exports=f):window.classNames=f})()})(Fd);var qt=Fd.exports,Xw="";const it=l=>{const{style:u={},width:f,height:p,className:m,name:y}=l,x=()=>(0,$.q7_)(y),b=ye({},u);return f&&(b.width=`${f}px`),p&&(b.height=`${p}px`),L.createElement("span",{style:b,className:qt(`${$.vhY}-html-icon`,m),dangerouslySetInnerHTML:{__html:x()}})},Hd=l=>{const{style:u={},className:f,content:p}=l,m={style:u,className:qt(`${$.vhY}-react-element`,f)};if(L.isValidElement(p))return L.createElement("span",ye({},m),L.createElement(L.Fragment,null,p));const y=typeof p!="string"?p==null?void 0:p.innerHTML:p;return L.createElement("span",pt(ye({},m),{dangerouslySetInnerHTML:{__html:y}}))},zd=l=>{const u=l,{icon:f}=u,p=fn(u,["icon"]);if(!f)return null;if((0,$.q7_)(f)){const m=f;return L.createElement(it,ye({name:m},p))}return L.createElement(Hd,ye({content:f},p))},jw=l=>{const{list:u=[]}=l;return L.createElement("div",{className:`${$.NO_}-detail-list`},u.map((f,p)=>{const{name:m,value:y,icon:x}=f;return L.createElement("div",{key:`${y}-${p}`,className:`${$.NO_}-detail-item`},L.createElement("span",{className:`${$.NO_}-detail-item-key`},m),L.createElement("span",{className:`${$.NO_}-detail-item-val ${$.NO_}-highlight`},x?L.createElement(zd,{icon:x,width:8,height:7}):null,y))}))},qw=l=>{var u,f;const{rows:p=[],cols:m=[]}=l;return L.createElement("div",{className:`${$.NO_}-head-info-list`},(u=m.map(y=>y.value))==null?void 0:u.join("/"),m.length>0&&p.length>0&&(0,$.agQ)("\uFF0C"),(f=p.map(y=>y.value))==null?void 0:f.join("/"))},Kw=l=>{const{infos:u=""}=l;return L.createElement("div",{className:`${$.NO_}-infos`},u)},Zr=l=>{const{name:u,icon:f,text:p,render:m}=l,y=()=>u&&L.createElement("span",{className:`${$.NO_}-interpretation-name`},u),x=()=>p&&L.createElement("div",null,p),b=()=>L.createElement(Hd,{content:m});return L.createElement("div",{className:`${$.NO_}-interpretation`},L.createElement("div",{className:`${$.NO_}-interpretation-head`},L.createElement(zd,{icon:f,className:`${$.NO_}-interpretation-icon`}),y()),x(),b())};var Zw="";const Qw=L.memo(l=>{const{menus:u,onlyMenu:f,onClick:p,cell:m,defaultSelectedKeys:y}=l,x=A=>L.createElement("span",{onClick:()=>{var I;return(I=A.onClick)==null?void 0:I.call(A,m)}},L.createElement(zd,{icon:A.icon,className:`${$.NO_}-operator-icon`}),L.createElement("span",{className:`${$.NO_}-operator-text`},A.text)),b=A=>{const{key:I,text:R,children:O,onClick:N}=A;return tt(O)?L.createElement(jr.Z.Item,{title:R,key:I},x(A)):L.createElement(jr.Z.SubMenu,{title:x(A),key:I,popupClassName:`${$.NO_}-operator-submenu-popup`,onTitleClick:()=>N==null?void 0:N(m)},Ht(O,H=>b(H)))},E=()=>f?L.createElement(jr.Z,{className:`${$.NO_}-operator-menus`,onClick:p,defaultSelectedKeys:y},Ht(u,A=>b(A))):Ht(u,A=>{const{key:I,children:R}=A,O=tt(R)?L.createElement(L.Fragment,null):L.createElement(jr.Z,{className:`${$.NO_}-operator-menus`,onClick:p,key:I,defaultSelectedKeys:y},Ht(R,N=>b(N)));return L.createElement(ss.Z,{key:I,overlay:O},x(A))});return tt(u)?null:L.createElement("div",{className:`${$.NO_}-operator`},E())}),gi=l=>{const{tips:u="",name:f=""}=l;return L.createElement(L.Fragment,null,f&&L.createElement("div",{className:`${$.NO_}-name`},f),u&&L.createElement("div",{className:`${$.NO_}-tips`},u))},Ve=L.memo(l=>{const{summaries:u=[]}=l,f=()=>{const m=Pw(u,y=>Nd(y==null?void 0:y.selectedData));return L.createElement("div",{className:`${$.NO_}-summary-item`},L.createElement("span",{className:`${$.NO_}-selected`},m," ",(0,$.agQ)("\u9879")),(0,$.agQ)("\u5DF2\u9009\u62E9"))},p=()=>u==null?void 0:u.map(m=>{const{name:y="",value:x}=m||{};if(!(!y&&!x))return L.createElement("div",{key:`${y}-${x}`,className:`${$.NO_}-summary-item`},y?L.createElement("span",{className:`${$.NO_}-summary-key`},y,(0,$.agQ)("\u603B\u548C")):L.createElement("span",{className:`${$.NO_}-summary-key`},"\xA0"),L.createElement("span",{className:qt(`${$.NO_}-summary-val`,`${$.NO_}-bold`)},x))});return L.createElement("div",{className:`${$.NO_}-summary`},f(),p())}),Jw=({description:l})=>L.createElement(L.Fragment,null,l&&L.createElement("div",{className:`${$.NO_}-description`},(0,$.agQ)("\u8BF4\u660E"),l));var J_="";const yr=l=>{const{data:u,options:f,content:p,cell:m}=l,y=(H,Y)=>H&&L.createElement(Qw,pt(ye({},H),{onlyMenu:Y,cell:m})),x=H=>{const{name:Y,tips:W}=H||{};return L.createElement(gi,{name:Y,tips:W})},b=H=>!tt(H)&&L.createElement(Ve,{summaries:H}),E=H=>{const{cols:Y,rows:W}=H||{};return(!tt(Y)||!tt(W))&&L.createElement(qw,{cols:Y,rows:W})},A=H=>!tt(H)&&L.createElement(jw,{list:H}),I=H=>H&&L.createElement(Kw,{infos:H}),R=H=>H&&L.createElement(Zr,ye({},H)),O=H=>L.createElement(Jw,{description:H});return(()=>{const{operator:H,onlyMenu:Y}=(0,$.IZo)(f),{summaries:W,headInfo:U,details:j,interpretation:ee,infos:Z,tips:ae,name:ne,description:fe}=u||{},be={name:ne,tips:ae};if(Y)return y(H,!0);const ge=L.createElement(L.Fragment,null,x(be),b(W),R(ee),E(U),A(j),I(Z),O(fe));return L.createElement(L.Fragment,null,y(H),p!=null?p:ge)})()};class e2 extends $.N6r{constructor(u){super(u)}renderContent(){var u,f,p;const{content:m}=this.spreadsheet.options.tooltip,y=this.options,x=this.spreadsheet.getCell((u=y.event)==null?void 0:u.target),b=(f=y.content)!=null?f:m,E=pt(ye({},y),{cell:x,content:b});(p=y.options)!=null&&p.forceRender&&this.unmountComponentAtNode(),sa.render(L.createElement(yr,pt(ye({},E),{content:b})),this.container)}destroy(){super.destroy(),this.unmountComponentAtNode()}unmountComponentAtNode(){this.container&&sa.unmountComponentAtNode(this.container)}}const t2={tooltip:{renderTooltip:l=>new e2(l)}},Jp=(...l)=>pc(t2,...l),rt=(l,u,f)=>{L.useEffect(()=>{const p=m=>{u==null||u((0,$.c8d)(m))};return f==null||f.on(l,p),()=>{f==null||f.off(l,p)}},[f,u,l])},Ce=(l,u,f,p=!1)=>{L.useEffect(()=>{const m=y=>{u==null||u(y)};return f==null||f.on(l,m),()=>{p&&(f==null||f.emit(l)),f==null||f.off(l,m)}},[f,u,l])};function r2(l,u){rt($.ch4.ROW_CELL_HOVER,l.onRowCellHover,u),rt($.ch4.ROW_CELL_CLICK,l.onRowCellClick,u),rt($.ch4.ROW_CELL_DOUBLE_CLICK,l.onRowCellDoubleClick,u),rt($.ch4.ROW_CELL_CONTEXT_MENU,l.onRowCellContextMenu,u),rt($.ch4.ROW_CELL_MOUSE_DOWN,l.onRowCellMouseDown,u),rt($.ch4.ROW_CELL_MOUSE_UP,l.onRowCellMouseUp,u),rt($.ch4.ROW_CELL_MOUSE_MOVE,l.onRowCellMouseMove,u),Ce($.ch4.ROW_CELL_COLLAPSE_TREE_ROWS,l.onRowCellCollapseTreeRows,u),Ce($.ch4.ROW_CELL_SCROLL,l.onRowCellScroll,u),rt($.ch4.COL_CELL_HOVER,l.onColCellHover,u),rt($.ch4.COL_CELL_CLICK,l.onColCellClick,u),rt($.ch4.COL_CELL_DOUBLE_CLICK,l.onColCellDoubleClick,u),rt($.ch4.COL_CELL_CONTEXT_MENU,l.onColCellContextMenu,u),rt($.ch4.COL_CELL_MOUSE_DOWN,l.onColCellMouseDown,u),rt($.ch4.COL_CELL_MOUSE_UP,l.onColCellMouseUp,u),rt($.ch4.COL_CELL_MOUSE_MOVE,l.onColCellMouseMove,u),rt($.ch4.DATA_CELL_HOVER,l.onDataCellHover,u),rt($.ch4.DATA_CELL_CLICK,l.onDataCellClick,u),rt($.ch4.DATA_CELL_DOUBLE_CLICK,l.onDataCellDoubleClick,u),rt($.ch4.DATA_CELL_CONTEXT_MENU,l.onDataCellContextMenu,u),rt($.ch4.DATA_CELL_MOUSE_DOWN,l.onDataCellMouseDown,u),rt($.ch4.DATA_CELL_MOUSE_UP,l.onDataCellMouseUp,u),rt($.ch4.DATA_CELL_MOUSE_MOVE,l.onDataCellMouseMove,u),Ce($.ch4.DATA_CELL_TREND_ICON_CLICK,l.onDataCellTrendIconClick,u),Ce($.ch4.DATA_CELL_BRUSH_SELECTION,l.onDataCellBrushSelection,u),Ce($.ch4.DATA_CELL_SELECT_MOVE,l.onDataCellSelectMove,u),rt($.ch4.CORNER_CELL_HOVER,l.onCornerCellHover,u),rt($.ch4.CORNER_CELL_CLICK,l.onCornerCellClick,u),rt($.ch4.CORNER_CELL_DOUBLE_CLICK,l.onCornerCellDoubleClick,u),rt($.ch4.CORNER_CELL_CONTEXT_MENU,l.onCornerCellContextMenu,u),rt($.ch4.CORNER_CELL_MOUSE_DOWN,l.onCornerCellMouseDown,u),rt($.ch4.CORNER_CELL_MOUSE_UP,l.onCornerCellMouseUp,u),rt($.ch4.CORNER_CELL_MOUSE_MOVE,l.onCornerCellMouseMove,u),rt($.ch4.MERGED_CELLS_HOVER,l.onMergedCellsHover,u),rt($.ch4.MERGED_CELLS_CLICK,l.onMergedCellsClick,u),rt($.ch4.MERGED_CELLS_DOUBLE_CLICK,l.onMergedCellsDoubleClick,u),rt($.ch4.MERGED_CELLS_CONTEXT_MENU,l.onMergedCellsContextMenu,u),rt($.ch4.MERGED_CELLS_MOUSE_DOWN,l.onMergedCellsMouseDown,u),rt($.ch4.MERGED_CELLS_MOUSE_UP,l.onMergedCellsMouseUp,u),rt($.ch4.MERGED_CELLS_MOUSE_MOVE,l.onMergedCellsMouseMove,u),Ce($.ch4.RANGE_SORT,l.onRangeSort,u),Ce($.ch4.RANGE_SORTED,l.onRangeSorted,u),Ce($.ch4.RANGE_FILTER,l.onRangeFilter,u),Ce($.ch4.RANGE_FILTERED,l.onRangeFiltered,u),Ce($.ch4.LAYOUT_AFTER_HEADER_LAYOUT,l.onLayoutAfterHeaderLayout,u),Ce($.ch4.LAYOUT_PAGINATION,l.onLayoutPagination,u),Ce($.ch4.LAYOUT_CELL_SCROLL,l.onLayoutCellScroll,u),Ce($.ch4.LAYOUT_AFTER_COLLAPSE_ROWS,l.onLayoutAfterCollapseRows,u),Ce($.ch4.LAYOUT_TREE_ROWS_COLLAPSE_ALL,l.onCollapseRowsAll,u),Ce($.ch4.LAYOUT_COLS_EXPANDED,l.onLayoutColsExpanded,u),Ce($.ch4.LAYOUT_COLS_HIDDEN,l.onLayoutColsHidden,u),Ce($.ch4.LAYOUT_BEFORE_RENDER,l.onBeforeRender,u),Ce($.ch4.LAYOUT_AFTER_RENDER,l.onAfterRender,u),Ce($.ch4.LAYOUT_DESTROY,l.onDestroy,u,!0),Ce($.ch4.LAYOUT_RESIZE,l.onLayoutResize,u),Ce($.ch4.LAYOUT_RESIZE_SERIES_WIDTH,l.onLayoutResizeSeriesWidth,u),Ce($.ch4.LAYOUT_RESIZE_ROW_WIDTH,l.onLayoutResizeRowWidth,u),Ce($.ch4.LAYOUT_RESIZE_ROW_HEIGHT,l.onLayoutResizeRowHeight,u),Ce($.ch4.LAYOUT_RESIZE_COL_WIDTH,l.onLayoutResizeColWidth,u),Ce($.ch4.LAYOUT_RESIZE_COL_HEIGHT,l.onLayoutResizeColHeight,u),Ce($.ch4.LAYOUT_RESIZE_TREE_WIDTH,l.onLayoutResizeTreeWidth,u),Ce($.ch4.LAYOUT_RESIZE_MOUSE_DOWN,l.onLayoutResizeMouseDown,u),Ce($.ch4.LAYOUT_RESIZE_MOUSE_UP,l.onLayoutResizeMouseUp,u),Ce($.ch4.LAYOUT_RESIZE_MOUSE_MOVE,l.onLayoutResizeMouseMove,u),Ce($.ch4.GLOBAL_KEYBOARD_DOWN,l.onKeyBoardDown,u),Ce($.ch4.GLOBAL_KEYBOARD_UP,l.onKeyBoardUp,u),Ce($.ch4.GLOBAL_COPIED,l.onCopied,u),Ce($.ch4.GLOBAL_ACTION_ICON_HOVER,l.onActionIconHover,u),Ce($.ch4.GLOBAL_ACTION_ICON_CLICK,l.onActionIconClick,u),Ce($.ch4.GLOBAL_CONTEXT_MENU,l.onContextMenu,u),Ce($.ch4.GLOBAL_HOVER,l.onMouseHover,u),Ce($.ch4.GLOBAL_CLICK,l.onClick,u),Ce($.ch4.GLOBAL_DOUBLE_CLICK,l.onDoubleClick,u),Ce($.ch4.GLOBAL_SELECTED,l.onSelected,u),Ce($.ch4.GLOBAL_MOUSE_UP,l.onMouseUp,u),Ce($.ch4.GLOBAL_RESET,l.onReset,u),Ce($.ch4.GLOBAL_LINK_FIELD_JUMP,l.onLinkFieldJump,u),Ce($.ch4.GLOBAL_SCROLL,l.onScroll,u),Ce($.ch4.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,l.onLayoutAfterRealDataCellRender,u),Ce($.ch4.ROW_CELL_BRUSH_SELECTION,l.onRowCellBrushSelection,u),Ce($.ch4.COL_CELL_BRUSH_SELECTION,l.onColCellBrushSelection,u)}const iu=(l,u)=>{const[f,p]=L.useState(u);return L.useEffect(()=>{l==null||l.on($.ch4.LAYOUT_BEFORE_RENDER,()=>{p(!0)}),l==null||l.on($.ch4.LAYOUT_AFTER_RENDER,()=>{p(!1)})},[l]),{loading:u!=null?u:f,setLoading:p}},Gd=10,eg=1,n2=(l,u)=>{const{options:{pagination:f},showPagination:p}=u,[m,y]=L.useState({total:0,current:(f==null?void 0:f.current)||eg,pageSize:(f==null?void 0:f.pageSize)||Gd}),x=(E,A)=>{var I;const R=(I=uo(p,"onShowSizeChange"))!=null?I:f==null?void 0:f.onShowSizeChange;R==null||R(E,A)},b=(E,A)=>{var I;y(pt(ye({},m),{current:E,pageSize:A}));const R=(I=uo(p,"onChange"))!=null?I:f==null?void 0:f.onChange;R==null||R(E,A)};return lr(()=>{!l||tt(f)||(l.updatePagination({current:m.current,pageSize:m.pageSize}),l.render(!1))},[m.current,m.pageSize,l]),lr(()=>{var E,A;y({total:(A=(E=l==null?void 0:l.facet)==null?void 0:E.viewCellHeights.getTotalLength())!=null?A:0,current:(f==null?void 0:f.current)||eg,pageSize:(f==null?void 0:f.pageSize)||Gd})},[f,l]),lr(()=>{if(!l||tt(f))return;const E=A=>{y(I=>pt(ye({},I),{total:A.total}))};return l.on($.ch4.LAYOUT_PAGINATION,E),()=>{l.off($.ch4.LAYOUT_PAGINATION,E)}},[f,l]),{showPagination:!!p,pagination:ye(ye({},f),m),onShowSizeChange:x,onChange:b}},i2=l=>{const{s2:u,adaptive:f,container:p,wrapper:m}=l;L.useLayoutEffect(()=>Kp({s2:u,adaptive:f,wrapper:m,container:p}),[u,m,p,f])};function Ta(l){const u=Vw(),f=L.useRef(),p=L.useRef(),m=L.useRef(),{spreadsheet:y,dataCfg:x,options:b,themeCfg:E,sheetType:A,onSheetUpdate:I=Jo}=l,R=L.useRef([x,b,E]),{loading:O,setLoading:N}=iu(f.current,l.loading),H=n2(f.current,l);r2(l,f.current);const Y=L.useCallback(U=>{const j=Jp(b);return y?y(U,x,j):A==="table"?new $.HZt(U,x,j):new $.TA7(U,x,j)},[A,b,x,y]),W=L.useCallback(()=>{var U;N(!0),f.current=Y(p.current),f.current.setThemeCfg(l.themeCfg),f.current.render(),N(!1),u(),l.getSpreadSheet&&(console.warn("[SheetComponent] `getSpreadSheet` is deprecated. Please use `onMounted` instead."),l.getSpreadSheet(f.current)),(U=l.onMounted)==null||U.call(l,f.current)},[l,Y,N,u]);return L.useEffect(()=>(W(),()=>{var U,j;(j=(U=f.current).destroy)==null||j.call(U)}),[]),lr(()=>{var U,j,ee,Z,ae,ne,fe,be,ge,Be,Ke;const[Fe,Yt,Tt]=R.current;R.current=[x,b,E];let Vt=!1,ir=!1;Object.is(Fe,x)||(((j=(U=Fe==null?void 0:Fe.fields)==null?void 0:U.columns)==null?void 0:j.length)!==((Z=(ee=x==null?void 0:x.fields)==null?void 0:ee.columns)==null?void 0:Z.length)&&((ae=f.current)==null||ae.clearColumnLeafNodes()),Vt=!0,(ne=f.current)==null||ne.setDataCfg(x)),Object.is(Yt,b)||(Object.is(Yt==null?void 0:Yt.hierarchyType,b==null?void 0:b.hierarchyType)||(ir=!0,Vt=!0,(fe=f.current)==null||fe.setDataCfg(x)),(be=f.current)==null||be.setOptions(b),(ge=f.current)==null||ge.changeSheetSize(b.width,b.height)),Object.is(Tt,E)||(Be=f.current)==null||Be.setThemeCfg(E);const $n=I({reloadData:Vt,reBuildDataSet:ir});(Ke=f.current)==null||Ke.render($n.reloadData,{reBuildDataSet:$n.reBuildDataSet})},[x,b,E,I]),i2({s2:f.current,container:p.current,wrapper:m.current,adaptive:l.adaptive}),{s2Ref:f,containerRef:p,wrapperRef:m,loading:O,setLoading:N,pagination:H}}const $d=L.createContext(null);function au(){return L.useContext($d)}var eT="";const a2=l=>L.createElement("svg",ye({className:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12.6,height:12.6},l),L.createElement("path",{d:"M950.016 898.016l-206.016-204.992Q832 586.016 832 448.032q0-159.008-112.512-271.488T448 64.032 176.512 176.544 64 448.032t112.512 271.488T448 832.032q138.016 0 244.992-88l206.016 206.016q10.016 10.016 24.992 10.016t26.016-10.016q10.016-11.008 10.016-26.016t-10.016-26.016zM568.992 736Q512 760 448 760T327.008 736q-56-24-99.488-67.488t-66.496-99.488q-24.992-56.992-24.992-120.992t24.992-120.992q23.008-56 66.496-99.488t99.488-67.488Q384 136.064 448 136.064t120.992 24q56 24 99.488 67.488t67.488 99.488q24 56.992 24 120.992t-24 120.992q-24 56-67.488 99.488T568.992 736z",fill:"currentColor"})),o2=l=>L.createElement("svg",ye({viewBox:"0 0 1024 1024",width:16,height:16,className:"antv-s2-icon"},l),L.createElement("defs",null,L.createElement("style",{type:"text/css"})),L.createElement("path",{d:"M441.6 249.6c0 38.4 32 70.4 70.4 70.4s70.4-32 70.4-70.4c0-38.4-32-70.4-70.4-70.4s-70.4 25.6-70.4 70.4z m0 262.4c0 38.4 32 70.4 70.4 70.4s70.4-32 70.4-70.4c0-38.4-32-70.4-70.4-70.4s-70.4 32-70.4 70.4z m0 262.4c0 38.4 32 70.4 70.4 70.4s70.4-32 70.4-70.4c0-38.4-32-70.4-70.4-70.4s-70.4 32-70.4 70.4z",fill:"currentColor","p-id":22217})),l2=l=>L.createElement("svg",ye({className:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12.6,height:12.6},l),L.createElement("path",{d:"M511.804 222.338c-57.117 0-105.737 20.061-145.86 60.184-40.122 40.123-60.184 88.569-60.184 145.337 0 56.769 20.062 105.214 60.185 145.337 40.122 40.123 88.742 60.185 145.859 60.185 57.116 0 105.736-20.062 145.859-60.185 40.123-40.123 60.184-88.568 60.184-145.337 0-56.768-20.061-105.214-60.184-145.337-40.123-40.123-88.743-60.184-145.86-60.184z m0 338.619c-36.729 0-68.007-12.925-93.835-38.774-25.827-25.85-38.752-57.127-38.773-93.834-0.022-36.707 12.902-68.16 38.773-94.357 25.872-26.197 57.15-39.285 93.835-39.263 36.685 0.022 67.963 13.11 93.834 39.263 25.871 26.154 38.796 57.606 38.774 94.357-0.022 36.75-12.946 68.028-38.774 93.834-25.828 25.806-57.106 38.73-93.834 38.774z m366.165-295.766c-21.084-42.168-50.327-79.223-87.73-111.165-37.404-31.941-79.898-57.105-127.484-75.491C614.472 60.845 564.155 52 511.804 52c-52.352 0-103.006 8.845-151.963 26.535-46.911 18.364-89.069 43.528-126.472 75.491-37.403 31.964-66.647 69.019-87.731 111.165C123.879 308.71 113 353.923 113 400.835c0 65.95 15.982 132.924 47.945 200.92 26.524 56.441 63.58 112.198 111.165 167.27 62.556 73.435 134.632 138.71 216.227 195.827 6.81 4.765 14.459 7.148 22.945 7.148 8.485 0 16.47-2.383 23.956-7.148 81.595-57.79 153.67-123.067 216.227-195.828 47.608-55.767 84.663-111.524 111.165-167.27 31.963-67.995 47.945-134.969 47.945-200.919 0-46.912-10.88-92.126-32.638-135.644h0.032z m-40.797 136.656c0 55.07-13.6 111.513-40.798 169.326-23.129 49.631-56.452 99.948-99.97 150.95-52.351 61.208-113.885 117.65-184.6 169.326-70.716-51.676-132.25-108.118-184.6-169.326-42.844-51.002-76.167-101.319-99.971-150.95-27.198-57.791-40.797-114.57-40.797-170.338 0-36.032 8.159-70.716 24.478-104.05 16.994-32.638 40.45-61.882 70.368-87.73 30.592-26.525 65.276-47.26 104.05-62.209 40.797-14.97 82.954-22.455 126.472-22.455 43.517 0 85.675 7.485 126.472 22.455 38.752 14.97 73.436 35.706 104.05 62.208 30.593 25.85 54.048 55.093 70.367 87.731 16.32 34.009 24.479 69.03 24.479 105.062z",fill:"currentColor"})),s2=l=>L.createElement("svg",ye({className:"antv-s2-icon",width:"16px",height:"16px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},l),L.createElement("path",{d:"M18.0047888,16.4055 C18.1082888,16.4055 18.1922888,16.4895 18.1922888,16.593 L18.1922888,17.9055 C18.1922888,18.0090534 18.1083422,18.093 18.0047888,18.093 L9.37978883,18.093 C9.27623544,18.093 9.19228883,18.0090534 9.19228883,17.9055 L9.19228883,16.593 C9.19228883,16.4895 9.27628883,16.4055 9.37978883,16.4055 L18.0047888,16.4055 Z M4.41328883,1.6665 L4.46428883,1.7115 L7.08928883,5.0385 C7.17478883,5.1435 7.12078883,5.2935 7.00528883,5.3325 L6.94228883,5.343 L5.16028883,5.343 L5.16028883,14.25 L6.94228883,14.25 C7.09978883,14.25 7.18828883,14.433 7.08928883,14.5545 L4.46428883,17.88 C4.42872537,17.9249155 4.37457895,17.9511073 4.31728883,17.9511073 C4.25999871,17.9511073 4.20585229,17.9249155 4.17028883,17.88 L1.54528883,14.5545 C1.50119832,14.4981177 1.49305316,14.4215528 1.52429494,14.3571564 C1.55553672,14.2927601 1.62071465,14.2517677 1.69228883,14.2515 L3.47428883,14.2515 L3.47428883,5.343 L1.69228883,5.343 C1.63110128,5.34394015 1.57330492,5.31496201 1.53745415,5.26536844 C1.50160338,5.21577487 1.49220972,5.15180683 1.51228883,5.094 L1.54528883,5.0385 L4.17028883,1.713 C4.22854609,1.63918993 4.33246412,1.61994585 4.41328883,1.668 L4.41328883,1.6665 Z M15.7547888,11.4375 C15.8582888,11.4375 15.9422888,11.5215 15.9422888,11.625 L15.9422888,12.9375 C15.9422888,13.0410534 15.8583422,13.125 15.7547888,13.125 L9.37978883,13.125 C9.33006074,13.125 9.28236938,13.1052456 9.24720631,13.0700825 C9.21204324,13.0349195 9.19228883,12.9872281 9.19228883,12.9375 L9.19228883,11.625 C9.19228883,11.5215 9.27628883,11.4375 9.37978883,11.4375 L15.7547888,11.4375 Z M21.7547888,6.468 C21.8582888,6.468 21.9422888,6.5535 21.9422888,6.6555 L21.9422888,7.968 C21.9422888,8.07155339 21.8583422,8.1555 21.7547888,8.1555 L9.37978883,8.1555 C9.33006074,8.1555 9.28236938,8.13574559 9.24720631,8.10058252 C9.21204324,8.06541945 9.19228883,8.01772809 9.19228883,7.968 L9.19228883,6.6555 C9.19228883,6.5535 9.27628883,6.468 9.37978883,6.468 L21.7547888,6.468 Z M13.5047888,1.5 C13.6082888,1.5 13.6922888,1.584 13.6922888,1.6875 L13.6922888,3 C13.6922888,3.10355339 13.6083422,3.1875 13.5047888,3.1875 L9.37978883,3.1875 C9.33006074,3.1875 9.28236938,3.16774559 9.24720631,3.13258252 C9.21204324,3.09741945 9.19228883,3.04972809 9.19228883,3 L9.19228883,1.6875 C9.19228883,1.584 9.27628883,1.5 9.37978883,1.5 L13.5047888,1.5 Z",fill:"currentColor"})),tg=l=>L.createElement("svg",ye({width:"12px",height:"12px",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",className:"antv-s2-icon"},l),L.createElement("g",{stroke:"none",fill:"none",fillRule:"evenodd"},L.createElement("g",{transform:"translate(-153.000000, -608.000000)",fill:"currentColor"},L.createElement("g",{transform:"translate(127.000000, 549.000000)"},L.createElement("g",{transform:"translate(24.000000, 57.000000)"},L.createElement("g",{transform:"translate(2.000000, 2.000000)"},L.createElement("path",{d:"M0.771428571,3.77142857 L3.77142857,3.77142857 L3.77142857,5.65714286 L0.771428571,5.65714286 L0.771428571,3.77142857 Z M0.771428571,6.34285714 L3.77142857,6.34285714 L3.77142857,8.57142857 L0.771428571,8.57142857 L0.771428571,6.34285714 Z M0.771428571,9 L3.77142857,9 L3.77142857,11.2285714 L0.771428571,11.2285714 L0.771428571,9 Z"}),L.createElement("path",{d:"M0.771428571,9 L0.771428571,11.2285714 L11.2285714,11.2285714 L11.2285714,3.77142857 L0.771428571,3.77142857 L0.771428571,5.65714286 L3.77142857,5.65714286 L3.77142857,3.77142857 L4.54285714,3.77142857 L4.54285714,11.3142857 L3.77142857,11.3142857 L3.77142857,9.08571429 L0.771428571,9.08571429 L0.771428571,9 Z M0.771428571,8.22857143 L3.77142857,8.22857143 L3.77142857,6.34285714 L0.771428571,6.34285714 L0.771428571,8.22857143 L0.771428571,8.22857143 Z M11.2285714,3 L11.2285714,0.771428571 L0.771428571,0.771428571 L0.771428571,3 L11.2285714,3 Z M12,0 L12,12 L0,12 L0,0 L12,0 Z"}))))))),u2=l=>L.createElement("svg",ye({width:"12px",height:"12px",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",className:"antv-s2-icon"},l),L.createElement("g",{stroke:"none",fill:"none",fillRule:"evenodd"},L.createElement("g",{transform:"translate(-153.000000, -814.000000)",fill:"currentColor",fillRule:"nonzero"},L.createElement("g",{transform:"translate(127.000000, 549.000000)"},L.createElement("g",{transform:"translate(24.000000, 55.000000)"},L.createElement("g",{transform:"translate(0.000000, 208.000000)"},L.createElement("g",{transform:"translate(2.000000, 2.000000)"},L.createElement("path",{d:"M4.45714286,11.2285714 L11.2285714,11.2285714 L11.2285714,3.77142857 L4.45714286,3.77142857 L4.45714286,11.2285714 Z M3.77142857,11.2285714 L3.77142857,3.77142857 L0.771428571,3.77142857 L0.771428571,11.3142857 L3.77142857,11.3142857 L3.77142857,11.2285714 Z M11.2285714,3 L11.2285714,0.771428571 L0.771428571,0.771428571 L0.771428571,3 L11.2285714,3 Z M12,0 L12,12 L0,12 L0,0 L12,0 Z"}),L.createElement("polygon",{points:"0.771428571 0.771428571 11.2285714 0.771428571 11.2285714 3 0.771428571 3"})))))))),La=l=>L.createElement("svg",ye({width:"12px",height:"12px",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",className:"antv-s2-icon"},l),L.createElement("g",{stroke:"none",fill:"none",fillRule:"evenodd"},L.createElement("g",{transform:"translate(-365.000000, -624.000000)",fill:"currentColor"},L.createElement("g",{transform:"translate(127.000000, 549.000000)"},L.createElement("g",{transform:"translate(236.000000, 71.000000)"},L.createElement("g",{transform:"translate(0.000000, 2.000000)"},L.createElement("g",{transform:"translate(2.000000, 2.000000)"},L.createElement("polygon",{points:"4.22857143 3.77142857 11.2285714 3.77142857 11.2285714 11.7714286 4.22857143 11.7714286"}),L.createElement("path",{d:"M4.45714286,11.2285714 L11.2285714,11.2285714 L11.2285714,3.77142857 L4.45714286,3.77142857 L4.45714286,11.2285714 Z M3.77142857,11.2285714 L3.77142857,3.77142857 L0.771428571,3.77142857 L0.771428571,11.3142857 L3.77142857,11.3142857 L3.77142857,11.2285714 Z M11.2285714,3 L11.2285714,0.771428571 L0.771428571,0.771428571 L0.771428571,3 L11.2285714,3 Z M12,0 L12,12 L0,12 L0,0 L12,0 Z"})))))))),c2=l=>L.createElement("svg",ye({className:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12.6,height:12.6},l),L.createElement("path",{d:"M950.016 898.016l-206.016-204.992Q832 586.016 832 448.032q0-159.008-112.512-271.488T448 64.032 176.512 176.544 64 448.032t112.512 271.488T448 832.032q138.016 0 244.992-88l206.016 206.016q10.016 10.016 24.992 10.016t26.016-10.016q10.016-11.008 10.016-26.016t-10.016-26.016zM568.992 736Q512 760 448 760T327.008 736q-56-24-99.488-67.488t-66.496-99.488q-24.992-56.992-24.992-120.992t24.992-120.992q23.008-56 66.496-99.488t99.488-67.488Q384 136.064 448 136.064t120.992 24q56 24 99.488 67.488t67.488 99.488q24 56.992 24 120.992t-24 120.992q-24 56-67.488 99.488T568.992 736z",fill:"currentColor"})),ml=l=>L.createElement("svg",ye({className:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12.6,height:12.6},l),L.createElement("path",{d:"M86.016 805.888H0L143.872 275.968h79.36l144.896 529.92H276.992l-29.696-109.056H115.2s-29.696 109.056-29.184 109.056zM225.28 613.376L181.248 455.68 138.24 613.376h87.04zM519.168 430.08c24.576-16.384 47.616-25.088 69.12-25.088 30.72 0 58.368 14.848 81.92 44.032 24.064 29.184 35.328 72.192 35.328 128.512 0 44.032-7.168 83.456-22.528 118.272-14.848 34.816-35.328 62.976-60.416 83.456-26.112 20.992-57.856 31.232-95.232 31.232-15.36-0.512-31.232-1.536-46.592-3.584-4.096-0.512-8.704-1.024-12.8-1.536h-66.56V256h81.92v206.336c11.264-12.8 23.04-23.552 35.84-32.256z m-35.328 157.184v135.168c13.824 3.072 26.112 4.608 37.376 4.608 27.648 0 50.176-11.776 69.12-36.352 19.456-25.088 28.672-59.392 28.672-104.96 0-32.256-5.12-55.296-14.848-70.144-9.216-13.824-18.432-19.968-28.672-19.968-12.288 0-27.136 7.68-44.544 24.064-16.896 16.896-32.768 39.424-47.104 67.584zM1013.76 794.624c-36.864 14.336-71.68 20.992-104.96 20.992-32.768 0.512-64.512-9.216-91.648-27.136-27.136-18.432-48.64-44.032-62.464-73.728-14.848-30.72-22.528-65.536-22.528-104.448 0-58.88 16.896-108.032 51.2-146.944 33.792-38.912 75.264-58.88 123.392-58.88 34.304 0 70.144 7.168 108.032 21.504l10.24 4.096v95.232l-20.992-10.752c-34.816-17.92-65.536-26.624-92.16-26.624-16.896 0-32.768 4.608-47.104 13.824-13.824 8.704-25.088 23.04-32.768 42.496-8.192 19.968-12.288 41.472-12.288 63.488 0 28.672 7.68 55.808 24.064 82.432 14.848 24.576 37.888 36.352 71.168 36.352 10.752 0 21.504-1.024 31.744-2.56 9.728-1.536 29.696-8.192 58.88-18.944l19.456-7.68v92.672l-11.264 4.608z",fill:"currentColor"})),d2=l=>L.createElement("svg",ye({className:"antv-s2-icon",width:"16px",height:"16px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},l),L.createElement("g",{transform:"translate(8.056364, 8.000227) rotate(-270.000000) translate(-8.056364, -8.000227) translate(3.057045, 3.070227)",fill:"currentColor"},L.createElement("path",{d:"M0.482272727,3.55181818 C0.472878788,3.55181818 0.468181818,3.54939394 0.468181818,3.54454545 C0.468181818,3.53969697 0.465757576,3.53727273 0.460909091,3.53727273 L0.396818182,3.53727273 L0.382727273,3.52318182 L0.34,3.52318182 L0.325909091,3.50909091 L0.311818182,3.50909091 L0.297727273,3.495 L0.269090909,3.495 L0.269090909,3.48090909 L0.255,3.48090909 L0.240909091,3.46681818 L0.226818182,3.46681818 L0.226818182,3.45272727 L0.212727273,3.45272727 L0.184090909,3.42409091 L0.17,3.42409091 C0.160606061,3.405 0.151060606,3.39075758 0.141363636,3.38136364 C0.131969697,3.38136364 0.127272727,3.37893939 0.127272727,3.37409091 L0.127272727,3.36681818 L0.113181818,3.35272727 L0.113181818,3.33863636 L0.0990909091,3.33863636 L0.0990909091,3.32454545 L0.085,3.31045455 L0.085,3.30318182 L0.0777272727,3.29590909 L0.0704545455,3.29590909 L0.0704545455,3.28181818 L0.0563636364,3.26772727 L0.0563636364,3.24636364 L0.0490909091,3.23909091 L0.0418181818,3.23909091 L0.0418181818,3.225 C0.0418181818,3.21560606 0.0393939394,3.21090909 0.0345454545,3.21090909 C0.0296969697,3.21090909 0.0272727273,3.20848485 0.0272727273,3.20363636 L0.0272727273,3.15409091 L0.0131818182,3.14 L0.0131818182,2.94090909 L0.0272727273,2.92681818 L0.0272727273,2.88409091 C0.0366666667,2.87469697 0.0413636364,2.86757576 0.0413636364,2.86272727 L0.0413636364,2.84136364 L0.0554545455,2.82727273 L0.0554545455,2.81318182 L0.0695454545,2.79909091 L0.0695454545,2.79181818 L0.0768181818,2.77772727 L0.0840909091,2.77045455 L0.0840909091,2.76318182 L0.0913636364,2.75590909 L0.0986363636,2.74863636 L0.0986363636,2.74136364 L0.112727273,2.72727273 C0.112727273,2.71787879 0.117424242,2.71318182 0.126818182,2.71318182 L0.126818182,2.69909091 L0.140909091,2.69909091 L2.68363636,0.156363636 C2.77848485,0.0521212121 2.89681818,0 3.03863636,0 C3.18045455,0 3.29878788,0.0521212121 3.39363636,0.156363636 C3.49787879,0.260606061 3.55,0.381363636 3.55,0.518636364 C3.55,0.655909091 3.49787879,0.776666667 3.39363636,0.880909091 L1.74590909,2.52863636 L9.48727273,2.52863636 C9.62939394,2.52863636 9.75015152,2.57833333 9.84954545,2.67772727 C9.94893939,2.77712121 9.99863636,2.89787879 9.99863636,3.04 C9.99863636,3.18212121 9.94893939,3.30287879 9.84954545,3.40227273 C9.75015152,3.50166667 9.62939394,3.55136364 9.48727273,3.55136364 L0.481363636,3.55136364 L0.482272727,3.55181818 Z M9.51636364,6.30727273 C9.52575758,6.30727273 9.53045455,6.30969697 9.53045455,6.31454545 C9.53045455,6.31939394 9.53287879,6.32181818 9.53772727,6.32181818 L9.60181818,6.32181818 L9.61590909,6.33590909 L9.65863636,6.33590909 L9.65863636,6.35 L9.68727273,6.35 L9.70136364,6.36409091 L9.73,6.36409091 L9.73,6.37818182 L9.74409091,6.37818182 L9.75818182,6.39227273 L9.77227273,6.39227273 L9.77227273,6.40636364 L9.78636364,6.40636364 L9.815,6.435 L9.82909091,6.435 C9.83848485,6.45409091 9.8480303,6.46833333 9.85772727,6.47772727 C9.86712121,6.47772727 9.87181818,6.48015152 9.87181818,6.485 L9.87181818,6.49227273 L9.88590909,6.50636364 L9.88590909,6.52045455 L9.9,6.52045455 L9.9,6.53454545 L9.90727273,6.53454545 L9.91454545,6.54181818 L9.91454545,6.55590909 L9.92181818,6.56318182 L9.92909091,6.57045455 L9.92909091,6.57772727 L9.94318182,6.59181818 L9.94318182,6.61318182 L9.95045455,6.62045455 L9.95772727,6.62045455 L9.95772727,6.64909091 L9.965,6.65636364 L9.97227273,6.67045455 L9.97227273,6.70590909 L9.98636364,6.72 L9.98636364,6.91909091 L9.97227273,6.93318182 L9.97227273,6.97590909 L9.95818182,6.99 L9.95818182,7.01863636 L9.94409091,7.03272727 L9.94409091,7.04681818 L9.93,7.06090909 L9.93,7.06818182 L9.92272727,7.08227273 L9.91545455,7.08954545 L9.91545455,7.09681818 L9.90818182,7.10409091 L9.90090909,7.11136364 L9.90090909,7.11863636 L9.88681818,7.13272727 C9.88681818,7.14212121 9.88439394,7.14681818 9.87954545,7.14681818 L9.87227273,7.14681818 L9.87227273,7.16090909 L9.85818182,7.16090909 L9.85090909,7.16818182 L9.84363636,7.18954545 L7.32954545,9.70363636 C7.22530303,9.80787879 7.10212121,9.86 6.96,9.86 C6.81787879,9.86 6.69954545,9.80787879 6.605,9.70363636 C6.50075758,9.60878788 6.44863636,9.49045455 6.44863636,9.34863636 C6.44863636,9.20681818 6.50075758,9.08363636 6.605,8.97909091 L8.25272727,7.33136364 L0.511363636,7.33136364 C0.378636364,7.33136364 0.26030303,7.28166667 0.156363636,7.18227273 C0.0524242424,7.08287879 0.000303030303,6.96212121 4.54747351e-13,6.82 C4.54747351e-13,6.67787879 0.0521212121,6.55712121 0.156363636,6.45772727 C0.260606061,6.35833333 0.378939394,6.30863636 0.511363636,6.30863636 L9.51727273,6.30863636 L9.51636364,6.30727273 Z"}))),yo=L.memo(l=>{const u=l,{className:f,icon:p,syncCopy:m=!1,copyOriginalText:y=(0,$.agQ)("\u590D\u5236\u539F\u59CB\u6570\u636E"),copyFormatText:x=(0,$.agQ)("\u590D\u5236\u683C\u5F0F\u5316\u6570\u636E"),downloadOriginalText:b=(0,$.agQ)("\u4E0B\u8F7D\u539F\u59CB\u6570\u636E"),downloadFormatText:E=(0,$.agQ)("\u4E0B\u8F7D\u683C\u5F0F\u5316\u6570\u636E"),successText:A=(0,$.agQ)("\u64CD\u4F5C\u6210\u529F"),errorText:I=(0,$.agQ)("\u64CD\u4F5C\u5931\u8D25"),sheet:R,fileName:O,open:N,dropdown:H}=u,Y=fn(u,["className","icon","syncCopy","copyOriginalText","copyFormatText","downloadOriginalText","downloadFormatText","successText","errorText","sheet","fileName","open","dropdown"]),W=`${$.vhY}-export`,U=Z=>{const ae=(0,$.F1h)(R,"	",Z);(0,$.vQq)(ae,m).then(()=>{fr.ZP.success(A)}).catch(ne=>{console.log("copy failed: ",ne),fr.ZP.error(I)})},j=Z=>{const ae=(0,$.F1h)(R,",",Z);try{(0,$.LRf)(ae,O),fr.ZP.success(A)}catch(ne){fr.ZP.error(I)}},ee=L.createElement(jr.Z,null,L.createElement(jr.Z.Item,{key:"copyOriginal",onClick:()=>U(!1)},y),L.createElement(jr.Z.Item,{key:"copyFormat",onClick:()=>U(!0)},x),L.createElement(jr.Z.Item,{key:"downloadOriginal",onClick:()=>j(!1)},b),L.createElement(jr.Z.Item,{key:"downloadFormat",onClick:()=>j(!0)},E));return L.createElement(ss.Z,ye(ye({overlay:ee,trigger:["click"],className:qt(W,f)},Y),H),L.createElement("a",{className:"ant-dropdown-link",key:"export",onClick:Z=>Z.preventDefault()},p||L.createElement(o2,null)))});yo.displayName="Export",yo.defaultProps={syncCopy:!1,fileName:"sheet"};const f2=l=>{const{splitOrders:u=[],setSplitOrders:f}=l,p=b=>{const E=u.concat();E.splice(E.indexOf(b),1),E.unshift(b),f(E)},m=b=>{const E=u.concat();let A=E.indexOf(b);E.splice(E.indexOf(b),1),E.splice(A+=1,0,b),f(E)},y=b=>{const E=u.concat();let A=E.indexOf(b);A>0&&(E.splice(E.indexOf(b),1),E.splice(A-=1,0,b),f(E))},x=b=>L.createElement(L.Fragment,null,L.createElement("span",{className:"split-text"},b),L.createElement("span",{className:`${Dt}-split-icon`,onClick:()=>{p(b)}},L.createElement(it,{name:"groupAsc"})),L.createElement("span",{className:`${Dt}-split-icon`,onClick:()=>{m(b)}},L.createElement(it,{name:"groupDesc"})),L.createElement("span",{className:`${Dt}-split-icon`,onClick:()=>{y(b)}},L.createElement(it,{name:"globalAsc"})));return L.createElement(At.Z,{className:`${Dt}-card-content`},u.map(b=>L.createElement("li",{key:b,className:`${Dt}-split-value`,title:b},x(b))))};var h2="";const{Sider:rg,Content:v2}=Th.default,Co=({sheet:l,className:u,icon:f,text:p,ruleText:m,dimensions:y,ruleOptions:x,sortParams:b,onSortOpen:E,onSortConfirm:A})=>{const[I,R]=(0,L.useState)(!1),[O,N]=(0,L.useState)(!1),[H,Y]=(0,L.useState)([]),[W,U]=(0,L.useState)([]),[j,ee]=(0,L.useState)([]),[Z,ae]=(0,L.useState)([]),[ne,fe]=(0,L.useState)([]),[be,ge]=(0,L.useState)(),[Be]=oi.Z.useForm(),Ke=L.useMemo(fs,[]),Fe=L.useMemo(hc,[]),Yt=()=>{R(!I)},Tt=()=>{E&&E(),Yt()},Vt=()=>{N(!O)},ir=Ue=>{$i(H,Ze=>Ze.field===Ue.field)||(ge(Ue),Y([...H,Ue])),ae(go(Z,Ze=>Ze.field!==Ue.field))},$n=(Ue,Ze)=>{var ht;Vt(),ge(Ue),fe(Yr(Ze||((ht=$i(j,zt=>zt.field===Ue.field))==null?void 0:ht.list)||[]))},ri=()=>{Vt();const Ue=Be.getFieldsValue([be==null?void 0:be.field]);Ue.sortBy=ne,Be.setFieldsValue({[be==null?void 0:be.field]:Ue});const Ze=Ht(H,ht=>ht.field===(be==null?void 0:be.field)?pt(ye({},ht),{rule:"sortBy",sortBy:ne,sortMethod:"",sortByMeasure:""}):ht);Y(Ze)},ta=()=>{Vt()},ln=Ue=>{Y(go(H,Ze=>Ze.field!==Ue.field)),ae([...Z,Ue])},En=()=>{const Ue=Be.getFieldsValue(),{values:Ze=[]}=l.dataCfg.fields,ht=[],zt=[];$p(di(Ue),ur=>{const{sortMethod:Nr,rule:sn=[],sortBy:ra}=Ue[ur],Wn={sortFieldId:ur};sn[0]==="sortByMeasure"||sn[1]?(kt(Ze,sn[1])?Wn.sortByMeasure=sn[1]:Wn.sortByMeasure=$.Teh,Wn.sortMethod=Nr,Wn.query={$$extra$$:sn[1]}):sn[0]==="sortBy"?Wn.sortBy=ra:Wn.sortMethod=Nr,ht.push(ye({field:ur},Ue[ur])),zt.push(Wn)}),A&&A(ht,zt),Yt()},Br=Ue=>go(Ue,Ze=>!$i(b,ht=>ht.sortFieldId===Ze.field)),$a=()=>{if(y)return y;const{fields:Ue={}}=l.dataCfg||{},{rows:Ze=[],columns:ht=[]}=Ue;return Ht([...Ze,...ht],zt=>{const ur=typeof zt=="string"?zt:zt.key;return{field:zt,name:l.dataSet.getFieldName(ur),list:l.dataSet.getDimensionValues(ur)}})},Pr=()=>x||Ht(Ke,Ue=>{if(Ue.value==="sortByMeasure"){const{values:Ze}=l.dataCfg.fields||{};Ue.children=Ht(Ze,ht=>({label:l.dataSet.getFieldName(ht),value:ht}))}return Ue}),Ae=()=>Ht(b,Ue=>{const{sortFieldId:Ze,sortMethod:ht,sortBy:zt,sortByMeasure:ur}=Ue;let Nr;return zt?Nr=["sortBy"]:ur?Nr=["sortByMeasure",ur]:Nr=["sortMethod"],{field:Ze,name:l.dataSet.getFieldName(Ze),rule:Nr,sortMethod:ht,sortBy:zt,sortByMeasure:ur}}),$o=()=>L.createElement(rg,{width:120,className:`${Dt}-sider-layout`},L.createElement("div",{className:`${Dt}-title`},(0,$.agQ)("\u53EF\u9009\u5B57\u6BB5")),L.createElement("div",null,Ht(Z,Ue=>L.createElement("div",{className:`${Dt}-dimension-item`,key:Ue.field,onClick:()=>{ir(Ue)}},Ue.name)))),Wo=()=>L.createElement(v2,{className:`${Dt}-content-layout`},L.createElement("div",{className:`${Dt}-title`},m||(0,$.agQ)("\u6309\u4EE5\u4E0B\u89C4\u5219\u8FDB\u884C\u6392\u5E8F\uFF08\u4F18\u5148\u7EA7\u7531\u4F4E\u5230\u9AD8\uFF09")),L.createElement(oi.Z,{form:Be,name:"form",className:`${Dt}-custom-form`},Ht(H,Ue=>{const{field:Ze,name:ht,rule:zt,sortMethod:ur,sortBy:Nr}=Ue||{};return L.createElement(oi.Z.Item,{name:Ze,key:Ze},L.createElement(oi.Z.Item,{name:[Ze,"name"],initialValue:ht,noStyle:!0},L.createElement(B1.default,{className:`${Dt}-select`,size:"small"})),L.createElement("span",{className:`${Dt}-field-prefix`},(0,$.agQ)("\u6309")),L.createElement(oi.Z.Item,{name:[Ze,"rule"],initialValue:zt||["sortMethod"],noStyle:!0},L.createElement(us.Z,{options:W,expandTrigger:"hover",size:"small",allowClear:!1})),L.createElement(oi.Z.Item,{shouldUpdate:!0,noStyle:!0},({getFieldValue:sn})=>Md(sn([Ze,"rule"]),["sortBy"])?L.createElement(L.Fragment,null,L.createElement("a",{className:`${Dt}-rule-end`,onClick:()=>{$n(Ue,Nr)}},(0,$.agQ)("\u8BBE\u7F6E\u987A\u5E8F")),L.createElement(oi.Z.Item,{noStyle:!0,name:[Ze,"sortBy"],initialValue:Nr})):L.createElement(oi.Z.Item,{shouldUpdate:!0,noStyle:!0,name:[Ze,"sortMethod"],initialValue:Hw(ur)||"ASC"},L.createElement(Mi.ZP.Group,{className:`${Dt}-rule-end`},Ht(Fe,ra=>L.createElement(Mi.ZP,{value:ra.value,key:ra.value},ra.name))))),L.createElement(Ah.Z,{className:`${Dt}-rule-end-delete`,onClick:()=>{ln(Ue)}}))})));return(0,L.useEffect)(()=>{if(I){const Ue=Ae(),Ze=$a(),ht=Br(Ze),zt=Pr();Y(Ue),ee(Ze),ae(ht),U(zt)}},[I]),L.createElement("div",{className:qt(Dt,u)},L.createElement(Rt.ZP,{onClick:Tt,icon:f||L.createElement(s2,null),size:"small",className:`${Dt}-btn`},p||(0,$.agQ)("\u9AD8\u7EA7\u6392\u5E8F")),L.createElement(qr.Z,{title:p||(0,$.agQ)("\u9AD8\u7EA7\u6392\u5E8F"),visible:I,onOk:En,onCancel:Yt,okText:(0,$.agQ)("\u786E\u5B9A"),cancelText:(0,$.agQ)("\u53D6\u6D88"),destroyOnClose:!0,className:`${Dt}-modal`},L.createElement(Th.default,null,$o(),Wo())),L.createElement(qr.Z,{title:(0,$.agQ)("\u624B\u52A8\u6392\u5E8F"),visible:O,onOk:ri,onCancel:ta,okText:(0,$.agQ)("\u786E\u5B9A"),cancelText:(0,$.agQ)("\u53D6\u6D88"),destroyOnClose:!0,className:`${Dt}-custom-modal`},L.createElement(f2,{splitOrders:ne,setSplitOrders:fe})))},yl="switcher";var Cr=(l=>(l.Rows="rows",l.Cols="columns",l.Values="values",l))(Cr||{}),wo=(l=>(l.Dimensions="dimensions",l.Measures="measures",l.Rows="rows",l.Cols="cols",l))(wo||{});const Ar=["rows","columns","values"],p2=l=>l instanceof $.HZt?"table":"pivot",ng=(l,u)=>{const f=l instanceof $.TA7&&u===Cr.Values||l instanceof $.HZt&&u===Cr.Cols,p=l instanceof $.TA7&&u===Cr.Values;return{selectable:f,expandable:p}},Wd=(l,{fields:u={},meta:f=[]}={},p=[])=>Ar.reduce((m,y)=>{const x=u[y];if(tt(x))return m;const b=Ht(x,E=>{const A=typeof E=="string"?E:E.key,I=$i(f,["field",A]);return{id:A,displayName:I==null?void 0:I.name,checked:!p.includes(A)}});return m[y]=ye({items:b},ng(l,y)),m},{}),ig=(l,u)=>{const f=l instanceof $.HZt,p=Ar.reduce((y,x)=>{var b,E,A,I;const R=(E=(b=u[x])==null?void 0:b.items)!=null?E:[],O=(I=(A=u[x])==null?void 0:A.hideItems)!=null?I:[];return y[x]=go(R,N=>!O.find(H=>!f&&H.id===N.id)).map(N=>N.id),y},{}),m=f?u[Cr.Cols].hideItems.map(y=>y.id):void 0;return{fields:p,hiddenColumnFields:m}},g2=l=>Dw(l,(u,f,p)=>(u.fields[p]=Ht(f.items,"id"),u.hiddenFields.push(...Ht(f.hideItems,"id")),u),{fields:{},hiddenFields:[]}),ou=(l,u,f=[],p=[])=>{const{fields:m,hiddenFields:y}=g2(u);return Wd(l,{fields:m,meta:f},y.concat(p))};function kd(l,u){return kd=Object.setPrototypeOf||function(p,m){return p.__proto__=m,p},kd(l,u)}function Qe(l,u){l.prototype=Object.create(u.prototype),l.prototype.constructor=l,kd(l,u)}function Oe(){return Oe=Object.assign||function(l){for(var u=1;u<arguments.length;u++){var f=arguments[u];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])}return l},Oe.apply(this,arguments)}function m2(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}function lu(l,u){var f=Object.keys(l);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(l);u&&(p=p.filter(function(m){return Object.getOwnPropertyDescriptor(l,m).enumerable})),f.push.apply(f,p)}return f}function ag(l){for(var u=1;u<arguments.length;u++){var f=arguments[u]!=null?arguments[u]:{};u%2?lu(Object(f),!0).forEach(function(p){m2(l,p,f[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(f)):lu(Object(f)).forEach(function(p){Object.defineProperty(l,p,Object.getOwnPropertyDescriptor(f,p))})}return l}function Kt(l){return"Minified Redux error #"+l+"; visit https://redux.js.org/Errors?code="+l+" for the full message or use the non-minified dev environment for full errors. "}var og=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ud=function(){return Math.random().toString(36).substring(7).split("").join(".")},Cl={INIT:"@@redux/INIT"+Ud(),REPLACE:"@@redux/REPLACE"+Ud(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ud()}};function gn(l){if(typeof l!="object"||l===null)return!1;for(var u=l;Object.getPrototypeOf(u)!==null;)u=Object.getPrototypeOf(u);return Object.getPrototypeOf(l)===u}function Ir(l,u,f){var p;if(typeof u=="function"&&typeof f=="function"||typeof f=="function"&&typeof arguments[3]=="function")throw new Error(Kt(0));if(typeof u=="function"&&typeof f=="undefined"&&(f=u,u=void 0),typeof f!="undefined"){if(typeof f!="function")throw new Error(Kt(1));return f(Ir)(l,u)}if(typeof l!="function")throw new Error(Kt(2));var m=l,y=u,x=[],b=x,E=!1;function A(){b===x&&(b=x.slice())}function I(){if(E)throw new Error(Kt(3));return y}function R(Y){if(typeof Y!="function")throw new Error(Kt(4));if(E)throw new Error(Kt(5));var W=!0;return A(),b.push(Y),function(){if(W){if(E)throw new Error(Kt(6));W=!1,A();var j=b.indexOf(Y);b.splice(j,1),x=null}}}function O(Y){if(!gn(Y))throw new Error(Kt(7));if(typeof Y.type=="undefined")throw new Error(Kt(8));if(E)throw new Error(Kt(9));try{E=!0,y=m(y,Y)}finally{E=!1}for(var W=x=b,U=0;U<W.length;U++){var j=W[U];j()}return Y}function N(Y){if(typeof Y!="function")throw new Error(Kt(10));m=Y,O({type:Cl.REPLACE})}function H(){var Y,W=R;return Y={subscribe:function(j){if(typeof j!="object"||j===null)throw new Error(Kt(11));function ee(){j.next&&j.next(I())}ee();var Z=W(ee);return{unsubscribe:Z}}},Y[og]=function(){return this},Y}return O({type:Cl.INIT}),p={dispatch:O,subscribe:R,getState:I,replaceReducer:N},p[og]=H,p}function Yd(l,u){return function(){return u(l.apply(this,arguments))}}function lg(l,u){if(typeof l=="function")return Yd(l,u);if(typeof l!="object"||l===null)throw new Error(Kt(16));var f={};for(var p in l){var m=l[p];typeof m=="function"&&(f[p]=Yd(m,u))}return f}function sg(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];return u.length===0?function(p){return p}:u.length===1?u[0]:u.reduce(function(p,m){return function(){return p(m.apply(void 0,arguments))}})}function P(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];return function(p){return function(){var m=p.apply(void 0,arguments),y=function(){throw new Error(Kt(15))},x={getState:m.getState,dispatch:function(){return y.apply(void 0,arguments)}},b=u.map(function(E){return E(x)});return y=sg.apply(void 0,b)(m.dispatch),ag(ag({},m),{},{dispatch:y})}}}var su=L.createContext(null);function y2(l){l()}var ug=y2,C2=function(u){return ug=u},cg=function(){return ug};function w2(){var l=cg(),u=null,f=null;return{clear:function(){u=null,f=null},notify:function(){l(function(){for(var m=u;m;)m.callback(),m=m.next})},get:function(){for(var m=[],y=u;y;)m.push(y),y=y.next;return m},subscribe:function(m){var y=!0,x=f={callback:m,next:null,prev:f};return x.prev?x.prev.next=x:u=x,function(){!y||u===null||(y=!1,x.next?x.next.prev=x.prev:f=x.prev,x.prev?x.prev.next=x.next:u=x.next)}}}}var Vd={notify:function(){},get:function(){return[]}};function dg(l,u){var f,p=Vd;function m(R){return E(),p.subscribe(R)}function y(){p.notify()}function x(){I.onStateChange&&I.onStateChange()}function b(){return!!f}function E(){f||(f=u?u.addNestedSub(x):l.subscribe(x),p=w2())}function A(){f&&(f(),f=void 0,p.clear(),p=Vd)}var I={addNestedSub:m,notifyNestedSubs:y,handleChangeWrapper:x,isSubscribed:b,trySubscribe:E,tryUnsubscribe:A,getListeners:function(){return p}};return I}var fg=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?L.useLayoutEffect:L.useEffect;function x2(l){var u=l.store,f=l.context,p=l.children,m=(0,L.useMemo)(function(){var b=dg(u);return{store:u,subscription:b}},[u]),y=(0,L.useMemo)(function(){return u.getState()},[u]);fg(function(){var b=m.subscription;return b.onStateChange=b.notifyNestedSubs,b.trySubscribe(),y!==u.getState()&&b.notifyNestedSubs(),function(){b.tryUnsubscribe(),b.onStateChange=null}},[m,y]);var x=f||su;return L.createElement(x.Provider,{value:m},p)}function uu(l,u){if(l==null)return{};var f={},p=Object.keys(l),m,y;for(y=0;y<p.length;y++)m=p[y],!(u.indexOf(m)>=0)&&(f[m]=l[m]);return f}var hg={exports:{}},at={};var tr=typeof Symbol=="function"&&Symbol.for,xo=tr?Symbol.for("react.element"):60103,Xd=tr?Symbol.for("react.portal"):60106,cu=tr?Symbol.for("react.fragment"):60107,du=tr?Symbol.for("react.strict_mode"):60108,bo=tr?Symbol.for("react.profiler"):60114,Or=tr?Symbol.for("react.provider"):60109,Ra=tr?Symbol.for("react.context"):60110,fu=tr?Symbol.for("react.async_mode"):60111,hu=tr?Symbol.for("react.concurrent_mode"):60111,mi=tr?Symbol.for("react.forward_ref"):60112,Aa=tr?Symbol.for("react.suspense"):60113,b2=tr?Symbol.for("react.suspense_list"):60120,vu=tr?Symbol.for("react.memo"):60115,pu=tr?Symbol.for("react.lazy"):60116,S2=tr?Symbol.for("react.block"):60121,E2=tr?Symbol.for("react.fundamental"):60117,_2=tr?Symbol.for("react.responder"):60118,T2=tr?Symbol.for("react.scope"):60119;function Qr(l){if(typeof l=="object"&&l!==null){var u=l.$$typeof;switch(u){case xo:switch(l=l.type,l){case fu:case hu:case cu:case bo:case du:case Aa:return l;default:switch(l=l&&l.$$typeof,l){case Ra:case mi:case pu:case vu:case Or:return l;default:return u}}case Xd:return u}}}function vg(l){return Qr(l)===hu}at.AsyncMode=fu,at.ConcurrentMode=hu,at.ContextConsumer=Ra,at.ContextProvider=Or,at.Element=xo,at.ForwardRef=mi,at.Fragment=cu,at.Lazy=pu,at.Memo=vu,at.Portal=Xd,at.Profiler=bo,at.StrictMode=du,at.Suspense=Aa,at.isAsyncMode=function(l){return vg(l)||Qr(l)===fu},at.isConcurrentMode=vg,at.isContextConsumer=function(l){return Qr(l)===Ra},at.isContextProvider=function(l){return Qr(l)===Or},at.isElement=function(l){return typeof l=="object"&&l!==null&&l.$$typeof===xo},at.isForwardRef=function(l){return Qr(l)===mi},at.isFragment=function(l){return Qr(l)===cu},at.isLazy=function(l){return Qr(l)===pu},at.isMemo=function(l){return Qr(l)===vu},at.isPortal=function(l){return Qr(l)===Xd},at.isProfiler=function(l){return Qr(l)===bo},at.isStrictMode=function(l){return Qr(l)===du},at.isSuspense=function(l){return Qr(l)===Aa},at.isValidElementType=function(l){return typeof l=="string"||typeof l=="function"||l===cu||l===hu||l===bo||l===du||l===Aa||l===b2||typeof l=="object"&&l!==null&&(l.$$typeof===pu||l.$$typeof===vu||l.$$typeof===Or||l.$$typeof===Ra||l.$$typeof===mi||l.$$typeof===E2||l.$$typeof===_2||l.$$typeof===T2||l.$$typeof===S2)},at.typeOf=Qr,hg.exports=at;var jd=hg.exports,L2={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},pg={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},R2={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},gg={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},qd={};qd[jd.ForwardRef]=R2,qd[jd.Memo]=gg;function mg(l){return jd.isMemo(l)?gg:qd[l.$$typeof]||L2}var yg=Object.defineProperty,Cg=Object.getOwnPropertyNames,Kd=Object.getOwnPropertySymbols,So=Object.getOwnPropertyDescriptor,A2=Object.getPrototypeOf,wg=Object.prototype;function Zn(l,u,f){if(typeof u!="string"){if(wg){var p=A2(u);p&&p!==wg&&Zn(l,p,f)}var m=Cg(u);Kd&&(m=m.concat(Kd(u)));for(var y=mg(l),x=mg(u),b=0;b<m.length;++b){var E=m[b];if(!pg[E]&&!(f&&f[E])&&!(x&&x[E])&&!(y&&y[E])){var A=So(u,E);try{yg(l,E,A)}catch(I){}}}}return l}var xg=Zn,bg={exports:{}},gt={};var Pn=60103,gu=60106,wl=60107,xl=60108,bl=60114,Sl=60109,El=60110,Wi=60112,_l=60113,Zd=60120,Tl=60115,Eo=60116,mu=60121,Sg=60122,Eg=60117,Qd=60129,_o=60131;if(typeof Symbol=="function"&&Symbol.for){var rr=Symbol.for;Pn=rr("react.element"),gu=rr("react.portal"),wl=rr("react.fragment"),xl=rr("react.strict_mode"),bl=rr("react.profiler"),Sl=rr("react.provider"),El=rr("react.context"),Wi=rr("react.forward_ref"),_l=rr("react.suspense"),Zd=rr("react.suspense_list"),Tl=rr("react.memo"),Eo=rr("react.lazy"),mu=rr("react.block"),Sg=rr("react.server.block"),Eg=rr("react.fundamental"),Qd=rr("react.debug_trace_mode"),_o=rr("react.legacy_hidden")}function Nn(l){if(typeof l=="object"&&l!==null){var u=l.$$typeof;switch(u){case Pn:switch(l=l.type,l){case wl:case bl:case xl:case _l:case Zd:return l;default:switch(l=l&&l.$$typeof,l){case El:case Wi:case Eo:case Tl:case Sl:return l;default:return u}}case gu:return u}}}var I2=Sl,O2=Pn,_g=Wi,M2=wl,Jd=Eo,ef=Tl,tf=gu,Tg=bl,Lg=xl,yi=_l;gt.ContextConsumer=El,gt.ContextProvider=I2,gt.Element=O2,gt.ForwardRef=_g,gt.Fragment=M2,gt.Lazy=Jd,gt.Memo=ef,gt.Portal=tf,gt.Profiler=Tg,gt.StrictMode=Lg,gt.Suspense=yi,gt.isAsyncMode=function(){return!1},gt.isConcurrentMode=function(){return!1},gt.isContextConsumer=function(l){return Nn(l)===El},gt.isContextProvider=function(l){return Nn(l)===Sl},gt.isElement=function(l){return typeof l=="object"&&l!==null&&l.$$typeof===Pn},gt.isForwardRef=function(l){return Nn(l)===Wi},gt.isFragment=function(l){return Nn(l)===wl},gt.isLazy=function(l){return Nn(l)===Eo},gt.isMemo=function(l){return Nn(l)===Tl},gt.isPortal=function(l){return Nn(l)===gu},gt.isProfiler=function(l){return Nn(l)===bl},gt.isStrictMode=function(l){return Nn(l)===xl},gt.isSuspense=function(l){return Nn(l)===_l},gt.isValidElementType=function(l){return typeof l=="string"||typeof l=="function"||l===wl||l===bl||l===Qd||l===xl||l===_l||l===Zd||l===_o||typeof l=="object"&&l!==null&&(l.$$typeof===Eo||l.$$typeof===Tl||l.$$typeof===Sl||l.$$typeof===El||l.$$typeof===Wi||l.$$typeof===Eg||l.$$typeof===mu||l[0]===Sg)},gt.typeOf=Nn,bg.exports=gt;var D2=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Rg=["reactReduxForwardedRef"],Ci=[],Fn=[null,null];function B2(l,u){var f=l[1];return[u.payload,f+1]}function Ag(l,u,f){fg(function(){return l.apply(void 0,u)},f)}function Ll(l,u,f,p,m,y,x){l.current=p,u.current=m,f.current=!1,y.current&&(y.current=null,x())}function Qn(l,u,f,p,m,y,x,b,E,A){if(l){var I=!1,R=null,O=function(){if(!I){var Y=u.getState(),W,U;try{W=p(Y,m.current)}catch(j){U=j,R=j}U||(R=null),W===y.current?x.current||E():(y.current=W,b.current=W,x.current=!0,A({type:"STORE_UPDATED",payload:{error:U}}))}};f.onStateChange=O,f.trySubscribe(),O();var N=function(){if(I=!0,f.tryUnsubscribe(),f.onStateChange=null,R)throw R};return N}}var Ig=function(){return[null,0]};function Og(l,u){u===void 0&&(u={});var f=u,p=f.getDisplayName,m=p===void 0?function(ee){return"ConnectAdvanced("+ee+")"}:p,y=f.methodName,x=y===void 0?"connectAdvanced":y,b=f.renderCountProp,E=b===void 0?void 0:b,A=f.shouldHandleStateChanges,I=A===void 0?!0:A,R=f.storeKey,O=R===void 0?"store":R;f.withRef;var N=f.forwardRef,H=N===void 0?!1:N,Y=f.context,W=Y===void 0?su:Y,U=uu(f,D2),j=W;return function(Z){var ae=Z.displayName||Z.name||"Component",ne=m(ae),fe=Oe({},U,{getDisplayName:m,methodName:x,renderCountProp:E,shouldHandleStateChanges:I,storeKey:O,displayName:ne,wrappedComponentName:ae,WrappedComponent:Z}),be=U.pure;function ge(Tt){return l(Tt.dispatch,fe)}var Be=be?L.useMemo:function(Tt){return Tt()};function Ke(Tt){var Vt=(0,L.useMemo)(function(){var Zl=Tt.reactReduxForwardedRef,Ku=uu(Tt,Rg);return[Tt.context,Zl,Ku]},[Tt]),ir=Vt[0],$n=Vt[1],ri=Vt[2],ta=(0,L.useMemo)(function(){return ir&&ir.Consumer&&bg.exports.isContextConsumer(L.createElement(ir.Consumer,null))?ir:j},[ir,j]),ln=(0,L.useContext)(ta),En=!!Tt.store&&!!Tt.store.getState&&!!Tt.store.dispatch;ln&&ln.store;var Br=En?Tt.store:ln.store,$a=(0,L.useMemo)(function(){return ge(Br)},[Br]),Pr=(0,L.useMemo)(function(){if(!I)return Fn;var Zl=dg(Br,En?null:ln.subscription),Ku=Zl.notifyNestedSubs.bind(Zl);return[Zl,Ku]},[Br,En,ln]),Ae=Pr[0],$o=Pr[1],Wo=(0,L.useMemo)(function(){return En?ln:Oe({},ln,{subscription:Ae})},[En,ln,Ae]),Ue=(0,L.useReducer)(B2,Ci,Ig),Ze=Ue[0],ht=Ze[0],zt=Ue[1];if(ht&&ht.error)throw ht.error;var ur=(0,L.useRef)(),Nr=(0,L.useRef)(ri),sn=(0,L.useRef)(),ra=(0,L.useRef)(!1),Wn=Be(function(){return sn.current&&ri===Nr.current?sn.current:$a(Br.getState(),ri)},[Br,ht,ri]);Ag(Ll,[Nr,ur,ra,ri,Wn,sn,$o]),Ag(Qn,[I,Br,Ae,$a,Nr,ur,ra,sn,$o,zt],[Br,Ae,$a]);var Zf=(0,L.useMemo)(function(){return L.createElement(Z,Oe({},Wn,{ref:$n}))},[$n,Z,Wn]),Vm=(0,L.useMemo)(function(){return I?L.createElement(ta.Provider,{value:Wo},Zf):Zf},[ta,Zf,Wo]);return Vm}var Fe=be?L.memo(Ke):Ke;if(Fe.WrappedComponent=Z,Fe.displayName=Ke.displayName=ne,H){var Yt=L.forwardRef(function(Vt,ir){return L.createElement(Fe,Oe({},Vt,{reactReduxForwardedRef:ir}))});return Yt.displayName=ne,Yt.WrappedComponent=Z,xg(Yt,Z)}return xg(Fe,Z)}}function je(l,u){return l===u?l!==0||u!==0||1/l===1/u:l!==l&&u!==u}function rf(l,u){if(je(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),p=Object.keys(u);if(f.length!==p.length)return!1;for(var m=0;m<f.length;m++)if(!Object.prototype.hasOwnProperty.call(u,f[m])||!je(l[f[m]],u[f[m]]))return!1;return!0}function yu(l,u){var f={},p=function(x){var b=l[x];typeof b=="function"&&(f[x]=function(){return u(b.apply(void 0,arguments))})};for(var m in l)p(m);return f}function wr(l){return function(f,p){var m=l(f,p);function y(){return m}return y.dependsOnOwnProps=!1,y}}function xr(l){return l.dependsOnOwnProps!==null&&l.dependsOnOwnProps!==void 0?!!l.dependsOnOwnProps:l.length!==1}function Ia(l,u){return function(p,m){m.displayName;var y=function(b,E){return y.dependsOnOwnProps?y.mapToProps(b,E):y.mapToProps(b)};return y.dependsOnOwnProps=!0,y.mapToProps=function(b,E){y.mapToProps=l,y.dependsOnOwnProps=xr(l);var A=y(b,E);return typeof A=="function"&&(y.mapToProps=A,y.dependsOnOwnProps=xr(A),A=y(b,E)),A},y}}function P2(l){return typeof l=="function"?Ia(l):void 0}function Rl(l){return l?void 0:wr(function(u){return{dispatch:u}})}function nf(l){return l&&typeof l=="object"?wr(function(u){return yu(l,u)}):void 0}var N2=[P2,Rl,nf];function Mg(l){return typeof l=="function"?Ia(l):void 0}function Dg(l){return l?void 0:wr(function(){return{}})}var F2=[Mg,Dg];function H2(l,u,f){return Oe({},f,l,u)}function z2(l){return function(f,p){p.displayName;var m=p.pure,y=p.areMergedPropsEqual,x=!1,b;return function(A,I,R){var O=l(A,I,R);return x?(!m||!y(O,b))&&(b=O):(x=!0,b=O),b}}}function Oa(l){return typeof l=="function"?z2(l):void 0}function af(l){return l?void 0:function(){return H2}}var Bg=[Oa,af],Pg=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function G2(l,u,f,p){return function(y,x){return f(l(y,x),u(p,x),x)}}function Ng(l,u,f,p,m){var y=m.areStatesEqual,x=m.areOwnPropsEqual,b=m.areStatePropsEqual,E=!1,A,I,R,O,N;function H(ee,Z){return A=ee,I=Z,R=l(A,I),O=u(p,I),N=f(R,O,I),E=!0,N}function Y(){return R=l(A,I),u.dependsOnOwnProps&&(O=u(p,I)),N=f(R,O,I),N}function W(){return l.dependsOnOwnProps&&(R=l(A,I)),u.dependsOnOwnProps&&(O=u(p,I)),N=f(R,O,I),N}function U(){var ee=l(A,I),Z=!b(ee,R);return R=ee,Z&&(N=f(R,O,I)),N}function j(ee,Z){var ae=!x(Z,I),ne=!y(ee,A);return A=ee,I=Z,ae&&ne?Y():ae?W():ne?U():N}return function(Z,ae){return E?j(Z,ae):H(Z,ae)}}function $2(l,u){var f=u.initMapStateToProps,p=u.initMapDispatchToProps,m=u.initMergeProps,y=uu(u,Pg),x=f(l,y),b=p(l,y),E=m(l,y),A=y.pure?Ng:G2;return A(x,b,E,l,y)}var W2=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Jn(l,u,f){for(var p=u.length-1;p>=0;p--){var m=u[p](l);if(m)return m}return function(y,x){throw new Error("Invalid value of type "+typeof l+" for "+f+" argument when connecting component "+x.wrappedComponentName+".")}}function k2(l,u){return l===u}function U2(l){var u=l===void 0?{}:l,f=u.connectHOC,p=f===void 0?Og:f,m=u.mapStateToPropsFactories,y=m===void 0?F2:m,x=u.mapDispatchToPropsFactories,b=x===void 0?N2:x,E=u.mergePropsFactories,A=E===void 0?Bg:E,I=u.selectorFactory,R=I===void 0?$2:I;return function(N,H,Y,W){W===void 0&&(W={});var U=W,j=U.pure,ee=j===void 0?!0:j,Z=U.areStatesEqual,ae=Z===void 0?k2:Z,ne=U.areOwnPropsEqual,fe=ne===void 0?rf:ne,be=U.areStatePropsEqual,ge=be===void 0?rf:be,Be=U.areMergedPropsEqual,Ke=Be===void 0?rf:Be,Fe=uu(U,W2),Yt=Jn(N,y,"mapStateToProps"),Tt=Jn(H,b,"mapDispatchToProps"),Vt=Jn(Y,A,"mergeProps");return p(R,Oe({methodName:"connect",getDisplayName:function($n){return"Connect("+$n+")"},shouldHandleStateChanges:!!N,initMapStateToProps:Yt,initMapDispatchToProps:Tt,initMergeProps:Vt,pure:ee,areStatesEqual:ae,areOwnPropsEqual:fe,areStatePropsEqual:ge,areMergedPropsEqual:Ke},Fe))}}var Fg=U2();C2(sa.unstable_batchedUpdates);function Y2(l,u){if(l.length!==u.length)return!1;for(var f=0;f<l.length;f++)if(l[f]!==u[f])return!1;return!0}function Hg(l,u){var f=(0,L.useState)(function(){return{inputs:u,result:l()}})[0],p=(0,L.useRef)(!0),m=(0,L.useRef)(f),y=p.current||!!(u&&m.current.inputs&&Y2(u,m.current.inputs)),x=y?m.current:{inputs:u,result:l()};return(0,L.useEffect)(function(){p.current=!1,m.current=x},[x]),x.result}function V2(l,u){return Hg(function(){return l},u)}var st=Hg,Re=V2,X2=!0,of="Invariant failed";function j2(l,u){if(!l){if(X2)throw new Error(of);var f=typeof u=="function"?u():u,p=f?of+": "+f:of;throw new Error(p)}}var Hn=function(u){var f=u.top,p=u.right,m=u.bottom,y=u.left,x=p-y,b=m-f,E={top:f,right:p,bottom:m,left:y,width:x,height:b,x:y,y:f,center:{x:(p+y)/2,y:(m+f)/2}};return E},lf=function(u,f){return{top:u.top-f.top,left:u.left-f.left,bottom:u.bottom+f.bottom,right:u.right+f.right}},zg=function(u,f){return{top:u.top+f.top,left:u.left+f.left,bottom:u.bottom-f.bottom,right:u.right-f.right}},q2=function(u,f){return{top:u.top+f.y,left:u.left+f.x,bottom:u.bottom+f.y,right:u.right+f.x}},sf={top:0,right:0,bottom:0,left:0},uf=function(u){var f=u.borderBox,p=u.margin,m=p===void 0?sf:p,y=u.border,x=y===void 0?sf:y,b=u.padding,E=b===void 0?sf:b,A=Hn(lf(f,m)),I=Hn(zg(f,x)),R=Hn(zg(I,E));return{marginBox:A,borderBox:Hn(f),paddingBox:I,contentBox:R,margin:m,border:x,padding:E}},mn=function(u){var f=u.slice(0,-2),p=u.slice(-2);if(p!=="px")return 0;var m=Number(f);return isNaN(m)&&j2(!1),m},K2=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Cu=function(u,f){var p=u.borderBox,m=u.border,y=u.margin,x=u.padding,b=q2(p,f);return uf({borderBox:b,border:m,margin:y,padding:x})},wu=function(u,f){return f===void 0&&(f=K2()),Cu(u,f)},Gg=function(u,f){var p={top:mn(f.marginTop),right:mn(f.marginRight),bottom:mn(f.marginBottom),left:mn(f.marginLeft)},m={top:mn(f.paddingTop),right:mn(f.paddingRight),bottom:mn(f.paddingBottom),left:mn(f.paddingLeft)},y={top:mn(f.borderTopWidth),right:mn(f.borderRightWidth),bottom:mn(f.borderBottomWidth),left:mn(f.borderLeftWidth)};return uf({borderBox:u,margin:p,padding:m,border:y})},$g=function(u){var f=u.getBoundingClientRect(),p=window.getComputedStyle(u);return Gg(f,p)},Wg=Number.isNaN||function(u){return typeof u=="number"&&u!==u};function _t(l,u){return!!(l===u||Wg(l)&&Wg(u))}function Z2(l,u){if(l.length!==u.length)return!1;for(var f=0;f<l.length;f++)if(!_t(l[f],u[f]))return!1;return!0}function ft(l,u){u===void 0&&(u=Z2);var f,p=[],m,y=!1;function x(){for(var b=[],E=0;E<arguments.length;E++)b[E]=arguments[E];return y&&f===this&&u(b,p)||(m=l.apply(this,b),y=!0,f=this,p=b),m}return x}var kg=function(u){var f=[],p=null,m=function(){for(var x=arguments.length,b=new Array(x),E=0;E<x;E++)b[E]=arguments[E];f=b,!p&&(p=requestAnimationFrame(function(){p=null,u.apply(void 0,f)}))};return m.cancel=function(){p&&(cancelAnimationFrame(p),p=null)},m},wi=kg;function Ug(l,u){}Ug.bind(null,"warn"),Ug.bind(null,"error");function ei(){}function Q2(l,u){return Oe({},l,{},u)}function It(l,u,f){var p=u.map(function(m){var y=Q2(f,m.options);return l.addEventListener(m.eventName,m.fn,y),function(){l.removeEventListener(m.eventName,m.fn,y)}});return function(){p.forEach(function(y){y()})}}var Yg="Invariant failed";function xu(l){this.message=l}xu.prototype.toString=function(){return this.message};function he(l,u){if(!l)throw new xu(Yg)}var J2=function(l){Qe(u,l);function u(){for(var p,m=arguments.length,y=new Array(m),x=0;x<m;x++)y[x]=arguments[x];return p=l.call.apply(l,[this].concat(y))||this,p.callbacks=null,p.unbind=ei,p.onWindowError=function(b){var E=p.getCallbacks();E.isDragging()&&E.tryAbort();var A=b.error;A instanceof xu&&b.preventDefault()},p.getCallbacks=function(){if(!p.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return p.callbacks},p.setCallbacks=function(b){p.callbacks=b},p}var f=u.prototype;return f.componentDidMount=function(){this.unbind=It(window,[{eventName:"error",fn:this.onWindowError}])},f.componentDidCatch=function(m){if(m instanceof xu){this.setState({});return}throw m},f.componentWillUnmount=function(){this.unbind()},f.render=function(){return this.props.children(this.setCallbacks)},u}(L.Component),ex=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Al=function(u){return u+1},Vg=function(u){return`
  You have lifted an item in position `+Al(u.source.index)+`
`},Xg=function(u,f){var p=u.droppableId===f.droppableId,m=Al(u.index),y=Al(f.index);return p?`
      You have moved the item from position `+m+`
      to position `+y+`
    `:`
    You have moved the item from position `+m+`
    in list `+u.droppableId+`
    to list `+f.droppableId+`
    in position `+y+`
  `},jg=function(u,f,p){var m=f.droppableId===p.droppableId;return m?`
      The item `+u+`
      has been combined with `+p.draggableId:`
      The item `+u+`
      in list `+f.droppableId+`
      has been combined with `+p.draggableId+`
      in list `+p.droppableId+`
    `},tx=function(u){var f=u.destination;if(f)return Xg(u.source,f);var p=u.combine;return p?jg(u.draggableId,u.source,p):"You are over an area that cannot be dropped on"},qg=function(u){return`
  The item has returned to its starting position
  of `+Al(u.index)+`
`},cf=function(u){if(u.reason==="CANCEL")return`
      Movement cancelled.
      `+qg(u.source)+`
    `;var f=u.destination,p=u.combine;return f?`
      You have dropped the item.
      `+Xg(u.source,f)+`
    `:p?`
      You have dropped the item.
      `+jg(u.draggableId,u.source,p)+`
    `:`
    The item has been dropped while not over a drop area.
    `+qg(u.source)+`
  `},bt={dragHandleUsageInstructions:ex,onDragStart:Vg,onDragUpdate:tx,onDragEnd:cf},nr={x:0,y:0},sr=function(u,f){return{x:u.x+f.x,y:u.y+f.y}},Jr=function(u,f){return{x:u.x-f.x,y:u.y-f.y}},xi=function(u,f){return u.x===f.x&&u.y===f.y},To=function(u){return{x:u.x!==0?-u.x:0,y:u.y!==0?-u.y:0}},Ma=function(u,f,p){var m;return p===void 0&&(p=0),m={},m[u]=f,m[u==="x"?"y":"x"]=p,m},Il=function(u,f){return Math.sqrt(Math.pow(f.x-u.x,2)+Math.pow(f.y-u.y,2))},Kg=function(u,f){return Math.min.apply(Math,f.map(function(p){return Il(u,p)}))},Mr=function(u){return function(f){return{x:u(f.x),y:u(f.y)}}},rx=function(l,u){var f=Hn({top:Math.max(u.top,l.top),right:Math.min(u.right,l.right),bottom:Math.min(u.bottom,l.bottom),left:Math.max(u.left,l.left)});return f.width<=0||f.height<=0?null:f},Lo=function(u,f){return{top:u.top+f.y,left:u.left+f.x,bottom:u.bottom+f.y,right:u.right+f.x}},Zg=function(u){return[{x:u.left,y:u.top},{x:u.right,y:u.top},{x:u.left,y:u.bottom},{x:u.right,y:u.bottom}]},bu={top:0,right:0,bottom:0,left:0},nx=function(u,f){return f?Lo(u,f.scroll.diff.displacement):u},ix=function(u,f,p){if(p&&p.increasedBy){var m;return Oe({},u,(m={},m[f.end]=u[f.end]+p.increasedBy[f.line],m))}return u},ax=function(u,f){return f&&f.shouldClipSubject?rx(f.pageMarginBox,u):Hn(u)},Ro=function(l){var u=l.page,f=l.withPlaceholder,p=l.axis,m=l.frame,y=nx(u.marginBox,m),x=ix(y,p,f),b=ax(x,m);return{page:u,withPlaceholder:f,active:b}},Ol=function(l,u){l.frame||he(!1);var f=l.frame,p=Jr(u,f.scroll.initial),m=To(p),y=Oe({},f,{scroll:{initial:f.scroll.initial,current:u,diff:{value:p,displacement:m},max:f.scroll.max}}),x=Ro({page:l.subject.page,withPlaceholder:l.subject.withPlaceholder,axis:l.axis,frame:y}),b=Oe({},l,{frame:y,subject:x});return b};function Su(l){return Object.values?Object.values(l):Object.keys(l).map(function(u){return l[u]})}function Da(l,u){if(l.findIndex)return l.findIndex(u);for(var f=0;f<l.length;f++)if(u(l[f]))return f;return-1}function ki(l,u){if(l.find)return l.find(u);var f=Da(l,u);if(f!==-1)return l[f]}function Qg(l){return Array.prototype.slice.call(l)}var Jg=ft(function(l){return l.reduce(function(u,f){return u[f.descriptor.id]=f,u},{})}),e0=ft(function(l){return l.reduce(function(u,f){return u[f.descriptor.id]=f,u},{})}),Eu=ft(function(l){return Su(l)}),ox=ft(function(l){return Su(l)}),Ao=ft(function(l,u){var f=ox(u).filter(function(p){return l===p.descriptor.droppableId}).sort(function(p,m){return p.descriptor.index-m.descriptor.index});return f});function df(l){return l.at&&l.at.type==="REORDER"?l.at.destination:null}function _u(l){return l.at&&l.at.type==="COMBINE"?l.at.combine:null}var Tu=ft(function(l,u){return u.filter(function(f){return f.descriptor.id!==l.descriptor.id})}),lx=function(l){var u=l.isMovingForward,f=l.draggable,p=l.destination,m=l.insideDestination,y=l.previousImpact;if(!p.isCombineEnabled)return null;var x=df(y);if(!x)return null;function b(Y){var W={type:"COMBINE",combine:{draggableId:Y,droppableId:p.descriptor.id}};return Oe({},y,{at:W})}var E=y.displaced.all,A=E.length?E[0]:null;if(u)return A?b(A):null;var I=Tu(f,m);if(!A){if(!I.length)return null;var R=I[I.length-1];return b(R.descriptor.id)}var O=Da(I,function(Y){return Y.descriptor.id===A});O===-1&&he(!1);var N=O-1;if(N<0)return null;var H=I[N];return b(H.descriptor.id)},yn=function(l,u){return l.descriptor.droppableId===u.descriptor.id},t0={point:nr,value:0},Ui={invisible:{},visible:{},all:[]},sx={displaced:Ui,displacedBy:t0,at:null},Cn=function(l,u){return function(f){return l<=f&&f<=u}},r0=function(l){var u=Cn(l.top,l.bottom),f=Cn(l.left,l.right);return function(p){var m=u(p.top)&&u(p.bottom)&&f(p.left)&&f(p.right);if(m)return!0;var y=u(p.top)||u(p.bottom),x=f(p.left)||f(p.right),b=y&&x;if(b)return!0;var E=p.top<l.top&&p.bottom>l.bottom,A=p.left<l.left&&p.right>l.right,I=E&&A;if(I)return!0;var R=E&&x||A&&y;return R}},ux=function(l){var u=Cn(l.top,l.bottom),f=Cn(l.left,l.right);return function(p){var m=u(p.top)&&u(p.bottom)&&f(p.left)&&f(p.right);return m}},ff={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},n0={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},bi=function(l){return function(u){var f=Cn(u.top,u.bottom),p=Cn(u.left,u.right);return function(m){return l===ff?f(m.top)&&f(m.bottom):p(m.left)&&p(m.right)}}},cx=function(u,f){var p=f.frame?f.frame.scroll.diff.displacement:nr;return Lo(u,p)},Ml=function(u,f,p){return f.subject.active?p(f.subject.active)(u):!1},dx=function(u,f,p){return p(f)(u)},hf=function(u){var f=u.target,p=u.destination,m=u.viewport,y=u.withDroppableDisplacement,x=u.isVisibleThroughFrameFn,b=y?cx(f,p):f;return Ml(b,p,x)&&dx(b,m,x)},Lu=function(u){return hf(Oe({},u,{isVisibleThroughFrameFn:r0}))},i0=function(u){return hf(Oe({},u,{isVisibleThroughFrameFn:ux}))},fx=function(u){return hf(Oe({},u,{isVisibleThroughFrameFn:bi(u.destination.axis)}))},hx=function(u,f,p){if(typeof p=="boolean")return p;if(!f)return!0;var m=f.invisible,y=f.visible;if(m[u])return!1;var x=y[u];return x?x.shouldAnimate:!0};function vx(l,u){var f=l.page.marginBox,p={top:u.point.y,right:0,bottom:0,left:u.point.x};return Hn(lf(f,p))}function en(l){var u=l.afterDragging,f=l.destination,p=l.displacedBy,m=l.viewport,y=l.forceShouldAnimate,x=l.last;return u.reduce(function(E,A){var I=vx(A,p),R=A.descriptor.id;E.all.push(R);var O=Lu({target:I,destination:f,viewport:m,withDroppableDisplacement:!0});if(!O)return E.invisible[A.descriptor.id]=!0,E;var N=hx(R,x,y),H={draggableId:R,shouldAnimate:N};return E.visible[R]=H,E},{all:[],visible:{},invisible:{}})}function px(l,u){if(!l.length)return 0;var f=l[l.length-1].descriptor.index;return u.inHomeList?f:f+1}function Yi(l){var u=l.insideDestination,f=l.inHomeList,p=l.displacedBy,m=l.destination,y=px(u,{inHomeList:f});return{displaced:Ui,displacedBy:p,at:{type:"REORDER",destination:{droppableId:m.descriptor.id,index:y}}}}function Ru(l){var u=l.draggable,f=l.insideDestination,p=l.destination,m=l.viewport,y=l.displacedBy,x=l.last,b=l.index,E=l.forceShouldAnimate,A=yn(u,p);if(b==null)return Yi({insideDestination:f,inHomeList:A,displacedBy:y,destination:p});var I=ki(f,function(Y){return Y.descriptor.index===b});if(!I)return Yi({insideDestination:f,inHomeList:A,displacedBy:y,destination:p});var R=Tu(u,f),O=f.indexOf(I),N=R.slice(O),H=en({afterDragging:N,destination:p,displacedBy:y,last:x,viewport:m.frame,forceShouldAnimate:E});return{displaced:H,displacedBy:y,at:{type:"REORDER",destination:{droppableId:p.descriptor.id,index:b}}}}function Vi(l,u){return!!u.effected[l]}var gx=function(l){var u=l.isMovingForward,f=l.destination,p=l.draggables,m=l.combine,y=l.afterCritical;if(!f.isCombineEnabled)return null;var x=m.draggableId,b=p[x],E=b.descriptor.index,A=Vi(x,y);return A?u?E:E-1:u?E+1:E},mx=function(l){var u=l.isMovingForward,f=l.isInHomeList,p=l.insideDestination,m=l.location;if(!p.length)return null;var y=m.index,x=u?y+1:y-1,b=p[0].descriptor.index,E=p[p.length-1].descriptor.index,A=f?E:E+1;return x<b||x>A?null:x},yx=function(l){var u=l.isMovingForward,f=l.isInHomeList,p=l.draggable,m=l.draggables,y=l.destination,x=l.insideDestination,b=l.previousImpact,E=l.viewport,A=l.afterCritical,I=b.at;if(I||he(!1),I.type==="REORDER"){var R=mx({isMovingForward:u,isInHomeList:f,location:I.destination,insideDestination:x});return R==null?null:Ru({draggable:p,insideDestination:x,destination:y,viewport:E,last:b.displaced,displacedBy:b.displacedBy,index:R})}var O=gx({isMovingForward:u,destination:y,displaced:b.displaced,draggables:m,combine:I.combine,afterCritical:A});return O==null?null:Ru({draggable:p,insideDestination:x,destination:y,viewport:E,last:b.displaced,displacedBy:b.displacedBy,index:O})},a0=function(l){var u=l.displaced,f=l.afterCritical,p=l.combineWith,m=l.displacedBy,y=!!(u.visible[p]||u.invisible[p]);return Vi(p,f)?y?nr:To(m.point):y?m.point:nr},ct=function(l){var u=l.afterCritical,f=l.impact,p=l.draggables,m=_u(f);m||he(!1);var y=m.draggableId,x=p[y].page.borderBox.center,b=a0({displaced:f.displaced,afterCritical:u,combineWith:y,displacedBy:f.displacedBy});return sr(x,b)},Si=function(u,f){return f.margin[u.start]+f.borderBox[u.size]/2},Cx=function(u,f){return f.margin[u.end]+f.borderBox[u.size]/2},wn=function(u,f,p){return f[u.crossAxisStart]+p.margin[u.crossAxisStart]+p.borderBox[u.crossAxisSize]/2},Xi=function(u){var f=u.axis,p=u.moveRelativeTo,m=u.isMoving;return Ma(f.line,p.marginBox[f.end]+Si(f,m),wn(f,p.marginBox,m))},Me=function(u){var f=u.axis,p=u.moveRelativeTo,m=u.isMoving;return Ma(f.line,p.marginBox[f.start]-Cx(f,m),wn(f,p.marginBox,m))},vf=function(u){var f=u.axis,p=u.moveInto,m=u.isMoving;return Ma(f.line,p.contentBox[f.start]+Si(f,m),wn(f,p.contentBox,m))},ji=function(l){var u=l.impact,f=l.draggable,p=l.draggables,m=l.droppable,y=l.afterCritical,x=Ao(m.descriptor.id,p),b=f.page,E=m.axis;if(!x.length)return vf({axis:E,moveInto:m.page,isMoving:b});var A=u.displaced,I=u.displacedBy,R=A.all[0];if(R){var O=p[R];if(Vi(R,y))return Me({axis:E,moveRelativeTo:O.page,isMoving:b});var N=Cu(O.page,I.point);return Me({axis:E,moveRelativeTo:N,isMoving:b})}var H=x[x.length-1];if(H.descriptor.id===f.descriptor.id)return b.borderBox.center;if(Vi(H.descriptor.id,y)){var Y=Cu(H.page,To(y.displacedBy.point));return Xi({axis:E,moveRelativeTo:Y,isMoving:b})}return Xi({axis:E,moveRelativeTo:H.page,isMoving:b})},Au=function(l,u){var f=l.frame;return f?sr(u,f.scroll.diff.displacement):u},wx=function(u){var f=u.impact,p=u.draggable,m=u.droppable,y=u.draggables,x=u.afterCritical,b=p.page.borderBox.center,E=f.at;return!m||!E?b:E.type==="REORDER"?ji({impact:f,draggable:p,draggables:y,droppable:m,afterCritical:x}):ct({impact:f,draggables:y,afterCritical:x})},Ut=function(l){var u=wx(l),f=l.droppable,p=f?Au(f,u):u;return p},Iu=function(l,u){var f=Jr(u,l.scroll.initial),p=To(f),m=Hn({top:u.y,bottom:u.y+l.frame.height,left:u.x,right:u.x+l.frame.width}),y={frame:m,scroll:{initial:l.scroll.initial,max:l.scroll.max,current:u,diff:{value:f,displacement:p}}};return y};function ti(l,u){return l.map(function(f){return u[f]})}function xx(l,u){for(var f=0;f<u.length;f++){var p=u[f].visible[l];if(p)return p}return null}var bx=function(l){var u=l.impact,f=l.viewport,p=l.destination,m=l.draggables,y=l.maxScrollChange,x=Iu(f,sr(f.scroll.current,y)),b=p.frame?Ol(p,sr(p.frame.scroll.current,y)):p,E=u.displaced,A=en({afterDragging:ti(E.all,m),destination:p,displacedBy:u.displacedBy,viewport:x.frame,last:E,forceShouldAnimate:!1}),I=en({afterDragging:ti(E.all,m),destination:b,displacedBy:u.displacedBy,viewport:f.frame,last:E,forceShouldAnimate:!1}),R={},O={},N=[E,A,I];E.all.forEach(function(Y){var W=xx(Y,N);if(W){O[Y]=W;return}R[Y]=!0});var H=Oe({},u,{displaced:{all:E.all,invisible:R,visible:O}});return H},Sx=function(l,u){return sr(l.scroll.diff.displacement,u)},Io=function(l){var u=l.pageBorderBoxCenter,f=l.draggable,p=l.viewport,m=Sx(p,u),y=Jr(m,f.page.borderBox.center);return sr(f.client.borderBox.center,y)},o0=function(l){var u=l.draggable,f=l.destination,p=l.newPageBorderBoxCenter,m=l.viewport,y=l.withDroppableDisplacement,x=l.onlyOnMainAxis,b=x===void 0?!1:x,E=Jr(p,u.page.borderBox.center),A=Lo(u.page.borderBox,E),I={target:A,destination:f,withDroppableDisplacement:y,viewport:m};return b?fx(I):i0(I)},Ex=function(l){var u=l.isMovingForward,f=l.draggable,p=l.destination,m=l.draggables,y=l.previousImpact,x=l.viewport,b=l.previousPageBorderBoxCenter,E=l.previousClientSelection,A=l.afterCritical;if(!p.isEnabled)return null;var I=Ao(p.descriptor.id,m),R=yn(f,p),O=lx({isMovingForward:u,draggable:f,destination:p,insideDestination:I,previousImpact:y})||yx({isMovingForward:u,isInHomeList:R,draggable:f,draggables:m,destination:p,insideDestination:I,previousImpact:y,viewport:x,afterCritical:A});if(!O)return null;var N=Ut({impact:O,draggable:f,droppable:p,draggables:m,afterCritical:A}),H=o0({draggable:f,destination:p,newPageBorderBoxCenter:N,viewport:x.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(H){var Y=Io({pageBorderBoxCenter:N,draggable:f,viewport:x});return{clientSelection:Y,impact:O,scrollJumpRequest:null}}var W=Jr(N,b),U=bx({impact:O,viewport:x,destination:p,draggables:m,maxScrollChange:W});return{clientSelection:E,impact:U,scrollJumpRequest:W}},Dr=function(u){var f=u.subject.active;return f||he(!1),f},l0=function(l){var u=l.isMovingForward,f=l.pageBorderBoxCenter,p=l.source,m=l.droppables,y=l.viewport,x=p.subject.active;if(!x)return null;var b=p.axis,E=Cn(x[b.start],x[b.end]),A=Eu(m).filter(function(R){return R!==p}).filter(function(R){return R.isEnabled}).filter(function(R){return!!R.subject.active}).filter(function(R){return r0(y.frame)(Dr(R))}).filter(function(R){var O=Dr(R);return u?x[b.crossAxisEnd]<O[b.crossAxisEnd]:O[b.crossAxisStart]<x[b.crossAxisStart]}).filter(function(R){var O=Dr(R),N=Cn(O[b.start],O[b.end]);return E(O[b.start])||E(O[b.end])||N(x[b.start])||N(x[b.end])}).sort(function(R,O){var N=Dr(R)[b.crossAxisStart],H=Dr(O)[b.crossAxisStart];return u?N-H:H-N}).filter(function(R,O,N){return Dr(R)[b.crossAxisStart]===Dr(N[0])[b.crossAxisStart]});if(!A.length)return null;if(A.length===1)return A[0];var I=A.filter(function(R){var O=Cn(Dr(R)[b.start],Dr(R)[b.end]);return O(f[b.line])});return I.length===1?I[0]:I.length>1?I.sort(function(R,O){return Dr(R)[b.start]-Dr(O)[b.start]})[0]:A.sort(function(R,O){var N=Kg(f,Zg(Dr(R))),H=Kg(f,Zg(Dr(O)));return N!==H?N-H:Dr(R)[b.start]-Dr(O)[b.start]})[0]},s0=function(u,f){var p=u.page.borderBox.center;return Vi(u.descriptor.id,f)?Jr(p,f.displacedBy.point):p},_x=function(u,f){var p=u.page.borderBox;return Vi(u.descriptor.id,f)?Lo(p,To(f.displacedBy.point)):p},Dl=function(l){var u=l.pageBorderBoxCenter,f=l.viewport,p=l.destination,m=l.insideDestination,y=l.afterCritical,x=m.filter(function(b){return i0({target:_x(b,y),destination:p,viewport:f.frame,withDroppableDisplacement:!0})}).sort(function(b,E){var A=Il(u,Au(p,s0(b,y))),I=Il(u,Au(p,s0(E,y)));return A<I?-1:I<A?1:b.descriptor.index-E.descriptor.index});return x[0]||null},Bl=ft(function(u,f){var p=f[u.line];return{value:p,point:Ma(u.line,p)}}),Tx=function(u,f,p){var m=u.axis;if(u.descriptor.mode==="virtual")return Ma(m.line,f[m.line]);var y=u.subject.page.contentBox[m.size],x=Ao(u.descriptor.id,p),b=x.reduce(function(I,R){return I+R.client.marginBox[m.size]},0),E=b+f[m.line],A=E-y;return A<=0?null:Ma(m.line,A)},Ou=function(u,f){return Oe({},u,{scroll:Oe({},u.scroll,{max:f})})},u0=function(u,f,p){var m=u.frame;yn(f,u)&&he(!1),u.subject.withPlaceholder&&he(!1);var y=Bl(u.axis,f.displaceBy).point,x=Tx(u,y,p),b={placeholderSize:y,increasedBy:x,oldFrameMaxScroll:u.frame?u.frame.scroll.max:null};if(!m){var E=Ro({page:u.subject.page,withPlaceholder:b,axis:u.axis,frame:u.frame});return Oe({},u,{subject:E})}var A=x?sr(m.scroll.max,x):m.scroll.max,I=Ou(m,A),R=Ro({page:u.subject.page,withPlaceholder:b,axis:u.axis,frame:I});return Oe({},u,{subject:R,frame:I})},c0=function(u){var f=u.subject.withPlaceholder;f||he(!1);var p=u.frame;if(!p){var m=Ro({page:u.subject.page,axis:u.axis,frame:null,withPlaceholder:null});return Oe({},u,{subject:m})}var y=f.oldFrameMaxScroll;y||he(!1);var x=Ou(p,y),b=Ro({page:u.subject.page,axis:u.axis,frame:x,withPlaceholder:null});return Oe({},u,{subject:b,frame:x})},Lx=function(l){var u=l.previousPageBorderBoxCenter,f=l.moveRelativeTo,p=l.insideDestination,m=l.draggable,y=l.draggables,x=l.destination,b=l.viewport,E=l.afterCritical;if(!f){if(p.length)return null;var A={displaced:Ui,displacedBy:t0,at:{type:"REORDER",destination:{droppableId:x.descriptor.id,index:0}}},I=Ut({impact:A,draggable:m,droppable:x,draggables:y,afterCritical:E}),R=yn(m,x)?x:u0(x,m,y),O=o0({draggable:m,destination:R,newPageBorderBoxCenter:I,viewport:b.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return O?A:null}var N=u[x.axis.line]<=f.page.borderBox.center[x.axis.line],H=function(){var W=f.descriptor.index;return f.descriptor.id===m.descriptor.id||N?W:W+1}(),Y=Bl(x.axis,m.displaceBy);return Ru({draggable:m,insideDestination:p,destination:x,viewport:b,displacedBy:Y,last:Ui,index:H})},d0=function(l){var u=l.isMovingForward,f=l.previousPageBorderBoxCenter,p=l.draggable,m=l.isOver,y=l.draggables,x=l.droppables,b=l.viewport,E=l.afterCritical,A=l0({isMovingForward:u,pageBorderBoxCenter:f,source:m,droppables:x,viewport:b});if(!A)return null;var I=Ao(A.descriptor.id,y),R=Dl({pageBorderBoxCenter:f,viewport:b,destination:A,insideDestination:I,afterCritical:E}),O=Lx({previousPageBorderBoxCenter:f,destination:A,draggable:p,draggables:y,moveRelativeTo:R,insideDestination:I,viewport:b,afterCritical:E});if(!O)return null;var N=Ut({impact:O,draggable:p,droppable:A,draggables:y,afterCritical:E}),H=Io({pageBorderBoxCenter:N,draggable:p,viewport:b});return{clientSelection:H,impact:O,scrollJumpRequest:null}},tn=function(l){var u=l.at;return u?u.type==="REORDER"?u.destination.droppableId:u.combine.droppableId:null},Rx=function(u,f){var p=tn(u);return p?f[p]:null},pf=function(l){var u=l.state,f=l.type,p=Rx(u.impact,u.dimensions.droppables),m=!!p,y=u.dimensions.droppables[u.critical.droppable.id],x=p||y,b=x.axis.direction,E=b==="vertical"&&(f==="MOVE_UP"||f==="MOVE_DOWN")||b==="horizontal"&&(f==="MOVE_LEFT"||f==="MOVE_RIGHT");if(E&&!m)return null;var A=f==="MOVE_DOWN"||f==="MOVE_RIGHT",I=u.dimensions.draggables[u.critical.draggable.id],R=u.current.page.borderBoxCenter,O=u.dimensions,N=O.draggables,H=O.droppables;return E?Ex({isMovingForward:A,previousPageBorderBoxCenter:R,draggable:I,destination:x,draggables:N,viewport:u.viewport,previousClientSelection:u.current.client.selection,previousImpact:u.impact,afterCritical:u.afterCritical}):d0({isMovingForward:A,previousPageBorderBoxCenter:R,draggable:I,isOver:x,draggables:N,droppables:H,viewport:u.viewport,afterCritical:u.afterCritical})};function qi(l){return l.phase==="DRAGGING"||l.phase==="COLLECTING"}function f0(l){var u=Cn(l.top,l.bottom),f=Cn(l.left,l.right);return function(m){return u(m.y)&&f(m.x)}}function Ax(l,u){return l.left<u.right&&l.right>u.left&&l.top<u.bottom&&l.bottom>u.top}function Ix(l){var u=l.pageBorderBox,f=l.draggable,p=l.candidates,m=f.page.borderBox.center,y=p.map(function(x){var b=x.axis,E=Ma(x.axis.line,u.center[b.line],x.page.borderBox.center[b.crossAxisLine]);return{id:x.descriptor.id,distance:Il(m,E)}}).sort(function(x,b){return b.distance-x.distance});return y[0]?y[0].id:null}function Ox(l){var u=l.pageBorderBox,f=l.draggable,p=l.droppables,m=Eu(p).filter(function(y){if(!y.isEnabled)return!1;var x=y.subject.active;if(!x||!Ax(u,x))return!1;if(f0(x)(u.center))return!0;var b=y.axis,E=x.center[b.crossAxisLine],A=u[b.crossAxisStart],I=u[b.crossAxisEnd],R=Cn(x[b.crossAxisStart],x[b.crossAxisEnd]),O=R(A),N=R(I);return!O&&!N?!0:O?A<E:I>E});return m.length?m.length===1?m[0].descriptor.id:Ix({pageBorderBox:u,draggable:f,candidates:m}):null}var h0=function(u,f){return Hn(Lo(u,f))},gf=function(l,u){var f=l.frame;return f?h0(u,f.scroll.diff.value):u};function v0(l){var u=l.displaced,f=l.id;return!!(u.visible[f]||u.invisible[f])}function xn(l){var u=l.draggable,f=l.closest,p=l.inHomeList;return f?p&&f.descriptor.index>u.descriptor.index?f.descriptor.index-1:f.descriptor.index:null}var Ki=function(l){var u=l.pageBorderBoxWithDroppableScroll,f=l.draggable,p=l.destination,m=l.insideDestination,y=l.last,x=l.viewport,b=l.afterCritical,E=p.axis,A=Bl(p.axis,f.displaceBy),I=A.value,R=u[E.start],O=u[E.end],N=Tu(f,m),H=ki(N,function(W){var U=W.descriptor.id,j=W.page.borderBox.center[E.line],ee=Vi(U,b),Z=v0({displaced:y,id:U});return ee?Z?O<=j:R<j-I:Z?O<=j+I:R<j}),Y=xn({draggable:f,closest:H,inHomeList:yn(f,p)});return Ru({draggable:f,insideDestination:m,destination:p,viewport:x,last:y,displacedBy:A,index:Y})},Mx=4,Dx=function(l){var u=l.draggable,f=l.pageBorderBoxWithDroppableScroll,p=l.previousImpact,m=l.destination,y=l.insideDestination,x=l.afterCritical;if(!m.isCombineEnabled)return null;var b=m.axis,E=Bl(m.axis,u.displaceBy),A=E.value,I=f[b.start],R=f[b.end],O=Tu(u,y),N=ki(O,function(Y){var W=Y.descriptor.id,U=Y.page.borderBox,j=U[b.size],ee=j/Mx,Z=Vi(W,x),ae=v0({displaced:p.displaced,id:W});return Z?ae?R>U[b.start]+ee&&R<U[b.end]-ee:I>U[b.start]-A+ee&&I<U[b.end]-A-ee:ae?R>U[b.start]+A+ee&&R<U[b.end]+A-ee:I>U[b.start]+ee&&I<U[b.end]-ee});if(!N)return null;var H={displacedBy:E,displaced:p.displaced,at:{type:"COMBINE",combine:{draggableId:N.descriptor.id,droppableId:m.descriptor.id}}};return H},p0=function(l){var u=l.pageOffset,f=l.draggable,p=l.draggables,m=l.droppables,y=l.previousImpact,x=l.viewport,b=l.afterCritical,E=h0(f.page.borderBox,u),A=Ox({pageBorderBox:E,draggable:f,droppables:m});if(!A)return sx;var I=m[A],R=Ao(I.descriptor.id,p),O=gf(I,E);return Dx({pageBorderBoxWithDroppableScroll:O,draggable:f,previousImpact:y,destination:I,insideDestination:R,afterCritical:b})||Ki({pageBorderBoxWithDroppableScroll:O,draggable:f,destination:I,insideDestination:R,last:y.displaced,viewport:x,afterCritical:b})},mf=function(l,u){var f;return Oe({},l,(f={},f[u.descriptor.id]=u,f))},Bx=function(u){var f=u.previousImpact,p=u.impact,m=u.droppables,y=tn(f),x=tn(p);if(!y||y===x)return m;var b=m[y];if(!b.subject.withPlaceholder)return m;var E=c0(b);return mf(m,E)},Px=function(l){var u=l.draggable,f=l.draggables,p=l.droppables,m=l.previousImpact,y=l.impact,x=Bx({previousImpact:m,impact:y,droppables:p}),b=tn(y);if(!b)return x;var E=p[b];if(yn(u,E)||E.subject.withPlaceholder)return x;var A=u0(E,u,f);return mf(x,A)},Pl=function(l){var u=l.state,f=l.clientSelection,p=l.dimensions,m=l.viewport,y=l.impact,x=l.scrollJumpRequest,b=m||u.viewport,E=p||u.dimensions,A=f||u.current.client.selection,I=Jr(A,u.initial.client.selection),R={offset:I,selection:A,borderBoxCenter:sr(u.initial.client.borderBoxCenter,I)},O={selection:sr(R.selection,b.scroll.current),borderBoxCenter:sr(R.borderBoxCenter,b.scroll.current),offset:sr(R.offset,b.scroll.diff.value)},N={client:R,page:O};if(u.phase==="COLLECTING")return Oe({phase:"COLLECTING"},u,{dimensions:E,viewport:b,current:N});var H=E.draggables[u.critical.draggable.id],Y=y||p0({pageOffset:O.offset,draggable:H,draggables:E.draggables,droppables:E.droppables,previousImpact:u.impact,viewport:b,afterCritical:u.afterCritical}),W=Px({draggable:H,impact:Y,previousImpact:u.impact,draggables:E.draggables,droppables:E.droppables}),U=Oe({},u,{current:N,dimensions:{draggables:E.draggables,droppables:W},impact:Y,viewport:b,scrollJumpRequest:x||null,forceShouldAnimate:x?!1:null});return U};function Nx(l,u){return l.map(function(f){return u[f]})}var Ba=function(l){var u=l.impact,f=l.viewport,p=l.draggables,m=l.destination,y=l.forceShouldAnimate,x=u.displaced,b=Nx(x.all,p),E=en({afterDragging:b,destination:m,displacedBy:u.displacedBy,viewport:f.frame,forceShouldAnimate:y,last:x});return Oe({},u,{displaced:E})},g0=function(l){var u=l.impact,f=l.draggable,p=l.droppable,m=l.draggables,y=l.viewport,x=l.afterCritical,b=Ut({impact:u,draggable:f,draggables:m,droppable:p,afterCritical:x});return Io({pageBorderBoxCenter:b,draggable:f,viewport:y})},yf=function(l){var u=l.state,f=l.dimensions,p=l.viewport;u.movementMode!=="SNAP"&&he(!1);var m=u.impact,y=p||u.viewport,x=f||u.dimensions,b=x.draggables,E=x.droppables,A=b[u.critical.draggable.id],I=tn(m);I||he(!1);var R=E[I],O=Ba({impact:m,viewport:y,destination:R,draggables:b}),N=g0({impact:O,draggable:A,droppable:R,draggables:b,viewport:y,afterCritical:u.afterCritical});return Pl({impact:O,clientSelection:N,state:u,dimensions:x,viewport:y})},Fx=function(l){return{index:l.index,droppableId:l.droppableId}},m0=function(l){var u=l.draggable,f=l.home,p=l.draggables,m=l.viewport,y=Bl(f.axis,u.displaceBy),x=Ao(f.descriptor.id,p),b=x.indexOf(u);b===-1&&he(!1);var E=x.slice(b+1),A=E.reduce(function(N,H){return N[H.descriptor.id]=!0,N},{}),I={inVirtualList:f.descriptor.mode==="virtual",displacedBy:y,effected:A},R=en({afterDragging:E,destination:f,displacedBy:y,last:null,viewport:m.frame,forceShouldAnimate:!1}),O={displaced:R,displacedBy:y,at:{type:"REORDER",destination:Fx(u.descriptor)}};return{impact:O,afterCritical:I}},Hx=function(l,u){return{draggables:l.draggables,droppables:mf(l.droppables,u)}},zx=function(l){var u=l.draggable,f=l.offset,p=l.initialWindowScroll,m=Cu(u.client,f),y=wu(m,p),x=Oe({},u,{placeholder:Oe({},u.placeholder,{client:m}),client:m,page:y});return x},Gx=function(l){var u=l.frame;return u||he(!1),u},$x=function(l){var u=l.additions,f=l.updatedDroppables,p=l.viewport,m=p.scroll.diff.value;return u.map(function(y){var x=y.descriptor.droppableId,b=f[x],E=Gx(b),A=E.scroll.diff.value,I=sr(m,A),R=zx({draggable:y,offset:I,initialWindowScroll:p.scroll.initial});return R})},Cf=function(l){var u=l.state,f=l.published,p=f.modified.map(function(ee){var Z=u.dimensions.droppables[ee.droppableId],ae=Ol(Z,ee.scroll);return ae}),m=Oe({},u.dimensions.droppables,{},Jg(p)),y=e0($x({additions:f.additions,updatedDroppables:m,viewport:u.viewport})),x=Oe({},u.dimensions.draggables,{},y);f.removals.forEach(function(ee){delete x[ee]});var b={droppables:m,draggables:x},E=tn(u.impact),A=E?b.droppables[E]:null,I=b.draggables[u.critical.draggable.id],R=b.droppables[u.critical.droppable.id],O=m0({draggable:I,home:R,draggables:x,viewport:u.viewport}),N=O.impact,H=O.afterCritical,Y=A&&A.isCombineEnabled?u.impact:N,W=p0({pageOffset:u.current.page.offset,draggable:b.draggables[u.critical.draggable.id],draggables:b.draggables,droppables:b.droppables,previousImpact:Y,viewport:u.viewport,afterCritical:H}),U=Oe({phase:"DRAGGING"},u,{phase:"DRAGGING",impact:W,onLiftImpact:N,dimensions:b,afterCritical:H,forceShouldAnimate:!1});if(u.phase==="COLLECTING")return U;var j=Oe({phase:"DROP_PENDING"},U,{phase:"DROP_PENDING",reason:u.reason,isWaiting:!1});return j},Nl=function(u){return u.movementMode==="SNAP"},wf=function(u,f,p){var m=Hx(u.dimensions,f);return!Nl(u)||p?Pl({state:u,dimensions:m}):yf({state:u,dimensions:m})};function Mu(l){return l.isDragging&&l.movementMode==="SNAP"?Oe({phase:"DRAGGING"},l,{scrollJumpRequest:null}):l}var xf={phase:"IDLE",completed:null,shouldFlush:!1},y0=function(l,u){if(l===void 0&&(l=xf),u.type==="FLUSH")return Oe({},xf,{shouldFlush:!0});if(u.type==="INITIAL_PUBLISH"){l.phase!=="IDLE"&&he(!1);var f=u.payload,p=f.critical,m=f.clientSelection,y=f.viewport,x=f.dimensions,b=f.movementMode,E=x.draggables[p.draggable.id],A=x.droppables[p.droppable.id],I={selection:m,borderBoxCenter:E.client.borderBox.center,offset:nr},R={client:I,page:{selection:sr(I.selection,y.scroll.initial),borderBoxCenter:sr(I.selection,y.scroll.initial),offset:sr(I.selection,y.scroll.diff.value)}},O=Eu(x.droppables).every(function(zt){return!zt.isFixedOnPage}),N=m0({draggable:E,home:A,draggables:x.draggables,viewport:y}),H=N.impact,Y=N.afterCritical,W={phase:"DRAGGING",isDragging:!0,critical:p,movementMode:b,dimensions:x,initial:R,current:R,isWindowScrollAllowed:O,impact:H,afterCritical:Y,onLiftImpact:H,viewport:y,scrollJumpRequest:null,forceShouldAnimate:null};return W}if(u.type==="COLLECTION_STARTING"){if(l.phase==="COLLECTING"||l.phase==="DROP_PENDING")return l;l.phase!=="DRAGGING"&&he(!1);var U=Oe({phase:"COLLECTING"},l,{phase:"COLLECTING"});return U}if(u.type==="PUBLISH_WHILE_DRAGGING")return l.phase==="COLLECTING"||l.phase==="DROP_PENDING"||he(!1),Cf({state:l,published:u.payload});if(u.type==="MOVE"){if(l.phase==="DROP_PENDING")return l;qi(l)||he(!1);var j=u.payload.client;return xi(j,l.current.client.selection)?l:Pl({state:l,clientSelection:j,impact:Nl(l)?l.impact:null})}if(u.type==="UPDATE_DROPPABLE_SCROLL"){if(l.phase==="DROP_PENDING"||l.phase==="COLLECTING")return Mu(l);qi(l)||he(!1);var ee=u.payload,Z=ee.id,ae=ee.newScroll,ne=l.dimensions.droppables[Z];if(!ne)return l;var fe=Ol(ne,ae);return wf(l,fe,!1)}if(u.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(l.phase==="DROP_PENDING")return l;qi(l)||he(!1);var be=u.payload,ge=be.id,Be=be.isEnabled,Ke=l.dimensions.droppables[ge];Ke||he(!1),Ke.isEnabled===Be&&he(!1);var Fe=Oe({},Ke,{isEnabled:Be});return wf(l,Fe,!0)}if(u.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(l.phase==="DROP_PENDING")return l;qi(l)||he(!1);var Yt=u.payload,Tt=Yt.id,Vt=Yt.isCombineEnabled,ir=l.dimensions.droppables[Tt];ir||he(!1),ir.isCombineEnabled===Vt&&he(!1);var $n=Oe({},ir,{isCombineEnabled:Vt});return wf(l,$n,!0)}if(u.type==="MOVE_BY_WINDOW_SCROLL"){if(l.phase==="DROP_PENDING"||l.phase==="DROP_ANIMATING")return l;qi(l)||he(!1),l.isWindowScrollAllowed||he(!1);var ri=u.payload.newScroll;if(xi(l.viewport.scroll.current,ri))return Mu(l);var ta=Iu(l.viewport,ri);return Nl(l)?yf({state:l,viewport:ta}):Pl({state:l,viewport:ta})}if(u.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!qi(l))return l;var ln=u.payload.maxScroll;if(xi(ln,l.viewport.scroll.max))return l;var En=Oe({},l.viewport,{scroll:Oe({},l.viewport.scroll,{max:ln})});return Oe({phase:"DRAGGING"},l,{viewport:En})}if(u.type==="MOVE_UP"||u.type==="MOVE_DOWN"||u.type==="MOVE_LEFT"||u.type==="MOVE_RIGHT"){if(l.phase==="COLLECTING"||l.phase==="DROP_PENDING")return l;l.phase!=="DRAGGING"&&he(!1);var Br=pf({state:l,type:u.type});return Br?Pl({state:l,impact:Br.impact,clientSelection:Br.clientSelection,scrollJumpRequest:Br.scrollJumpRequest}):l}if(u.type==="DROP_PENDING"){var $a=u.payload.reason;l.phase!=="COLLECTING"&&he(!1);var Pr=Oe({phase:"DROP_PENDING"},l,{phase:"DROP_PENDING",isWaiting:!0,reason:$a});return Pr}if(u.type==="DROP_ANIMATE"){var Ae=u.payload,$o=Ae.completed,Wo=Ae.dropDuration,Ue=Ae.newHomeClientOffset;l.phase==="DRAGGING"||l.phase==="DROP_PENDING"||he(!1);var Ze={phase:"DROP_ANIMATING",completed:$o,dropDuration:Wo,newHomeClientOffset:Ue,dimensions:l.dimensions};return Ze}if(u.type==="DROP_COMPLETE"){var ht=u.payload.completed;return{phase:"IDLE",completed:ht,shouldFlush:!1}}return l},Wx=function(u){return{type:"BEFORE_INITIAL_CAPTURE",payload:u}},C0=function(u){return{type:"LIFT",payload:u}},w0=function(u){return{type:"INITIAL_PUBLISH",payload:u}},kx=function(u){return{type:"PUBLISH_WHILE_DRAGGING",payload:u}},Ux=function(){return{type:"COLLECTION_STARTING",payload:null}},Yx=function(u){return{type:"UPDATE_DROPPABLE_SCROLL",payload:u}},Vx=function(u){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:u}},Xx=function(u){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:u}},bn=function(u){return{type:"MOVE",payload:u}},x0=function(u){return{type:"MOVE_BY_WINDOW_SCROLL",payload:u}},jx=function(u){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:u}},bf=function(){return{type:"MOVE_UP",payload:null}},b0=function(){return{type:"MOVE_DOWN",payload:null}},Sf=function(){return{type:"MOVE_RIGHT",payload:null}},Ef=function(){return{type:"MOVE_LEFT",payload:null}},_f=function(){return{type:"FLUSH",payload:null}},qx=function(u){return{type:"DROP_ANIMATE",payload:u}},Tf=function(u){return{type:"DROP_COMPLETE",payload:u}},S0=function(u){return{type:"DROP",payload:u}},Kx=function(u){return{type:"DROP_PENDING",payload:u}},E0=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Zx=function(l){return function(u){var f=u.getState,p=u.dispatch;return function(m){return function(y){if(y.type!=="LIFT"){m(y);return}var x=y.payload,b=x.id,E=x.clientSelection,A=x.movementMode,I=f();I.phase==="DROP_ANIMATING"&&p(Tf({completed:I.completed})),f().phase!=="IDLE"&&he(!1),p(_f()),p(Wx({draggableId:b,movementMode:A}));var R={shouldPublishImmediately:A==="SNAP"},O={draggableId:b,scrollOptions:R},N=l.startPublishing(O),H=N.critical,Y=N.dimensions,W=N.viewport;p(w0({critical:H,dimensions:Y,clientSelection:E,movementMode:A,viewport:W}))}}}},Qx=function(l){return function(){return function(u){return function(f){f.type==="INITIAL_PUBLISH"&&l.dragging(),f.type==="DROP_ANIMATE"&&l.dropping(f.payload.completed.result.reason),(f.type==="FLUSH"||f.type==="DROP_COMPLETE")&&l.resting(),u(f)}}}},Lf={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Fl={opacity:{drop:0,combining:.7},scale:{drop:.75}},Du={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Pa=Du.outOfTheWay+"s "+Lf.outOfTheWay,Hl={fluid:"opacity "+Pa,snap:"transform "+Pa+", opacity "+Pa,drop:function(u){var f=u+"s "+Lf.drop;return"transform "+f+", opacity "+f},outOfTheWay:"transform "+Pa,placeholder:"height "+Pa+", width "+Pa+", margin "+Pa},_0=function(u){return xi(u,nr)?null:"translate("+u.x+"px, "+u.y+"px)"},Rf={moveTo:_0,drop:function(u,f){var p=_0(u);return p?f?p+" scale("+Fl.scale.drop+")":p:null}},Bu=Du.minDropTime,T0=Du.maxDropTime,Jx=T0-Bu,L0=1500,eb=.6,R0=function(l){var u=l.current,f=l.destination,p=l.reason,m=Il(u,f);if(m<=0)return Bu;if(m>=L0)return T0;var y=m/L0,x=Bu+Jx*y,b=p==="CANCEL"?x*eb:x;return Number(b.toFixed(2))},A0=function(l){var u=l.impact,f=l.draggable,p=l.dimensions,m=l.viewport,y=l.afterCritical,x=p.draggables,b=p.droppables,E=tn(u),A=E?b[E]:null,I=b[f.descriptor.droppableId],R=g0({impact:u,draggable:f,draggables:x,afterCritical:y,droppable:A||I,viewport:m}),O=Jr(R,f.client.borderBox.center);return O},tb=function(l){var u=l.draggables,f=l.reason,p=l.lastImpact,m=l.home,y=l.viewport,x=l.onLiftImpact;if(!p.at||f!=="DROP"){var b=Ba({draggables:u,impact:x,destination:m,viewport:y,forceShouldAnimate:!0});return{impact:b,didDropInsideDroppable:!1}}if(p.at.type==="REORDER")return{impact:p,didDropInsideDroppable:!0};var E=Oe({},p,{displaced:Ui});return{impact:E,didDropInsideDroppable:!0}},rb=function(l){var u=l.getState,f=l.dispatch;return function(p){return function(m){if(m.type!=="DROP"){p(m);return}var y=u(),x=m.payload.reason;if(y.phase==="COLLECTING"){f(Kx({reason:x}));return}if(y.phase!=="IDLE"){var b=y.phase==="DROP_PENDING"&&y.isWaiting;b&&he(!1),y.phase==="DRAGGING"||y.phase==="DROP_PENDING"||he(!1);var E=y.critical,A=y.dimensions,I=A.draggables[y.critical.draggable.id],R=tb({reason:x,lastImpact:y.impact,afterCritical:y.afterCritical,onLiftImpact:y.onLiftImpact,home:y.dimensions.droppables[y.critical.droppable.id],viewport:y.viewport,draggables:y.dimensions.draggables}),O=R.impact,N=R.didDropInsideDroppable,H=N?df(O):null,Y=N?_u(O):null,W={index:E.draggable.index,droppableId:E.droppable.id},U={draggableId:I.descriptor.id,type:I.descriptor.type,source:W,reason:x,mode:y.movementMode,destination:H,combine:Y},j=A0({impact:O,draggable:I,dimensions:A,viewport:y.viewport,afterCritical:y.afterCritical}),ee={critical:y.critical,afterCritical:y.afterCritical,result:U,impact:O},Z=!xi(y.current.client.offset,j)||!!U.combine;if(!Z){f(Tf({completed:ee}));return}var ae=R0({current:y.current.client.offset,destination:j,reason:x}),ne={newHomeClientOffset:j,dropDuration:ae,completed:ee};f(qx(ne))}}}},I0=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function nb(l){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(f){f.target!==window&&f.target!==window.document||l()}}}function O0(l){var u=l.onWindowScroll;function f(){u(I0())}var p=wi(f),m=nb(p),y=ei;function x(){return y!==ei}function b(){x()&&he(!1),y=It(window,[m])}function E(){x()||he(!1),p.cancel(),y(),y=ei}return{start:b,stop:E,isActive:x}}var ib=function(u){return u.type==="DROP_COMPLETE"||u.type==="DROP_ANIMATE"||u.type==="FLUSH"},M0=function(l){var u=O0({onWindowScroll:function(p){l.dispatch(x0({newScroll:p}))}});return function(f){return function(p){!u.isActive()&&p.type==="INITIAL_PUBLISH"&&u.start(),u.isActive()&&ib(p)&&u.stop(),f(p)}}},D0=function(l){var u=!1,f=!1,p=setTimeout(function(){f=!0}),m=function(x){u||f||(u=!0,l(x),clearTimeout(p))};return m.wasCalled=function(){return u},m},B0=function(){var l=[],u=function(y){var x=Da(l,function(A){return A.timerId===y});x===-1&&he(!1);var b=l.splice(x,1),E=b[0];E.callback()},f=function(y){var x=setTimeout(function(){return u(x)}),b={timerId:x,callback:y};l.push(b)},p=function(){if(l.length){var y=[].concat(l);l.length=0,y.forEach(function(x){clearTimeout(x.timerId),x.callback()})}};return{add:f,flush:p}},ab=function(u,f){return u==null&&f==null?!0:u==null||f==null?!1:u.droppableId===f.droppableId&&u.index===f.index},P0=function(u,f){return u==null&&f==null?!0:u==null||f==null?!1:u.draggableId===f.draggableId&&u.droppableId===f.droppableId},ob=function(u,f){if(u===f)return!0;var p=u.draggable.id===f.draggable.id&&u.draggable.droppableId===f.draggable.droppableId&&u.draggable.type===f.draggable.type&&u.draggable.index===f.draggable.index,m=u.droppable.id===f.droppable.id&&u.droppable.type===f.droppable.type;return p&&m},Oo=function(u,f){f()},zl=function(u,f){return{draggableId:u.draggable.id,type:u.droppable.type,source:{droppableId:u.droppable.id,index:u.draggable.index},mode:f}},Af=function(u,f,p,m){if(!u){p(m(f));return}var y=D0(p),x={announce:y};u(f,x),y.wasCalled()||p(m(f))},lb=function(l,u){var f=B0(),p=null,m=function(O,N){p&&he(!1),Oo("onBeforeCapture",function(){var H=l().onBeforeCapture;if(H){var Y={draggableId:O,mode:N};H(Y)}})},y=function(O,N){p&&he(!1),Oo("onBeforeDragStart",function(){var H=l().onBeforeDragStart;H&&H(zl(O,N))})},x=function(O,N){p&&he(!1);var H=zl(O,N);p={mode:N,lastCritical:O,lastLocation:H.source,lastCombine:null},f.add(function(){Oo("onDragStart",function(){return Af(l().onDragStart,H,u,bt.onDragStart)})})},b=function(O,N){var H=df(N),Y=_u(N);p||he(!1);var W=!ob(O,p.lastCritical);W&&(p.lastCritical=O);var U=!ab(p.lastLocation,H);U&&(p.lastLocation=H);var j=!P0(p.lastCombine,Y);if(j&&(p.lastCombine=Y),!(!W&&!U&&!j)){var ee=Oe({},zl(O,p.mode),{combine:Y,destination:H});f.add(function(){Oo("onDragUpdate",function(){return Af(l().onDragUpdate,ee,u,bt.onDragUpdate)})})}},E=function(){p||he(!1),f.flush()},A=function(O){p||he(!1),p=null,Oo("onDragEnd",function(){return Af(l().onDragEnd,O,u,bt.onDragEnd)})},I=function(){if(p){var O=Oe({},zl(p.lastCritical,p.mode),{combine:null,destination:null,reason:"CANCEL"});A(O)}};return{beforeCapture:m,beforeStart:y,start:x,update:b,flush:E,drop:A,abort:I}},sb=function(l,u){var f=lb(l,u);return function(p){return function(m){return function(y){if(y.type==="BEFORE_INITIAL_CAPTURE"){f.beforeCapture(y.payload.draggableId,y.payload.movementMode);return}if(y.type==="INITIAL_PUBLISH"){var x=y.payload.critical;f.beforeStart(x,y.payload.movementMode),m(y),f.start(x,y.payload.movementMode);return}if(y.type==="DROP_COMPLETE"){var b=y.payload.completed.result;f.flush(),m(y),f.drop(b);return}if(m(y),y.type==="FLUSH"){f.abort();return}var E=p.getState();E.phase==="DRAGGING"&&f.update(E.critical,E.impact)}}}},N0=function(l){return function(u){return function(f){if(f.type!=="DROP_ANIMATION_FINISHED"){u(f);return}var p=l.getState();p.phase!=="DROP_ANIMATING"&&he(!1),l.dispatch(Tf({completed:p.completed}))}}},F0=function(l){var u=null,f=null;function p(){f&&(cancelAnimationFrame(f),f=null),u&&(u(),u=null)}return function(m){return function(y){if((y.type==="FLUSH"||y.type==="DROP_COMPLETE"||y.type==="DROP_ANIMATION_FINISHED")&&p(),m(y),y.type==="DROP_ANIMATE"){var x={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var E=l.getState();E.phase==="DROP_ANIMATING"&&l.dispatch(E0())}};f=requestAnimationFrame(function(){f=null,u=It(window,[x])})}}}},Mo=function(l){return function(){return function(u){return function(f){(f.type==="DROP_COMPLETE"||f.type==="FLUSH"||f.type==="DROP_ANIMATE")&&l.stopPublishing(),u(f)}}}},ub=function(l){var u=!1;return function(){return function(f){return function(p){if(p.type==="INITIAL_PUBLISH"){u=!0,l.tryRecordFocus(p.payload.critical.draggable.id),f(p),l.tryRestoreFocusRecorded();return}if(f(p),!!u){if(p.type==="FLUSH"){u=!1,l.tryRestoreFocusRecorded();return}if(p.type==="DROP_COMPLETE"){u=!1;var m=p.payload.completed.result;m.combine&&l.tryShiftRecord(m.draggableId,m.combine.draggableId),l.tryRestoreFocusRecorded()}}}}}},H0=function(u){return u.type==="DROP_COMPLETE"||u.type==="DROP_ANIMATE"||u.type==="FLUSH"},cb=function(l){return function(u){return function(f){return function(p){if(H0(p)){l.stop(),f(p);return}if(p.type==="INITIAL_PUBLISH"){f(p);var m=u.getState();m.phase!=="DRAGGING"&&he(!1),l.start(m);return}f(p),l.scroll(u.getState())}}}},z0=function(l){return function(u){return function(f){if(u(f),f.type==="PUBLISH_WHILE_DRAGGING"){var p=l.getState();p.phase==="DROP_PENDING"&&(p.isWaiting||l.dispatch(S0({reason:p.reason})))}}}},G0=sg,$0=function(l){var u=l.dimensionMarshal,f=l.focusMarshal,p=l.styleMarshal,m=l.getResponders,y=l.announce,x=l.autoScroller;return Ir(y0,G0(P(Qx(p),Mo(u),Zx(u),rb,N0,F0,z0,cb(x),M0,ub(f),sb(m,y))))},Pu=function(){return{additions:{},removals:{},modified:{}}};function db(l){var u=l.registry,f=l.callbacks,p=Pu(),m=null,y=function(){m||(f.collectionStarting(),m=requestAnimationFrame(function(){m=null;var I=p,R=I.additions,O=I.removals,N=I.modified,H=Object.keys(R).map(function(U){return u.draggable.getById(U).getDimension(nr)}).sort(function(U,j){return U.descriptor.index-j.descriptor.index}),Y=Object.keys(N).map(function(U){var j=u.droppable.getById(U),ee=j.callbacks.getScrollWhileDragging();return{droppableId:U,scroll:ee}}),W={additions:H,removals:Object.keys(O),modified:Y};p=Pu(),f.publish(W)}))},x=function(I){var R=I.descriptor.id;p.additions[R]=I,p.modified[I.descriptor.droppableId]=!0,p.removals[R]&&delete p.removals[R],y()},b=function(I){var R=I.descriptor;p.removals[R.id]=!0,p.modified[R.droppableId]=!0,p.additions[R.id]&&delete p.additions[R.id],y()},E=function(){m&&(cancelAnimationFrame(m),m=null,p=Pu())};return{add:x,remove:b,stop:E}}var W0=function(l){var u=l.scrollHeight,f=l.scrollWidth,p=l.height,m=l.width,y=Jr({x:f,y:u},{x:m,y:p}),x={x:Math.max(0,y.x),y:Math.max(0,y.y)};return x},k0=function(){var l=document.documentElement;return l||he(!1),l},U0=function(){var l=k0(),u=W0({scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth,width:l.clientWidth,height:l.clientHeight});return u},fb=function(){var l=I0(),u=U0(),f=l.y,p=l.x,m=k0(),y=m.clientWidth,x=m.clientHeight,b=p+y,E=f+x,A=Hn({top:f,left:p,right:b,bottom:E}),I={frame:A,scroll:{initial:l,current:l,max:u,diff:{value:nr,displacement:nr}}};return I},hb=function(l){var u=l.critical,f=l.scrollOptions,p=l.registry,m=fb(),y=m.scroll.current,x=u.droppable,b=p.droppable.getAllByType(x.type).map(function(R){return R.callbacks.getDimensionAndWatchScroll(y,f)}),E=p.draggable.getAllByType(u.draggable.type).map(function(R){return R.getDimension(y)}),A={draggables:e0(E),droppables:Jg(b)},I={dimensions:A,critical:u,viewport:m};return I};function Y0(l,u,f){if(f.descriptor.id===u.id||f.descriptor.type!==u.type)return!1;var p=l.droppable.getById(f.descriptor.droppableId);return p.descriptor.mode==="virtual"}var V0=function(l,u){var f=null,p=db({callbacks:{publish:u.publishWhileDragging,collectionStarting:u.collectionStarting},registry:l}),m=function(N,H){l.droppable.exists(N)||he(!1),f&&u.updateDroppableIsEnabled({id:N,isEnabled:H})},y=function(N,H){f&&(l.droppable.exists(N)||he(!1),u.updateDroppableIsCombineEnabled({id:N,isCombineEnabled:H}))},x=function(N,H){f&&(l.droppable.exists(N)||he(!1),u.updateDroppableScroll({id:N,newScroll:H}))},b=function(N,H){f&&l.droppable.getById(N).callbacks.scroll(H)},E=function(){if(f){p.stop();var N=f.critical.droppable;l.droppable.getAllByType(N.type).forEach(function(H){return H.callbacks.dragStopped()}),f.unsubscribe(),f=null}},A=function(N){f||he(!1);var H=f.critical.draggable;N.type==="ADDITION"&&Y0(l,H,N.value)&&p.add(N.value),N.type==="REMOVAL"&&Y0(l,H,N.value)&&p.remove(N.value)},I=function(N){f&&he(!1);var H=l.draggable.getById(N.draggableId),Y=l.droppable.getById(H.descriptor.droppableId),W={draggable:H.descriptor,droppable:Y.descriptor},U=l.subscribe(A);return f={critical:W,unsubscribe:U},hb({critical:W,registry:l,scrollOptions:N.scrollOptions})},R={updateDroppableIsEnabled:m,updateDroppableIsCombineEnabled:y,scrollDroppable:b,updateDroppableScroll:x,startPublishing:I,stopPublishing:E};return R},X0=function(l,u){return l.phase==="IDLE"?!0:l.phase!=="DROP_ANIMATING"||l.completed.result.draggableId===u?!1:l.completed.result.reason==="DROP"},vb=function(l){window.scrollBy(l.x,l.y)},Do=ft(function(l){return Eu(l).filter(function(u){return!(!u.isEnabled||!u.frame)})}),pb=function(u,f){var p=ki(Do(f),function(m){return m.frame||he(!1),f0(m.frame.pageMarginBox)(u)});return p},gb=function(l){var u=l.center,f=l.destination,p=l.droppables;if(f){var m=p[f];return m.frame?m:null}var y=pb(u,p);return y},Zi={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(u){return Math.pow(u,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},mb=function(l,u){var f=l[u.size]*Zi.startFromPercentage,p=l[u.size]*Zi.maxScrollAtPercentage,m={startScrollingFrom:f,maxScrollValueAt:p};return m},j0=function(l){var u=l.startOfRange,f=l.endOfRange,p=l.current,m=f-u;if(m===0)return 0;var y=p-u,x=y/m;return x},Gl=1,yb=function(l,u){if(l>u.startScrollingFrom)return 0;if(l<=u.maxScrollValueAt)return Zi.maxPixelScroll;if(l===u.startScrollingFrom)return Gl;var f=j0({startOfRange:u.maxScrollValueAt,endOfRange:u.startScrollingFrom,current:l}),p=1-f,m=Zi.maxPixelScroll*Zi.ease(p);return Math.ceil(m)},q0=Zi.durationDampening.accelerateAt,If=Zi.durationDampening.stopDampeningAt,Cb=function(l,u){var f=u,p=If,m=Date.now(),y=m-f;if(y>=If)return l;if(y<q0)return Gl;var x=j0({startOfRange:q0,endOfRange:p,current:y}),b=l*Zi.ease(x);return Math.ceil(b)},K0=function(l){var u=l.distanceToEdge,f=l.thresholds,p=l.dragStartTime,m=l.shouldUseTimeDampening,y=yb(u,f);return y===0?0:m?Math.max(Cb(y,p),Gl):y},Z0=function(l){var u=l.container,f=l.distanceToEdges,p=l.dragStartTime,m=l.axis,y=l.shouldUseTimeDampening,x=mb(u,m),b=f[m.end]<f[m.start];return b?K0({distanceToEdge:f[m.end],thresholds:x,dragStartTime:p,shouldUseTimeDampening:y}):-1*K0({distanceToEdge:f[m.start],thresholds:x,dragStartTime:p,shouldUseTimeDampening:y})},Na=function(l){var u=l.container,f=l.subject,p=l.proposedScroll,m=f.height>u.height,y=f.width>u.width;return!y&&!m?p:y&&m?null:{x:y?0:p.x,y:m?0:p.y}},Nu=Mr(function(l){return l===0?0:l}),Q0=function(l){var u=l.dragStartTime,f=l.container,p=l.subject,m=l.center,y=l.shouldUseTimeDampening,x={top:m.y-f.top,right:f.right-m.x,bottom:f.bottom-m.y,left:m.x-f.left},b=Z0({container:f,distanceToEdges:x,dragStartTime:u,axis:ff,shouldUseTimeDampening:y}),E=Z0({container:f,distanceToEdges:x,dragStartTime:u,axis:n0,shouldUseTimeDampening:y}),A=Nu({x:E,y:b});if(xi(A,nr))return null;var I=Na({container:f,subject:p,proposedScroll:A});return I?xi(I,nr)?null:I:null},wb=Mr(function(l){return l===0?0:l>0?1:-1}),Of=function(){var l=function(f,p){return f<0?f:f>p?f-p:0};return function(u){var f=u.current,p=u.max,m=u.change,y=sr(f,m),x={x:l(y.x,p.x),y:l(y.y,p.y)};return xi(x,nr)?null:x}}(),J0=function(u){var f=u.max,p=u.current,m=u.change,y={x:Math.max(p.x,f.x),y:Math.max(p.y,f.y)},x=wb(m),b=Of({max:y,current:p,change:x});return!b||x.x!==0&&b.x===0||x.y!==0&&b.y===0},Mf=function(u,f){return J0({current:u.scroll.current,max:u.scroll.max,change:f})},xb=function(u,f){if(!Mf(u,f))return null;var p=u.scroll.max,m=u.scroll.current;return Of({current:m,max:p,change:f})},rn=function(u,f){var p=u.frame;return p?J0({current:p.scroll.current,max:p.scroll.max,change:f}):!1},em=function(u,f){var p=u.frame;return!p||!rn(u,f)?null:Of({current:p.scroll.current,max:p.scroll.max,change:f})},bb=function(l){var u=l.viewport,f=l.subject,p=l.center,m=l.dragStartTime,y=l.shouldUseTimeDampening,x=Q0({dragStartTime:m,container:u.frame,subject:f,center:p,shouldUseTimeDampening:y});return x&&Mf(u,x)?x:null},tm=function(l){var u=l.droppable,f=l.subject,p=l.center,m=l.dragStartTime,y=l.shouldUseTimeDampening,x=u.frame;if(!x)return null;var b=Q0({dragStartTime:m,container:x.pageMarginBox,subject:f,center:p,shouldUseTimeDampening:y});return b&&rn(u,b)?b:null},Df=function(l){var u=l.state,f=l.dragStartTime,p=l.shouldUseTimeDampening,m=l.scrollWindow,y=l.scrollDroppable,x=u.current.page.borderBoxCenter,b=u.dimensions.draggables[u.critical.draggable.id],E=b.page.marginBox;if(u.isWindowScrollAllowed){var A=u.viewport,I=bb({dragStartTime:f,viewport:A,subject:E,center:x,shouldUseTimeDampening:p});if(I){m(I);return}}var R=gb({center:x,destination:tn(u.impact),droppables:u.dimensions.droppables});if(R){var O=tm({dragStartTime:f,droppable:R,subject:E,center:x,shouldUseTimeDampening:p});O&&y(R.descriptor.id,O)}},Sb=function(l){var u=l.scrollWindow,f=l.scrollDroppable,p=wi(u),m=wi(f),y=null,x=function(I){y||he(!1);var R=y,O=R.shouldUseTimeDampening,N=R.dragStartTime;Df({state:I,scrollWindow:p,scrollDroppable:m,dragStartTime:N,shouldUseTimeDampening:O})},b=function(I){y&&he(!1);var R=Date.now(),O=!1,N=function(){O=!0};Df({state:I,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:N,scrollDroppable:N}),y={dragStartTime:R,shouldUseTimeDampening:O},O&&x(I)},E=function(){y&&(p.cancel(),m.cancel(),y=null)};return{start:b,stop:E,scroll:x}},rm=function(l){var u=l.move,f=l.scrollDroppable,p=l.scrollWindow,m=function(A,I){var R=sr(A.current.client.selection,I);u({client:R})},y=function(A,I){if(!rn(A,I))return I;var R=em(A,I);if(!R)return f(A.descriptor.id,I),null;var O=Jr(I,R);f(A.descriptor.id,O);var N=Jr(I,O);return N},x=function(A,I,R){if(!A||!Mf(I,R))return R;var O=xb(I,R);if(!O)return p(R),null;var N=Jr(R,O);p(N);var H=Jr(R,N);return H},b=function(A){var I=A.scrollJumpRequest;if(I){var R=tn(A.impact);R||he(!1);var O=y(A.dimensions.droppables[R],I);if(O){var N=A.viewport,H=x(A.isWindowScrollAllowed,N,O);H&&m(A,H)}}};return b},nm=function(l){var u=l.scrollDroppable,f=l.scrollWindow,p=l.move,m=Sb({scrollWindow:f,scrollDroppable:u}),y=rm({move:p,scrollWindow:f,scrollDroppable:u}),x=function(A){if(A.phase==="DRAGGING"){if(A.movementMode==="FLUID"){m.scroll(A);return}A.scrollJumpRequest&&y(A)}},b={scroll:x,start:m.start,stop:m.stop};return b},Fa="data-rbd",nn=function(){var l=Fa+"-drag-handle";return{base:l,draggableId:l+"-draggable-id",contextId:l+"-context-id"}}(),$l=function(){var l=Fa+"-draggable";return{base:l,contextId:l+"-context-id",id:l+"-id"}}(),Eb=function(){var l=Fa+"-droppable";return{base:l,contextId:l+"-context-id",id:l+"-id"}}(),im={contextId:Fa+"-scroll-container-context-id"},am=function(u){return function(f){return"["+f+'="'+u+'"]'}},Wl=function(u,f){return u.map(function(p){var m=p.styles[f];return m?p.selector+" { "+m+" }":""}).join(" ")},Bf="pointer-events: none;",_b=function(l){var u=am(l),f=function(){var b=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:u(nn.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:b,dragging:Bf,dropAnimating:b}}}(),p=function(){var b=`
      transition: `+Hl.outOfTheWay+`;
    `;return{selector:u($l.contextId),styles:{dragging:b,dropAnimating:b,userCancel:b}}}(),m={selector:u(Eb.contextId),styles:{always:"overflow-anchor: none;"}},y={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},x=[p,f,m,y];return{always:Wl(x,"always"),resting:Wl(x,"resting"),dragging:Wl(x,"dragging"),dropAnimating:Wl(x,"dropAnimating"),userCancel:Wl(x,"userCancel")}},an=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?L.useLayoutEffect:L.useEffect,Pf=function(){var u=document.querySelector("head");return u||he(!1),u},Nf=function(u){var f=document.createElement("style");return u&&f.setAttribute("nonce",u),f.type="text/css",f};function Tb(l,u){var f=st(function(){return _b(l)},[l]),p=(0,L.useRef)(null),m=(0,L.useRef)(null),y=Re(ft(function(R){var O=m.current;O||he(!1),O.textContent=R}),[]),x=Re(function(R){var O=p.current;O||he(!1),O.textContent=R},[]);an(function(){!p.current&&!m.current||he(!1);var R=Nf(u),O=Nf(u);return p.current=R,m.current=O,R.setAttribute(Fa+"-always",l),O.setAttribute(Fa+"-dynamic",l),Pf().appendChild(R),Pf().appendChild(O),x(f.always),y(f.resting),function(){var N=function(Y){var W=Y.current;W||he(!1),Pf().removeChild(W),Y.current=null};N(p),N(m)}},[u,x,y,f.always,f.resting,l]);var b=Re(function(){return y(f.dragging)},[y,f.dragging]),E=Re(function(R){if(R==="DROP"){y(f.dropAnimating);return}y(f.userCancel)},[y,f.dropAnimating,f.userCancel]),A=Re(function(){m.current&&y(f.resting)},[y,f.resting]),I=st(function(){return{dragging:b,dropping:E,resting:A}},[b,E,A]);return I}var Ff=function(l){return l&&l.ownerDocument?l.ownerDocument.defaultView:window};function Bo(l){return l instanceof Ff(l).HTMLElement}function Hf(l,u){var f="["+nn.contextId+'="'+l+'"]',p=Qg(document.querySelectorAll(f));if(!p.length)return null;var m=ki(p,function(y){return y.getAttribute(nn.draggableId)===u});return!m||!Bo(m)?null:m}function Lb(l){var u=(0,L.useRef)({}),f=(0,L.useRef)(null),p=(0,L.useRef)(null),m=(0,L.useRef)(!1),y=Re(function(O,N){var H={id:O,focus:N};return u.current[O]=H,function(){var W=u.current,U=W[O];U!==H&&delete W[O]}},[]),x=Re(function(O){var N=Hf(l,O);N&&N!==document.activeElement&&N.focus()},[l]),b=Re(function(O,N){f.current===O&&(f.current=N)},[]),E=Re(function(){p.current||m.current&&(p.current=requestAnimationFrame(function(){p.current=null;var O=f.current;O&&x(O)}))},[x]),A=Re(function(O){f.current=null;var N=document.activeElement;N&&N.getAttribute(nn.draggableId)===O&&(f.current=O)},[]);an(function(){return m.current=!0,function(){m.current=!1;var O=p.current;O&&cancelAnimationFrame(O)}},[]);var I=st(function(){return{register:y,tryRecordFocus:A,tryRestoreFocusRecorded:E,tryShiftRecord:b}},[y,A,E,b]);return I}function zf(){var l={draggables:{},droppables:{}},u=[];function f(R){return u.push(R),function(){var N=u.indexOf(R);N!==-1&&u.splice(N,1)}}function p(R){u.length&&u.forEach(function(O){return O(R)})}function m(R){return l.draggables[R]||null}function y(R){var O=m(R);return O||he(!1),O}var x={register:function(O){l.draggables[O.descriptor.id]=O,p({type:"ADDITION",value:O})},update:function(O,N){var H=l.draggables[N.descriptor.id];H&&H.uniqueId===O.uniqueId&&(delete l.draggables[N.descriptor.id],l.draggables[O.descriptor.id]=O)},unregister:function(O){var N=O.descriptor.id,H=m(N);H&&O.uniqueId===H.uniqueId&&(delete l.draggables[N],p({type:"REMOVAL",value:O}))},getById:y,findById:m,exists:function(O){return!!m(O)},getAllByType:function(O){return Su(l.draggables).filter(function(N){return N.descriptor.type===O})}};function b(R){return l.droppables[R]||null}function E(R){var O=b(R);return O||he(!1),O}var A={register:function(O){l.droppables[O.descriptor.id]=O},unregister:function(O){var N=b(O.descriptor.id);N&&O.uniqueId===N.uniqueId&&delete l.droppables[O.descriptor.id]},getById:E,findById:b,exists:function(O){return!!b(O)},getAllByType:function(O){return Su(l.droppables).filter(function(N){return N.descriptor.type===O})}};function I(){l.draggables={},l.droppables={},u.length=0}return{draggable:x,droppable:A,subscribe:f,clean:I}}function Rb(){var l=st(zf,[]);return(0,L.useEffect)(function(){return function(){requestAnimationFrame(l.clean)}},[l]),l}var kl=L.createContext(null),Fu=function(){var l=document.body;return l||he(!1),l},Po={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},om=function(u){return"rbd-announcement-"+u};function Ab(l){var u=st(function(){return om(l)},[l]),f=(0,L.useRef)(null);(0,L.useEffect)(function(){var y=document.createElement("div");return f.current=y,y.id=u,y.setAttribute("aria-live","assertive"),y.setAttribute("aria-atomic","true"),Oe(y.style,Po),Fu().appendChild(y),function(){setTimeout(function(){var E=Fu();E.contains(y)&&E.removeChild(y),y===f.current&&(f.current=null)})}},[u]);var p=Re(function(m){var y=f.current;if(y){y.textContent=m;return}},[]);return p}var lm=0,sm={separator:"::"};function Hu(l,u){return u===void 0&&(u=sm),st(function(){return""+l+u.separator+lm++},[u.separator,l])}function um(l){var u=l.contextId,f=l.uniqueId;return"rbd-hidden-text-"+u+"-"+f}function Ib(l){var u=l.contextId,f=l.text,p=Hu("hidden-text",{separator:"-"}),m=st(function(){return um({contextId:u,uniqueId:p})},[p,u]);return(0,L.useEffect)(function(){var x=document.createElement("div");return x.id=m,x.textContent=f,x.style.display="none",Fu().appendChild(x),function(){var E=Fu();E.contains(x)&&E.removeChild(x)}},[m,f]),m}var zu=L.createContext(null);function cm(l){var u=(0,L.useRef)(l);return(0,L.useEffect)(function(){u.current=l}),u}function Ob(){var l=null;function u(){return!!l}function f(x){return x===l}function p(x){l&&he(!1);var b={abandon:x};return l=b,b}function m(){l||he(!1),l=null}function y(){l&&(l.abandon(),m())}return{isClaimed:u,isActive:f,claim:p,release:m,tryAbandon:y}}var Mb=9,Ha=13,Sn=27,dm=32,Db=33,Bb=34,Pb=35,Gu=36,Gf=37,Nb=38,Fb=39,Hb=40,Ul,fm=(Ul={},Ul[Ha]=!0,Ul[Mb]=!0,Ul),hm=function(l){fm[l.keyCode]&&l.preventDefault()},Yl=function(){var l="visibilitychange";if(typeof document=="undefined")return l;var u=[l,"ms"+l,"webkit"+l,"moz"+l,"o"+l],f=ki(u,function(p){return"on"+p in document});return f||l}(),vm=0,pm=5;function zb(l,u){return Math.abs(u.x-l.x)>=pm||Math.abs(u.y-l.y)>=pm}var gm={type:"IDLE"};function Gb(l){var u=l.cancel,f=l.completed,p=l.getPhase,m=l.setPhase;return[{eventName:"mousemove",fn:function(x){var b=x.button,E=x.clientX,A=x.clientY;if(b===vm){var I={x:E,y:A},R=p();if(R.type==="DRAGGING"){x.preventDefault(),R.actions.move(I);return}R.type!=="PENDING"&&he(!1);var O=R.point;if(zb(O,I)){x.preventDefault();var N=R.actions.fluidLift(I);m({type:"DRAGGING",actions:N})}}}},{eventName:"mouseup",fn:function(x){var b=p();if(b.type!=="DRAGGING"){u();return}x.preventDefault(),b.actions.drop({shouldBlockNextClick:!0}),f()}},{eventName:"mousedown",fn:function(x){p().type==="DRAGGING"&&x.preventDefault(),u()}},{eventName:"keydown",fn:function(x){var b=p();if(b.type==="PENDING"){u();return}if(x.keyCode===Sn){x.preventDefault(),u();return}hm(x)}},{eventName:"resize",fn:u},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){p().type==="PENDING"&&u()}},{eventName:"webkitmouseforcedown",fn:function(x){var b=p();if(b.type==="IDLE"&&he(!1),b.actions.shouldRespectForcePress()){u();return}x.preventDefault()}},{eventName:Yl,fn:u}]}function $b(l){var u=(0,L.useRef)(gm),f=(0,L.useRef)(ei),p=st(function(){return{eventName:"mousedown",fn:function(R){if(!R.defaultPrevented&&R.button===vm&&!(R.ctrlKey||R.metaKey||R.shiftKey||R.altKey)){var O=l.findClosestDraggableId(R);if(O){var N=l.tryGetLock(O,x,{sourceEvent:R});if(N){R.preventDefault();var H={x:R.clientX,y:R.clientY};f.current(),A(N,H)}}}}}},[l]),m=st(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(R){if(!R.defaultPrevented){var O=l.findClosestDraggableId(R);if(O){var N=l.findOptionsForDraggable(O);N&&(N.shouldRespectForcePress||l.canGetLock(O)&&R.preventDefault())}}}}},[l]),y=Re(function(){var R={passive:!1,capture:!0};f.current=It(window,[m,p],R)},[m,p]),x=Re(function(){var I=u.current;I.type!=="IDLE"&&(u.current=gm,f.current(),y())},[y]),b=Re(function(){var I=u.current;x(),I.type==="DRAGGING"&&I.actions.cancel({shouldBlockNextClick:!0}),I.type==="PENDING"&&I.actions.abort()},[x]),E=Re(function(){var R={capture:!0,passive:!1},O=Gb({cancel:b,completed:x,getPhase:function(){return u.current},setPhase:function(H){u.current=H}});f.current=It(window,O,R)},[b,x]),A=Re(function(R,O){u.current.type!=="IDLE"&&he(!1),u.current={type:"PENDING",point:O,actions:R},E()},[E]);an(function(){return y(),function(){f.current()}},[y])}var No;function Wb(){}var kb=(No={},No[Bb]=!0,No[Db]=!0,No[Gu]=!0,No[Pb]=!0,No);function Ub(l,u){function f(){u(),l.cancel()}function p(){u(),l.drop()}return[{eventName:"keydown",fn:function(y){if(y.keyCode===Sn){y.preventDefault(),f();return}if(y.keyCode===dm){y.preventDefault(),p();return}if(y.keyCode===Hb){y.preventDefault(),l.moveDown();return}if(y.keyCode===Nb){y.preventDefault(),l.moveUp();return}if(y.keyCode===Fb){y.preventDefault(),l.moveRight();return}if(y.keyCode===Gf){y.preventDefault(),l.moveLeft();return}if(kb[y.keyCode]){y.preventDefault();return}hm(y)}},{eventName:"mousedown",fn:f},{eventName:"mouseup",fn:f},{eventName:"click",fn:f},{eventName:"touchstart",fn:f},{eventName:"resize",fn:f},{eventName:"wheel",fn:f,options:{passive:!0}},{eventName:Yl,fn:f}]}function Yb(l){var u=(0,L.useRef)(Wb),f=st(function(){return{eventName:"keydown",fn:function(y){if(y.defaultPrevented||y.keyCode!==dm)return;var x=l.findClosestDraggableId(y);if(!x)return;var b=l.tryGetLock(x,I,{sourceEvent:y});if(!b)return;y.preventDefault();var E=!0,A=b.snapLift();u.current();function I(){E||he(!1),E=!1,u.current(),p()}u.current=It(window,Ub(A,I),{capture:!0,passive:!1})}}},[l]),p=Re(function(){var y={passive:!1,capture:!0};u.current=It(window,[f],y)},[f]);an(function(){return p(),function(){u.current()}},[p])}var $f={type:"IDLE"},Vb=120,Xb=.15;function jb(l){var u=l.cancel,f=l.getPhase;return[{eventName:"orientationchange",fn:u},{eventName:"resize",fn:u},{eventName:"contextmenu",fn:function(m){m.preventDefault()}},{eventName:"keydown",fn:function(m){if(f().type!=="DRAGGING"){u();return}m.keyCode===Sn&&m.preventDefault(),u()}},{eventName:Yl,fn:u}]}function qb(l){var u=l.cancel,f=l.completed,p=l.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(y){var x=p();if(x.type!=="DRAGGING"){u();return}x.hasMoved=!0;var b=y.touches[0],E=b.clientX,A=b.clientY,I={x:E,y:A};y.preventDefault(),x.actions.move(I)}},{eventName:"touchend",fn:function(y){var x=p();if(x.type!=="DRAGGING"){u();return}y.preventDefault(),x.actions.drop({shouldBlockNextClick:!0}),f()}},{eventName:"touchcancel",fn:function(y){if(p().type!=="DRAGGING"){u();return}y.preventDefault(),u()}},{eventName:"touchforcechange",fn:function(y){var x=p();x.type==="IDLE"&&he(!1);var b=y.touches[0];if(b){var E=b.force>=Xb;if(E){var A=x.actions.shouldRespectForcePress();if(x.type==="PENDING"){A&&u();return}if(A){if(x.hasMoved){y.preventDefault();return}u();return}y.preventDefault()}}}},{eventName:Yl,fn:u}]}function Kb(l){var u=(0,L.useRef)($f),f=(0,L.useRef)(ei),p=Re(function(){return u.current},[]),m=Re(function(N){u.current=N},[]),y=st(function(){return{eventName:"touchstart",fn:function(N){if(!N.defaultPrevented){var H=l.findClosestDraggableId(N);if(H){var Y=l.tryGetLock(H,b,{sourceEvent:N});if(Y){var W=N.touches[0],U=W.clientX,j=W.clientY,ee={x:U,y:j};f.current(),R(Y,ee)}}}}}},[l]),x=Re(function(){var N={capture:!0,passive:!1};f.current=It(window,[y],N)},[y]),b=Re(function(){var O=u.current;O.type!=="IDLE"&&(O.type==="PENDING"&&clearTimeout(O.longPressTimerId),m($f),f.current(),x())},[x,m]),E=Re(function(){var O=u.current;b(),O.type==="DRAGGING"&&O.actions.cancel({shouldBlockNextClick:!0}),O.type==="PENDING"&&O.actions.abort()},[b]),A=Re(function(){var N={capture:!0,passive:!1},H={cancel:E,completed:b,getPhase:p},Y=It(window,qb(H),N),W=It(window,jb(H),N);f.current=function(){Y(),W()}},[E,p,b]),I=Re(function(){var N=p();N.type!=="PENDING"&&he(!1);var H=N.actions.fluidLift(N.point);m({type:"DRAGGING",actions:H,hasMoved:!1})},[p,m]),R=Re(function(N,H){p().type!=="IDLE"&&he(!1);var Y=setTimeout(I,Vb);m({type:"PENDING",point:H,actions:N,longPressTimerId:Y}),A()},[A,p,m,I]);an(function(){return x(),function(){f.current();var H=p();H.type==="PENDING"&&(clearTimeout(H.longPressTimerId),m($f))}},[p,x,m]),an(function(){var N=It(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return N},[])}var Zb={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function mm(l,u){if(u==null)return!1;var f=!!Zb[u.tagName.toLowerCase()];if(f)return!0;var p=u.getAttribute("contenteditable");return p==="true"||p===""?!0:u===l?!1:mm(l,u.parentElement)}function Qb(l,u){var f=u.target;return Bo(f)?mm(l,f):!1}var ym=function(l){return Hn(l.getBoundingClientRect()).center};function Jb(l){return l instanceof Ff(l).Element}var eS=function(){var l="matches";if(typeof document=="undefined")return l;var u=[l,"msMatchesSelector","webkitMatchesSelector"],f=ki(u,function(p){return p in Element.prototype});return f||l}();function Wf(l,u){return l==null?null:l[eS](u)?l:Wf(l.parentElement,u)}function tS(l,u){return l.closest?l.closest(u):Wf(l,u)}function Cm(l){return"["+nn.contextId+'="'+l+'"]'}function rS(l,u){var f=u.target;if(!Jb(f))return null;var p=Cm(l),m=tS(f,p);return!m||!Bo(m)?null:m}function nS(l,u){var f=rS(l,u);return f?f.getAttribute(nn.draggableId):null}function wm(l,u){var f="["+$l.contextId+'="'+l+'"]',p=Qg(document.querySelectorAll(f)),m=ki(p,function(y){return y.getAttribute($l.id)===u});return!m||!Bo(m)?null:m}function iS(l){l.preventDefault()}function Vl(l){var u=l.expected,f=l.phase,p=l.isLockActive;return l.shouldWarn,!(!p()||u!==f)}function xm(l){var u=l.lockAPI,f=l.store,p=l.registry,m=l.draggableId;if(u.isClaimed())return!1;var y=p.draggable.findById(m);return!(!y||!y.options.isEnabled||!X0(f.getState(),m))}function aS(l){var u=l.lockAPI,f=l.contextId,p=l.store,m=l.registry,y=l.draggableId,x=l.forceSensorStop,b=l.sourceEvent,E=xm({lockAPI:u,store:p,registry:m,draggableId:y});if(!E)return null;var A=m.draggable.getById(y),I=wm(f,A.descriptor.id);if(!I||b&&!A.options.canDragInteractiveElements&&Qb(I,b))return null;var R=u.claim(x||ei),O="PRE_DRAG";function N(){return A.options.shouldRespectForcePress}function H(){return u.isActive(R)}function Y(ne,fe){Vl({expected:ne,phase:O,isLockActive:H,shouldWarn:!0})&&p.dispatch(fe())}var W=Y.bind(null,"DRAGGING");function U(ne){function fe(){u.release(),O="COMPLETED"}O!=="PRE_DRAG"&&(fe(),O!=="PRE_DRAG"&&he(!1)),p.dispatch(C0(ne.liftActionArgs)),O="DRAGGING";function be(ge,Be){if(Be===void 0&&(Be={shouldBlockNextClick:!1}),ne.cleanup(),Be.shouldBlockNextClick){var Ke=It(window,[{eventName:"click",fn:iS,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(Ke)}fe(),p.dispatch(S0({reason:ge}))}return Oe({isActive:function(){return Vl({expected:"DRAGGING",phase:O,isLockActive:H,shouldWarn:!1})},shouldRespectForcePress:N,drop:function(Be){return be("DROP",Be)},cancel:function(Be){return be("CANCEL",Be)}},ne.actions)}function j(ne){var fe=wi(function(ge){W(function(){return bn({client:ge})})}),be=U({liftActionArgs:{id:y,clientSelection:ne,movementMode:"FLUID"},cleanup:function(){return fe.cancel()},actions:{move:fe}});return Oe({},be,{move:fe})}function ee(){var ne={moveUp:function(){return W(bf)},moveRight:function(){return W(Sf)},moveDown:function(){return W(b0)},moveLeft:function(){return W(Ef)}};return U({liftActionArgs:{id:y,clientSelection:ym(I),movementMode:"SNAP"},cleanup:ei,actions:ne})}function Z(){var ne=Vl({expected:"PRE_DRAG",phase:O,isLockActive:H,shouldWarn:!0});ne&&u.release()}var ae={isActive:function(){return Vl({expected:"PRE_DRAG",phase:O,isLockActive:H,shouldWarn:!1})},shouldRespectForcePress:N,fluidLift:j,snapLift:ee,abort:Z};return ae}var oS=[$b,Yb,Kb];function bm(l){var u=l.contextId,f=l.store,p=l.registry,m=l.customSensors,y=l.enableDefaultSensors,x=[].concat(y?oS:[],m||[]),b=(0,L.useState)(function(){return Ob()})[0],E=Re(function(j,ee){j.isDragging&&!ee.isDragging&&b.tryAbandon()},[b]);an(function(){var j=f.getState(),ee=f.subscribe(function(){var Z=f.getState();E(j,Z),j=Z});return ee},[b,f,E]),an(function(){return b.tryAbandon},[b.tryAbandon]);for(var A=Re(function(U){return xm({lockAPI:b,registry:p,store:f,draggableId:U})},[b,p,f]),I=Re(function(U,j,ee){return aS({lockAPI:b,registry:p,contextId:u,store:f,draggableId:U,forceSensorStop:j,sourceEvent:ee&&ee.sourceEvent?ee.sourceEvent:null})},[u,b,p,f]),R=Re(function(U){return nS(u,U)},[u]),O=Re(function(U){var j=p.draggable.findById(U);return j?j.options:null},[p.draggable]),N=Re(function(){b.isClaimed()&&(b.tryAbandon(),f.getState().phase!=="IDLE"&&f.dispatch(_f()))},[b,f]),H=Re(b.isClaimed,[b]),Y=st(function(){return{canGetLock:A,tryGetLock:I,findClosestDraggableId:R,findOptionsForDraggable:O,tryReleaseLock:N,isLockClaimed:H}},[A,I,R,O,N,H]),W=0;W<x.length;W++)x[W](Y)}var lS=function(u){return{onBeforeCapture:u.onBeforeCapture,onBeforeDragStart:u.onBeforeDragStart,onDragStart:u.onDragStart,onDragEnd:u.onDragEnd,onDragUpdate:u.onDragUpdate}};function Xl(l){return l.current||he(!1),l.current}function sS(l){var u=l.contextId,f=l.setCallbacks,p=l.sensors,m=l.nonce,y=l.dragHandleUsageInstructions,x=(0,L.useRef)(null),b=cm(l),E=Re(function(){return lS(b.current)},[b]),A=Ab(u),I=Ib({contextId:u,text:y}),R=Tb(u,m),O=Re(function(ge){Xl(x).dispatch(ge)},[]),N=st(function(){return lg({publishWhileDragging:kx,updateDroppableScroll:Yx,updateDroppableIsEnabled:Vx,updateDroppableIsCombineEnabled:Xx,collectionStarting:Ux},O)},[O]),H=Rb(),Y=st(function(){return V0(H,N)},[H,N]),W=st(function(){return nm(Oe({scrollWindow:vb,scrollDroppable:Y.scrollDroppable},lg({move:bn},O)))},[Y.scrollDroppable,O]),U=Lb(u),j=st(function(){return $0({announce:A,autoScroller:W,dimensionMarshal:Y,focusMarshal:U,getResponders:E,styleMarshal:R})},[A,W,Y,U,E,R]);x.current=j;var ee=Re(function(){var ge=Xl(x),Be=ge.getState();Be.phase!=="IDLE"&&ge.dispatch(_f())},[]),Z=Re(function(){var ge=Xl(x).getState();return ge.isDragging||ge.phase==="DROP_ANIMATING"},[]),ae=st(function(){return{isDragging:Z,tryAbort:ee}},[Z,ee]);f(ae);var ne=Re(function(ge){return X0(Xl(x).getState(),ge)},[]),fe=Re(function(){return qi(Xl(x).getState())},[]),be=st(function(){return{marshal:Y,focus:U,contextId:u,canLift:ne,isMovementAllowed:fe,dragHandleUsageInstructionsId:I,registry:H}},[u,Y,I,U,ne,fe,H]);return bm({contextId:u,store:j,registry:H,customSensors:p,enableDefaultSensors:l.enableDefaultSensors!==!1}),(0,L.useEffect)(function(){return ee},[ee]),L.createElement(zu.Provider,{value:be},L.createElement(x2,{context:kl,store:j},l.children))}var uS=0;function Sm(){return st(function(){return""+uS++},[])}function cS(l){var u=Sm(),f=l.dragHandleUsageInstructions||bt.dragHandleUsageInstructions;return L.createElement(J2,null,function(p){return L.createElement(sS,{nonce:l.nonce,contextId:u,setCallbacks:p,dragHandleUsageInstructions:f,enableDefaultSensors:l.enableDefaultSensors,sensors:l.sensors,onBeforeCapture:l.onBeforeCapture,onBeforeDragStart:l.onBeforeDragStart,onDragStart:l.onDragStart,onDragUpdate:l.onDragUpdate,onDragEnd:l.onDragEnd},l.children)})}var Em=function(u){return function(f){return u===f}},dS=Em("scroll"),_m=Em("auto"),Tm=function(u,f){return f(u.overflowX)||f(u.overflowY)},fS=function(u){var f=window.getComputedStyle(u),p={overflowX:f.overflowX,overflowY:f.overflowY};return Tm(p,dS)||Tm(p,_m)},hS=function(){return!1},vS=function l(u){return u==null?null:u===document.body?hS()?u:null:u===document.documentElement?null:fS(u)?u:l(u.parentElement)},kf=function(l){return{x:l.scrollLeft,y:l.scrollTop}},pS=function l(u){if(!u)return!1;var f=window.getComputedStyle(u);return f.position==="fixed"?!0:l(u.parentElement)},gS=function(l){var u=vS(l),f=pS(l);return{closestScrollable:u,isFixedOnPage:f}},mS=function(l){var u=l.descriptor,f=l.isEnabled,p=l.isCombineEnabled,m=l.isFixedOnPage,y=l.direction,x=l.client,b=l.page,E=l.closest,A=function(){if(!E)return null;var N=E.scrollSize,H=E.client,Y=W0({scrollHeight:N.scrollHeight,scrollWidth:N.scrollWidth,height:H.paddingBox.height,width:H.paddingBox.width});return{pageMarginBox:E.page.marginBox,frameClient:H,scrollSize:N,shouldClipSubject:E.shouldClipSubject,scroll:{initial:E.scroll,current:E.scroll,max:Y,diff:{value:nr,displacement:nr}}}}(),I=y==="vertical"?ff:n0,R=Ro({page:b,withPlaceholder:null,axis:I,frame:A}),O={descriptor:u,isCombineEnabled:p,isFixedOnPage:m,axis:I,isEnabled:f,client:x,page:b,frame:A,subject:R};return O},yS=function(u,f){var p=$g(u);if(!f||u!==f)return p;var m=p.paddingBox.top-f.scrollTop,y=p.paddingBox.left-f.scrollLeft,x=m+f.scrollHeight,b=y+f.scrollWidth,E={top:m,right:b,bottom:x,left:y},A=lf(E,p.border),I=uf({borderBox:A,margin:p.margin,border:p.border,padding:p.padding});return I},CS=function(l){var u=l.ref,f=l.descriptor,p=l.env,m=l.windowScroll,y=l.direction,x=l.isDropDisabled,b=l.isCombineEnabled,E=l.shouldClipSubject,A=p.closestScrollable,I=yS(u,A),R=wu(I,m),O=function(){if(!A)return null;var H=$g(A),Y={scrollHeight:A.scrollHeight,scrollWidth:A.scrollWidth};return{client:H,page:wu(H,m),scroll:kf(A),scrollSize:Y,shouldClipSubject:E}}(),N=mS({descriptor:f,isEnabled:!x,isCombineEnabled:b,isFixedOnPage:p.isFixedOnPage,direction:y,client:I,page:R,closest:O});return N},wS={passive:!1},xS={passive:!0},Lm=function(l){return l.shouldPublishImmediately?wS:xS};function $u(l){var u=(0,L.useContext)(l);return u||he(!1),u}var Wu=function(u){return u&&u.env.closestScrollable||null};function bS(l){var u=(0,L.useRef)(null),f=$u(zu),p=Hu("droppable"),m=f.registry,y=f.marshal,x=cm(l),b=st(function(){return{id:l.droppableId,type:l.type,mode:l.mode}},[l.droppableId,l.mode,l.type]),E=(0,L.useRef)(b),A=st(function(){return ft(function(Z,ae){u.current||he(!1);var ne={x:Z,y:ae};y.updateDroppableScroll(b.id,ne)})},[b.id,y]),I=Re(function(){var Z=u.current;return!Z||!Z.env.closestScrollable?nr:kf(Z.env.closestScrollable)},[]),R=Re(function(){var Z=I();A(Z.x,Z.y)},[I,A]),O=st(function(){return wi(R)},[R]),N=Re(function(){var Z=u.current,ae=Wu(Z);Z&&ae||he(!1);var ne=Z.scrollOptions;if(ne.shouldPublishImmediately){R();return}O()},[O,R]),H=Re(function(Z,ae){u.current&&he(!1);var ne=x.current,fe=ne.getDroppableRef();fe||he(!1);var be=gS(fe),ge={ref:fe,descriptor:b,env:be,scrollOptions:ae};u.current=ge;var Be=CS({ref:fe,descriptor:b,env:be,windowScroll:Z,direction:ne.direction,isDropDisabled:ne.isDropDisabled,isCombineEnabled:ne.isCombineEnabled,shouldClipSubject:!ne.ignoreContainerClipping}),Ke=be.closestScrollable;return Ke&&(Ke.setAttribute(im.contextId,f.contextId),Ke.addEventListener("scroll",N,Lm(ge.scrollOptions))),Be},[f.contextId,b,N,x]),Y=Re(function(){var Z=u.current,ae=Wu(Z);return Z&&ae||he(!1),kf(ae)},[]),W=Re(function(){var Z=u.current;Z||he(!1);var ae=Wu(Z);u.current=null,ae&&(O.cancel(),ae.removeAttribute(im.contextId),ae.removeEventListener("scroll",N,Lm(Z.scrollOptions)))},[N,O]),U=Re(function(Z){var ae=u.current;ae||he(!1);var ne=Wu(ae);ne||he(!1),ne.scrollTop+=Z.y,ne.scrollLeft+=Z.x},[]),j=st(function(){return{getDimensionAndWatchScroll:H,getScrollWhileDragging:Y,dragStopped:W,scroll:U}},[W,H,Y,U]),ee=st(function(){return{uniqueId:p,descriptor:b,callbacks:j}},[j,b,p]);an(function(){return E.current=ee.descriptor,m.droppable.register(ee),function(){u.current&&W(),m.droppable.unregister(ee)}},[j,b,W,ee,y,m.droppable]),an(function(){u.current&&y.updateDroppableIsEnabled(E.current.id,!l.isDropDisabled)},[l.isDropDisabled,y]),an(function(){u.current&&y.updateDroppableIsCombineEnabled(E.current.id,l.isCombineEnabled)},[l.isCombineEnabled,y])}function mt(){}var on={width:0,height:0,margin:bu},SS=function(u){var f=u.isAnimatingOpenOnMount,p=u.placeholder,m=u.animate;return f||m==="close"?on:{height:p.client.borderBox.height,width:p.client.borderBox.width,margin:p.client.margin}},Fo=function(u){var f=u.isAnimatingOpenOnMount,p=u.placeholder,m=u.animate,y=SS({isAnimatingOpenOnMount:f,placeholder:p,animate:m});return{display:p.display,boxSizing:"border-box",width:y.width,height:y.height,marginTop:y.margin.top,marginRight:y.margin.right,marginBottom:y.margin.bottom,marginLeft:y.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:m!=="none"?Hl.placeholder:null}};function ES(l){var u=(0,L.useRef)(null),f=Re(function(){u.current&&(clearTimeout(u.current),u.current=null)},[]),p=l.animate,m=l.onTransitionEnd,y=l.onClose,x=l.contextId,b=(0,L.useState)(l.animate==="open"),E=b[0],A=b[1];(0,L.useEffect)(function(){return E?p!=="open"?(f(),A(!1),mt):u.current?mt:(u.current=setTimeout(function(){u.current=null,A(!1)}),f):mt},[p,E,f]);var I=Re(function(O){O.propertyName==="height"&&(m(),p==="close"&&y())},[p,y,m]),R=Fo({isAnimatingOpenOnMount:E,animate:l.animate,placeholder:l.placeholder});return L.createElement(l.placeholder.tagName,{style:R,"data-rbd-placeholder-context-id":x,onTransitionEnd:I,ref:l.innerRef})}var _S=L.memo(ES),jl=L.createContext(null),TS=function(l){Qe(u,l);function u(){for(var p,m=arguments.length,y=new Array(m),x=0;x<m;x++)y[x]=arguments[x];return p=l.call.apply(l,[this].concat(y))||this,p.state={isVisible:!!p.props.on,data:p.props.on,animate:p.props.shouldAnimate&&p.props.on?"open":"none"},p.onClose=function(){p.state.animate==="close"&&p.setState({isVisible:!1})},p}u.getDerivedStateFromProps=function(m,y){return m.shouldAnimate?m.on?{isVisible:!0,data:m.on,animate:"open"}:y.isVisible?{isVisible:!0,data:y.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!m.on,data:m.on,animate:"none"}};var f=u.prototype;return f.render=function(){if(!this.state.isVisible)return null;var m={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(m)},u}(L.PureComponent),Rm={dragging:5e3,dropAnimating:4500},LS=function(u,f){return f?Hl.drop(f.duration):u?Hl.snap:Hl.fluid},RS=function(u,f){return u?f?Fl.opacity.drop:Fl.opacity.combining:null},AS=function(u){return u.forceShouldAnimate!=null?u.forceShouldAnimate:u.mode==="SNAP"};function IS(l){var u=l.dimension,f=u.client,p=l.offset,m=l.combineWith,y=l.dropping,x=!!m,b=AS(l),E=!!y,A=E?Rf.drop(p,x):Rf.moveTo(p),I={position:"fixed",top:f.marginBox.top,left:f.marginBox.left,boxSizing:"border-box",width:f.borderBox.width,height:f.borderBox.height,transition:LS(b,y),transform:A,opacity:RS(x,E),zIndex:E?Rm.dropAnimating:Rm.dragging,pointerEvents:"none"};return I}function zn(l){return{transform:Rf.moveTo(l.offset),transition:l.shouldAnimateDisplacement?null:"none"}}function Ho(l){return l.type==="DRAGGING"?IS(l):zn(l)}function OS(l,u,f){f===void 0&&(f=nr);var p=window.getComputedStyle(u),m=u.getBoundingClientRect(),y=Gg(m,p),x=wu(y,f),b={client:y,tagName:u.tagName.toLowerCase(),display:p.display},E={x:y.marginBox.width,y:y.marginBox.height},A={descriptor:l,placeholder:b,displaceBy:E,client:y,page:x};return A}function MS(l){var u=Hu("draggable"),f=l.descriptor,p=l.registry,m=l.getDraggableRef,y=l.canDragInteractiveElements,x=l.shouldRespectForcePress,b=l.isEnabled,E=st(function(){return{canDragInteractiveElements:y,shouldRespectForcePress:x,isEnabled:b}},[y,b,x]),A=Re(function(N){var H=m();return H||he(!1),OS(f,H,N)},[f,m]),I=st(function(){return{uniqueId:u,descriptor:f,options:E,getDimension:A}},[f,A,E,u]),R=(0,L.useRef)(I),O=(0,L.useRef)(!0);an(function(){return p.draggable.register(R.current),function(){return p.draggable.unregister(R.current)}},[p.draggable]),an(function(){if(O.current){O.current=!1;return}var N=R.current;R.current=I,p.draggable.update(I,N)},[I,p.draggable])}function DS(l){l.preventDefault()}function za(l){var u=(0,L.useRef)(null),f=Re(function(ge){u.current=ge},[]),p=Re(function(){return u.current},[]),m=$u(zu),y=m.contextId,x=m.dragHandleUsageInstructionsId,b=m.registry,E=$u(jl),A=E.type,I=E.droppableId,R=st(function(){return{id:l.draggableId,index:l.index,type:A,droppableId:I}},[l.draggableId,l.index,A,I]),O=l.children,N=l.draggableId,H=l.isEnabled,Y=l.shouldRespectForcePress,W=l.canDragInteractiveElements,U=l.isClone,j=l.mapped,ee=l.dropAnimationFinished;if(!U){var Z=st(function(){return{descriptor:R,registry:b,getDraggableRef:p,canDragInteractiveElements:W,shouldRespectForcePress:Y,isEnabled:H}},[R,b,p,W,Y,H]);MS(Z)}var ae=st(function(){return H?{tabIndex:0,role:"button","aria-describedby":x,"data-rbd-drag-handle-draggable-id":N,"data-rbd-drag-handle-context-id":y,draggable:!1,onDragStart:DS}:null},[y,x,N,H]),ne=Re(function(ge){j.type==="DRAGGING"&&j.dropping&&ge.propertyName==="transform"&&ee()},[ee,j]),fe=st(function(){var ge=Ho(j),Be=j.type==="DRAGGING"&&j.dropping?ne:null,Ke={innerRef:f,draggableProps:{"data-rbd-draggable-context-id":y,"data-rbd-draggable-id":N,style:ge,onTransitionEnd:Be},dragHandleProps:ae};return Ke},[y,ae,N,j,ne,f]),be=st(function(){return{draggableId:R.id,type:R.type,source:{index:R.index,droppableId:R.droppableId}}},[R.droppableId,R.id,R.index,R.type]);return O(fe,j.snapshot,be)}var ku=function(l,u){return l===u},zo=function(l){var u=l.combine,f=l.destination;return f?f.droppableId:u?u.droppableId:null},BS=function(u){return u.combine?u.combine.draggableId:null},PS=function(u){return u.at&&u.at.type==="COMBINE"?u.at.combine.draggableId:null};function Am(){var l=ft(function(m,y){return{x:m,y}}),u=ft(function(m,y,x,b,E){return{isDragging:!0,isClone:y,isDropAnimating:!!E,dropAnimation:E,mode:m,draggingOver:x,combineWith:b,combineTargetFor:null}}),f=ft(function(m,y,x,b,E,A,I){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:E,combineWith:A,mode:y,offset:m,dimension:x,forceShouldAnimate:I,snapshot:u(y,b,E,A,null)}}}),p=function(y,x){if(y.isDragging){if(y.critical.draggable.id!==x.draggableId)return null;var b=y.current.client.offset,E=y.dimensions.draggables[x.draggableId],A=tn(y.impact),I=PS(y.impact),R=y.forceShouldAnimate;return f(l(b.x,b.y),y.movementMode,E,x.isClone,A,I,R)}if(y.phase==="DROP_ANIMATING"){var O=y.completed;if(O.result.draggableId!==x.draggableId)return null;var N=x.isClone,H=y.dimensions.draggables[x.draggableId],Y=O.result,W=Y.mode,U=zo(Y),j=BS(Y),ee=y.dropDuration,Z={duration:ee,curve:Lf.drop,moveTo:y.newHomeClientOffset,opacity:j?Fl.opacity.drop:null,scale:j?Fl.scale.drop:null};return{mapped:{type:"DRAGGING",offset:y.newHomeClientOffset,dimension:H,dropping:Z,draggingOver:U,combineWith:j,mode:W,forceShouldAnimate:null,snapshot:u(W,N,U,j,Z)}}}return null};return p}function Uu(l){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:l,combineWith:null}}var Yu={mapped:{type:"SECONDARY",offset:nr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Uu(null)}};function NS(){var l=ft(function(x,b){return{x,y:b}}),u=ft(Uu),f=ft(function(x,b,E){return b===void 0&&(b=null),{mapped:{type:"SECONDARY",offset:x,combineTargetFor:b,shouldAnimateDisplacement:E,snapshot:u(b)}}}),p=function(b){return b?f(nr,b,!0):null},m=function(b,E,A,I){var R=A.displaced.visible[b],O=!!(I.inVirtualList&&I.effected[b]),N=_u(A),H=N&&N.draggableId===b?E:null;if(!R){if(!O)return p(H);if(A.displaced.invisible[b])return null;var Y=To(I.displacedBy.point),W=l(Y.x,Y.y);return f(W,H,!0)}if(O)return p(H);var U=A.displacedBy.point,j=l(U.x,U.y);return f(j,H,R.shouldAnimate)},y=function(b,E){if(b.isDragging)return b.critical.draggable.id===E.draggableId?null:m(E.draggableId,b.critical.draggable.id,b.impact,b.afterCritical);if(b.phase==="DROP_ANIMATING"){var A=b.completed;return A.result.draggableId===E.draggableId?null:m(E.draggableId,A.result.draggableId,A.impact,A.afterCritical)}return null};return y}var FS=function(){var u=Am(),f=NS(),p=function(y,x){return u(y,x)||f(y,x)||Yu};return p},HS={dropAnimationFinished:E0},zS=Fg(FS,HS,null,{context:kl,pure:!0,areStatePropsEqual:ku})(za);function Im(l){var u=$u(jl),f=u.isUsingCloneFor;return f===l.draggableId&&!l.isClone?null:L.createElement(zS,l)}function GS(l){var u=typeof l.isDragDisabled=="boolean"?!l.isDragDisabled:!0,f=!!l.disableInteractiveElementBlocking,p=!!l.shouldRespectForcePress;return L.createElement(Im,Oe({},l,{isClone:!1,isEnabled:u,canDragInteractiveElements:f,shouldRespectForcePress:p}))}function $S(l){var u=(0,L.useContext)(zu);u||he(!1);var f=u.contextId,p=u.isMovementAllowed,m=(0,L.useRef)(null),y=(0,L.useRef)(null),x=l.children,b=l.droppableId,E=l.type,A=l.mode,I=l.direction,R=l.ignoreContainerClipping,O=l.isDropDisabled,N=l.isCombineEnabled,H=l.snapshot,Y=l.useClone,W=l.updateViewportMaxScroll,U=l.getContainerForClone,j=Re(function(){return m.current},[]),ee=Re(function(Ke){m.current=Ke},[]);Re(function(){return y.current},[]);var Z=Re(function(Ke){y.current=Ke},[]),ae=Re(function(){p()&&W({maxScroll:U0()})},[p,W]);bS({droppableId:b,type:E,mode:A,direction:I,isDropDisabled:O,isCombineEnabled:N,ignoreContainerClipping:R,getDroppableRef:j});var ne=L.createElement(TS,{on:l.placeholder,shouldAnimate:l.shouldAnimatePlaceholder},function(Ke){var Fe=Ke.onClose,Yt=Ke.data,Tt=Ke.animate;return L.createElement(_S,{placeholder:Yt,onClose:Fe,innerRef:Z,animate:Tt,contextId:f,onTransitionEnd:ae})}),fe=st(function(){return{innerRef:ee,placeholder:ne,droppableProps:{"data-rbd-droppable-id":b,"data-rbd-droppable-context-id":f}}},[f,b,ne,ee]),be=Y?Y.dragging.draggableId:null,ge=st(function(){return{droppableId:b,type:E,isUsingCloneFor:be}},[b,be,E]);function Be(){if(!Y)return null;var Ke=Y.dragging,Fe=Y.render,Yt=L.createElement(Im,{draggableId:Ke.draggableId,index:Ke.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(Tt,Vt){return Fe(Tt,Vt,Ke)});return sa.createPortal(Yt,U())}return L.createElement(jl.Provider,{value:ge},x(fe,H),Be())}var Uf=function(u,f){return u===f.droppable.type},Om=function(u,f){return f.draggables[u.draggable.id]},WS=function(){var u={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},f=Oe({},u,{shouldAnimatePlaceholder:!1}),p=ft(function(x){return{draggableId:x.id,type:x.type,source:{index:x.index,droppableId:x.droppableId}}}),m=ft(function(x,b,E,A,I,R){var O=I.descriptor.id,N=I.descriptor.droppableId===x;if(N){var H=R?{render:R,dragging:p(I.descriptor)}:null,Y={isDraggingOver:E,draggingOverWith:E?O:null,draggingFromThisWith:O,isUsingPlaceholder:!0};return{placeholder:I.placeholder,shouldAnimatePlaceholder:!1,snapshot:Y,useClone:H}}if(!b)return f;if(!A)return u;var W={isDraggingOver:E,draggingOverWith:O,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:I.placeholder,shouldAnimatePlaceholder:!0,snapshot:W,useClone:null}}),y=function(b,E){var A=E.droppableId,I=E.type,R=!E.isDropDisabled,O=E.renderClone;if(b.isDragging){var N=b.critical;if(!Uf(I,N))return f;var H=Om(N,b.dimensions),Y=tn(b.impact)===A;return m(A,R,Y,Y,H,O)}if(b.phase==="DROP_ANIMATING"){var W=b.completed;if(!Uf(I,W.critical))return f;var U=Om(W.critical,b.dimensions);return m(A,R,zo(W.result)===A,tn(W.impact)===A,U,O)}if(b.phase==="IDLE"&&b.completed&&!b.shouldFlush){var j=b.completed;if(!Uf(I,j.critical))return f;var ee=tn(j.impact)===A,Z=!!(j.impact.at&&j.impact.at.type==="COMBINE"),ae=j.critical.droppable.id===A;return ee?Z?u:f:ae?u:f}return f};return y},kS={updateViewportMaxScroll:jx};function US(){return document.body||he(!1),document.body}var YS={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:US},Yf=Fg(WS,kS,null,{context:kl,pure:!0,areStatePropsEqual:ku})($S);Yf.defaultProps=YS;const Vf=(l=!0)=>({[Cr.Rows]:{text:(0,$.agQ)("\u884C\u5934"),icon:tg,droppableType:l?wo.Dimensions:wo.Rows},[Cr.Cols]:{text:(0,$.agQ)("\u5217\u5934"),icon:u2,droppableType:l?wo.Dimensions:wo.Cols},[Cr.Values]:{text:(0,$.agQ)("\u503C"),icon:La,droppableType:wo.Measures}}),Zt=(...l)=>(0,$.d5G)(yl,...l),VS=l=>{switch(l){case"table":return Zt("content","one-dimension");default:return Zt("content","three-dimensions")}},XS=(l,u)=>l==="table"||u===Cr.Values,jS=(l=[],u=[],f,p)=>{if(p.droppableId===f.droppableId){const b=[...u],[E]=b.splice(f.index,1);return b.splice(p.index,0,E),{[p.droppableId]:b}}const m=[...l],y=[...u],[x]=m.splice(f.index,1);return y.splice(p.index,0,x),{[f.droppableId]:m,[p.droppableId]:y}},qS=(l=[],u,f,p)=>{const m=ye({},l.find(y=>y.id===(p!=null?p:f)));return p?m.children=Ht(m.children,y=>pt(ye({},y),{checked:y.id===f?u:y.checked})):(m.checked=u,m.children=Ht(m.children,y=>pt(ye({},y),{checked:u}))),l.map(y=>y.id===m.id?m:y)},KS=l=>{const u=f=>{const p=x=>Mv(Ht(x,b=>{var E=b,{children:A}=E,I=fn(E,["children"]);return[ye({},I),...p(A)]})),m=p(f),y=go(m,x=>x.checked===!1);return{items:m,hideItems:y}};return{[Cr.Rows]:u(l[Cr.Rows]),[Cr.Cols]:u(l[Cr.Cols]),[Cr.Values]:u(l[Cr.Values])}},Mm=l=>pr(l,"items"),Vu="item",Go=({dragHandleProps:l,fieldType:u,id:f,displayName:p,selectable:m,checked:y,parentId:x,className:b,disabled:E,onVisibleItemChange:A})=>{const I=(0,L.useRef)(),[R,O]=(0,L.useState)(!1);(0,L.useEffect)(()=>{O(I.current.offsetWidth<I.current.scrollWidth)},[]);const N=p!=null?p:f;return L.createElement("div",pt(ye({},l),{className:qt(Zt(Vu),b,{unchecked:!y})}),m&&L.createElement(Ka.Z,{disabled:E,checked:y,onChange:H=>A==null?void 0:A(u,H.target.checked,f,x)}),R?L.createElement(lt.Z,{title:N,placement:"bottomRight",overlayClassName:Zt("tooltip")},L.createElement("div",{className:Zt(Vu,"text"),ref:I},N)):L.createElement("div",{className:Zt(Vu,"text"),ref:I},N))};Go.defaultProps={checked:!0,disabled:!1};var tT="";const Dm=({fieldType:l,item:{id:u,displayName:f,checked:p=!0,children:m=[]},expandable:y,expandChildren:x,isDragDisabled:b,selectable:E,index:A,draggingItemId:I,onVisibleItemChange:R})=>L.createElement(GS,{draggableId:u,index:A,isDragDisabled:b},(O,N)=>L.createElement("div",pt(ye({},O.draggableProps),{ref:O.innerRef,className:qt(Zt(E?"checkable-list":"normal-list"),{dragging:N.isDragging,"disable-dragging":b})}),L.createElement(Go,{dragHandleProps:O.dragHandleProps,fieldType:l,id:u,displayName:f,checked:p,onVisibleItemChange:R,selectable:E,className:qt(E?"checkable-item":"normal-item",{"item-collapse":!x})}),y&&x&&!tt(m)&&I!==u&&L.createElement("div",{className:qt("child-items",{"item-hidden":!x})},m.map(H=>L.createElement(Go,{key:H.id,id:H.id,fieldType:l,displayName:H.displayName,disabled:!p,checked:H.checked,parentId:u,selectable:E,onVisibleItemChange:R,className:"checkable-item"})))));var rT="";const Ei="dimension",Bm=L.memo(l=>{const u=l,{fieldType:f,crossRows:p=!1,selectable:m=!1,expandable:y=!1,expandText:x=(0,$.agQ)("\u5C55\u5F00\u5B50\u9879"),allowEmpty:b=!0,items:E=[],droppableType:A,text:I,icon:R}=u,O=fn(u,["fieldType","crossRows","selectable","expandable","expandText","allowEmpty","items","droppableType","text","icon"]),[N,H]=L.useState(!0),Y=U=>{H(U.target.checked)},W=!b&&E.length===1;return L.createElement("div",{className:qt(Zt(Ei),{"long-dimension":p})},L.createElement("div",{className:Zt(Ei,"header")},L.createElement("div",{className:"title"},L.createElement(R,null)," ",L.createElement("span",null,I)),y&&L.createElement("div",{className:"expand-option"},L.createElement(Ka.Z,{checked:N,onChange:Y}),L.createElement("span",{className:"description"},x))),L.createElement(Yf,{droppableId:f,type:A},(U,j)=>L.createElement("div",pt(ye({ref:U.innerRef},U.droppableProps),{className:qt(Zt(Ei,"items"),{[Zt(Ei,"items-highlight")]:j.isDraggingOver,[Zt(Ei,"long-items")]:p})}),E.map((ee,Z)=>L.createElement(Dm,ye({key:ee.id,index:Z,fieldType:f,item:ee,expandable:y,expandChildren:N,selectable:m,isDragDisabled:W},O))),U.placeholder)))});Bm.displayName="Dimension";var nT="";const Qi="content",Xu=L.memo(l=>{const u=l,{innerContentClassName:f,contentTitleText:p=(0,$.agQ)("\u884C\u5217\u5207\u6362"),resetText:m=(0,$.agQ)("\u6062\u590D\u9ED8\u8BA4"),allowExchangeHeader:y=!0,onToggleVisible:x,onSubmit:b,sheetType:E}=u,A=fn(u,["innerContentClassName","contentTitleText","resetText","allowExchangeHeader","onToggleVisible","onSubmit","sheetType"]),I=Vf(y),R=Mm(A),[O,N]=L.useState(R),[H,Y]=L.useState(null),W=fe=>{Y(fe.draggableId)},U=({destination:fe,source:be})=>{if(Y(null),!fe||fe.droppableId===be.droppableId&&fe.index===be.index)return;const ge=jS(O[be.droppableId],O[fe.droppableId],be,fe);N(ye(ye({},O),ge))},j=()=>{N(R)},ee=()=>{x(),b==null||b(KS(O))},Z=(fe,be,ge,Be)=>{const Ke=qS(O[fe],be,ge,Be);N(pt(ye({},O),{[fe]:Ke}))},ae=Md(R,O),ne=Ar.filter(fe=>E!=="table"||fe===Cr.Cols);return L.createElement(cS,{onBeforeCapture:W,onDragEnd:U},L.createElement("div",{className:qt(f,Zt(Qi))},L.createElement("header",{className:Zt(Qi,"header")},p),L.createElement("main",{className:qt(Zt(Qi,"main"),VS(E))},ne.map(fe=>L.createElement(Bm,ye(pt(ye({},A[fe]),{key:fe,fieldType:fe,items:O[fe],crossRows:XS(E,fe),draggingItemId:H,onVisibleItemChange:Z}),I[fe])))),L.createElement("footer",{className:Zt(Qi,"footer")},L.createElement(Rt.ZP,{type:"text",icon:L.createElement(N1.Z,null),className:Zt(Qi,"footer","reset-button"),disabled:ae,onClick:j},m),L.createElement("div",{className:Zt(Qi,"footer","actions")},L.createElement(Rt.ZP,{className:"action-button",onClick:x},(0,$.agQ)("\u53D6\u6D88")),L.createElement(Rt.ZP,{className:"action-button",type:"primary",disabled:ae,onClick:ee},(0,$.agQ)("\u786E\u5B9A"))))))});Xu.displayName="SwitcherContent",Xu.defaultProps={sheetType:"pivot"};var Pm="";const Xf=l=>{var u=l,{title:f,popover:p,disabled:m}=u,y=fn(u,["title","popover","disabled"]);const[x,b]=(0,L.useState)(!1),E=()=>{b(A=>!A)};return L.createElement(Lh.Z,ye({visible:!m&&x,content:L.createElement(Xu,pt(ye({},y),{onToggleVisible:E})),onVisibleChange:E,trigger:"click",placement:"bottomLeft",destroyTooltipOnHide:!0},p),(0,L.isValidElement)(f)?f:L.createElement(Rt.ZP,{className:Zt("entry-button"),size:"small",disabled:m,icon:L.createElement(d2,null)},f||(0,$.agQ)("\u884C\u5217\u5207\u6362")))},Nm=l=>{var u=l,{sheet:f,dataCfg:p,options:m}=u,y=fn(u,["sheet","dataCfg","options"]),x;const[b,E]=L.useState(()=>{var I;return Wd(f,p,(I=m==null?void 0:m.interaction)==null?void 0:I.hiddenColumnFields)});lr(()=>{var I;E(Wd(f,p,(I=m==null?void 0:m.interaction)==null?void 0:I.hiddenColumnFields))},[f,p,(x=m==null?void 0:m.interaction)==null?void 0:x.hiddenColumnFields]);const A=I=>{var R;const{fields:O,hiddenColumnFields:N}=ig(f,I);f.setDataCfg({fields:ye(ye({},f.dataCfg.fields),O)}),N&&f.setOptions({interaction:{hiddenColumnFields:N}}),f.render(),E(ou(f,I,(R=f.dataCfg)==null?void 0:R.meta,N))};return L.createElement(Xf,ye(ye({sheetType:p2(f),onSubmit:A},y),b))};var iT="";const ju=L.memo(l=>{var u=l,{className:f,style:p,title:m,width:y,description:x,exportCfg:b,advancedSortCfg:E,switcherCfg:A,sheet:I,extra:R,dataCfg:O,options:N}=u,H=fn(u,["className","style","title","width","description","exportCfg","advancedSortCfg","switcherCfg","sheet","extra","dataCfg","options"]);const Y="s2-header",W=()=>L.createElement(Yn.Z,{align:"center"},R,A.open&&L.createElement(Nm,ye({sheet:I,dataCfg:O,options:N},A)),E.open&&L.createElement(Co,ye({sheet:I},E)),b.open&&L.createElement(yo,ye({sheet:I},b)));return L.createElement("div",ye({className:qt(Y,f),style:p},H),L.createElement("div",{className:`${Y}-heading`},L.createElement("div",{className:`${Y}-heading-left`},L.createElement("div",{className:`${Y}-heading-title`},m)),L.createElement("div",{className:`${Y}-heading-extra`},W())),L.createElement("div",{className:`${Y}-content`},x))});ju.displayName="Header",ju.defaultProps={exportCfg:{open:!1},advancedSortCfg:{open:!1},switcherCfg:{open:!1}};const Ji=`${$.vhY}-pagination`,Fm=({pagination:l,onShowSizeChange:u,onChange:f})=>{if(tt(l))return null;const{total:p,pageSize:m}=l,y=p/m>5;return L.createElement("div",{className:Ji},L.createElement(Vn.Z,pt(ye({size:"small",defaultCurrent:1,showSizeChanger:!0,showQuickJumper:y},l),{onShowSizeChange:u,onChange:f})),L.createElement("span",{className:`${Ji}-count`,title:`${(0,$.agQ)("\u5171\u8BA1")}${p}${(0,$.agQ)("\u6761")}`},(0,$.agQ)("\u5171\u8BA1"),p||" - ",(0,$.agQ)("\u6761")))};Fm.displayName="S2Pagination";var aT="";const ea=L.forwardRef((l,u)=>{const{dataCfg:f,options:p,header:m}=l,{s2Ref:y,loading:x,containerRef:b,pagination:E,wrapperRef:A}=Ta(l),[I,R]=L.useState(y.current);return L.useEffect(()=>{u&&(u.current=y.current)},[u,y]),L.useEffect(()=>R(y.current),[R,y]),L.createElement(L.StrictMode,null,L.createElement($d.Provider,{value:I},L.createElement(In.Z,{spinning:x,wrapperClassName:`${$.vhY}-spin`},L.createElement("div",{ref:A,className:`${$.vhY}-wrapper`},m&&L.createElement(ju,pt(ye({},m),{sheet:y.current,style:{width:p.width},dataCfg:(0,$.Unm)(f),options:Jp(p)})),L.createElement("div",{ref:b,className:`${$.vhY}-container`}),E.showPagination&&L.createElement(Fm,{pagination:E.pagination,onChange:E.onChange,onShowSizeChange:E.onShowSizeChange}),l.children))))});ea.displayName="BaseSheet",ea.defaultProps={options:{},adaptive:!1,showPagination:!1};const qu=L.memo(l=>{const u=L.useRef();return L.createElement(ea,pt(ye({},l),{ref:u}))});qu.displayName="TableSheet";class ZS extends $.f4X{drawTextShape(){Wt(this.getMeta().fieldValue)?(0,$.qPk)(this):super.drawTextShape()}}const Hm=l=>new ZS(l,l.spreadsheet),He=12,QS=11,zm={dataCell:{text:{fontSize:He,fontFamily:$.utx,fill:"rgba(0, 0, 0, 0.85)",fontWeight:"normal",textBaseline:"middle",textAlign:"left"},minorText:{fontSize:QS,fontFamily:$.utx,fill:"rgba(0, 0, 0, 0.45)",fontWeight:"normal",textBaseline:"middle",textAlign:"left"},derivedMeasureText:{mainUp:"#F46649",mainDown:"#2AA491",minorUp:"#f9ae9e",minorDown:"#a9dad2"},bolderText:{fontSize:He,fontFamily:$.utx,fill:"rgba(0, 0, 0, 1)",fontWeight:(0,$.EDF)()?"bold":520,textBaseline:"middle",textAlign:"left"}}},jf=L.memo(l=>{const u=l,{options:f,themeCfg:p}=u,m=fn(u,["options","themeCfg"]),y=L.useRef(),x=L.useMemo(()=>(0,$._Ge)(f,{dataCell:Hm,showDefaultHeaderActionIcon:!1,style:{colCfg:{hideMeasureColumn:!0}}}),[f]),b=L.useMemo(()=>(0,$._Ge)({},p,{theme:zm}),[p]);return L.createElement(ea,ye({options:x,themeCfg:b,ref:y},m))});jf.displayName="GridAnalysisSheet";class JS extends $.X0t{constructor(u,f,p){super(u,f,p)}drawTextShape(){const u=this.getMeta(),f=(0,$.D6R)(u==null?void 0:u.value);if(!Bt(f))return super.drawTextShape();const{formattedValue:p}=this.getFormattedFieldValue(),m=p!==(u==null?void 0:u.value)?[[p]]:[f];(0,$.qPk)(this,{values:m},!1)}}class eE extends $.f4X{drawTextShape(){Wt(this.getMeta().fieldValue)?(0,$.qPk)(this):super.drawTextShape()}}class tE extends $.O9R{getExistValuesByDataItem(u,f){const p=di(u).filter(m=>Wt(u[m]));return tt(p)&&p.push($.mUW),p}processDataCfg(u){const{meta:f}=u,p=super.processDataCfg(u),m=this.processMeta(f,(0,$.agQ)("\u6570\u503C"));return pt(ye({},p),{meta:m})}}var oT="";const rE=({cell:l,label:u})=>{const f=l.getMeta();if(f.isLeaf&&f.level!==0)return null;const p=f.spreadsheet.dataSet.getFieldName(f.field),m=ua(u)?u(l,p):u,y=m!=null?m:p;return L.createElement("div",{className:qt($t(),$t("col"))},L.createElement("span",{className:$t("name")},y),L.createElement("span",{className:$t("value")},f.value))},Gm=l=>$i(l.spreadsheet.getColumnNodes(),{colIndex:l.colIndex,isLeaf:!0}),nE=l=>{const u=$i(l.spreadsheet.getRowNodes(),{rowIndex:l.rowIndex});return l.spreadsheet.dataSet.getFieldName((u==null?void 0:u.valueFiled)||(u==null?void 0:u.value))},qf=l=>{var u;const f=$i(l.spreadsheet.getRowNodes(),{rowIndex:l.rowIndex});return l.spreadsheet.dataSet.getFieldDescription(f==null?void 0:f.field)||((u=f==null?void 0:f.extra)==null?void 0:u.description)},Gn=({cell:l,label:u,showOriginalValue:f,renderDerivedValue:p})=>{var m;const y=l.getMeta(),x=y==null?void 0:y.fieldValue,b=qf(y),E=nE(y),A=ua(u)?u(l,E):u,I=A!=null?A:E,R=Gm(y),[,...O]=L.useMemo(()=>{try{return JSON.parse(R==null?void 0:R.value)}catch(ne){return[]}},[R==null?void 0:R.value]),{placeholder:N,style:H}=y.spreadsheet.options,Y=(m=H.cellCfg)==null?void 0:m.valuesCfg,[W,...U]=_a(x==null?void 0:x.values)||[x],[j,...ee]=_a(uo(x,Y==null?void 0:Y.originalValueField))||[W],Z=(0,$.o3g)(y,N),ae=(Y==null?void 0:Y.showOriginalValue)||f;return L.createElement("div",{className:qt($t(),$t("data"))},L.createElement("div",{className:$t("header")},L.createElement("span",{className:"header-label"},I),L.createElement("span",null,W!=null?W:Z)),ae&&L.createElement("div",{className:$t("original-value")},Zs(j)?Z:j),!tt(U)&&L.createElement(L.Fragment,null,L.createElement("div",{className:$t("divider")}),L.createElement("ul",{className:$t("derived-values")},U.map((ne,fe)=>{var be;const ge=(0,$.xzT)(ne,W),Be=!ge&&(0,$.Pyr)(ne),Ke=!ge&&!Be,Fe=ee[fe];return L.createElement("li",{className:"derived-value-item",key:fe},L.createElement("span",{className:"derived-value-label"},O[fe]),L.createElement("span",{className:qt("derived-value-group",{"derived-value-trend-up":Be,"derived-value-trend-down":Ke})},!ge&&L.createElement("span",{className:"derived-value-trend-icon"}),(be=p==null?void 0:p(ne,Fe,l))!=null?be:L.createElement("span",{className:"derived-value-content"},ne!=null?ne:Z)))}))),b&&L.createElement("div",{className:$t("description")},L.createElement("span",{className:$t("description-label")},(0,$.agQ)("\u8BF4\u660E")),L.createElement("span",{className:$t("description-text")},b)))};Gn.defaultProps={showOriginalValue:!1};const $m=({cell:l,label:u})=>{const{field:f,spreadsheet:p,value:m,extra:y}=l.getMeta(),x=ua(u)?u(l,m):u,b=x!=null?x:m,E=p.dataSet.getFieldDescription(f)||(y==null?void 0:y.description);return L.createElement("div",{className:qt($t(),$t("row"))},L.createElement("div",{className:$t("value")},b),E&&L.createElement("div",{className:$t("description")},L.createElement("span",{className:$t("description-label")},(0,$.agQ)("\u8BF4\u660E")),L.createElement("span",{className:$t("description-text")},E)))},Wm=L.memo(l=>{const u=l,{options:f,themeCfg:p,dataCfg:m}=u,y=fn(u,["options","themeCfg","dataCfg"]),x=L.useRef(),b=L.useMemo(()=>{var I,R,O;if(tt(m))return{};let N=!1,H="tree";tt((I=m==null?void 0:m.fields)==null?void 0:I.rows)&&!tt((R=m==null?void 0:m.fields)==null?void 0:R.customTreeItems)&&(H="customTree"),Nd((O=m==null?void 0:m.fields)==null?void 0:O.values)===1&&f.hierarchyType!=="customTree"&&(N=!0);const Y=W=>(U,j)=>{var ee,Z,ae,ne;const fe=(ne=(Z=(ee=f.tooltip)==null?void 0:ee[W])==null?void 0:Z.content)!=null?ne:(ae=f.tooltip)==null?void 0:ae.content;return ua(fe)?fe==null?void 0:fe(U,j):fe};return{dataCell:W=>new eE(W,W.spreadsheet),colCell:(W,U,j)=>new JS(W,U,j),dataSet:W=>new tE(W),showDefaultHeaderActionIcon:!1,hierarchyType:H,style:{colCfg:{hideMeasureColumn:N}},interaction:{autoResetSheetStyle:!0,brushSelection:!1,selectedCellMove:!1,multiSelection:!1,rangeSelection:!1},tooltip:{operation:{hiddenColumns:!0},row:{content:(W,U)=>{var j;return(j=Y("row")(W,U))!=null?j:L.createElement($m,{cell:W})}},col:{content:(W,U)=>{var j;return(j=Y("col")(W,U))!=null?j:L.createElement(rE,{cell:W})}},data:{content:(W,U)=>{const ee=W.getMeta().fieldValue,Z=Y("data")(W,U);return Zs(Z)?Bt(ee==null?void 0:ee.values)?L.createElement(Gn,{cell:W}):L.createElement(L.Fragment,null):Z}}}}},[m,f.hierarchyType,f.tooltip]),E=L.useMemo(()=>{var I;const R={fields:{valueInCols:Nd((I=m==null?void 0:m.fields)==null?void 0:I.values)<=1}};return(0,$._Ge)(m,R)},[m]),A=L.useMemo(()=>(0,$._Ge)(f,b),[f,b]);return L.createElement(ea,ye({options:A,themeCfg:p,dataCfg:E,ref:x},y))});Wm.displayName="StrategySheet";var Ga="";const iE=l=>{var u=l,{className:f,titleText:p=(0,$.agQ)("\u9009\u62E9\u4E0B\u94BB\u7EF4\u5EA6"),clearButtonText:m=(0,$.agQ)("\u6062\u590D\u9ED8\u8BA4"),searchText:y=(0,$.agQ)("\u641C\u7D22\u5B57\u6BB5"),extra:x,drillFields:b,dataSet:E,disabledFields:A,getDrillFields:I,setDrillFields:R}=u,O=fn(u,["className","titleText","clearButtonText","searchText","extra","drillFields","dataSet","disabledFields","getDrillFields","setDrillFields"]);const N={text:L.createElement(ml,null),location:L.createElement(l2,null),date:L.createElement(a2,null)},H=()=>E.map(Z=>(Z.disabled=!!(A&&A.includes(Z.value)),Z)),[Y,W]=(0,L.useState)(H()),U=Z=>{const{value:ae}=Z.target;if(!ae)W([...E]);else{const ne=new RegExp(ae,"gi"),fe=E.filter(be=>ne.test(be.name));W([...fe])}},j=Z=>{const ae=Z==null?void 0:Z.selectedKeys;I&&I([...ae]),R&&R([...ae])},ee=Z=>{Z.stopPropagation(),I&&I([]),R&&R([])};return(0,L.useEffect)(()=>{W(H())},[A]),L.createElement(cs.ZP,null,L.createElement("div",ye({className:qt(li,f)},O),L.createElement("header",{className:`${li}-header`},L.createElement("div",null,p),L.createElement(Rt.ZP,{type:"link",disabled:tt(b),onClick:ee},m)),L.createElement(Rh.Z,{className:`${li}-search`,placeholder:y,onChange:U,onPressEnter:U,prefix:L.createElement(c2,null),allowClear:!0}),tt(Y)&&L.createElement(P1.Z,{imageStyle:{height:"64px"},className:`${li}-empty`}),x,L.createElement(jr.Z,{className:`${li}-menu`,selectedKeys:b,onSelect:j},Y.map(Z=>L.createElement(jr.Z.Item,{key:Z.value,disabled:Z.disabled,className:`${li}-menu-item`,icon:Z.icon?Z.icon:N[Z.type]},Z.name)))))},ql=["drillConfig","displayCondition","drillItemsNum"],aE=l=>{const u=L.useRef(l),f=ql.map(p=>l==null?void 0:l[p]);return L.useCallback(p=>{const m=u.current,y=!!ql.find(x=>!Object.is(l==null?void 0:l[x],m==null?void 0:m[x]));return u.current=l,{reloadData:y||p.reloadData,reBuildDataSet:p.reBuildDataSet}},f)};var lT="";function oE({onCopyFinished:l}){const u=au(),[f,p]=(0,L.useState)(),[m,y]=(0,L.useState)({right:0,bottom:0}),[x,b]=(0,L.useState)(),E=(W,U)=>{const j=er(U.getMeta(),["x","y","width","height","fieldValue"]),ee=u.facet.getScrollOffset(),Z=W.x,ae=W.y,ne=(ee==null?void 0:ee.scrollY)-(u.getColumnNodes()[0]||{height:0}).height,fe=j.x-ee.scrollX+j.width+4,be=j.x-ee.scrollX,ge=j.y-ne+j.height+4,Be=j.y-ne;return fe>=Z&&be<Z&&ge>=ae&&Be<ae},A=W=>{const U=u.getCanvasElement().getBoundingClientRect(),{frozenRow:j}=u.facet.frozenGroupInfo,ee=U.x,Z=U.x+U.width,ae=U.y+j.height,ne=U.y+U.height;return W.x<=Z&&W.x>=ee&&W.y<=ne&&W.y>=ae},I=W=>{const U=u.getCanvasElement().getBoundingClientRect();return u.interaction.getPanelGroupAllDataCells().find(ee=>E({y:W.y-U.y,x:W.x-U.x},ee))},R=(W,U)=>{const j=W.getMeta(),ee=U==null?void 0:U.getMeta(),Z=Math.min(j.colIndex,ee.colIndex),ae=Math.max(j.colIndex,ee.colIndex),ne=Math.max(j.rowIndex,ee.rowIndex),fe=Math.min(j.rowIndex,ee.rowIndex);return u.interaction.getPanelGroupAllDataCells().filter(ge=>{const Be=ge.getMeta();return Be.rowIndex<=ne&&Be.rowIndex>=fe&&Be.colIndex<=ae&&Be.colIndex>=Z})},O={x:0,y:0},N=Fw(W=>{if(!f)return;let U=I(W),j=W.x-x.x,ee=W.y-x.y;A(W)?(O.x=W.x,O.y=W.y):(U=I(O),j=O.x-x.x,ee=O.y-x.y),y({right:j,bottom:ee});const Z=R(f,U);u.interaction.changeState({cells:Z.map(ae=>ae.getMeta()),stateName:$._61.PREPARE_SELECT,force:!0})},10),H=W=>{let U=I(W);if(!f)return;U||(U=I(O));const j=u.dataSet.originData,ee=R(f,U),{fieldValue:Z}=f.getMeta(),ae=ee.map(ne=>{const{rowIndex:fe,valueField:be}=ne.getMeta();return j[fe]&&typeof j[fe][be]!==void 0&&(j[fe][be]=Z),ne});u.interaction.changeState({cells:ae.map(ne=>ne.getMeta()),stateName:$._61.PREPARE_SELECT,force:!0}),u.render(!0),y({right:0,bottom:0}),u.off($.ch4.GLOBAL_MOUSE_MOVE,N),u.off($.ch4.GLOBAL_MOUSE_UP,H),p(void 0),l==null||l()};(0,L.useEffect)(()=>{f&&(u.on($.ch4.GLOBAL_MOUSE_MOVE,N),u.on($.ch4.GLOBAL_MOUSE_UP,H))},[f]);const Y=W=>{if(uo(W,"target.id")!=="spreadsheet-drag-copy-point")return;const U=W.target.getBoundingClientRect(),{top:j,left:ee}=uo(W,"target.style",{}),ae=u.interaction.getPanelGroupAllDataCells().find(ne=>E({y:parseFloat(j),x:parseFloat(ee)},ne));b({x:U.x,y:U.y}),p(ae)};return(0,L.useEffect)(()=>{const W=document.getElementById("spreadsheet-drag-copy-point");return W&&u&&W.addEventListener("mousedown",Y),()=>{W.removeEventListener("mousedown",Y)}},[u]),L.createElement("div",{className:`${$.vhY}-drag-copy-mask`,style:{right:m.right>0?m.right:0,bottom:m.bottom>0?m.bottom:0,left:m.right<=0?m.right:0,top:m.bottom<=0?m.bottom:0,width:Math.abs(m.right),height:Math.abs(m.bottom)}})}var sT="";const lE=(0,L.memo)(l=>{const u=au(),[f,p]=(0,L.useState)({scrollX:-999,scrollY:-999,width:8,overflow:!0}),[m,y]=(0,L.useState)({left:-999,top:-999}),[x,b]=(0,L.useState)(),E=()=>{if(u){const R=u.facet.getScrollOffset(),{frozenCol:O,frozenRow:N}=u.facet.frozenGroupInfo,H=u.getCanvasElement().getBoundingClientRect(),Y=x==null?void 0:x.getMeta();if(!Md(R,f))if(Y){const{verticalBorderWidth:W,horizontalBorderWidth:U}=x.getStyle().cell,j=Y.width+Y.x,ee=Y.height+Y.y,Z=j-R.scrollX-H.width+(W+U)*2;let ae=!0;O.width>=j-R.scrollX-U*2||N.height>=ee-R.scrollY-W*2||H.width<=j-R.scrollX-U*2||H.height<=ee-R.scrollY+N.height?ae=!0:ae=!1,p(pt(ye({},R),{overflow:ae,width:8-(Z>0?Z:0)}))}else p({scrollX:-999,scrollY:-999,overflow:!0})}},A=R=>{const O=R.target.cfg.parent,N=u.interaction.isSelectedCell(O);b(N?O:void 0)};(0,L.useEffect)(()=>(E(),u&&(u.off($.ch4.GLOBAL_SCROLL,E),u.on($.ch4.GLOBAL_SCROLL,E)),()=>{u==null||u.off($.ch4.GLOBAL_SCROLL,E)}),[x]),(0,L.useEffect)(()=>{x&&b(void 0)},[u==null?void 0:u.dataSet.sortParams,u==null?void 0:u.dataSet.filterParams]),(0,L.useEffect)(()=>{if(u!=null&&u.container.cfg.container&&u&&x){const R=er(x.getMeta(),["x","y","width","height","fieldValue"]);R.x-=f==null?void 0:f.scrollX,R.y-=(f==null?void 0:f.scrollY)-(u.getColumnNodes()[0]||{height:0}).height,y({left:R.x+R.width-4,top:R.y+R.height-4})}},[f,x]);const I=(0,L.useCallback)(()=>{b(void 0)},[]);return Ce($.ch4.COL_CELL_CLICK,I,u),Ce($.ch4.ROW_CELL_CLICK,I,u),Ce($.ch4.CORNER_CELL_CLICK,I,u),Ce($.ch4.DATA_CELL_BRUSH_SELECTION,I,u),Ce($.ch4.DATA_CELL_CLICK,A,u),L.createElement("div",{id:"spreadsheet-drag-copy-point",className:`${$.vhY}-drag-copy-point`,style:{display:f.overflow?"none":"block",left:m.left,top:m.top,width:f.width}},L.createElement(oE,{onCopyFinished:I}))});function sE(l,u,f,p,m){if(p){const O=document.querySelector(`#${p}`);if(O&&sa.unmountComponentAtNode(O)&&O.parentNode){O.parentNode.removeChild(O);return}}const y=document.createElement("div");p&&(y.id=p),document.body.appendChild(y);let x,b;function E(...O){sa.unmountComponentAtNode(y)&&y.parentNode&&(y.parentNode.removeChild(y),m&&m())}function A(...O){E.call(null,...O),b()}const I=new Promise((O,N)=>{x=O,b=N}).then(O=>(A(),O));function R(){setTimeout(()=>{sa.render(L.createElement($d.Provider,{value:f},L.createElement(l,{onCancel:A,resolver:x,params:u})),y)})}return R(),I}var km="";function uE(l){const{params:u,resolver:f}=l,p=au(),{event:m,onChange:y,onDataCellEditEnd:x,CustomComponent:b}=u,E=m.target.cfg.parent,{left:A,top:I,width:R,height:O}=(0,L.useMemo)(()=>{const ge=(p==null?void 0:p.container.cfg.container).getBoundingClientRect();return{left:window.scrollX+ge.left,top:window.scrollY+ge.top,width:ge.width,height:ge.height}},[p==null?void 0:p.container.cfg.container]),{x:N,y:H,width:Y,height:W}=(0,L.useMemo)(()=>{const ge=p.facet.getScrollOffset(),Be=er(E.getMeta(),["x","y","width","height"]);return Be.x-=ge.scrollX||0,Be.y-=(ge.scrollY||0)-(p.getColumnNodes()[0]||{height:0}).height,Be},[E,p]),[U,j]=(0,L.useState)(E.getMeta().fieldValue),ee=(0,L.useRef)(null),Z=(0,L.useRef)(null);(0,L.useEffect)(()=>{setTimeout(()=>{Z.current&&Z.current.click(),ee.current&&ee.current.focus()})},[]);const ae=()=>{const{rowIndex:ge,valueField:Be}=E.getMeta();p.dataSet.originData[ge][Be]=U,p.render(!0),x==null||x(Ge(E.getMeta(),{fieldValue:U,data:{[Be]:U}})),y&&y(p.dataSet.originData),f(!0)},ne=ge=>{ge.keyCode===13&&(ge.preventDefault(),ae())},fe=L.useMemo(()=>({left:N,top:H,width:Y,height:W,zIndex:1e3}),[]),be=ge=>{j(ge)};return L.createElement("div",{ref:Z,style:{zIndex:500,position:"absolute",overflow:"hidden",left:A,top:I,width:R,height:O}},b?L.createElement(b,{cell:E,spreadsheet:p,value:U,style:fe,onChange:be,onSave:ae}):L.createElement(Rh.Z.TextArea,{required:!0,style:fe,className:"s2-edit-cell",value:U,ref:ee,onChange:ge=>{j(ge.target.value)},onBlur:ae,onKeyDown:ne}))}const Kf=(0,L.memo)(({onChange:l,onDataCellEditEnd:u,CustomComponent:f})=>{const p=au(),m=(0,L.useCallback)(y=>{sE(uE,{event:y,onChange:l,onDataCellEditEnd:u,CustomComponent:f},p)},[p]);return Ce($.ch4.DATA_CELL_DOUBLE_CLICK,m,p),null}),Um=L.memo(l=>{const u=(0,L.useCallback)(()=>{},[]);return L.createElement(ea,pt(ye({},l),{sheetType:"table"}),L.createElement(Kf,{onChange:u,onDataCellEditEnd:l.onDataCellEditEnd}),L.createElement(lE,null))});Um.displayName="EditableSheet";const Kl=L.memo(l=>{const u=l,{options:f}=u,p=fn(u,["options"]),{dataCfg:m,partDrillDown:y}=p,x=L.useRef(),[b,E]=L.useState([]),A=nu(({sheetInstance:N,cacheDrillFields:H,disabledFields:Y,event:W})=>{const U=L.createElement(iE,pt(ye({},y==null?void 0:y.drillConfig),{setDrillFields:E,drillFields:H,disabledFields:Y}));if(W){const{showTooltip:j}=(0,$.Hu7)(N,W);if(!j)return;N.showTooltip({position:{x:W.clientX,y:W.clientY},content:U})}}),I=L.useMemo(()=>kw(f,y,N=>A.current(N)),[f,y,A]),R=N=>{var H;(H=x.current)==null||H.clearDrillDownData(N)};L.useEffect(()=>{var N,H,Y;(N=x.current)==null||N.hideTooltip(),tt(b)?R((Y=(H=x.current)==null?void 0:H.store.get("drillDownNode"))==null?void 0:Y.id):Zp({rows:m.fields.rows,drillFields:b,fetchData:y==null?void 0:y.fetchData,drillItemsNum:y==null?void 0:y.drillItemsNum,spreadsheet:x.current})},[b]),L.useEffect(()=>{var N;Wt(y==null?void 0:y.clearDrillDown)&&R((N=y==null?void 0:y.clearDrillDown)==null?void 0:N.rowId)},[y==null?void 0:y.clearDrillDown]);const O=aE(y);return L.createElement(ea,pt(ye({},p),{options:I,onSheetUpdate:O,ref:x}))});Kl.displayName="PivotSheet";const cE=L.forwardRef((l,u)=>{const{sheetType:f}=l,p=L.useMemo(()=>pt(ye({},l),{onMounted:x=>{var b;u&&(u.current=x),(b=l.onMounted)==null||b.call(l,x)}}),[l,u]),m=L.useMemo(()=>{switch(f){case"table":return L.createElement(qu,ye({},p));case"gridAnalysis":return L.createElement(jf,ye({},p));case"strategy":return L.createElement(Wm,ye({},p));case"editable":return L.createElement(Um,ye({},p));default:return L.createElement(Kl,ye({},p))}},[f,p]),y=(0,$.VQD)()==="zh_CN"?F1.Z:Ih.Z;return L.createElement(L.StrictMode,null,L.createElement(cs.ZP,{locale:y},m))}),Ym=L.memo(cE);Ym.displayName="SheetComponent";const uT="@antv/s2-react-v1.46.0"},14334:function(Ft,D1,qe){qe.d(D1,{AfN:function(){return QM},D6R:function(){return f_},EDF:function(){return n_},F1h:function(){return u7},HZt:function(){return vP},Hu7:function(){return O1},IZo:function(){return oA},LRf:function(){return JD},N6r:function(){return Y_},NO_:function(){return e_},O9R:function(){return dA},Pyr:function(){return sD},TA7:function(){return hP},Teh:function(){return Kn},Unm:function(){return x1},VQD:function(){return RL},WNh:function(){return Bd},X0t:function(){return xh},_61:function(){return Se},_Ge:function(){return oa},agQ:function(){return ar},c8d:function(){return c7},ch4:function(){return K},d5G:function(){return LB},f4X:function(){return Xa},mUW:function(){return js},o3g:function(){return is},q7_:function(){return BL},qPk:function(){return JL},utx:function(){return ni},vQq:function(){return hR},vhY:function(){return Ld},xzT:function(){return cD}}),Ft=qe.hmd(Ft);var $=qe(34155),jr=Object.freeze({__proto__:null,get Base(){return Bn},get Circle(){return yp},get Ellipse(){return $C},get Image(){return md},get Line(){return UC},get Marker(){return XC},get Path(){return Cd},get Polygon(){return JC},get Polyline(){return ew},get Rect(){return wd},get Text(){return iw}});var ss=function(t,r){return ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},ss(t,r)};function fr(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");ss(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var At=function(){return At=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},At.apply(this,arguments)};function Th(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e}var oi=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},B1={}.toString,us=function(t,r){return B1.call(t)==="[object "+r+"]"},Mi=function(t){return us(t,"Function")},Rt=function(t){return t==null},qr=function(t){return Array.isArray?Array.isArray(t):us(t,"Array")},Ka=function(t){var r=typeof t;return t!==null&&r==="object"||r==="function"};function lt(t,r){if(t){var e;if(qr(t))for(var n=0,i=t.length;n<i&&(e=r(t[n],n),e!==!1);n++);else if(Ka(t)){for(var a in t)if(t.hasOwnProperty(a)&&(e=r(t[a],a),e===!1))break}}}var Lh=function(t){return typeof t=="object"&&t!==null},Yn=function(t){if(qr(t))return t.reduce(function(r,e){return Math.max(r,e)},t[0])},Vn=function(t){if(qr(t))return t.reduce(function(r,e){return Math.min(r,e)},t[0])},In=function(t){return us(t,"String")},cs=function(t){return us(t,"Number")},Rh=1e-5;function P1(t,r,e){return e===void 0&&(e=Rh),Math.abs(t-r)<e}var L=function(t,r){return(t%r+r)%r},sa=Math.PI/180,Ah=function(t){return sa*t},N1=Object.values?function(t){return Object.values(t)}:function(t){var r=[];return lt(t,function(e,n){Mi(t)&&n==="prototype"||r.push(e)}),r},F1=function(t){return Rt(t)?"":t.toString()},Ih=function(t){var r=F1(t);return r.charAt(0).toUpperCase()+r.substring(1)};function H1(t){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};return r(t)}function z1(t){var r=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;r(t)}function dc(t,r){for(var e in r)r.hasOwnProperty(e)&&e!=="constructor"&&r[e]!==void 0&&(t[e]=r[e])}function Ko(t,r,e,n){return r&&dc(t,r),e&&dc(t,e),n&&dc(t,n),t}var Oh=function(t,r){if(!Mi(t))throw new TypeError("Expected a function");var e=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=r?r.apply(this,n):n[0],o=e.cache;if(o.has(a))return o.get(a);var s=t.apply(this,n);return o.set(a,s),s};return e.cache=new Map,e},Zo=function(t,r){if(t===r)return!0;if(!t||!r||In(t)||In(r))return!1;if(oi(t)||oi(r)){if(t.length!==r.length)return!1;for(var e=!0,n=0;n<t.length&&(e=Zo(t[n],r[n]),!!e);n++);return e}if(Lh(t)||Lh(r)){var i=Object.keys(t),a=Object.keys(r);if(i.length!==a.length)return!1;for(var e=!0,n=0;n<i.length&&(e=Zo(t[i[n]],r[i[n]]),!!e);n++);return e}return!1},Qo={},ye=function(t){return t=t||"g",Qo[t]?Qo[t]+=1:Qo[t]=1,t+Qo[t]},pt=function(){};function fn(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),i=0,r=0;r<e;r++)for(var a=arguments[r],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}var fc;Oh(function(t,r){r===void 0&&(r={});var e=r.fontSize,n=r.fontFamily,i=r.fontWeight,a=r.fontStyle,o=r.fontVariant;return fc||(fc=document.createElement("canvas").getContext("2d")),fc.font=[a,o,i,e+"px",n].join(" "),fc.measureText(In(t)?t:"").width},function(t,r){return r===void 0&&(r={}),fn([t],N1(r)).join("")});var ds=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,G1=new RegExp("([a-z])["+ds+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+ds+"]*,?["+ds+"]*)+)","ig"),$1=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+ds+"]*,?["+ds+"]*","ig"),Za=function(t){if(!t)return null;if(qr(t))return t;var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(t).replace(G1,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace($1,function(c,d){d&&o.push(+d)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=r[s]&&(e.push([i].concat(o.splice(0,r[s]))),!!r[s]););return t}),e},hc=function(t,r){for(var e=[],n=0,i=t.length;i-2*!r>n;n+=2){var a=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];r?n?i-4===n?a[3]={x:+t[0],y:+t[1]}:i-2===n&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[i-2],y:+t[i-1]}:i-4===n?a[3]=a[2]:n||(a[0]={x:+t[n],y:+t[n+1]}),e.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return e},fs=function(t,r,e,n,i){var a=[];if(i===null&&n===null&&(n=e),t=+t,r=+r,e=+e,n=+n,i!==null){var o=Math.PI/180,s=t+e*Math.cos(-n*o),c=t+e*Math.cos(-i*o),d=r+e*Math.sin(-n*o),h=r+e*Math.sin(-i*o);a=[["M",s,d],["A",e,e,0,+(i-n>180),0,c,h]]}else a=[["M",t,r],["m",0,-n],["a",e,n,0,1,1,0,2*n],["a",e,n,0,1,1,0,-2*n],["z"]];return a},Dt=function(t){if(t=Za(t),!t||!t.length)return[["M",0,0]];var r=[],e=0,n=0,i=0,a=0,o=0,s,c;t[0][0]==="M"&&(e=+t[0][1],n=+t[0][2],i=e,a=n,o++,r[0]=["M",e,n]);for(var d=t.length===3&&t[0][0]==="M"&&t[1][0].toUpperCase()==="R"&&t[2][0].toUpperCase()==="Z",h=void 0,v=void 0,g=o,C=t.length;g<C;g++){if(r.push(h=[]),v=t[g],s=v[0],s!==s.toUpperCase())switch(h[0]=s.toUpperCase(),h[0]){case"A":h[1]=v[1],h[2]=v[2],h[3]=v[3],h[4]=v[4],h[5]=v[5],h[6]=+v[6]+e,h[7]=+v[7]+n;break;case"V":h[1]=+v[1]+n;break;case"H":h[1]=+v[1]+e;break;case"R":c=[e,n].concat(v.slice(1));for(var w=2,S=c.length;w<S;w++)c[w]=+c[w]+e,c[++w]=+c[w]+n;r.pop(),r=r.concat(hc(c,d));break;case"O":r.pop(),c=fs(e,n,v[1],v[2]),c.push(c[0]),r=r.concat(c);break;case"U":r.pop(),r=r.concat(fs(e,n,v[1],v[2],v[3])),h=["U"].concat(r[r.length-1].slice(-2));break;case"M":i=+v[1]+e,a=+v[2]+n;break;default:for(var w=1,S=v.length;w<S;w++)h[w]=+v[w]+(w%2?e:n)}else if(s==="R")c=[e,n].concat(v.slice(1)),r.pop(),r=r.concat(hc(c,d)),h=["R"].concat(v.slice(-2));else if(s==="O")r.pop(),c=fs(e,n,v[1],v[2]),c.push(c[0]),r=r.concat(c);else if(s==="U")r.pop(),r=r.concat(fs(e,n,v[1],v[2],v[3])),h=["U"].concat(r[r.length-1].slice(-2));else for(var _=0,T=v.length;_<T;_++)h[_]=v[_];if(s=s.toUpperCase(),s!=="O")switch(h[0]){case"Z":e=+i,n=+a;break;case"H":e=h[1];break;case"V":n=h[1];break;case"M":i=h[h.length-2],a=h[h.length-1];break;default:e=h[h.length-2],n=h[h.length-1]}}return r},li=function(t,r,e,n){return[t,r,e,n,e,n]},vc=function(t,r,e,n,i,a){var o=.3333333333333333,s=2/3;return[o*t+s*e,o*r+s*n,o*i+s*e,o*a+s*n,i,a]},$t=function(t,r,e,n,i,a,o,s,c,d){e===n&&(e+=1);var h=Math.PI*120/180,v=Math.PI/180*(+i||0),g=[],C,w,S,_,T,M=function(An,qa,or){var Un=An*Math.cos(or)-qa*Math.sin(or),_h=An*Math.sin(or)+qa*Math.cos(or);return{x:Un,y:_h}};if(d)w=d[0],S=d[1],_=d[2],T=d[3];else{C=M(t,r,-v),t=C.x,r=C.y,C=M(s,c,-v),s=C.x,c=C.y,t===s&&r===c&&(s+=1,c+=1);var D=(t-s)/2,B=(r-c)/2,G=D*D/(e*e)+B*B/(n*n);G>1&&(G=Math.sqrt(G),e=G*e,n=G*n);var V=e*e,q=n*n,J=(a===o?-1:1)*Math.sqrt(Math.abs((V*q-V*B*B-q*D*D)/(V*B*B+q*D*D)));_=J*e*B/n+(t+s)/2,T=J*-n*D/e+(r+c)/2,w=Math.asin(((r-T)/n).toFixed(9)),S=Math.asin(((c-T)/n).toFixed(9)),w=t<_?Math.PI-w:w,S=s<_?Math.PI-S:S,w<0&&(w=Math.PI*2+w),S<0&&(S=Math.PI*2+S),o&&w>S&&(w=w-Math.PI*2),!o&&S>w&&(S=S-Math.PI*2)}var te=S-w;if(Math.abs(te)>h){var se=S,ue=s,ce=c;S=w+h*(o&&S>w?1:-1),s=_+e*Math.cos(S),c=T+n*Math.sin(S),g=$t(s,c,e,n,i,0,o,ue,ce,[S,se,_,T])}te=S-w;var me=Math.cos(w),Te=Math.sin(w),le=Math.cos(S),pe=Math.sin(S),et=Math.tan(te/4),Xe=4/3*e*et,ze=4/3*n*et,Ie=[t,r],Je=[t+Xe*Te,r-ze*me],ke=[s+Xe*pe,c-ze*le],Nt=[s,c];if(Je[0]=2*Ie[0]-Je[0],Je[1]=2*Ie[1]-Je[1],d)return[Je,ke,Nt].concat(g);g=[Je,ke,Nt].concat(g).join().split(",");for(var ot=[],ut=0,Ct=g.length;ut<Ct;ut++)ot[ut]=ut%2?M(g[ut-1],g[ut],v).y:M(g[ut],g[ut+1],v).x;return ot},pc=function(t,r){var e=Dt(t),n=r&&Dt(r),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],c="",d="",h,v=function(D,B,G){var V,q;if(!D)return["C",B.x,B.y,B.x,B.y,B.x,B.y];switch(!(D[0]in{T:1,Q:1})&&(B.qx=B.qy=null),D[0]){case"M":B.X=D[1],B.Y=D[2];break;case"A":D=["C"].concat($t.apply(0,[B.x,B.y].concat(D.slice(1))));break;case"S":G==="C"||G==="S"?(V=B.x*2-B.bx,q=B.y*2-B.by):(V=B.x,q=B.y),D=["C",V,q].concat(D.slice(1));break;case"T":G==="Q"||G==="T"?(B.qx=B.x*2-B.qx,B.qy=B.y*2-B.qy):(B.qx=B.x,B.qy=B.y),D=["C"].concat(vc(B.x,B.y,B.qx,B.qy,D[1],D[2]));break;case"Q":B.qx=D[1],B.qy=D[2],D=["C"].concat(vc(B.x,B.y,D[1],D[2],D[3],D[4]));break;case"L":D=["C"].concat(li(B.x,B.y,D[1],D[2]));break;case"H":D=["C"].concat(li(B.x,B.y,D[1],B.y));break;case"V":D=["C"].concat(li(B.x,B.y,B.x,D[1]));break;case"Z":D=["C"].concat(li(B.x,B.y,B.X,B.Y));break}return D},g=function(D,B){if(D[B].length>7){D[B].shift();for(var G=D[B];G.length;)o[B]="A",n&&(s[B]="A"),D.splice(B++,0,["C"].concat(G.splice(0,6)));D.splice(B,1),h=Math.max(e.length,n&&n.length||0)}},C=function(D,B,G,V,q){D&&B&&D[q][0]==="M"&&B[q][0]!=="M"&&(B.splice(q,0,["M",V.x,V.y]),G.bx=0,G.by=0,G.x=D[q][1],G.y=D[q][2],h=Math.max(e.length,n&&n.length||0))};h=Math.max(e.length,n&&n.length||0);for(var w=0;w<h;w++){e[w]&&(c=e[w][0]),c!=="C"&&(o[w]=c,w&&(d=o[w-1])),e[w]=v(e[w],i,d),o[w]!=="A"&&c==="C"&&(o[w]="C"),g(e,w),n&&(n[w]&&(c=n[w][0]),c!=="C"&&(s[w]=c,w&&(d=s[w-1])),n[w]=v(n[w],a,d),s[w]!=="A"&&c==="C"&&(s[w]="C"),g(n,w)),C(e,n,i,a,w),C(n,e,a,i,w);var S=e[w],_=n&&n[w],T=S.length,M=n&&_.length;i.x=S[T-2],i.y=S[T-1],i.bx=parseFloat(S[T-4])||i.x,i.by=parseFloat(S[T-3])||i.y,a.bx=n&&(parseFloat(_[M-4])||a.x),a.by=n&&(parseFloat(_[M-3])||a.y),a.x=n&&_[M-2],a.y=n&&_[M-1]}return n?[e,n]:e},W1=/,?([a-z]),?/gi,gc=function(t){return t.join(",").replace(W1,"$1")},Mh=function(t,r,e,n,i){var a=-3*r+9*e-9*n+3*i,o=t*a+6*r-12*e+6*n;return t*o-3*r+3*e},Dh=function(t,r,e,n,i,a,o,s,c){c===null&&(c=1),c=c>1?1:c<0?0:c;for(var d=c/2,h=12,v=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],g=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],C=0,w=0;w<h;w++){var S=d*v[w]+d,_=Mh(S,t,e,i,o),T=Mh(S,r,n,a,s),M=_*_+T*T;C+=g[w]*Math.sqrt(M)}return d*C},On=function(t,r,e,n,i,a,o,s){for(var c=[],d=[[],[]],h,v,g,C,w=0;w<2;++w){if(w===0?(v=6*t-12*e+6*i,h=-3*t+9*e-9*i+3*o,g=3*e-3*t):(v=6*r-12*n+6*a,h=-3*r+9*n-9*a+3*s,g=3*n-3*r),Math.abs(h)<1e-12){if(Math.abs(v)<1e-12)continue;C=-g/v,C>0&&C<1&&c.push(C);continue}var S=v*v-4*g*h,_=Math.sqrt(S);if(!(S<0)){var T=(-v+_)/(2*h);T>0&&T<1&&c.push(T);var M=(-v-_)/(2*h);M>0&&M<1&&c.push(M)}}for(var D=c.length,B=D,G;D--;)C=c[D],G=1-C,d[0][D]=G*G*G*t+3*G*G*C*e+3*G*C*C*i+C*C*C*o,d[1][D]=G*G*G*r+3*G*G*C*n+3*G*C*C*a+C*C*C*s;return d[0][B]=t,d[1][B]=r,d[0][B+1]=o,d[1][B+1]=s,d[0].length=d[1].length=B+2,{min:{x:Math.min.apply(0,d[0]),y:Math.min.apply(0,d[1])},max:{x:Math.max.apply(0,d[0]),y:Math.max.apply(0,d[1])}}},k1=function(t,r,e,n,i,a,o,s){if(!(Math.max(t,e)<Math.min(i,o)||Math.min(t,e)>Math.max(i,o)||Math.max(r,n)<Math.min(a,s)||Math.min(r,n)>Math.max(a,s))){var c=(t*n-r*e)*(i-o)-(t-e)*(i*s-a*o),d=(t*n-r*e)*(a-s)-(r-n)*(i*s-a*o),h=(t-e)*(a-s)-(r-n)*(i-o);if(h){var v=c/h,g=d/h,C=+v.toFixed(2),w=+g.toFixed(2);if(!(C<+Math.min(t,e).toFixed(2)||C>+Math.max(t,e).toFixed(2)||C<+Math.min(i,o).toFixed(2)||C>+Math.max(i,o).toFixed(2)||w<+Math.min(r,n).toFixed(2)||w>+Math.max(r,n).toFixed(2)||w<+Math.min(a,s).toFixed(2)||w>+Math.max(a,s).toFixed(2)))return{x:v,y:g}}}},jt=function(t,r,e){return r>=t.x&&r<=t.x+t.width&&e>=t.y&&e<=t.y+t.height},mc=function(t,r,e,n,i){if(i)return[["M",+t+ +i,r],["l",e-i*2,0],["a",i,i,0,0,1,i,i],["l",0,n-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-e,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-n],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",t,r],["l",e,0],["l",0,n],["l",-e,0],["z"]];return a.parsePathArray=gc,a},yc=function(t,r,e,n){return t===null&&(t=r=e=n=0),r===null&&(r=t.y,e=t.width,n=t.height,t=t.x),{x:t,y:r,width:e,w:e,height:n,h:n,x2:t+e,y2:r+n,cx:t+e/2,cy:r+n/2,r1:Math.min(e,n)/2,r2:Math.max(e,n)/2,r0:Math.sqrt(e*e+n*n)/2,path:mc(t,r,e,n),vb:[t,r,e,n].join(" ")}},U1=function(t,r){return t=yc(t),r=yc(r),jt(r,t.x,t.y)||jt(r,t.x2,t.y)||jt(r,t.x,t.y2)||jt(r,t.x2,t.y2)||jt(t,r.x,r.y)||jt(t,r.x2,r.y)||jt(t,r.x,r.y2)||jt(t,r.x2,r.y2)||(t.x<r.x2&&t.x>r.x||r.x<t.x2&&r.x>t.x)&&(t.y<r.y2&&t.y>r.y||r.y<t.y2&&r.y>t.y)},Qa=function(t,r,e,n,i,a,o,s){qr(t)||(t=[t,r,e,n,i,a,o,s]);var c=On.apply(null,t);return yc(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)},Bh=function(t,r,e,n,i,a,o,s,c){var d=1-c,h=Math.pow(d,3),v=Math.pow(d,2),g=c*c,C=g*c,w=h*t+v*3*c*e+d*3*c*c*i+C*o,S=h*r+v*3*c*n+d*3*c*c*a+C*s,_=t+2*c*(e-t)+g*(i-2*e+t),T=r+2*c*(n-r)+g*(a-2*n+r),M=e+2*c*(i-e)+g*(o-2*i+e),D=n+2*c*(a-n)+g*(s-2*a+n),B=d*t+c*e,G=d*r+c*n,V=d*i+c*o,q=d*a+c*s,J=90-Math.atan2(_-M,T-D)*180/Math.PI;return{x:w,y:S,m:{x:_,y:T},n:{x:M,y:D},start:{x:B,y:G},end:{x:V,y:q},alpha:J}},Y1=function(t,r,e){var n=Qa(t),i=Qa(r);if(!U1(n,i))return e?0:[];for(var a=Dh.apply(0,t),o=Dh.apply(0,r),s=~~(a/8),c=~~(o/8),d=[],h=[],v={},g=e?0:[],C=0;C<s+1;C++){var w=Bh.apply(0,t.concat(C/s));d.push({x:w.x,y:w.y,t:C/s})}for(var C=0;C<c+1;C++){var w=Bh.apply(0,r.concat(C/c));h.push({x:w.x,y:w.y,t:C/c})}for(var C=0;C<s;C++)for(var S=0;S<c;S++){var _=d[C],T=d[C+1],M=h[S],D=h[S+1],B=Math.abs(T.x-_.x)<.001?"y":"x",G=Math.abs(D.x-M.x)<.001?"y":"x",V=k1(_.x,_.y,T.x,T.y,M.x,M.y,D.x,D.y);if(V){if(v[V.x.toFixed(4)]===V.y.toFixed(4))continue;v[V.x.toFixed(4)]=V.y.toFixed(4);var q=_.t+Math.abs((V[B]-_[B])/(T[B]-_[B]))*(T.t-_.t),J=M.t+Math.abs((V[G]-M[G])/(D[G]-M[G]))*(D.t-M.t);q>=0&&q<=1&&J>=0&&J<=1&&(e?g+=1:g.push({x:V.x,y:V.y,t1:q,t2:J}))}}return g},V1=function(t,r,e){t=pc(t),r=pc(r);for(var n,i,a,o,s,c,d,h,v,g,C=e?0:[],w=0,S=t.length;w<S;w++){var _=t[w];if(_[0]==="M")n=s=_[1],i=c=_[2];else{_[0]==="C"?(v=[n,i].concat(_.slice(1)),n=v[6],i=v[7]):(v=[n,i,n,i,s,c,s,c],n=s,i=c);for(var T=0,M=r.length;T<M;T++){var D=r[T];if(D[0]==="M")a=d=D[1],o=h=D[2];else{D[0]==="C"?(g=[a,o].concat(D.slice(1)),a=g[6],o=g[7]):(g=[a,o,a,o,d,h,d,h],a=d,o=h);var B=Y1(v,g,e);if(e)C+=B;else{for(var G=0,V=B.length;G<V;G++)B[G].segment1=w,B[G].segment2=T,B[G].bez1=v,B[G].bez2=g;C=C.concat(B)}}}}}return C},X1=function(t,r){return V1(t,r)};function j1(t,r){var e=[],n=[];function i(a,o){if(a.length===1)e.push(a[0]),n.push(a[0]);else{for(var s=[],c=0;c<a.length-1;c++)c===0&&e.push(a[0]),c===a.length-2&&n.push(a[c+1]),s[c]=[(1-o)*a[c][0]+o*a[c+1][0],(1-o)*a[c][1]+o*a[c+1][1]];i(s,o)}}return t.length&&i(t,r),{left:e,right:n.reverse()}}function q1(t,r,e){var n=[[t[1],t[2]]];e=e||2;var i=[];r[0]==="A"?(n.push(r[6]),n.push(r[7])):r[0]==="C"?(n.push([r[1],r[2]]),n.push([r[3],r[4]]),n.push([r[5],r[6]])):r[0]==="S"||r[0]==="Q"?(n.push([r[1],r[2]]),n.push([r[3],r[4]])):n.push([r[1],r[2]]);for(var a=n,o=1/e,s=0;s<e-1;s++){var c=o/(1-o*s),d=j1(a,c);i.push(d.left),a=d.right}i.push(a);var h=i.map(function(v){var g=[];return v.length===4&&(g.push("C"),g=g.concat(v[2])),v.length>=3&&(v.length===3&&g.push("Q"),g=g.concat(v[1])),v.length===2&&g.push("L"),g=g.concat(v[v.length-1]),g});return h}var Ph=function(t,r,e){if(e===1)return[[].concat(t)];var n=[];if(r[0]==="L"||r[0]==="C"||r[0]==="Q")n=n.concat(q1(t,r,e));else{var i=[].concat(t);i[0]==="M"&&(i[0]="L");for(var a=0;a<=e-1;a++)n.push(i)}return n},si=function(t,r){if(t.length===1)return t;var e=t.length-1,n=r.length-1,i=e/n,a=[];if(t.length===1&&t[0][0]==="M"){for(var o=0;o<n-e;o++)t.push(t[0]);return t}for(var o=0;o<n;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var c=a.reduce(function(d,h,v){return v===e?d.concat(t[e]):d.concat(Ph(t[v],t[v+1],h))},[]);return c.unshift(t[0]),(r[n]==="Z"||r[n]==="z")&&c.push("Z"),c},hn=function(t,r){if(t.length!==r.length)return!1;var e=!0;return lt(t,function(n,i){if(n!==r[i])return e=!1,!1}),e};function K1(t,r,e){var n=null,i=e;return r<i&&(i=r,n="add"),t<i&&(i=t,n="del"),{type:n,min:i}}var hs=function(t,r){var e=t.length,n=r.length,i,a,o=0;if(e===0||n===0)return null;for(var s=[],c=0;c<=e;c++)s[c]=[],s[c][0]={min:c};for(var d=0;d<=n;d++)s[0][d]={min:d};for(var c=1;c<=e;c++){i=t[c-1];for(var d=1;d<=n;d++){a=r[d-1],hn(i,a)?o=0:o=1;var h=s[c-1][d].min+1,v=s[c][d-1].min+1,g=s[c-1][d-1].min+o;s[c][d]=K1(h,v,g)}}return s},vs=function(t,r){var e=hs(t,r),n=t.length,i=r.length,a=[],o=1,s=1;if(e[n][i].min!==n){for(var c=1;c<=n;c++){var d=e[c][c].min;s=c;for(var h=o;h<=i;h++)e[c][h].min<d&&(d=e[c][h].min,s=h);o=s,e[c][o].type&&a.push({index:c-1,type:e[c][o].type})}for(var c=a.length-1;c>=0;c--)o=a[c].index,a[c].type==="add"?t.splice(o,0,[].concat(t[o])):t.splice(o,1)}n=t.length;var v=i-n;if(n<i)for(var c=0;c<v;c++)t[n-1][0]==="z"||t[n-1][0]==="Z"?t.splice(n-2,0,t[n-2]):t.push(t[n-1]),n+=1;return t};function Cc(t,r,e){for(var n=[].concat(t),i,a=1/(e+1),o=Bt(r)[0],s=1;s<=e;s++)a*=s,i=Math.floor(t.length*a),i===0?n.unshift([o[0]*a+t[i][0]*(1-a),o[1]*a+t[i][1]*(1-a)]):n.splice(i,0,[o[0]*a+t[i][0]*(1-a),o[1]*a+t[i][1]*(1-a)]);return n}function Bt(t){var r=[];switch(t[0]){case"M":r.push([t[1],t[2]]);break;case"L":r.push([t[1],t[2]]);break;case"A":r.push([t[6],t[7]]);break;case"Q":r.push([t[3],t[4]]),r.push([t[1],t[2]]);break;case"T":r.push([t[1],t[2]]);break;case"C":r.push([t[5],t[6]]),r.push([t[1],t[2]]),r.push([t[3],t[4]]);break;case"S":r.push([t[3],t[4]]),r.push([t[1],t[2]]);break;case"H":r.push([t[1],t[1]]);break;case"V":r.push([t[1],t[1]]);break}return r}var wc=function(t,r){if(t.length<=1)return t;for(var e,n=0;n<r.length;n++)if(t[n][0]!==r[n][0])switch(e=Bt(t[n]),r[n][0]){case"M":t[n]=["M"].concat(e[0]);break;case"L":t[n]=["L"].concat(e[0]);break;case"A":t[n]=[].concat(r[n]),t[n][6]=e[0][0],t[n][7]=e[0][1];break;case"Q":if(e.length<2)if(n>0)e=Cc(e,t[n-1],1);else{t[n]=r[n];break}t[n]=["Q"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"T":t[n]=["T"].concat(e[0]);break;case"C":if(e.length<3)if(n>0)e=Cc(e,t[n-1],2);else{t[n]=r[n];break}t[n]=["C"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(e.length<2)if(n>0)e=Cc(e,t[n-1],1);else{t[n]=r[n];break}t[n]=["S"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;default:t[n]=r[n]}return t},Nh=Object.freeze({__proto__:null,catmullRomToBezier:hc,fillPath:si,fillPathByDiff:vs,formatPath:wc,intersection:X1,parsePathArray:gc,parsePathString:Za,pathToAbsolute:Dt,pathToCurve:pc,rectPath:mc}),Fh=function(){function t(r,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=r,this.name=r,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){var r=this.type;return"[Event (type="+r+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();var ps=function(t,r){return ps=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},ps(t,r)};function Ja(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");ps(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Z1="*",gs=function(){function t(){this._events={}}return t.prototype.on=function(r,e,n){return this._events[r]||(this._events[r]=[]),this._events[r].push({callback:e,once:!!n}),this},t.prototype.once=function(r,e){return this.on(r,e,!0)},t.prototype.emit=function(r){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[r]||[],o=this._events[Z1]||[],s=function(c){for(var d=c.length,h=0;h<d;h++)if(c[h]){var v=c[h],g=v.callback,C=v.once;C&&(c.splice(h,1),c.length===0&&delete e._events[r],d--,h--),g.apply(e,n)}};s(a),s(o)},t.prototype.off=function(r,e){if(!r)this._events={};else if(!e)delete this._events[r];else{for(var n=this._events[r]||[],i=n.length,a=0;a<i;a++)n[a].callback===e&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[r]}return this},t.prototype.getEvents=function(){return this._events},t}();function Hh(t,r){var e=t.indexOf(r);e!==-1&&t.splice(e,1)}var Wt=typeof window!="undefined"&&typeof window.document!="undefined";function xc(t,r){if(t.isCanvas())return!0;for(var e=r.getParent(),n=!1;e;){if(e===t){n=!0;break}e=e.getParent()}return n}function bc(t){return t.cfg.visible&&t.cfg.capture}var Q1=function(t){Ja(r,t);function r(e){var n=t.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=Ko(i,e),n}return r.prototype.getDefaultCfg=function(){return{}},r.prototype.get=function(e){return this.cfg[e]},r.prototype.set=function(e,n){this.cfg[e]=n},r.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},r}(gs),zh=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))},J1=function(){function t(r,e,n){this.name=r,this.version=e,this.os=n,this.type="browser"}return t}(),Sc=function(){function t(r){this.version=r,this.type="node",this.name="node",this.os=$.platform}return t}(),Gh=function(){function t(r,e,n,i){this.name=r,this.version=e,this.os=n,this.bot=i,this.type="bot-device"}return t}(),ey=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),ty=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),$h=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Jo=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Wh=3,ry=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",$h]],kh=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ny(t){return t?Uh(t):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new ty:typeof navigator!="undefined"?Uh(navigator.userAgent):Yh()}function ua(t){return t!==""&&ry.reduce(function(r,e){var n=e[0],i=e[1];if(r)return r;var a=i.exec(t);return!!a&&[n,a]},!1)}function Uh(t){var r=ua(t);if(!r)return null;var e=r[0],n=r[1];if(e==="searchbot")return new ey;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Wh&&(i=zh(zh([],i,!0),iy(Wh-i.length),!0)):i=[];var a=i.join("."),o=Ec(t),s=Jo.exec(t);return s&&s[1]?new Gh(e,a,o,s[1]):new J1(e,a,o)}function Ec(t){for(var r=0,e=kh.length;r<e;r++){var n=kh[r],i=n[0],a=n[1],o=a.exec(t);if(o)return i}return null}function Yh(){var t=typeof $!="undefined"&&$.version;return t?new Sc($.version.slice(1)):null}function iy(t){for(var r=[],e=0;e<t;e++)r.push("0");return r}var ms=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});function ys(t,r,e){var n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],c=r[5],d=r[6],h=r[7],v=r[8],g=e[0],C=e[1],w=e[2],S=e[3],_=e[4],T=e[5],M=e[6],D=e[7],B=e[8];return t[0]=g*n+C*o+w*d,t[1]=g*i+C*s+w*h,t[2]=g*a+C*c+w*v,t[3]=S*n+_*o+T*d,t[4]=S*i+_*s+T*h,t[5]=S*a+_*c+T*v,t[6]=M*n+D*o+B*d,t[7]=M*i+D*s+B*h,t[8]=M*a+D*c+B*v,t}function ca(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function ay(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=0,t[3]=-e,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function oy(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function ly(){var t=new ms(3);return ms!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function sy(t,r,e){var n=r[0],i=r[1],a=r[2];return t[0]=n*e[0]+i*e[3]+a*e[6],t[1]=n*e[1]+i*e[4]+a*e[7],t[2]=n*e[2]+i*e[5]+a*e[8],t}(function(){var t=ly();return function(r,e,n,i,a,o){var s,c;for(e||(e=3),n||(n=0),i?c=Math.min(i*e+n,r.length):c=r.length,s=n;s<c;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],a(t,t,o),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2];return r}})();function uy(){var t=new ms(2);return ms!=Float32Array&&(t[0]=0,t[1]=0),t}function cy(t,r){var e=r[0],n=r[1],i=e*e+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=r[0]*i,t[1]=r[1]*i,t}function dy(t,r){return t[0]*r[0]+t[1]*r[1]}function fy(t,r){return t[0]===r[0]&&t[1]===r[1]}(function(){var t=uy();return function(r,e,n,i,a,o){var s,c;for(e||(e=2),n||(n=0),i?c=Math.min(i*e+n,r.length):c=r.length,s=n;s<c;s+=e)t[0]=r[s],t[1]=r[s+1],a(t,t,o),r[s]=t[0],r[s+1]=t[1];return r}})();function hy(t,r,e){var n=[0,0,0,0,0,0,0,0,0];return ca(n,e),ys(t,n,r)}function da(t,r,e){var n=[0,0,0,0,0,0,0,0,0];return ay(n,e),ys(t,n,r)}function vy(t,r,e){var n=[0,0,0,0,0,0,0,0,0];return oy(n,e),ys(t,n,r)}function _c(t,r,e){return ys(t,e,r)}function Tc(t,r){for(var e=t?[].concat(t):[1,0,0,0,1,0,0,0,1],n=0,i=r.length;n<i;n++){var a=r[n];switch(a[0]){case"t":hy(e,e,[a[1],a[2]]);break;case"s":vy(e,e,[a[1],a[2]]);break;case"r":da(e,e,a[1]);break;case"m":_c(e,e,a[1]);break}}return e}function Vh(t,r){var e=[],n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],d=t[6],h=t[7],v=t[8],g=r[0],C=r[1],w=r[2],S=r[3],_=r[4],T=r[5],M=r[6],D=r[7],B=r[8];return e[0]=g*n+C*o+w*d,e[1]=g*i+C*s+w*h,e[2]=g*a+C*c+w*v,e[3]=S*n+_*o+T*d,e[4]=S*i+_*s+T*h,e[5]=S*a+_*c+T*v,e[6]=M*n+D*o+B*d,e[7]=M*i+D*s+B*h,e[8]=M*a+D*c+B*v,e}function fa(t,r){var e=[],n=r[0],i=r[1];return e[0]=t[0]*n+t[3]*i+t[6],e[1]=t[1]*n+t[4]*i+t[7],e}function Xh(t){var r=[],e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],d=t[7],h=t[8],v=h*o-s*d,g=-h*a+s*c,C=d*a-o*c,w=e*v+n*g+i*C;return w?(w=1/w,r[0]=v*w,r[1]=(-h*n+i*d)*w,r[2]=(s*n-i*o)*w,r[3]=g*w,r[4]=(h*e-i*c)*w,r[5]=(-s*e+i*a)*w,r[6]=C*w,r[7]=(-d*e+n*c)*w,r[8]=(o*e-n*a)*w,r):null}var el=Tc,Cs="matrix",py=["zIndex","capture","visible","type"],gy=["repeat"],my=":",yy="*";function Cy(t){for(var r=[],e=0;e<t.length;e++)qr(t[e])?r.push([].concat(t[e])):r.push(t[e]);return r}function wy(t,r){var e={},n=r.attrs;for(var i in t)e[i]=n[i];return e}function ws(t,r){var e={},n=r.attr();return lt(t,function(i,a){gy.indexOf(a)===-1&&!Zo(n[a],i)&&(e[a]=i)}),e}function xy(t,r){if(r.onFrame)return t;var e=r.startTime,n=r.delay,i=r.duration,a=Object.prototype.hasOwnProperty;return lt(t,function(o){e+n<o.startTime+o.delay+o.duration&&i>o.delay&&lt(r.toAttrs,function(s,c){a.call(o.toAttrs,c)&&(delete o.toAttrs[c],delete o.fromAttrs[c])})}),t}var jh=function(t){Ja(r,t);function r(e){var n=t.call(this,e)||this;n.attrs={};var i=n.getDefaultAttrs();return Ko(i,e.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return r.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},r.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},r.prototype.onCanvasChange=function(e){},r.prototype.initAttrs=function(e){},r.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},r.prototype.isGroup=function(){return!1},r.prototype.getParent=function(){return this.get("parent")},r.prototype.getCanvas=function(){return this.get("canvas")},r.prototype.attr=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n[0],o=n[1];if(!a)return this.attrs;if(Ka(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return n.length===2?(this.setAttr(a,o),this.afterAttrsChange((e={},e[a]=o,e)),this):this.attrs[a]},r.prototype.isClipped=function(e,n){var i=this.getClip();return i&&!i.isHit(e,n)},r.prototype.setAttr=function(e,n){var i=this.attrs[e];i!==n&&(this.attrs[e]=n,this.onAttrChange(e,n,i))},r.prototype.onAttrChange=function(e,n,i){e==="matrix"&&this.set("totalMatrix",null)},r.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},r.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},r.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},r.prototype.setZIndex=function(e){this.set("zIndex",e);var n=this.getParent();return n&&n.sort(),this},r.prototype.toFront=function(){var e=this.getParent();if(e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},r.prototype.toBack=function(){var e=this.getParent();if(e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},r.prototype.remove=function(e){e===void 0&&(e=!0);var n=this.getParent();n?(Hh(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},r.prototype.resetMatrix=function(){this.attr(Cs,this.getDefaultMatrix()),this.onCanvasChange("matrix")},r.prototype.getMatrix=function(){return this.attr(Cs)},r.prototype.setMatrix=function(e){this.attr(Cs,e),this.onCanvasChange("matrix")},r.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?e=Vh(i,n):e=n||i,this.set("totalMatrix",e)}return e},r.prototype.applyMatrix=function(e){var n=this.attr("matrix"),i=null;e&&n?i=Vh(e,n):i=n||e,this.set("totalMatrix",i),this.set("parentMatrix",e)},r.prototype.getDefaultMatrix=function(){return null},r.prototype.applyToMatrix=function(e){var n=this.attr("matrix");return n?fa(n,e):e},r.prototype.invertFromMatrix=function(e){var n=this.attr("matrix");if(n){var i=Xh(n);if(i)return fa(i,e)}return e},r.prototype.setClip=function(e){var n=this.getCanvas(),i=null;if(e){var a=this.getShapeBase(),o=Ih(e.type),s=a[o];s&&(i=new s({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},r.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},r.prototype.clone=function(){var e=this,n=this.attrs,i={};lt(n,function(s,c){qr(n[c])?i[c]=Cy(n[c]):i[c]=n[c]});var a=this.constructor,o=new a({attrs:i});return lt(py,function(s){o.set(s,e.get(s))}),o},r.prototype.destroy=function(){var e=this.destroyed;e||(this.attrs={},t.prototype.destroy.call(this))},r.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},r.prototype.animate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=e[0],s=e[1],c=e[2],d=c===void 0?"easeLinear":c,h=e[3],v=h===void 0?pt:h,g=e[4],C=g===void 0?0:g,w,S,_,T,M;Mi(o)?(w=o,o={}):Ka(o)&&o.onFrame&&(w=o.onFrame,S=o.repeat),Ka(s)?(M=s,s=M.duration,d=M.easing||"easeLinear",C=M.delay||0,S=M.repeat||S||!1,v=M.callback||pt,_=M.pauseCallback||pt,T=M.resumeCallback||pt):(cs(v)&&(C=v,v=null),Mi(d)?(v=d,d="easeLinear"):d=d||"easeLinear");var D=ws(o,this),B={fromAttrs:wy(D,this),toAttrs:D,duration:s,easing:d,repeat:S,callback:v,pauseCallback:_,resumeCallback:T,delay:C,startTime:i.getTime(),id:ye(),onFrame:w,pathFormatted:!1};a.length>0?a=xy(a,B):i.addAnimator(this),a.push(B),this.set("animations",a),this.set("_pause",{isPaused:!1})}},r.prototype.stopAnimate=function(e){var n=this;e===void 0&&(e=!0);var i=this.get("animations");lt(i,function(a){e&&(a.onFrame?n.attr(a.onFrame(1)):n.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},r.prototype.pauseAnimate=function(){var e=this.get("timeline"),n=this.get("animations"),i=e.getTime();return lt(n,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},r.prototype.resumeAnimate=function(){var e=this.get("timeline"),n=e.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return lt(i,function(o){o.startTime=o.startTime+(n-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},r.prototype.emitDelegation=function(e,n){var i=this,a=n.propagationPath;this.getEvents();var o;e==="mouseenter"?o=n.fromShape:e==="mouseleave"&&(o=n.toShape);for(var s=function(v){var g=a[v],C=g.get("name");if(C){if((g.isGroup()||g.isCanvas&&g.isCanvas())&&o&&xc(g,o))return"break";qr(C)?lt(C,function(w){i.emitDelegateEvent(g,w,n)}):c.emitDelegateEvent(g,C,n)}},c=this,d=0;d<a.length;d++){var h=s(d);if(h==="break")break}},r.prototype.emitDelegateEvent=function(e,n,i){var a=this.getEvents(),o=n+my+i.type;(a[o]||a[yy])&&(i.name=o,i.currentTarget=e,i.delegateTarget=this,i.delegateObject=e.get("delegateObject"),this.emit(o,i))},r.prototype.translate=function(e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=this.getMatrix(),a=el(i,[["t",e,n]]);return this.setMatrix(a),this},r.prototype.move=function(e,n){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(e-i,n-a),this},r.prototype.moveTo=function(e,n){return this.move(e,n)},r.prototype.scale=function(e,n){var i=this.getMatrix(),a=el(i,[["s",e,n||e]]);return this.setMatrix(a),this},r.prototype.rotate=function(e){var n=this.getMatrix(),i=el(n,[["r",e]]);return this.setMatrix(i),this},r.prototype.rotateAtStart=function(e){var n=this.attr(),i=n.x,a=n.y,o=this.getMatrix(),s=el(o,[["t",-i,-a],["r",e],["t",i,a]]);return this.setMatrix(s),this},r.prototype.rotateAtPoint=function(e,n,i){var a=this.getMatrix(),o=el(a,[["t",-e,-n],["r",i],["t",e,n]]);return this.setMatrix(o),this},r}(Q1),qh={},xs="_INDEX";function Lc(t,r){if(t.set("canvas",r),t.isGroup()){var e=t.get("children");e.length&&e.forEach(function(n){Lc(n,r)})}}function Rc(t,r){if(t.set("timeline",r),t.isGroup()){var e=t.get("children");e.length&&e.forEach(function(n){Rc(n,r)})}}function by(t,r,e){e===void 0&&(e=!0),e?r.destroy():(r.set("parent",null),r.set("canvas",null)),Hh(t.getChildren(),r)}function Sy(t){return function(r,e){var n=t(r,e);return n===0?r[xs]-e[xs]:n}}var Ac=function(t){Ja(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.isCanvas=function(){return!1},r.prototype.getBBox=function(){var e=1/0,n=-1/0,i=1/0,a=-1/0,o=[],s=[],c=this.getChildren().filter(function(h){return h.get("visible")&&(!h.isGroup()||h.isGroup()&&h.getChildren().length>0)});c.length>0?(lt(c,function(h){var v=h.getBBox();o.push(v.minX,v.maxX),s.push(v.minY,v.maxY)}),e=Vn(o),n=Yn(o),i=Vn(s),a=Yn(s)):(e=0,n=0,i=0,a=0);var d={x:e,y:i,minX:e,minY:i,maxX:n,maxY:a,width:n-e,height:a-i};return d},r.prototype.getCanvasBBox=function(){var e=1/0,n=-1/0,i=1/0,a=-1/0,o=[],s=[],c=this.getChildren().filter(function(h){return h.get("visible")&&(!h.isGroup()||h.isGroup()&&h.getChildren().length>0)});c.length>0?(lt(c,function(h){var v=h.getCanvasBBox();o.push(v.minX,v.maxX),s.push(v.minY,v.maxY)}),e=Vn(o),n=Yn(o),i=Vn(s),a=Yn(s)):(e=0,n=0,i=0,a=0);var d={x:e,y:i,minX:e,minY:i,maxX:n,maxY:a,width:n-e,height:a-i};return d},r.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},r.prototype.onAttrChange=function(e,n,i){if(t.prototype.onAttrChange.call(this,e,n,i),e==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},r.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},r.prototype._applyChildrenMarix=function(e){var n=this.getChildren();lt(n,function(i){i.applyMatrix(e)})},r.prototype.addShape=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],a=e[1];Ka(i)?a=i:a.type=i;var o=qh[a.type];o||(o=Ih(a.type),qh[a.type]=o);var s=this.getShapeBase(),c=new s[o](a);return this.add(c),c},r.prototype.addGroup=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],a=e[1],o;if(Mi(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},c=this.getGroupBase();o=new c(s)}return this.add(o),o},r.prototype.getCanvas=function(){var e;return this.isCanvas()?e=this:e=this.get("canvas"),e},r.prototype.getShape=function(e,n,i){if(!bc(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,e,n,i);else{var s=[e,n,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},r.prototype._findShape=function(e,n,i,a){for(var o=null,s=e.length-1;s>=0;s--){var c=e[s];if(bc(c)&&(c.isGroup()?o=c.getShape(n,i,a):c.isHit(n,i)&&(o=c)),o)break}return o},r.prototype.add=function(e){var n=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=e.getParent();o&&by(o,e,!1),e.set("parent",this),n&&Lc(e,n),a&&Rc(e,a),i.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},r.prototype._applyElementMatrix=function(e){var n=this.getTotalMatrix();n&&e.applyMatrix(n)},r.prototype.getChildren=function(){return this.get("children")},r.prototype.sort=function(){var e=this.getChildren();lt(e,function(n,i){return n[xs]=i,n}),e.sort(Sy(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},r.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),n=e.length-1;n>=0;n--)e[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},r.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},r.prototype.getFirst=function(){return this.getChildByIndex(0)},r.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},r.prototype.getChildByIndex=function(e){var n=this.getChildren();return n[e]},r.prototype.getCount=function(){var e=this.getChildren();return e.length},r.prototype.contain=function(e){var n=this.getChildren();return n.indexOf(e)>-1},r.prototype.removeChild=function(e,n){n===void 0&&(n=!0),this.contain(e)&&e.remove(n)},r.prototype.findAll=function(e){var n=[],i=this.getChildren();return lt(i,function(a){e(a)&&n.push(a),a.isGroup()&&(n=n.concat(a.findAll(e)))}),n},r.prototype.find=function(e){var n=null,i=this.getChildren();return lt(i,function(a){if(e(a)?n=a:a.isGroup()&&(n=a.find(e)),n)return!1}),n},r.prototype.findById=function(e){return this.find(function(n){return n.get("id")===e})},r.prototype.findByClassName=function(e){return this.find(function(n){return n.get("className")===e})},r.prototype.findAllByName=function(e){return this.findAll(function(n){return n.get("name")===e})},r}(jh),eo=0,tl=0,rl=0,nl=1e3,ha,ui,bs=0,va=0,to=0,ci=typeof performance=="object"&&performance.now?performance:Date,Ic=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Oc(){return va||(Ic(Ey),va=ci.now()+to)}function Ey(){va=0}function Mc(){this._call=this._time=this._next=null}Mc.prototype=il.prototype={constructor:Mc,restart:function(t,r,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?Oc():+e)+(r==null?0:+r),!this._next&&ui!==this&&(ui?ui._next=this:ha=this,ui=this),this._call=t,this._time=e,ro()},stop:function(){this._call&&(this._call=null,this._time=1/0,ro())}};function il(t,r,e){var n=new Mc;return n.restart(t,r,e),n}function Xn(){Oc(),++eo;for(var t=ha,r;t;)(r=va-t._time)>=0&&t._call.call(null,r),t=t._next;--eo}function Kh(){va=(bs=ci.now())+to,eo=tl=0;try{Xn()}finally{eo=0,Ty(),va=0}}function _y(){var t=ci.now(),r=t-bs;r>nl&&(to-=r,bs=t)}function Ty(){for(var t,r=ha,e,n=1/0;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:ha=e);ui=t,ro(n)}function ro(t){if(!eo){tl&&(tl=clearTimeout(tl));var r=t-va;r>24?(t<1/0&&(tl=setTimeout(Kh,t-ci.now()-to)),rl&&(rl=clearInterval(rl))):(rl||(bs=ci.now(),rl=setInterval(_y,nl)),eo=1,Ic(Kh))}}function Dc(t,r,e){t.prototype=r.prototype=e,e.constructor=t}function Zh(t,r){var e=Object.create(t.prototype);for(var n in r)e[n]=r[n];return e}function no(){}var io=.7,Ss=1/io,ao="\\s*([+-]?\\d+)\\s*",al="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Er="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ly=/^#([0-9a-f]{3,8})$/,Qh=new RegExp("^rgb\\("+[ao,ao,ao]+"\\)$"),Jh=new RegExp("^rgb\\("+[Er,Er,Er]+"\\)$"),Ry=new RegExp("^rgba\\("+[ao,ao,ao,al]+"\\)$"),ev=new RegExp("^rgba\\("+[Er,Er,Er,al]+"\\)$"),Ay=new RegExp("^hsl\\("+[al,Er,Er]+"\\)$"),Iy=new RegExp("^hsla\\("+[al,Er,Er,al]+"\\)$"),pa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dc(no,ol,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:tv,formatHex:tv,formatHsl:Oy,formatRgb:rv,toString:rv});function tv(){return this.rgb().formatHex()}function Oy(){return lv(this).formatHsl()}function rv(){return this.rgb().formatRgb()}function ol(t){var r,e;return t=(t+"").trim().toLowerCase(),(r=Ly.exec(t))?(e=r[1].length,r=parseInt(r[1],16),e===6?nv(r):e===3?new Kr(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):e===8?Es(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):e===4?Es(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Qh.exec(t))?new Kr(r[1],r[2],r[3],1):(r=Jh.exec(t))?new Kr(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Ry.exec(t))?Es(r[1],r[2],r[3],r[4]):(r=ev.exec(t))?Es(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Ay.exec(t))?ov(r[1],r[2]/100,r[3]/100,1):(r=Iy.exec(t))?ov(r[1],r[2]/100,r[3]/100,r[4]):pa.hasOwnProperty(t)?nv(pa[t]):t==="transparent"?new Kr(NaN,NaN,NaN,0):null}function nv(t){return new Kr(t>>16&255,t>>8&255,t&255,1)}function Es(t,r,e,n){return n<=0&&(t=r=e=NaN),new Kr(t,r,e,n)}function My(t){return t instanceof no||(t=ol(t)),t?(t=t.rgb(),new Kr(t.r,t.g,t.b,t.opacity)):new Kr}function Bc(t,r,e,n){return arguments.length===1?My(t):new Kr(t,r,e,n==null?1:n)}function Kr(t,r,e,n){this.r=+t,this.g=+r,this.b=+e,this.opacity=+n}Dc(Kr,Bc,Zh(no,{brighter:function(t){return t=t==null?Ss:Math.pow(Ss,t),new Kr(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?io:Math.pow(io,t),new Kr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iv,formatHex:iv,formatRgb:av,toString:av}));function iv(){return"#"+Pc(this.r)+Pc(this.g)+Pc(this.b)}function av(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Pc(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function ov(t,r,e,n){return n<=0?t=r=e=NaN:e<=0||e>=1?t=r=NaN:r<=0&&(t=NaN),new jn(t,r,e,n)}function lv(t){if(t instanceof jn)return new jn(t.h,t.s,t.l,t.opacity);if(t instanceof no||(t=ol(t)),!t)return new jn;if(t instanceof jn)return t;t=t.rgb();var r=t.r/255,e=t.g/255,n=t.b/255,i=Math.min(r,e,n),a=Math.max(r,e,n),o=NaN,s=a-i,c=(a+i)/2;return s?(r===a?o=(e-n)/s+(e<n)*6:e===a?o=(n-r)/s+2:o=(r-e)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new jn(o,s,c,t.opacity)}function Dy(t,r,e,n){return arguments.length===1?lv(t):new jn(t,r,e,n==null?1:n)}function jn(t,r,e,n){this.h=+t,this.s=+r,this.l=+e,this.opacity=+n}Dc(jn,Dy,Zh(no,{brighter:function(t){return t=t==null?Ss:Math.pow(Ss,t),new jn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?io:Math.pow(io,t),new jn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*r,i=2*e-n;return new Kr(Nc(t>=240?t-240:t+120,i,n),Nc(t,i,n),Nc(t<120?t+240:t-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Nc(t,r,e){return(t<60?r+(e-r)*t/60:t<180?e:t<240?r+(e-r)*(240-t)/60:r)*255}function Fc(t){return function(){return t}}function By(t,r){return function(e){return t+e*r}}function Py(t,r,e){return t=Math.pow(t,e),r=Math.pow(r,e)-t,e=1/e,function(n){return Math.pow(t+n*r,e)}}function Ny(t){return(t=+t)==1?sv:function(r,e){return e-r?Py(r,e,t):Fc(isNaN(r)?e:r)}}function sv(t,r){var e=r-t;return e?By(t,e):Fc(isNaN(t)?r:t)}var uv=function t(r){var e=Ny(r);function n(i,a){var o=e((i=Bc(i)).r,(a=Bc(a)).r),s=e(i.g,a.g),c=e(i.b,a.b),d=sv(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=s(h),i.b=c(h),i.opacity=d(h),i+""}}return n.gamma=t,n}(1);function cv(t,r){r||(r=[]);var e=t?Math.min(r.length,t.length):0,n=r.slice(),i;return function(a){for(i=0;i<e;++i)n[i]=t[i]*(1-a)+r[i]*a;return n}}function wt(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dv(t,r){return(wt(r)?cv:_s)(t,r)}function _s(t,r){var e=r?r.length:0,n=t?Math.min(e,t.length):0,i=new Array(n),a=new Array(e),o;for(o=0;o<n;++o)i[o]=ma(t[o],r[o]);for(;o<e;++o)a[o]=r[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function fv(t,r){var e=new Date;return t=+t,r=+r,function(n){return e.setTime(t*(1-n)+r*n),e}}function ga(t,r){return t=+t,r=+r,function(e){return t*(1-e)+r*e}}function Fy(t,r){var e={},n={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?e[i]=ma(t[i],r[i]):n[i]=r[i];return function(a){for(i in e)n[i]=e[i](a);return n}}var ll=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hc=new RegExp(ll.source,"g");function oo(t){return function(){return t}}function hv(t){return function(r){return t(r)+""}}function Hy(t,r){var e=ll.lastIndex=Hc.lastIndex=0,n,i,a,o=-1,s=[],c=[];for(t=t+"",r=r+"";(n=ll.exec(t))&&(i=Hc.exec(r));)(a=i.index)>e&&(a=r.slice(e,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:ga(n,i)})),e=Hc.lastIndex;return e<r.length&&(a=r.slice(e),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?hv(c[0].x):oo(r):(r=c.length,function(d){for(var h=0,v;h<r;++h)s[(v=c[h]).i]=v.x(d);return s.join("")})}function ma(t,r){var e=typeof r,n;return r==null||e==="boolean"?Fc(r):(e==="number"?ga:e==="string"?(n=ol(r))?(r=n,uv):Hy:r instanceof ol?uv:r instanceof Date?fv:wt(r)?cv:Array.isArray(r)?_s:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Fy:ga)(t,r)}function zy(t){return+t}function Gy(t){return t*t}function vv(t){return t*(2-t)}function zc(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function pv(t){return t*t*t}function $y(t){return--t*t*t+1}function gv(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Gc=3,$c=function t(r){r=+r;function e(n){return Math.pow(n,r)}return e.exponent=t,e}(Gc),di=function t(r){r=+r;function e(n){return 1-Math.pow(1-n,r)}return e.exponent=t,e}(Gc),mv=function t(r){r=+r;function e(n){return((n*=2)<=1?Math.pow(n,r):2-Math.pow(2-n,r))/2}return e.exponent=t,e}(Gc),yv=Math.PI,Cv=yv/2;function Wy(t){return+t==1?1:1-Math.cos(t*Cv)}function sl(t){return Math.sin(t*Cv)}function wv(t){return(1-Math.cos(yv*t))/2}function Di(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function Wc(t){return Di(1-+t)}function ky(t){return 1-Di(t)}function lo(t){return((t*=2)<=1?Di(1-t):2-Di(t-1))/2}function Uy(t){return 1-Math.sqrt(1-t*t)}function Yy(t){return Math.sqrt(1- --t*t)}function xv(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var kc=4/11,Vy=6/11,Xy=8/11,jy=3/4,qy=9/11,Ky=10/11,Zy=15/16,Qy=21/22,ya=63/64,Ts=1/kc/kc;function Ls(t){return 1-ul(1-t)}function ul(t){return(t=+t)<kc?Ts*t*t:t<Xy?Ts*(t-=Vy)*t+jy:t<Ky?Ts*(t-=qy)*t+Zy:Ts*(t-=Qy)*t+ya}function Jy(t){return((t*=2)<=1?1-ul(1-t):ul(t-1)+1)/2}var Uc=1.70158,eC=function t(r){r=+r;function e(n){return(n=+n)*n*(r*(n-1)+n)}return e.overshoot=t,e}(Uc),tC=function t(r){r=+r;function e(n){return--n*n*((n+1)*r+n)+1}return e.overshoot=t,e}(Uc),bv=function t(r){r=+r;function e(n){return((n*=2)<1?n*n*((r+1)*n-r):(n-=2)*n*((r+1)*n+r)+2)/2}return e.overshoot=t,e}(Uc),$r=2*Math.PI,Yc=1,Ca=.3,rC=function t(r,e){var n=Math.asin(1/(r=Math.max(1,r)))*(e/=$r);function i(a){return r*Di(- --a)*Math.sin((n-a)/e)}return i.amplitude=function(a){return t(a,e*$r)},i.period=function(a){return t(r,a)},i}(Yc,Ca),Sv=function t(r,e){var n=Math.asin(1/(r=Math.max(1,r)))*(e/=$r);function i(a){return 1-r*Di(a=+a)*Math.sin((a+n)/e)}return i.amplitude=function(a){return t(a,e*$r)},i.period=function(a){return t(r,a)},i}(Yc,Ca),Rs=function t(r,e){var n=Math.asin(1/(r=Math.max(1,r)))*(e/=$r);function i(a){return((a=a*2-1)<0?r*Di(-a)*Math.sin((n-a)/e):2-r*Di(a)*Math.sin((n+a)/e))/2}return i.amplitude=function(a){return t(a,e*$r)},i.period=function(a){return t(r,a)},i}(Yc,Ca),nC=Object.freeze({__proto__:null,easeLinear:zy,easeQuad:zc,easeQuadIn:Gy,easeQuadOut:vv,easeQuadInOut:zc,easeCubic:gv,easeCubicIn:pv,easeCubicOut:$y,easeCubicInOut:gv,easePoly:mv,easePolyIn:$c,easePolyOut:di,easePolyInOut:mv,easeSin:wv,easeSinIn:Wy,easeSinOut:sl,easeSinInOut:wv,easeExp:lo,easeExpIn:Wc,easeExpOut:ky,easeExpInOut:lo,easeCircle:xv,easeCircleIn:Uy,easeCircleOut:Yy,easeCircleInOut:xv,easeBounce:ul,easeBounceIn:Ls,easeBounceOut:ul,easeBounceInOut:Jy,easeBack:bv,easeBackIn:eC,easeBackOut:tC,easeBackInOut:bv,easeElastic:Sv,easeElasticIn:rC,easeElasticOut:Sv,easeElasticInOut:Rs}),iC={};function aC(t){return iC[t.toLowerCase()]||nC[t]}var oC=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},fi=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},Ev=[1,0,0,0,1,0,0,0,1];function Vc(t,r,e){var n={},i=r.fromAttrs,a=r.toAttrs;if(!t.destroyed){var o;for(var s in a)if(!Zo(i[s],a[s]))if(s==="path"){var c=a[s],d=i[s];c.length>d.length?(c=Za(a[s]),d=Za(i[s]),d=vs(d,c),d=wc(d,c),r.fromAttrs.path=d,r.toAttrs.path=c):r.pathFormatted||(c=Za(a[s]),d=Za(i[s]),d=wc(d,c),r.fromAttrs.path=d,r.toAttrs.path=c,r.pathFormatted=!0),n[s]=[];for(var h=0;h<c.length;h++){for(var v=c[h],g=d[h],C=[],w=0;w<v.length;w++)cs(v[w])&&g&&cs(g[w])?(o=ma(g[w],v[w]),C.push(o(e))):C.push(v[w]);n[s].push(C)}}else if(s==="matrix"){var S=dv(i[s]||Ev,a[s]||Ev),_=S(e);n[s]=_}else oC(s)&&fi(a[s])?n[s]=a[s]:Mi(a[s])||(o=ma(i[s],a[s]),n[s]=o(e));t.attr(n)}}function lC(t,r,e){var n=r.startTime,i=r.delay;if(e<n+i||r._paused)return!1;var a,o=r.duration,s=r.easing,c=aC(s);if(e=e-n-r.delay,r.repeat)a=e%o/o,a=c(a);else if(a=e/o,a<1)a=c(a);else return r.onFrame?t.attr(r.onFrame(1)):t.attr(r.toAttrs),!0;if(r.onFrame){var d=r.onFrame(a);t.attr(d)}else Vc(t,r,a);return!1}var sC=function(){function t(r){this.animators=[],this.current=0,this.timer=null,this.canvas=r}return t.prototype.initTimer=function(){var r=this,e=!1,n,i,a;this.timer=il(function(o){if(r.current=o,r.animators.length>0){for(var s=r.animators.length-1;s>=0;s--){if(n=r.animators[s],n.destroyed){r.removeAnimator(s);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var c=i.length-1;c>=0;c--)a=i[c],e=lC(n,a,o),e&&(i.splice(c,1),e=!1,a.callback&&a.callback())}i.length===0&&r.removeAnimator(s)}var d=r.canvas.get("autoDraw");d||r.canvas.draw()}})},t.prototype.addAnimator=function(r){this.animators.push(r)},t.prototype.removeAnimator=function(r){this.animators.splice(r,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(r){r===void 0&&(r=!0),this.animators.forEach(function(e){e.stopAnimate(r)}),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),uC=40,_v=0,Tv=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Lv(t,r,e){e.name=r,e.target=t,e.currentTarget=t,e.delegateTarget=t,t.emit(r,e)}function Rv(t,r,e){if(e.bubbles){var n=void 0,i=!1;if(r==="mouseenter"?(n=e.fromShape,i=!0):r==="mouseleave"&&(i=!0,n=e.toShape),t.isCanvas()&&i)return;if(n&&xc(t,n)){e.bubbles=!1;return}e.name=r,e.currentTarget=t,e.delegateTarget=t,t.emit(r,e)}}var As=function(){function t(r){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;e._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=e.canvas,a=i.get("el");if(a!==n.target&&(e.dragging||e.currentShape)){var o=e._getPointInfo(n);e.dragging&&e._emitEvent("drag",n,o,e.draggingShape)}},this._onDocumentMouseUp=function(n){var i=e.canvas,a=i.get("el");if(a!==n.target&&e.dragging){var o=e._getPointInfo(n);e.draggingShape&&e._emitEvent("drop",n,o,null),e._emitEvent("dragend",n,o,e.draggingShape),e._afterDrag(e.draggingShape,o,n)}},this.canvas=r.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var r=this,e=this.canvas.get("el");lt(Tv,function(n){e.addEventListener(n,r._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var r=this,e=this.canvas.get("el");lt(Tv,function(n){e.removeEventListener(n,r._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(r,e,n,i,a,o){var s=new Fh(r,e);return s.fromShape=a,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},t.prototype._getShape=function(r,e){return this.canvas.getShape(r.x,r.y,e)},t.prototype._getPointInfo=function(r){var e=this.canvas,n=e.getClientByEvent(r),i=e.getPointByEvent(r);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(r,e){var n=this._getPointInfo(e),i=this._getShape(n,e),a=this["_on"+r],o=!1;if(a)a.call(this,n,i,e);else{var s=this.currentShape;r==="mouseenter"||r==="dragenter"||r==="mouseover"?(this._emitEvent(r,e,n,null,null,i),i&&this._emitEvent(r,e,n,i,null,i),r==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):r==="mouseleave"||r==="dragleave"||r==="mouseout"?(o=!0,s&&this._emitEvent(r,e,n,s,s,null),this._emitEvent(r,e,n,null,s,null),r==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(r,e,n,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var c=this.canvas,d=c.get("el");d.style.cursor=i.attr("cursor")||c.get("cursor")}},t.prototype._onmousedown=function(r,e,n){n.button===_v&&(this.mousedownShape=e,this.mousedownPoint=r,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,r,e,null,null)},t.prototype._emitMouseoverEvents=function(r,e,n,i){var a=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",r,e,n,n,i),this._emitEvent("mouseleave",r,e,n,n,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",r,e,i,n,i),this._emitEvent("mouseenter",r,e,i,n,i)))},t.prototype._emitDragoverEvents=function(r,e,n,i,a){i?(i!==n&&(n&&this._emitEvent("dragleave",r,e,n,n,i),this._emitEvent("dragenter",r,e,i,n,i)),a||this._emitEvent("dragover",r,e,i)):n&&this._emitEvent("dragleave",r,e,n,n,i),a&&this._emitEvent("dragover",r,e,i)},t.prototype._afterDrag=function(r,e,n){r&&(r.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(e,n);i!==r&&this._emitMouseoverEvents(n,e,r,i),this.currentShape=i},t.prototype._onmouseup=function(r,e,n){if(n.button===_v){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,r,e),this._emitEvent("dragend",n,r,i),this._afterDrag(i,r,n)):(this._emitEvent("mouseup",n,r,e),e===this.mousedownShape&&this._emitEvent("click",n,r,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(r,e,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,r,i,e,!0)},t.prototype._onmousemove=function(r,e,n){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,r,a,e,!1),this._emitEvent("drag",n,r,o);else{var s=this.mousedownPoint;if(s){var c=this.mousedownShape,d=n.timeStamp,h=d-this.mousedownTimeStamp,v=s.clientX-r.clientX,g=s.clientY-r.clientY,C=v*v+g*g;h>120||C>uC?c&&c.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,r,o),this.mousedownShape=null,this.mousedownPoint=null):!c&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,r,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,r,a,e),this._emitEvent("mousemove",n,r,e)):(this._emitMouseoverEvents(n,r,a,e),this._emitEvent("mousemove",n,r,e))}else this._emitMouseoverEvents(n,r,a,e),this._emitEvent("mousemove",n,r,e)}},t.prototype._emitEvent=function(r,e,n,i,a,o){var s=this._getEventObj(r,e,n,i,a,o);if(i){s.shape=i,Lv(i,r,s);for(var c=i.getParent();c;)c.emitDelegation(r,s),s.propagationStopped||Rv(c,r,s),s.propagationPath.push(c),c=c.getParent()}else{var d=this.canvas;Lv(d,r,s)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),Av="px",so=ny(),Xc=so&&so.name==="firefox",uo=function(t){Ja(r,t);function r(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return r.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},r.prototype.initContainer=function(){var e=this.get("container");In(e)&&(e=document.getElementById(e),this.set("container",e))},r.prototype.initDom=function(){var e=this.createDom();this.set("el",e);var n=this.get("container");n.appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},r.prototype.initEvents=function(){var e=new As({canvas:this});e.init(),this.set("eventController",e)},r.prototype.initTimeline=function(){var e=new sC(this);this.set("timeline",e)},r.prototype.setDOMSize=function(e,n){var i=this.get("el");Wt&&(i.style.width=e+Av,i.style.height=n+Av)},r.prototype.changeSize=function(e,n){this.setDOMSize(e,n),this.set("width",e),this.set("height",n),this.onCanvasChange("changeSize")},r.prototype.getRenderer=function(){return this.get("renderer")},r.prototype.getCursor=function(){return this.get("cursor")},r.prototype.setCursor=function(e){this.set("cursor",e);var n=this.get("el");Wt&&n&&(n.style.cursor=e)},r.prototype.getPointByEvent=function(e){var n=this.get("supportCSSTransform");if(n){if(Xc&&!Rt(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!Rt(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var i=this.getClientByEvent(e),a=i.x,o=i.y;return this.getPointByClient(a,o)},r.prototype.getClientByEvent=function(e){var n=e;return e.touches&&(e.type==="touchend"?n=e.changedTouches[0]:n=e.touches[0]),{x:n.clientX,y:n.clientY}},r.prototype.getPointByClient=function(e,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e-a.left,y:n-a.top}},r.prototype.getClientByPoint=function(e,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e+a.left,y:n+a.top}},r.prototype.draw=function(){},r.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},r.prototype.clearEvents=function(){var e=this.get("eventController");e.destroy()},r.prototype.isCanvas=function(){return!0},r.prototype.getParent=function(){return null},r.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},r}(Ac),jc=function(t){Ja(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.isGroup=function(){return!0},r.prototype.isEntityGroup=function(){return!1},r.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var a=n[i];e.add(a.clone())}return e},r}(Ac),Iv=function(t){Ja(r,t);function r(e){return t.call(this,e)||this}return r.prototype._isInBBox=function(e,n){var i=this.getBBox();return i.minX<=e&&i.maxX>=e&&i.minY<=n&&i.maxY>=n},r.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},r.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},r.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},r.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},r.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),n=this.getTotalMatrix(),i=e.minX,a=e.minY,o=e.maxX,s=e.maxY;if(n){var c=fa(n,[e.minX,e.minY]),d=fa(n,[e.maxX,e.minY]),h=fa(n,[e.minX,e.maxY]),v=fa(n,[e.maxX,e.maxY]);i=Math.min(c[0],d[0],h[0],v[0]),o=Math.max(c[0],d[0],h[0],v[0]),a=Math.min(c[1],d[1],h[1],v[1]),s=Math.max(c[1],d[1],h[1],v[1])}var g=this.attrs;if(g.shadowColor){var C=g.shadowBlur,w=C===void 0?0:C,S=g.shadowOffsetX,_=S===void 0?0:S,T=g.shadowOffsetY,M=T===void 0?0:T,D=i-w+_,B=o+w+_,G=a-w+M,V=s+w+M;i=Math.min(i,D),o=Math.max(o,B),a=Math.min(a,G),s=Math.max(s,V)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},r.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},r.prototype.isClipShape=function(){return this.get("isClipShape")},r.prototype.isInShape=function(e,n){return!1},r.prototype.isOnlyHitBox=function(){return!1},r.prototype.isHit=function(e,n){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[e,n,1];o=this.invertFromMatrix(o);var s=o[0],c=o[1],d=this._isInBBox(s,c);return this.isOnlyHitBox()?d:!!(d&&!this.isClipped(s,c)&&(this.isInShape(s,c)||i&&i.isHit(s,c)||a&&a.isHit(s,c)))},r}(jh),Ov=new Map;function Mn(t,r){Ov.set(t,r)}function Mv(t){return Ov.get(t)}function Dv(t){var r=t.attr(),e=r.x,n=r.y,i=r.width,a=r.height;return{x:e,y:n,width:i,height:a}}function Bv(t){var r=t.attr(),e=r.x,n=r.y,i=r.r;return{x:e-i,y:n-i,width:i*2,height:i*2}}function Is(t){return Math.min.apply(null,t)}function Pv(t){return Math.max.apply(null,t)}function hr(t,r,e,n){var i=t-e,a=r-n;return Math.sqrt(i*i+a*a)}function Os(t,r){return Math.abs(t-r)<.001}function wa(t,r){var e=Is(t),n=Is(r),i=Pv(t),a=Pv(r);return{x:e,y:n,width:i-e,height:a-n}}function Ms(t){return(t+Math.PI*2)%(Math.PI*2)}var Wr={box:function(t,r,e,n){return wa([t,e],[r,n])},length:function(t,r,e,n){return hr(t,r,e,n)},pointAt:function(t,r,e,n,i){return{x:(1-i)*t+i*e,y:(1-i)*r+i*n}},pointDistance:function(t,r,e,n,i,a){var o=(e-t)*(i-t)+(n-r)*(a-r);if(o<0)return hr(t,r,i,a);var s=(e-t)*(e-t)+(n-r)*(n-r);return o>s?hr(e,n,i,a):this.pointToLine(t,r,e,n,i,a)},pointToLine:function(t,r,e,n,i,a){var o=[e-t,n-r];if(fy(o,[0,0]))return Math.sqrt((i-t)*(i-t)+(a-r)*(a-r));var s=[-o[1],o[0]];cy(s,s);var c=[i-t,a-r];return Math.abs(dy(c,s))},tangentAngle:function(t,r,e,n){return Math.atan2(n-r,e-t)}},cC=1e-4;function Nv(t,r,e,n,i,a){var o,s=1/0,c=[e,n],d=20;a&&a>200&&(d=a/10);for(var h=1/d,v=h/10,g=0;g<=d;g++){var C=g*h,w=[i.apply(null,t.concat([C])),i.apply(null,r.concat([C]))],S=hr(c[0],c[1],w[0],w[1]);S<s&&(o=C,s=S)}if(o===0)return{x:t[0],y:r[0]};if(o===1){var _=t.length;return{x:t[_-1],y:r[_-1]}}s=1/0;for(var g=0;g<32&&!(v<cC);g++){var T=o-v,M=o+v,w=[i.apply(null,t.concat([T])),i.apply(null,r.concat([T]))],S=hr(c[0],c[1],w[0],w[1]);if(T>=0&&S<s)o=T,s=S;else{var D=[i.apply(null,t.concat([M])),i.apply(null,r.concat([M]))],B=hr(c[0],c[1],D[0],D[1]);M<=1&&B<s?(o=M,s=B):v*=.5}}return{x:i.apply(null,t.concat([o])),y:i.apply(null,r.concat([o]))}}function dC(t,r){for(var e=0,n=t.length,i=0;i<n;i++){var a=t[i],o=r[i],s=t[(i+1)%n],c=r[(i+1)%n];e+=hr(a,o,s,c)}return e/2}function Bi(t,r,e,n){var i=1-n;return i*i*t+2*n*i*r+n*n*e}function Fv(t,r,e){var n=t+e-2*r;if(Os(n,0))return[.5];var i=(t-r)/n;return i<=1&&i>=0?[i]:[]}function Hv(t,r,e,n){return 2*(1-n)*(r-t)+2*n*(e-r)}function zv(t,r,e,n,i,a,o){var s=Bi(t,e,i,o),c=Bi(r,n,a,o),d=Wr.pointAt(t,r,e,n,o),h=Wr.pointAt(e,n,i,a,o);return[[t,r,d.x,d.y,s,c],[s,c,h.x,h.y,i,a]]}function qc(t,r,e,n,i,a,o){if(o===0)return(hr(t,r,e,n)+hr(e,n,i,a)+hr(t,r,i,a))/2;var s=zv(t,r,e,n,i,a,.5),c=s[0],d=s[1];return c.push(o-1),d.push(o-1),qc.apply(null,c)+qc.apply(null,d)}var Gv={box:function(t,r,e,n,i,a){var o=Fv(t,e,i)[0],s=Fv(r,n,a)[0],c=[t,i],d=[r,a];return o!==void 0&&c.push(Bi(t,e,i,o)),s!==void 0&&d.push(Bi(r,n,a,s)),wa(c,d)},length:function(t,r,e,n,i,a){return qc(t,r,e,n,i,a,3)},nearestPoint:function(t,r,e,n,i,a,o,s){return Nv([t,e,i],[r,n,a],o,s,Bi)},pointDistance:function(t,r,e,n,i,a,o,s){var c=this.nearestPoint(t,r,e,n,i,a,o,s);return hr(c.x,c.y,o,s)},interpolationAt:Bi,pointAt:function(t,r,e,n,i,a,o){return{x:Bi(t,e,i,o),y:Bi(r,n,a,o)}},divide:function(t,r,e,n,i,a,o){return zv(t,r,e,n,i,a,o)},tangentAngle:function(t,r,e,n,i,a,o){var s=Hv(t,e,i,o),c=Hv(r,n,a,o),d=Math.atan2(c,s);return Ms(d)}};function Pi(t,r,e,n,i){var a=1-i;return a*a*a*t+3*r*i*a*a+3*e*i*i*a+n*i*i*i}function $v(t,r,e,n,i){var a=1-i;return 3*(a*a*(r-t)+2*a*i*(e-r)+i*i*(n-e))}function Kc(t,r,e,n){var i=-3*t+9*r-9*e+3*n,a=6*t-12*r+6*e,o=3*r-3*t,s=[],c,d,h;if(Os(i,0))Os(a,0)||(c=-o/a,c>=0&&c<=1&&s.push(c));else{var v=a*a-4*i*o;Os(v,0)?s.push(-a/(2*i)):v>0&&(h=Math.sqrt(v),c=(-a+h)/(2*i),d=(-a-h)/(2*i),c>=0&&c<=1&&s.push(c),d>=0&&d<=1&&s.push(d))}return s}function Wv(t,r,e,n,i,a,o,s,c){var d=Pi(t,e,i,o,c),h=Pi(r,n,a,s,c),v=Wr.pointAt(t,r,e,n,c),g=Wr.pointAt(e,n,i,a,c),C=Wr.pointAt(i,a,o,s,c),w=Wr.pointAt(v.x,v.y,g.x,g.y,c),S=Wr.pointAt(g.x,g.y,C.x,C.y,c);return[[t,r,v.x,v.y,w.x,w.y,d,h],[d,h,S.x,S.y,C.x,C.y,o,s]]}function Zc(t,r,e,n,i,a,o,s,c){if(c===0)return dC([t,e,i,o],[r,n,a,s]);var d=Wv(t,r,e,n,i,a,o,s,.5),h=d[0],v=d[1];return h.push(c-1),v.push(c-1),Zc.apply(null,h)+Zc.apply(null,v)}var cl={extrema:Kc,box:function(t,r,e,n,i,a,o,s){for(var c=[t,o],d=[r,s],h=Kc(t,e,i,o),v=Kc(r,n,a,s),g=0;g<h.length;g++)c.push(Pi(t,e,i,o,h[g]));for(var g=0;g<v.length;g++)d.push(Pi(r,n,a,s,v[g]));return wa(c,d)},length:function(t,r,e,n,i,a,o,s){return Zc(t,r,e,n,i,a,o,s,3)},nearestPoint:function(t,r,e,n,i,a,o,s,c,d,h){return Nv([t,e,i,o],[r,n,a,s],c,d,Pi,h)},pointDistance:function(t,r,e,n,i,a,o,s,c,d,h){var v=this.nearestPoint(t,r,e,n,i,a,o,s,c,d,h);return hr(v.x,v.y,c,d)},interpolationAt:Pi,pointAt:function(t,r,e,n,i,a,o,s,c){return{x:Pi(t,e,i,o,c),y:Pi(r,n,a,s,c)}},divide:function(t,r,e,n,i,a,o,s,c){return Wv(t,r,e,n,i,a,o,s,c)},tangentAngle:function(t,r,e,n,i,a,o,s,c){var d=$v(t,e,i,o,c),h=$v(r,n,a,s,c);return Ms(Math.atan2(h,d))}};function kv(t,r){var e=Math.abs(t);return r>0?e:e*-1}var fC={box:function(t,r,e,n){return{x:t-e,y:r-n,width:e*2,height:n*2}},length:function(t,r,e,n){return Math.PI*(3*(e+n)-Math.sqrt((3*e+n)*(e+3*n)))},nearestPoint:function(t,r,e,n,i,a){var o=e,s=n;if(o===0||s===0)return{x:t,y:r};for(var c=i-t,d=a-r,h=Math.abs(c),v=Math.abs(d),g=o*o,C=s*s,w=Math.PI/4,S,_,T=0;T<4;T++){S=o*Math.cos(w),_=s*Math.sin(w);var M=(g-C)*Math.pow(Math.cos(w),3)/o,D=(C-g)*Math.pow(Math.sin(w),3)/s,B=S-M,G=_-D,V=h-M,q=v-D,J=Math.hypot(G,B),te=Math.hypot(q,V),se=J*Math.asin((B*q-G*V)/(J*te)),ue=se/Math.sqrt(g+C-S*S-_*_);w+=ue,w=Math.min(Math.PI/2,Math.max(0,w))}return{x:t+kv(S,c),y:r+kv(_,d)}},pointDistance:function(t,r,e,n,i,a){var o=this.nearestPoint(t,r,e,n,i,a);return hr(o.x,o.y,i,a)},pointAt:function(t,r,e,n,i){var a=2*Math.PI*i;return{x:t+e*Math.cos(a),y:r+n*Math.sin(a)}},tangentAngle:function(t,r,e,n,i){var a=2*Math.PI*i,o=Math.atan2(n*Math.cos(a),-e*Math.sin(a));return Ms(o)}};function Dn(t,r,e,n,i,a,o,s){return-1*e*Math.cos(i)*Math.sin(s)-n*Math.sin(i)*Math.cos(s)}function hC(t,r,e,n,i,a,o,s){return-1*e*Math.sin(i)*Math.sin(s)+n*Math.cos(i)*Math.cos(s)}function vC(t,r,e){return Math.atan(-r/t*Math.tan(e))}function Uv(t,r,e){return Math.atan(r/(t*Math.tan(e)))}function Qc(t,r,e,n,i,a){return e*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+t}function Yv(t,r,e,n,i,a){return e*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+r}function Vv(t,r,e,n){var i=Math.atan2(n*t,e*r);return(i+Math.PI*2)%(Math.PI*2)}function Jc(t,r,e){return{x:t*Math.cos(e),y:r*Math.sin(e)}}function ed(t,r,e){var n=Math.cos(e),i=Math.sin(e);return[t*n-r*i,t*i+r*n]}var Xv={box:function(t,r,e,n,i,a,o){for(var s=vC(e,n,i),c=1/0,d=-1/0,h=[a,o],v=-Math.PI*2;v<=Math.PI*2;v+=Math.PI){var g=s+v;a<o?a<g&&g<o&&h.push(g):o<g&&g<a&&h.push(g)}for(var v=0;v<h.length;v++){var C=Qc(t,r,e,n,i,h[v]);C<c&&(c=C),C>d&&(d=C)}for(var w=Uv(e,n,i),S=1/0,_=-1/0,T=[a,o],v=-Math.PI*2;v<=Math.PI*2;v+=Math.PI){var M=w+v;a<o?a<M&&M<o&&T.push(M):o<M&&M<a&&T.push(M)}for(var v=0;v<T.length;v++){var D=Yv(t,r,e,n,i,T[v]);D<S&&(S=D),D>_&&(_=D)}return{x:c,y:S,width:d-c,height:_-S}},length:function(t,r,e,n,i,a,o){},nearestPoint:function(t,r,e,n,i,a,o,s,c){var d=ed(s-t,c-r,-i),h=d[0],v=d[1],g=fC.nearestPoint(0,0,e,n,h,v),C=Vv(e,n,g.x,g.y);C<a?g=Jc(e,n,a):C>o&&(g=Jc(e,n,o));var w=ed(g.x,g.y,i);return{x:w[0]+t,y:w[1]+r}},pointDistance:function(t,r,e,n,i,a,o,s,c){var d=this.nearestPoint(t,r,e,n,s,c);return hr(d.x,d.y,s,c)},pointAt:function(t,r,e,n,i,a,o,s){var c=(o-a)*s+a;return{x:Qc(t,r,e,n,i,c),y:Yv(t,r,e,n,i,c)}},tangentAngle:function(t,r,e,n,i,a,o,s){var c=(o-a)*s+a,d=Dn(t,r,e,n,i,a,o,c),h=hC(t,r,e,n,i,a,o,c);return Ms(Math.atan2(h,d))}};function td(t){for(var r=0,e=[],n=0;n<t.length-1;n++){var i=t[n],a=t[n+1],o=hr(i[0],i[1],a[0],a[1]),s={from:i,to:a,length:o};e.push(s),r+=o}return{segments:e,totalLength:r}}function pC(t){if(t.length<2)return 0;for(var r=0,e=0;e<t.length-1;e++){var n=t[e],i=t[e+1];r+=hr(n[0],n[1],i[0],i[1])}return r}function gC(t,r){if(r>1||r<0||t.length<2)return null;var e=td(t),n=e.segments,i=e.totalLength;if(i===0)return{x:t[0][0],y:t[0][1]};for(var a=0,o=null,s=0;s<n.length;s++){var c=n[s],d=c.from,h=c.to,v=c.length/i;if(r>=a&&r<=a+v){var g=(r-a)/v;o=Wr.pointAt(d[0],d[1],h[0],h[1],g);break}a+=v}return o}function jv(t,r){if(r>1||r<0||t.length<2)return 0;for(var e=td(t),n=e.segments,i=e.totalLength,a=0,o=0,s=0;s<n.length;s++){var c=n[s],d=c.from,h=c.to,v=c.length/i;if(r>=a&&r<=a+v){o=Math.atan2(h[1]-d[1],h[0]-d[0]);break}a+=v}return o}function mC(t,r,e){for(var n=1/0,i=0;i<t.length-1;i++){var a=t[i],o=t[i+1],s=Wr.pointDistance(a[0],a[1],o[0],o[1],r,e);s<n&&(n=s)}return n}var rd={box:function(t){for(var r=[],e=[],n=0;n<t.length;n++){var i=t[n];r.push(i[0]),e.push(i[1])}return wa(r,e)},length:function(t){return pC(t)},pointAt:function(t,r){return gC(t,r)},pointDistance:function(t,r,e){return mC(t,r,e)},tangentAngle:function(t,r){return jv(t,r)}};function qv(t,r){return!t||!r?t||r:{minX:Math.min(t.minX,r.minX),minY:Math.min(t.minY,r.minY),maxX:Math.max(t.maxX,r.maxX),maxY:Math.max(t.maxY,r.maxY)}}function nd(t,r){var e=t.get("startArrowShape"),n=t.get("endArrowShape"),i=null,a=null;return e&&(i=e.getCanvasBBox(),r=qv(r,i)),n&&(a=n.getCanvasBBox(),r=qv(r,a)),r}function yC(t){for(var r=t.attr(),e=r.points,n=[],i=[],a=0;a<e.length;a++){var o=e[a];n.push(o[0]),i.push(o[1])}var s=wa(n,i),c=s.x,d=s.y,h=s.width,v=s.height,g={minX:c,minY:d,maxX:c+h,maxY:d+v};return g=nd(t,g),{x:g.minX,y:g.minY,width:g.maxX-g.minX,height:g.maxY-g.minY}}function Kv(t){for(var r=t.attr(),e=r.points,n=[],i=[],a=0;a<e.length;a++){var o=e[a];n.push(o[0]),i.push(o[1])}return wa(n,i)}var id=null;function ad(){if(!id){var t=document.createElement("canvas");t.width=1,t.height=1,id=t.getContext("2d")}return id}function Ds(t,r,e){var n=1;if(In(t)&&(n=t.split(`
`).length),n>1){var i=CC(r,e);return r*n+i*(n-1)}return r}function CC(t,r){return r?r-t:t*.14}function wC(t,r){var e=ad(),n=0;if(Rt(t)||t==="")return n;if(e.save(),e.font=r,In(t)&&t.includes(`
`)){var i=t.split(`
`);lt(i,function(a){var o=e.measureText(a).width;n<o&&(n=o)})}else n=e.measureText(t).width;return e.restore(),n}function Bs(t){var r=t.fontSize,e=t.fontFamily,n=t.fontWeight,i=t.fontStyle,a=t.fontVariant;return[i,a,n,r+"px",e].join(" ").trim()}function xC(t){var r=t.attr(),e=r.x,n=r.y,i=r.text,a=r.fontSize,o=r.lineHeight,s=r.font;s||(s=Bs(r));var c=wC(i,s),d;if(!c)d={x:e,y:n,width:0,height:0};else{var h=r.textAlign,v=r.textBaseline,g=Ds(i,a,o),C={x:e,y:n-g};h&&(h==="end"||h==="right"?C.x-=c:h==="center"&&(C.x-=c/2)),v&&(v==="top"?C.y+=g:v==="middle"&&(C.y+=g/2)),d={x:C.x,y:C.y,width:c,height:g}}return d}var od=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,bC=/[^\s\,]+/ig;function co(t){var r=t||[];if(qr(r))return r;if(In(r))return r=r.match(od),lt(r,function(e,n){if(e=e.match(bC),e[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}lt(e,function(a,o){isNaN(a)||(e[o]=+a)}),r[n]=e}),r}var fo=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,SC=new RegExp("([a-z])["+fo+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+fo+"]*,?["+fo+"]*)+)","ig"),Zv=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+fo+"]*,?["+fo+"]*","ig");function Qv(t){if(!t)return null;if(qr(t))return t;var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(t).replace(SC,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(Zv,function(c,d){d&&o.push(+d)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=r[s]&&(e.push([i].concat(o.splice(0,r[s]))),!!r[s]););return""}),e}var Jv=/[a-z]/;function ld(t,r){return[r[0]+(r[0]-t[0]),r[1]+(r[1]-t[1])]}function ep(t){var r=Qv(t);if(!r||!r.length)return[["M",0,0]];for(var e=!1,n=0;n<r.length;n++){var i=r[n][0];if(Jv.test(i)||["V","H","T","S"].indexOf(i)>=0){e=!0;break}}if(!e)return r;var a=[],o=0,s=0,c=0,d=0,h=0,v=r[0];(v[0]==="M"||v[0]==="m")&&(o=+v[1],s=+v[2],c=o,d=s,h++,a[0]=["M",o,s]);for(var n=h,g=r.length;n<g;n++){var C=r[n],w=a[n-1],S=[],i=C[0],_=i.toUpperCase();if(i!==_)switch(S[0]=_,_){case"A":S[1]=C[1],S[2]=C[2],S[3]=C[3],S[4]=C[4],S[5]=C[5],S[6]=+C[6]+o,S[7]=+C[7]+s;break;case"V":S[1]=+C[1]+s;break;case"H":S[1]=+C[1]+o;break;case"M":c=+C[1]+o,d=+C[2]+s,S[1]=c,S[2]=d;break;default:for(var T=1,M=C.length;T<M;T++)S[T]=+C[T]+(T%2?o:s)}else S=r[n];switch(_){case"Z":o=+c,s=+d;break;case"H":o=S[1],S=["L",o,s];break;case"V":s=S[1],S=["L",o,s];break;case"T":o=S[1],s=S[2];var D=ld([w[1],w[2]],[w[3],w[4]]);S=["Q",D[0],D[1],o,s];break;case"S":o=S[S.length-2],s=S[S.length-1];var B=w.length,G=ld([w[B-4],w[B-3]],[w[B-2],w[B-1]]);S=["C",G[0],G[1],S[1],S[2],o,s];break;case"M":c=S[S.length-2],d=S[S.length-1];break;default:o=S[S.length-2],s=S[S.length-1]}a.push(S)}return a}function Ps(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function sd(t,r){return Ps(t)*Ps(r)?(t[0]*r[0]+t[1]*r[1])/(Ps(t)*Ps(r)):1}function tp(t,r){return(t[0]*r[1]<t[1]*r[0]?-1:1)*Math.acos(sd(t,r))}function ud(t,r){return t[0]===r[0]&&t[1]===r[1]}function xa(t,r){var e=r[1],n=r[2],i=L(Ah(r[3]),Math.PI*2),a=r[4],o=r[5],s=t[0],c=t[1],d=r[6],h=r[7],v=Math.cos(i)*(s-d)/2+Math.sin(i)*(c-h)/2,g=-1*Math.sin(i)*(s-d)/2+Math.cos(i)*(c-h)/2,C=v*v/(e*e)+g*g/(n*n);C>1&&(e*=Math.sqrt(C),n*=Math.sqrt(C));var w=e*e*(g*g)+n*n*(v*v),S=w?Math.sqrt((e*e*(n*n)-w)/w):1;a===o&&(S*=-1),isNaN(S)&&(S=0);var _=n?S*e*g/n:0,T=e?S*-n*v/e:0,M=(s+d)/2+Math.cos(i)*_-Math.sin(i)*T,D=(c+h)/2+Math.sin(i)*_+Math.cos(i)*T,B=[(v-_)/e,(g-T)/n],G=[(-1*v-_)/e,(-1*g-T)/n],V=tp([1,0],B),q=tp(B,G);return sd(B,G)<=-1&&(q=Math.PI),sd(B,G)>=1&&(q=0),o===0&&q>0&&(q=q-2*Math.PI),o===1&&q<0&&(q=q+2*Math.PI),{cx:M,cy:D,rx:ud(t,[d,h])?0:e,ry:ud(t,[d,h])?0:n,startAngle:V,endAngle:V+q,xRotation:i,arcFlag:a,sweepFlag:o}}function Ni(t,r){return[r[0]+(r[0]-t[0]),r[1]+(r[1]-t[1])]}function rp(t){t=co(t);for(var r=[],e=null,n=null,i=null,a=0,o=t.length,s=0;s<o;s++){var c=t[s];n=t[s+1];var d=c[0],h={command:d,prePoint:e,params:c,startTangent:null,endTangent:null};switch(d){case"M":i=[c[1],c[2]],a=s;break;case"A":var v=xa(e,c);h.arcParams=v;break}if(d==="Z")e=i,n=t[a+1];else{var g=c.length;e=[c[g-2],c[g-1]]}n&&n[0]==="Z"&&(n=t[a],r[a]&&(r[a].prePoint=e)),h.currentPoint=e,r[a]&&ud(e,r[a].currentPoint)&&(r[a].prePoint=h.prePoint);var C=n?[n[n.length-2],n[n.length-1]]:null;h.nextPoint=C;var w=h.prePoint;if(["L","H","V"].includes(d))h.startTangent=[w[0]-e[0],w[1]-e[1]],h.endTangent=[e[0]-w[0],e[1]-w[1]];else if(d==="Q"){var S=[c[1],c[2]];h.startTangent=[w[0]-S[0],w[1]-S[1]],h.endTangent=[e[0]-S[0],e[1]-S[1]]}else if(d==="T"){var _=r[s-1],S=Ni(_.currentPoint,w);_.command==="Q"?(h.command="Q",h.startTangent=[w[0]-S[0],w[1]-S[1]],h.endTangent=[e[0]-S[0],e[1]-S[1]]):(h.command="TL",h.startTangent=[w[0]-e[0],w[1]-e[1]],h.endTangent=[e[0]-w[0],e[1]-w[1]])}else if(d==="C"){var T=[c[1],c[2]],M=[c[3],c[4]];h.startTangent=[w[0]-T[0],w[1]-T[1]],h.endTangent=[e[0]-M[0],e[1]-M[1]],h.startTangent[0]===0&&h.startTangent[1]===0&&(h.startTangent=[T[0]-M[0],T[1]-M[1]]),h.endTangent[0]===0&&h.endTangent[1]===0&&(h.endTangent=[M[0]-T[0],M[1]-T[1]])}else if(d==="S"){var _=r[s-1],T=Ni(_.currentPoint,w),M=[c[1],c[2]];_.command==="C"?(h.command="C",h.startTangent=[w[0]-T[0],w[1]-T[1]],h.endTangent=[e[0]-M[0],e[1]-M[1]]):(h.command="SQ",h.startTangent=[w[0]-M[0],w[1]-M[1]],h.endTangent=[e[0]-M[0],e[1]-M[1]])}else if(d==="A"){var D=.001,B=h.arcParams||{},G=B.cx,V=G===void 0?0:G,q=B.cy,J=q===void 0?0:q,te=B.rx,se=te===void 0?0:te,ue=B.ry,ce=ue===void 0?0:ue,me=B.sweepFlag,Te=me===void 0?0:me,le=B.startAngle,pe=le===void 0?0:le,et=B.endAngle,Xe=et===void 0?0:et;Te===0&&(D*=-1);var ze=se*Math.cos(pe-D)+V,Ie=ce*Math.sin(pe-D)+J;h.startTangent=[ze-i[0],Ie-i[1]];var Je=se*Math.cos(pe+Xe+D)+V,ke=ce*Math.sin(pe+Xe-D)+J;h.endTangent=[w[0]-Je,w[1]-ke]}r.push(h)}return r}function EC(t,r){for(var e=[],n=[],i=[],a=0;a<t.length;a++){var o=t[a],s=o.currentPoint,c=o.params,d=o.prePoint,h=void 0;switch(o.command){case"Q":h=Gv.box(d[0],d[1],c[1],c[2],c[3],c[4]);break;case"C":h=cl.box(d[0],d[1],c[1],c[2],c[3],c[4],c[5],c[6]);break;case"A":var v=o.arcParams;h=Xv.box(v.cx,v.cy,v.rx,v.ry,v.xRotation,v.startAngle,v.endAngle);break;default:e.push(s[0]),n.push(s[1]);break}h&&(o.box=h,e.push(h.x,h.x+h.width),n.push(h.y,h.y+h.height)),r&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}e=e.filter(function(T){return!Number.isNaN(T)&&T!==1/0&&T!==-1/0}),n=n.filter(function(T){return!Number.isNaN(T)&&T!==1/0&&T!==-1/0});var g=Vn(e),C=Vn(n),w=Yn(e),S=Yn(n);if(i.length===0)return{x:g,y:C,width:w-g,height:S-C};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,_=void 0;s[0]===g?(_=Ns(o,r),g=g-_.xExtra):s[0]===w&&(_=Ns(o,r),w=w+_.xExtra),s[1]===C?(_=Ns(o,r),C=C-_.yExtra):s[1]===S&&(_=Ns(o,r),S=S+_.yExtra)}return{x:g,y:C,width:w-g,height:S-C}}function Ns(t,r){var e=t.prePoint,n=t.currentPoint,i=t.nextPoint,a=Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),c=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!c||Math.sin(c)===0||P1(c,0))return{xExtra:0,yExtra:0};var d=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),h=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));d=d>Math.PI/2?Math.PI-d:d,h=h>Math.PI/2?Math.PI-h:h;var v={xExtra:Math.cos(c/2-d)*(r/2*(1/Math.sin(c/2)))-r/2||0,yExtra:Math.cos(h-c/2)*(r/2*(1/Math.sin(c/2)))-r/2||0};return v}function _C(t){var r=t.attr(),e=r.path,n=r.stroke,i=n?r.lineWidth:0,a=t.get("segments")||rp(e),o=EC(a,i),s=o.x,c=o.y,d=o.width,h=o.height,v={minX:s,minY:c,maxX:s+d,maxY:c+h};return v=nd(t,v),{x:v.minX,y:v.minY,width:v.maxX-v.minX,height:v.maxY-v.minY}}function Fs(t){var r=t.attr(),e=r.x1,n=r.y1,i=r.x2,a=r.y2,o=Math.min(e,i),s=Math.max(e,i),c=Math.min(n,a),d=Math.max(n,a),h={minX:o,maxX:s,minY:c,maxY:d};return h=nd(t,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function cd(t){var r=t.attr(),e=r.x,n=r.y,i=r.rx,a=r.ry;return{x:e-i,y:n-a,width:i*2,height:a*2}}Mn("rect",Dv),Mn("image",Dv),Mn("circle",Bv),Mn("marker",Bv),Mn("polyline",yC),Mn("polygon",Kv),Mn("text",xC),Mn("path",_C),Mn("line",Fs),Mn("ellipse",cd);function TC(){return window?window.devicePixelRatio:1}function np(t,r,e,n){var i=t-e,a=r-n;return Math.sqrt(i*i+a*a)}function ba(t,r,e,n,i,a){return i>=t&&i<=t+e&&a>=r&&a<=r+n}function ho(t,r){return!(r.minX>t.maxX||r.maxX<t.minX||r.minY>t.maxY||r.maxY<t.minY)}function ip(t,r){return!t||!r?t||r:{minX:Math.min(t.minX,r.minX),minY:Math.min(t.minY,r.minY),maxX:Math.max(t.maxX,r.maxX),maxY:Math.max(t.maxY,r.maxY)}}function ap(t,r){return t[0]===r[0]&&t[1]===r[1]}var op=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,LC=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,RC=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,lp=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function sp(t,r){var e=t.match(lp);lt(e,function(n){var i=n.split(":");r.addColorStop(i[0],i[1])})}function AC(t,r,e){var n=op.exec(e),i=parseFloat(n[1])%360*(Math.PI/180),a=n[2],o=r.getBBox(),s,c;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},c={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},c={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},c={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},c={x:o.maxX,y:o.minY});var d=Math.tan(i),h=d*d,v=(c.x-s.x+d*(c.y-s.y))/(h+1)+s.x,g=d*(c.x-s.x+d*(c.y-s.y))/(h+1)+s.y,C=t.createLinearGradient(s.x,s.y,v,g);return sp(a,C),C}function IC(t,r,e){var n=LC.exec(e),i=parseFloat(n[1]),a=parseFloat(n[2]),o=parseFloat(n[3]),s=n[4];if(o===0){var c=s.match(lp);return c[c.length-1].split(":")[1]}var d=r.getBBox(),h=d.maxX-d.minX,v=d.maxY-d.minY,g=Math.sqrt(h*h+v*v)/2,C=t.createRadialGradient(d.minX+h*i,d.minY+v*a,0,d.minX+h/2,d.minY+v/2,o*g);return sp(s,C),C}function OC(t,r,e){if(r.get("patternSource")&&r.get("patternSource")===e)return r.get("pattern");var n,i,a=RC.exec(e),o=a[1],s=a[2];function c(){n=t.createPattern(i,o),r.set("pattern",n),r.set("patternSource",e)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?c():(i.onload=c,i.src=i.src),n}function MC(t,r,e){var n=r.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return e;if(In(e)){if(e[1]==="("||e[2]==="("){if(e[0]==="l")return AC(t,r,e);if(e[0]==="r")return IC(t,r,e);if(e[0]==="p")return OC(t,r,e)}return e}if(e instanceof CanvasPattern)return e}function DC(t){var r=0,e=0,n=0,i=0;return qr(t)?t.length===1?r=e=n=i=t[0]:t.length===2?(r=n=t[0],e=i=t[1]):t.length===3?(r=t[0],e=i=t[1],n=t[2]):(r=t[0],e=t[1],n=t[2],i=t[3]):r=e=n=i=t,[r,e,n,i]}function Hs(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function dd(t,r){return Hs(t)*Hs(r)?(t[0]*r[0]+t[1]*r[1])/(Hs(t)*Hs(r)):1}function up(t,r){return(t[0]*r[1]<t[1]*r[0]?-1:1)*Math.acos(dd(t,r))}function cp(t,r){var e=r[1],n=r[2],i=L(Ah(r[3]),Math.PI*2),a=r[4],o=r[5],s=t[0],c=t[1],d=r[6],h=r[7],v=Math.cos(i)*(s-d)/2+Math.sin(i)*(c-h)/2,g=-1*Math.sin(i)*(s-d)/2+Math.cos(i)*(c-h)/2,C=v*v/(e*e)+g*g/(n*n);C>1&&(e*=Math.sqrt(C),n*=Math.sqrt(C));var w=e*e*(g*g)+n*n*(v*v),S=w?Math.sqrt((e*e*(n*n)-w)/w):1;a===o&&(S*=-1),isNaN(S)&&(S=0);var _=n?S*e*g/n:0,T=e?S*-n*v/e:0,M=(s+d)/2+Math.cos(i)*_-Math.sin(i)*T,D=(c+h)/2+Math.sin(i)*_+Math.cos(i)*T,B=[(v-_)/e,(g-T)/n],G=[(-1*v-_)/e,(-1*g-T)/n],V=up([1,0],B),q=up(B,G);return dd(B,G)<=-1&&(q=Math.PI),dd(B,G)>=1&&(q=0),o===0&&q>0&&(q=q-2*Math.PI),o===1&&q<0&&(q=q+2*Math.PI),{cx:M,cy:D,rx:ap(t,[d,h])?0:e,ry:ap(t,[d,h])?0:n,startAngle:V,endAngle:V+q,xRotation:i,arcFlag:a,sweepFlag:o}}var zs=Math.sin,Gs=Math.cos,fd=Math.atan2,$s=Math.PI;function dp(t,r,e,n,i,a,o){var s=r.stroke,c=r.lineWidth,d=e-i,h=n-a,v=fd(h,d),g=new Cd({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Gs($s/6)+","+10*zs($s/6)+" L0,0 L"+10*Gs($s/6)+",-"+10*zs($s/6),stroke:s,lineWidth:c}});g.translate(i,a),g.rotateAtPoint(i,a,v),t.set(o?"startArrowShape":"endArrowShape",g)}function fp(t,r,e,n,i,a,o){var s=r.startArrow,c=r.endArrow,d=r.stroke,h=r.lineWidth,v=o?s:c,g=v.d,C=v.fill,w=v.stroke,S=v.lineWidth,_=Th(v,["d","fill","stroke","lineWidth"]),T=e-i,M=n-a,D=fd(M,T);g&&(i=i-Gs(D)*g,a=a-zs(D)*g);var B=new Cd({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:At(At({},_),{stroke:w||d,lineWidth:S||h,fill:C})});B.translate(i,a),B.rotateAtPoint(i,a,D),t.set(o?"startArrowShape":"endArrowShape",B)}function Sa(t,r,e,n,i){var a=fd(n-r,e-t);return{dx:Gs(a)*i,dy:zs(a)*i}}function Ws(t,r,e,n,i,a){typeof r.startArrow=="object"?fp(t,r,e,n,i,a,!0):r.startArrow?dp(t,r,e,n,i,a,!0):t.set("startArrowShape",null)}function hd(t,r,e,n,i,a){typeof r.endArrow=="object"?fp(t,r,e,n,i,a,!1):r.endArrow?dp(t,r,e,n,i,a,!1):t.set("startArrowShape",null)}var hp={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Ea(t,r){var e=r.attr();for(var n in e){var i=e[n],a=hp[n]?hp[n]:n;a==="matrix"&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a==="lineDash"&&t.setLineDash?qr(i)&&t.setLineDash(i):(a==="strokeStyle"||a==="fillStyle"?i=MC(t,r,i):a==="globalAlpha"&&(i=i*t.globalAlpha),t[a]=i)}}function vd(t,r,e){for(var n=0;n<r.length;n++){var i=r[n];i.cfg.visible?i.draw(t,e):i.skipDraw()}}function BC(t,r,e){var n=t.get("refreshElements");lt(n,function(i){if(i!==t)for(var a=i.cfg.parent;a&&a!==t&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),n[0]===t?ks(r):pd(r,e)}function pd(t,r){for(var e=0;e<t.length;e++){var n=t[e];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&ks(n.cfg.children);else if(n.cfg.refresh)n.isGroup()&&pd(n.cfg.children,r);else{var i=PC(n,r);n.cfg.refresh=i,i&&n.isGroup()&&pd(n.cfg.children,r)}}}function vp(t){for(var r=0;r<t.length;r++){var e=t[r];e.cfg.hasChanged=!1,e.isGroup()&&!e.destroyed&&vp(e.cfg.children)}}function ks(t,r){for(var e=0;e<t.length;e++){var n=t[e];n.cfg.refresh=!0,n.isGroup()&&ks(n.get("children"))}}function PC(t,r){var e=t.cfg.cacheCanvasBBox,n=t.cfg.isInView&&e&&ho(e,r);return n}function pp(t,r,e,n){var i=e.path,a=e.startArrow,o=e.endArrow;if(i){var s=[0,0],c=[0,0],d={dx:0,dy:0};r.beginPath();for(var h=0;h<i.length;h++){var v=i[h],g=v[0];if(h===0&&a&&a.d){var C=t.getStartTangent();d=Sa(C[0][0],C[0][1],C[1][0],C[1][1],a.d)}else if(h===i.length-2&&i[h+1][0]==="Z"&&o&&o.d){var w=i[h+1];if(w[0]==="Z"){var C=t.getEndTangent();d=Sa(C[0][0],C[0][1],C[1][0],C[1][1],o.d)}}else if(h===i.length-1&&o&&o.d&&i[0]!=="Z"){var C=t.getEndTangent();d=Sa(C[0][0],C[0][1],C[1][0],C[1][1],o.d)}var S=d.dx,_=d.dy;switch(g){case"M":r.moveTo(v[1]-S,v[2]-_),c=[v[1],v[2]];break;case"L":r.lineTo(v[1]-S,v[2]-_);break;case"Q":r.quadraticCurveTo(v[1],v[2],v[3]-S,v[4]-_);break;case"C":r.bezierCurveTo(v[1],v[2],v[3],v[4],v[5]-S,v[6]-_);break;case"A":{var T=void 0;n?(T=n[h],T||(T=cp(s,v),n[h]=T)):T=cp(s,v);var M=T.cx,D=T.cy,B=T.rx,G=T.ry,V=T.startAngle,q=T.endAngle,J=T.xRotation,te=T.sweepFlag;if(r.ellipse)r.ellipse(M,D,B,G,J,V,q,1-te);else{var se=B>G?B:G,ue=B>G?1:B/G,ce=B>G?G/B:1;r.translate(M,D),r.rotate(J),r.scale(ue,ce),r.arc(0,0,se,V,q,1-te),r.scale(1/ue,1/ce),r.rotate(-J),r.translate(-M,-D)}break}case"Z":r.closePath();break}if(g==="Z")s=c;else{var me=v.length;s=[v[me-2],v[me-1]]}}}}function gp(t,r){var e=t.get("canvas");e&&(r==="remove"&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(e.refreshElement(t,r,e),e.get("autoDraw")&&e.draw())))}function NC(t){var r;if(t.destroyed)r=t._cacheCanvasBBox;else{var e=t.get("cacheCanvasBBox"),n=e&&!!(e.width&&e.height),i=t.getCanvasBBox(),a=i&&!!(i.width&&i.height);n&&a?r=ip(e,i):n?r=e:a&&(r=i)}return r}function FC(t){if(!t.length)return null;var r=[],e=[],n=[],i=[];return lt(t,function(a){var o=NC(a);o&&(r.push(o.minX),e.push(o.minY),n.push(o.maxX),i.push(o.maxY))}),{minX:Vn(r),minY:Vn(e),maxX:Yn(n),maxY:Yn(i)}}function mp(t,r){return!t||!r||!ho(t,r)?null:{minX:Math.max(t.minX,r.minX),minY:Math.max(t.minY,r.minY),maxX:Math.min(t.maxX,r.maxX),maxY:Math.min(t.maxY,r.maxY)}}var qn=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.onCanvasChange=function(e){gp(this,e)},r.prototype.getShapeBase=function(){return jr},r.prototype.getGroupBase=function(){return r},r.prototype._applyClip=function(e,n){n&&(e.save(),Ea(e,n),n.createPath(e),e.restore(),e.clip(),n._afterDraw())},r.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,n=[],i=[];lt(e,function(g){var C=g.cfg.cacheCanvasBBox;C&&g.cfg.isInView&&(n.push(C.minX,C.maxX),i.push(C.minY,C.maxY))});var a=null;if(n.length){var o=Vn(n),s=Yn(n),c=Vn(i),d=Yn(i);a={minX:o,minY:c,x:o,y:c,maxX:s,maxY:d,width:s-o,height:d-c};var h=this.cfg.canvas;if(h){var v=h.getViewRange();this.set("isInView",ho(a,v))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},r.prototype.draw=function(e,n){var i=this.cfg.children,a=n?this.cfg.refresh:!0;i.length&&a&&(e.save(),Ea(e,this),this._applyClip(e,this.getClip()),vd(e,i,n),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},r}(jc),HC=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return At(At({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},r.prototype.getShapeBase=function(){return jr},r.prototype.getGroupBase=function(){return qn},r.prototype.onCanvasChange=function(e){gp(this,e)},r.prototype.calculateBBox=function(){var e=this.get("type"),n=this.getHitLineWidth(),i=Mv(e),a=i(this),o=n/2,s=a.x-o,c=a.y-o,d=a.x+a.width+o,h=a.y+a.height+o;return{x:s,minX:s,y:c,minY:c,width:a.width+n,height:a.height+n,maxX:d,maxY:h}},r.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},r.prototype.isStroke=function(){return!!this.attrs.stroke},r.prototype._applyClip=function(e,n){n&&(e.save(),Ea(e,n),n.createPath(e),e.restore(),e.clip(),n._afterDraw())},r.prototype.draw=function(e,n){var i=this.cfg.clipShape;if(n){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!ho(n,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}e.save(),Ea(e,this),this._applyClip(e,i),this.drawPath(e),e.restore(),this._afterDraw()},r.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},r.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var n=this.getCanvasBBox(),i=ho(n,e);this.set("isInView",i),i?this.set("cacheCanvasBBox",n):this.set("cacheCanvasBBox",null)}},r.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},r.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},r.prototype.fill=function(e){e.fill()},r.prototype.stroke=function(e){e.stroke()},r.prototype.strokeAndFill=function(e){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isFill()&&(!Rt(s)&&s!==1?(e.globalAlpha=s,this.fill(e),e.globalAlpha=a):this.fill(e)),this.isStroke()&&i>0&&(!Rt(o)&&o!==1&&(e.globalAlpha=o),this.stroke(e)),this.afterDrawPath(e)},r.prototype.createPath=function(e){},r.prototype.afterDrawPath=function(e){},r.prototype.isInShape=function(e,n){var i=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(e,n,i,a,o)},r.prototype.isInStrokeOrPath=function(e,n,i,a,o){return!1},r.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},r}(Iv),Bn=HC,zC=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return At(At({},e),{x:0,y:0,r:0})},r.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr(),c=s.x,d=s.y,h=s.r,v=o/2,g=np(c,d,e,n);return a&&i?g<=h+v:a?g<=h:i?g>=h-v&&g<=h+v:!1},r.prototype.createPath=function(e){var n=this.attr(),i=n.x,a=n.y,o=n.r;e.beginPath(),e.arc(i,a,o,0,Math.PI*2,!1),e.closePath()},r}(Bn),yp=zC;function Us(t,r,e,n){return t/(e*e)+r/(n*n)}var GC=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return At(At({},e),{x:0,y:0,rx:0,ry:0})},r.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr(),c=o/2,d=s.x,h=s.y,v=s.rx,g=s.ry,C=(e-d)*(e-d),w=(n-h)*(n-h);return a&&i?Us(C,w,v+c,g+c)<=1:a?Us(C,w,v,g)<=1:i?Us(C,w,v-c,g-c)>=1&&Us(C,w,v+c,g+c)<=1:!1},r.prototype.createPath=function(e){var n=this.attr(),i=n.x,a=n.y,o=n.rx,s=n.ry;if(e.beginPath(),e.ellipse)e.ellipse(i,a,o,s,0,0,Math.PI*2,!1);else{var c=o>s?o:s,d=o>s?1:o/s,h=o>s?s/o:1;e.save(),e.translate(i,a),e.scale(d,h),e.arc(0,0,c,0,Math.PI*2),e.restore(),e.closePath()}},r}(Bn),$C=GC;function gd(t){return t instanceof HTMLElement&&In(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS"}var WC=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return At(At({},e),{x:0,y:0,width:0,height:0})},r.prototype.initAttrs=function(e){this._setImage(e.img)},r.prototype.isStroke=function(){return!1},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},r.prototype._setImage=function(e){var n=this,i=this.attrs;if(In(e)){var a=new Image;a.onload=function(){if(n.destroyed)return!1;n.attr("img",a),n.set("loading",!1),n._afterLoading();var o=n.get("callback");o&&o.call(n)},a.crossOrigin="Anonymous",a.src=e,this.set("loading",!0)}else e instanceof Image?(i.width||(i.width=e.width),i.height||(i.height=e.height)):gd(e)&&(i.width||(i.width=Number(e.getAttribute("width"))),i.height||(i.height,Number(e.getAttribute("height"))))},r.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),e==="img"&&this._setImage(n)},r.prototype.createPath=function(e){if(this.get("loading")){this.set("toDraw",!0),this.set("context",e);return}var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,c=n.sx,d=n.sy,h=n.swidth,v=n.sheight,g=n.img;(g instanceof Image||gd(g))&&(!Rt(c)&&!Rt(d)&&!Rt(h)&&!Rt(v)?e.drawImage(g,c,d,h,v,i,a,o,s):e.drawImage(g,i,a,o,s))},r}(Bn),md=WC;function Fi(t,r,e,n,i,a,o){var s=Math.min(t,e),c=Math.max(t,e),d=Math.min(r,n),h=Math.max(r,n),v=i/2;return a>=s-v&&a<=c+v&&o>=d-v&&o<=h+v?Wr.pointToLine(t,r,e,n,a,o)<=i/2:!1}var kC=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return At(At({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(e){this.setArrow()},r.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),this.setArrow()},r.prototype.setArrow=function(){var e=this.attr(),n=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.startArrow,c=e.endArrow;s&&Ws(this,e,a,o,n,i),c&&hd(this,e,n,i,a,o)},r.prototype.isInStrokeOrPath=function(e,n,i,a,o){if(!i||!o)return!1;var s=this.attr(),c=s.x1,d=s.y1,h=s.x2,v=s.y2;return Fi(c,d,h,v,o,e,n)},r.prototype.createPath=function(e){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2,c=n.startArrow,d=n.endArrow,h={dx:0,dy:0},v={dx:0,dy:0};c&&c.d&&(h=Sa(i,a,o,s,n.startArrow.d)),d&&d.d&&(v=Sa(i,a,o,s,n.endArrow.d)),e.beginPath(),e.moveTo(i+h.dx,a+h.dy),e.lineTo(o-v.dx,s-v.dy)},r.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},r.prototype.getTotalLength=function(){var e=this.attr(),n=e.x1,i=e.y1,a=e.x2,o=e.y2;return Wr.length(n,i,a,o)},r.prototype.getPoint=function(e){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return Wr.pointAt(i,a,o,s,e)},r}(Bn),UC=kC,YC={circle:function(t,r,e){return[["M",t-e,r],["A",e,e,0,1,0,t+e,r],["A",e,e,0,1,0,t-e,r]]},square:function(t,r,e){return[["M",t-e,r-e],["L",t+e,r-e],["L",t+e,r+e],["L",t-e,r+e],["Z"]]},diamond:function(t,r,e){return[["M",t-e,r],["L",t,r-e],["L",t+e,r],["L",t,r+e],["Z"]]},triangle:function(t,r,e){var n=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,r+n],["L",t,r-n],["L",t+e,r+n],["Z"]]},"triangle-down":function(t,r,e){var n=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,r-n],["L",t+e,r-n],["L",t,r+n],["Z"]]}},VC=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.initAttrs=function(e){this._resetParamsCache()},r.prototype._resetParamsCache=function(){this.set("paramsCache",{})},r.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),["symbol","x","y","r","radius"].indexOf(e)!==-1&&this._resetParamsCache()},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._getR=function(e){return Rt(e.r)?e.radius:e.r},r.prototype._getPath=function(){var e=this.attr(),n=e.x,i=e.y,a=e.symbol||"circle",o=this._getR(e),s,c;if(Mi(a))s=a,c=s(n,i,o),c=ep(c);else{if(s=r.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;c=s(n,i,o)}return c},r.prototype.createPath=function(e){var n=this._getPath(),i=this.get("paramsCache");pp(this,e,{path:n},i)},r.Symbols=YC,r}(Bn),XC=VC;function Cp(t,r,e){var n=ad();return t.createPath(n),n.isPointInPath(r,e)}var jC=1e-6;function yd(t){return Math.abs(t)<jC?0:t<0?-1:1}function qC(t,r,e){return(e[0]-t[0])*(r[1]-t[1])===(r[0]-t[0])*(e[1]-t[1])&&Math.min(t[0],r[0])<=e[0]&&e[0]<=Math.max(t[0],r[0])&&Math.min(t[1],r[1])<=e[1]&&e[1]<=Math.max(t[1],r[1])}function wp(t,r,e){var n=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(qC(o,s,[r,e]))return!0;yd(o[1]-e)>0!=yd(s[1]-e)>0&&yd(r-(e-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function dl(t,r,e,n,i,a,o,s){var c=(Math.atan2(s-r,o-t)+Math.PI*2)%(Math.PI*2);if(c<n||c>i)return!1;var d={x:t+e*Math.cos(c),y:r+e*Math.sin(c)};return np(d.x,d.y,o,s)<=a/2}var KC=Tc;function ZC(t){for(var r=!1,e=t.length,n=0;n<e;n++){var i=t[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){r=!0;break}}return r}function xt(t,r,e,n,i){for(var a=!1,o=r/2,s=0;s<t.length;s++){var c=t[s],d=c.currentPoint,h=c.params,v=c.prePoint,g=c.box;if(!(g&&!ba(g.x-o,g.y-o,g.width+r,g.height+r,e,n))){switch(c.command){case"L":case"Z":a=Fi(v[0],v[1],d[0],d[1],r,e,n);break;case"Q":var C=Gv.pointDistance(v[0],v[1],h[1],h[2],h[3],h[4],e,n);a=C<=r/2;break;case"C":var w=cl.pointDistance(v[0],v[1],h[1],h[2],h[3],h[4],h[5],h[6],e,n,i);a=w<=r/2;break;case"A":var S=c.arcParams,_=S.cx,T=S.cy,M=S.rx,D=S.ry,B=S.startAngle,G=S.endAngle,V=S.xRotation,q=[e,n,1],J=M>D?M:D,te=M>D?1:M/D,se=M>D?D/M:1,ue=KC(null,[["t",-_,-T],["r",-V],["s",1/te,1/se]]);sy(q,q,ue),a=dl(0,0,J,B,G,r,q[0],q[1]);break}if(a)break}}return a}function Ys(t){for(var r=t.length,e=[],n=[],i=[],a=0;a<r;a++){var o=t[a],s=o[0];s==="M"?(i.length&&(n.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(e.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&n.push(i),{polygons:e,polylines:n}}var Vs=At({hasArc:ZC,extractPolygons:Ys,isPointInStroke:xt},Nh);function xp(t,r,e){for(var n=!1,i=0;i<t.length;i++){var a=t[i];if(n=wp(a,r,e),n)break}return n}var QC=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return At(At({},e),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},r.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),e==="path"&&this._setPathArr(n),this.setArrow()},r.prototype._setPathArr=function(e){this.attrs.path=ep(e);var n=Vs.hasArc(e);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},r.prototype.getSegments=function(){var e=this.get("segements");return e||(e=rp(this.attr("path")),this.set("segments",e)),e},r.prototype.setArrow=function(){var e=this.attr(),n=e.startArrow,i=e.endArrow;if(n){var a=this.getStartTangent();Ws(this,e,a[0][0],a[0][1],a[1][0],a[1][1])}if(i){var a=this.getEndTangent();hd(this,e,a[0][0],a[0][1],a[1][0],a[1][1])}},r.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.getSegments(),c=this.get("hasArc"),d=!1;if(i){var h=this.getTotalLength();d=Vs.isPointInStroke(s,o,e,n,h)}if(!d&&a)if(c)d=Cp(this,e,n);else{var v=this.attr("path"),g=Vs.extractPolygons(v);d=xp(g.polygons,e,n)||xp(g.polylines,e,n)}return d},r.prototype.createPath=function(e){var n=this.attr(),i=this.get("paramsCache");pp(this,e,n,i)},r.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},r.prototype.getTotalLength=function(){var e=this.get("totalLength");return Rt(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},r.prototype.getPoint=function(e){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i,a,o=this.get("curve");if(!n||n.length===0)return o?{x:o[0][1],y:o[0][2]}:null;lt(n,function(h,v){e>=h[0]&&e<=h[1]&&(i=(e-h[0])/(h[1]-h[0]),a=v)});var s=o[a];if(Rt(s)||Rt(a))return null;var c=s.length,d=o[a+1];return cl.pointAt(s[c-2],s[c-1],d[1],d[2],d[3],d[4],d[5],d[6],i)},r.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",Vs.pathToCurve(e))},r.prototype._setTcache=function(){var e=0,n=0,i=[],a,o,s,c,d=this.get("curve");if(d){if(lt(d,function(h,v){s=d[v+1],c=h.length,s&&(e+=cl.length(h[c-2],h[c-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",e),e===0){this.set("tCache",[]);return}lt(d,function(h,v){s=d[v+1],c=h.length,s&&(a=[],a[0]=n/e,o=cl.length(h[c-2],h[c-1],s[1],s[2],s[3],s[4],s[5],s[6]),n+=o||0,a[1]=n/e,i.push(a))}),this.set("tCache",i)}},r.prototype.getStartTangent=function(){var e=this.getSegments(),n;if(e.length>1){var i=e[0].currentPoint,a=e[1].currentPoint,o=e[1].startTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([a[0],a[1]]),n.push([i[0],i[1]]))}return n},r.prototype.getEndTangent=function(){var e=this.getSegments(),n=e.length,i;if(n>1){var a=e[n-2].currentPoint,o=e[n-1].currentPoint,s=e[n-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},r}(Bn),Cd=QC;function bp(t,r,e,n,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=t[o][0],c=t[o][1],d=t[o+1][0],h=t[o+1][1];if(Fi(s,c,d,h,r,e,n))return!0}if(i){var v=t[0],g=t[a-1];if(Fi(v[0],v[1],g[0],g[1],r,e,n))return!0}return!1}var fl=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr().points,c=!1;return i&&(c=bp(s,o,e,n,!0)),!c&&a&&(c=wp(s,e,n)),c},r.prototype.createPath=function(e){var n=this.attr(),i=n.points;if(!(i.length<2)){e.beginPath();for(var a=0;a<i.length;a++){var o=i[a];a===0?e.moveTo(o[0],o[1]):e.lineTo(o[0],o[1])}e.closePath()}},r}(Bn),JC=fl,Sp=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return At(At({},e),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(e){this.setArrow()},r.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),this.setArrow(),["points"].indexOf(e)!==-1&&this._resetCache()},r.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},r.prototype.setArrow=function(){var e=this.attr(),n=this.attrs,i=n.points,a=n.startArrow,o=n.endArrow,s=i.length,c=i[0][0],d=i[0][1],h=i[s-1][0],v=i[s-1][1];a&&Ws(this,e,i[1][0],i[1][1],c,d),o&&hd(this,e,i[s-2][0],i[s-2][1],h,v)},r.prototype.isFill=function(){return!1},r.prototype.isInStrokeOrPath=function(e,n,i,a,o){if(!i||!o)return!1;var s=this.attr().points;return bp(s,o,e,n,!1)},r.prototype.isStroke=function(){return!0},r.prototype.createPath=function(e){var n=this.attr(),i=n.points,a=n.startArrow,o=n.endArrow,s=i.length;if(!(i.length<2)){var c=i[0][0],d=i[0][1],h=i[s-1][0],v=i[s-1][1];if(a&&a.d){var g=Sa(c,d,i[1][0],i[1][1],a.d);c+=g.dx,d+=g.dy}if(o&&o.d){var g=Sa(i[s-2][0],i[s-2][1],h,v,o.d);h-=g.dx,v-=g.dy}e.beginPath(),e.moveTo(c,d);for(var C=0;C<s-1;C++){var w=i[C];e.lineTo(w[0],w[1])}e.lineTo(h,v)}},r.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},r.prototype.getTotalLength=function(){var e=this.attr().points,n=this.get("totalLength");return Rt(n)?(this.set("totalLength",rd.length(e)),this.get("totalLength")):n},r.prototype.getPoint=function(e){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return lt(i,function(s,c){e>=s[0]&&e<=s[1]&&(a=(e-s[0])/(s[1]-s[0]),o=c)}),Wr.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},r.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;lt(e,function(c,d){e[d+1]&&(o=[],o[0]=i/n,s=Wr.length(c[0],c[1],e[d+1][0],e[d+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},r.prototype.getStartTangent=function(){var e=this.attr().points,n=[];return n.push([e[1][0],e[1][1]]),n.push([e[0][0],e[0][1]]),n},r.prototype.getEndTangent=function(){var e=this.attr().points,n=e.length-1,i=[];return i.push([e[n-1][0],e[n-1][1]]),i.push([e[n][0],e[n][1]]),i},r}(Bn),ew=Sp;function tw(t,r,e,n,i,a,o){var s=i/2;return ba(t-s,r-s,e,i,a,o)||ba(t+e-s,r-s,i,n,a,o)||ba(t+s,r+n-s,e,i,a,o)||ba(t-s,r+s,i,n,a,o)}function Ep(t,r,e,n,i,a,o,s){return Fi(t+i,r,t+e-i,r,a,o,s)||Fi(t+e,r+i,t+e,r+n-i,a,o,s)||Fi(t+e-i,r+n,t+i,r+n,a,o,s)||Fi(t,r+n-i,t,r+i,a,o,s)||dl(t+e-i,r+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||dl(t+e-i,r+n-i,i,0,.5*Math.PI,a,o,s)||dl(t+i,r+n-i,i,.5*Math.PI,Math.PI,a,o,s)||dl(t+i,r+i,i,Math.PI,1.5*Math.PI,a,o,s)}var rw=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return At(At({},e),{x:0,y:0,width:0,height:0,radius:0})},r.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr(),c=s.x,d=s.y,h=s.width,v=s.height,g=s.radius;if(g){var w=!1;return i&&(w=Ep(c,d,h,v,g,o,e,n)),!w&&a&&(w=Cp(this,e,n)),w}else{var C=o/2;if(a&&i)return ba(c-C,d-C,h+C,v+C,e,n);if(a)return ba(c,d,h,v,e,n);if(i)return tw(c,d,h,v,o,e,n)}},r.prototype.createPath=function(e){var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,c=n.radius;if(e.beginPath(),c===0)e.rect(i,a,o,s);else{var d=DC(c),h=d[0],v=d[1],g=d[2],C=d[3];e.moveTo(i+h,a),e.lineTo(i+o-v,a),v!==0&&e.arc(i+o-v,a+v,v,-Math.PI/2,0),e.lineTo(i+o,a+s-g),g!==0&&e.arc(i+o-g,a+s-g,g,0,Math.PI/2),e.lineTo(i+C,a+s),C!==0&&e.arc(i+C,a+s-C,C,Math.PI/2,Math.PI),e.lineTo(i,a+h),h!==0&&e.arc(i+h,a+h,h,Math.PI,Math.PI*1.5),e.closePath()}},r}(Bn),wd=rw,nw=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return At(At({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},r.prototype.isOnlyHitBox=function(){return!0},r.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},r.prototype._assembleFont=function(){var e=this.attrs;e.font=Bs(e)},r.prototype._setText=function(e){var n=null;In(e)&&e.indexOf(`
`)!==-1&&(n=e.split(`
`)),this.set("textArr",n)},r.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),e.startsWith("font")&&this._assembleFont(),e==="text"&&this._setText(n)},r.prototype._getSpaceingY=function(){var e=this.attrs,n=e.lineHeight,i=e.fontSize*1;return n?n-i:i*.14},r.prototype._drawTextArr=function(e,n,i){var a=this.attrs,o=a.textBaseline,s=a.x,c=a.y,d=a.fontSize*1,h=this._getSpaceingY(),v=Ds(a.text,a.fontSize,a.lineHeight),g;lt(n,function(C,w){g=c+w*(h+d)-v+d,o==="middle"&&(g+=v-d-(v-d)/2),o==="top"&&(g+=v-d),Rt(C)||(i?e.fillText(C,s,g):e.strokeText(C,s,g))})},r.prototype._drawText=function(e,n){var i=this.attr(),a=i.x,o=i.y,s=this.get("textArr");if(s)this._drawTextArr(e,s,n);else{var c=i.text;Rt(c)||(n?e.fillText(c,a,o):e.strokeText(c,a,o))}},r.prototype.strokeAndFill=function(e){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isStroke()&&i>0&&(!Rt(o)&&o!==1&&(e.globalAlpha=a),this.stroke(e)),this.isFill()&&(!Rt(s)&&s!==1?(e.globalAlpha=s,this.fill(e),e.globalAlpha=a):this.fill(e)),this.afterDrawPath(e)},r.prototype.fill=function(e){this._drawText(e,!0)},r.prototype.stroke=function(e){this._drawText(e,!1)},r}(Bn),iw=nw;function aw(t,r){if(r){var e=Xh(r);return fa(e,t)}return t}function _p(t,r,e){var n=t.getTotalMatrix();if(n){var i=aw([r,e,1],n),a=i[0],o=i[1];return[a,o]}return[r,e]}function Tp(t,r,e){if(t.isCanvas&&t.isCanvas())return!0;if(!bc(t)||t.cfg.isInView===!1)return!1;if(t.cfg.clipShape){var n=_p(t,r,e),i=n[0],a=n[1];if(t.isClipped(i,a))return!1}var o=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return r>=o.minX&&r<=o.maxX&&e>=o.minY&&e<=o.maxY}function Lp(t,r,e){if(!Tp(t,r,e))return null;for(var n=null,i=t.getChildren(),a=i.length,o=a-1;o>=0;o--){var s=i[o];if(s.isGroup())n=Lp(s,r,e);else if(Tp(s,r,e)){var c=s,d=_p(s,r,e),h=d[0],v=d[1];c.isInShape(h,v)&&(n=s)}if(n)break}return n}var Rp=function(t){fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},r.prototype.onCanvasChange=function(e){(e==="attr"||e==="sort"||e==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},r.prototype.getShapeBase=function(){return jr},r.prototype.getGroupBase=function(){return qn},r.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||TC();return e>=1?Math.ceil(e):1},r.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},r.prototype.createDom=function(){var e=document.createElement("canvas"),n=e.getContext("2d");return this.set("context",n),e},r.prototype.setDOMSize=function(e,n){t.prototype.setDOMSize.call(this,e,n);var i=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*e,a.height=o*n,o>1&&i.scale(o,o)},r.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},r.prototype.getShape=function(e,n){var i;return this.get("quickHit")?i=Lp(this,e,n):i=t.prototype.getShape.call(this,e,n,null),i},r.prototype._getRefreshRegion=function(){var e=this.get("refreshElements"),n=this.getViewRange(),i;if(e.length&&e[0]===this)i=n;else if(i=FC(e),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var a=this.get("clipView");a&&(i=mp(i,n))}return i},r.prototype.refreshElement=function(e){var n=this.get("refreshElements");n.push(e)},r.prototype._clearFrame=function(){var e=this.get("drawFrame");e&&(z1(e),this.set("drawFrame",null),this.set("refreshElements",[]))},r.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},r.prototype._drawAll=function(){var e=this.get("context"),n=this.get("el"),i=this.getChildren();e.clearRect(0,0,n.width,n.height),Ea(e,this),vd(e,i),this.set("refreshElements",[])},r.prototype._drawRegion=function(){var e=this.get("context"),n=this.get("refreshElements"),i=this.getChildren(),a=this._getRefreshRegion();a?(e.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),e.save(),e.beginPath(),e.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),e.clip(),Ea(e,this),BC(this,i,a),vd(e,i,a),e.restore()):n.length&&vp(n),lt(n,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},r.prototype._startDraw=function(){var e=this,n=this.get("drawFrame");n||(n=H1(function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),e.set("drawFrame",null)}),this.set("drawFrame",n))},r.prototype.skipDraw=function(){},r.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},r}(uo),kr="$$value$$",Ye="$$extra$$",xd="$$origin$$",ow="$$extra_column$$",Kn="$$total$$",Xs="$$multi$$",Hi="$$series_number$$",zi="$$empty_field_value$$",js="$$empty_extra_placeholder$$",Ap;(function(t){t.DATA_CELL_CLICK_EVENT="interaction:data-cell-click",t.MERGED_CELLS_CLICK_EVENT="interaction:merged-cells-click",t.CORNER_TEXT_CLICK_EVENT="interaction:corner-cell-text-click",t.ROW_COLUMN_CLICK_EVENT="interaction:row-column-click",t.ROW_TEXT_CLICK_EVENT="interaction:row-text-click",t.HOVER_EVENT="interaction:hover",t.TREND_ICON_CLICK="interaction:trend-icon-click"})(Ap||(Ap={}));var _r;(function(t){t.MOUSE_DOWN="mousedown",t.MOUSE_MOVE="mousemove",t.MOUSE_OUT="mouseout",t.MOUSE_LEAVE="mouseleave",t.MOUSE_UP="mouseup",t.KEY_DOWN="keydown",t.KEY_UP="keyup",t.CLICK="click",t.HOVER="hover",t.DOUBLE_CLICK="dblclick",t.CONTEXT_MENU="contextmenu"})(_r||(_r={}));var K;(function(t){t.ROW_CELL_HOVER="row-cell:hover",t.ROW_CELL_CLICK="row-cell:click",t.ROW_CELL_DOUBLE_CLICK="row-cell:double-click",t.ROW_CELL_CONTEXT_MENU="row-cell:context-menu",t.ROW_CELL_MOUSE_DOWN="row-cell:mouse-down",t.ROW_CELL_MOUSE_UP="row-cell:mouse-up",t.ROW_CELL_MOUSE_MOVE="row-cell:mouse-move",t.ROW_CELL_COLLAPSE_TREE_ROWS="row-cell:collapsed-tree-rows",t.ROW_CELL_SCROLL="row-cell:scroll",t.ROW_CELL_BRUSH_SELECTION="row-cell:brush-selection",t.COL_CELL_HOVER="col-cell:hover",t.COL_CELL_CLICK="col-cell:click",t.COL_CELL_DOUBLE_CLICK="col-cell:double-click",t.COL_CELL_CONTEXT_MENU="col-cell:context-menu",t.COL_CELL_MOUSE_DOWN="col-cell:mouse-down",t.COL_CELL_MOUSE_UP="col-cell:mouse-up",t.COL_CELL_MOUSE_MOVE="col-cell:mouse-move",t.COL_CELL_BRUSH_SELECTION="col-cell:brush-selection",t.DATA_CELL_HOVER="data-cell:hover",t.DATA_CELL_CLICK="data-cell:click",t.DATA_CELL_DOUBLE_CLICK="data-cell:double-click",t.DATA_CELL_CONTEXT_MENU="data-cell:context-menu",t.DATA_CELL_MOUSE_UP="data-cell:mouse-up",t.DATA_CELL_MOUSE_DOWN="data-cell:mouse-down",t.DATA_CELL_MOUSE_MOVE="data-cell:mouse-move",t.DATA_CELL_TREND_ICON_CLICK="data-cell:trend-icon-click",t.DATA_CELL_BRUSH_SELECTION="data-cell:brush-selection",t.DATA_CELL_SELECT_MOVE="data-cell:select-move",t.CORNER_CELL_HOVER="corner-cell:hover",t.CORNER_CELL_CLICK="corner-cell:click",t.CORNER_CELL_DOUBLE_CLICK="corner-cell:double-click",t.CORNER_CELL_CONTEXT_MENU="corner-cell:context-menu",t.CORNER_CELL_MOUSE_DOWN="corner-cell:mouse-down",t.CORNER_CELL_MOUSE_UP="corner-cell:mouse-up",t.CORNER_CELL_MOUSE_MOVE="corner-cell:mouse-move",t.MERGED_CELLS_HOVER="merged-cells:hover",t.MERGED_CELLS_CLICK="merged-cells:click",t.MERGED_CELLS_DOUBLE_CLICK="merged-cells:double-click",t.MERGED_CELLS_CONTEXT_MENU="merged-cell:context-menu",t.MERGED_CELLS_MOUSE_DOWN="merged-cells:mouse-down",t.MERGED_CELLS_MOUSE_UP="merged-cells:mouse-up",t.MERGED_CELLS_MOUSE_MOVE="merged-cells:mouse-move",t.RANGE_SORT="sort:range-sort",t.RANGE_SORTED="sort:range-sorted",t.RANGE_FILTER="filter:range-filter",t.RANGE_FILTERED="filter:range-filtered",t.LAYOUT_AFTER_HEADER_LAYOUT="layout:after-header-layout",t.LAYOUT_CELL_SCROLL="layout:cell-scroll",t.LAYOUT_PAGINATION="layout:pagination",t.LAYOUT_COLLAPSE_ROWS="layout:collapsed-rows",t.LAYOUT_AFTER_COLLAPSE_ROWS="layout:after-collapsed-rows",t.LAYOUT_AFTER_REAL_DATA_CELL_RENDER="layout:after-real-data-cell-render",t.LAYOUT_TREE_ROWS_COLLAPSE_ALL="layout:toggle-collapse-all",t.LAYOUT_COLS_EXPANDED="layout:table-col-expanded",t.LAYOUT_COLS_HIDDEN="layout:table-col-hidden",t.LAYOUT_AFTER_RENDER="layout:after-render",t.LAYOUT_BEFORE_RENDER="layout:before-render",t.LAYOUT_DESTROY="layout:destroy",t.LAYOUT_RESIZE="layout:resize",t.LAYOUT_RESIZE_SERIES_WIDTH="layout:resize-series-width",t.LAYOUT_RESIZE_ROW_WIDTH="layout:resize-row-width",t.LAYOUT_RESIZE_ROW_HEIGHT="layout:resize-row-height",t.LAYOUT_RESIZE_COL_WIDTH="layout:resize-column-width",t.LAYOUT_RESIZE_COL_HEIGHT="layout:resize-column-height",t.LAYOUT_RESIZE_TREE_WIDTH="layout:resize-tree-width",t.LAYOUT_RESIZE_MOUSE_DOWN="layout:resize:mouse-down",t.LAYOUT_RESIZE_MOUSE_MOVE="layout:resize:mouse-move",t.LAYOUT_RESIZE_MOUSE_UP="layout:resize-mouse-up",t.GLOBAL_KEYBOARD_DOWN="global:keyboard-down",t.GLOBAL_KEYBOARD_UP="global:keyboard-up",t.GLOBAL_COPIED="global:copied",t.GLOBAL_MOUSE_UP="global:mouse-up",t.GLOBAL_MOUSE_MOVE="global:mouse-move",t.GLOBAL_ACTION_ICON_CLICK="global:action-icon-click",t.GLOBAL_ACTION_ICON_HOVER="global:action-icon-hover",t.GLOBAL_ACTION_ICON_HOVER_OFF="global:action-icon-hover-off",t.GLOBAL_CONTEXT_MENU="global:context-menu",t.GLOBAL_CLICK="global:click",t.GLOBAL_DOUBLE_CLICK="global:double-click",t.GLOBAL_SELECTED="global:selected",t.GLOBAL_HOVER="global:hover",t.GLOBAL_RESET="global:reset",t.GLOBAL_LINK_FIELD_JUMP="global:link-field-jump",t.GLOBAL_SCROLL="global:scroll"})(K||(K={}));var lw=0,sw=3,bd=3,vo=4,qs=5,uw=5,Ip=1,cw=1,hl=2,X_=1,dw="backGroundGroup",fw="foreGroundGroup",Op="panelGroup",hw="panelScrollGroup",Sd="mergedCellsGroup",Mp="frozenRowGroup",Dp="frozenColGroup",vw="frozenTrailingRowGroup",Bp="frozenTrailingColGroup",pw="frozenTopGroup",gw="frozenBottomGroup",po="rowResizeAreaGroup",Ed="rowFrozenResizeAreaGroup",Ks="frozenSplitLine",Pp="rowIndexResizeAreaGroup",hi="cornerResizeAreaGroup",Np="colResizeAreaGroup",Fp="colFrozenResizeAreaGroup",mw="colHorizontalResizeAreaGroup",Hp="colScrollGroup",yw="colFrozenGroup",Cw="colFrozenTrailingGroup",vl="gridGroup",ww="rowScrollGroup",_d="rowHeaderFrozenGroup",xw="series-number-node",zp="horizontal-resize-area-",j_="table-col-horizontal-resize-area",bw="col-real-width-info",pl="root",vr="[&]",Gi="-",q_=0,K_=1,Sw=2,Z_=3,Gp=28,$p=16,Wp=16,go=/^root\[&\]*/,Q_="image",Ew=.5,Td=50,mo;(function(t){t.Line="line",t.Bar="bar",t.Bullet="bullet"})(mo||(mo={}));var $i="square",_a="...",Ld="antv-s2",Ht="valueRanges",Rd={},Ad="#000000",Id="#FFFFFF",_w={data:[],totalData:[],fields:{rows:[],columns:[],values:[],customTreeItems:[],valueInCols:!0},meta:[],sortParams:[],filterParams:[]},vi,kt;(function(t){t.ROW="row",t.COL="col",t.TRAILING_ROW="trailingRow",t.TRAILING_COL="trailingCol",t.SCROLL="scroll",t.TOP="top",t.BOTTOM="bottom"})(kt||(kt={}));var vn;(function(t){t.FROZEN_COL="frozenCol",t.FROZEN_ROW="frozenRow",t.FROZEN_TRAILING_COL="frozenTrailingCol",t.FROZEN_TRAILING_ROW="frozenTrailingRow"})(vn||(vn={}));var kp=(vi={},vi[kt.ROW]="frozenRowGroup",vi[kt.COL]="frozenColGroup",vi[kt.TRAILING_COL]="frozenTrailingColGroup",vi[kt.TRAILING_ROW]="frozenTrailingRowGroup",vi[kt.SCROLL]="panelScrollGroup",vi[kt.TOP]="frozenTopGroup",vi[kt.BOTTOM]="frozenBottomGroup",vi),Tr;(function(t){t.CORNER_CELL_CLICK="cornerCellClick",t.DATA_CELL_CLICK="dataCellClick",t.MERGED_CELLS_CLICK="mergedCellsClick",t.ROW_COLUMN_CLICK="rowColumnClick",t.ROW_TEXT_CLICK="rowTextClick",t.HOVER="hover",t.BRUSH_SELECTION="brushSelection",t.ROW_BRUSH_SELECTION="rowBrushSelection",t.COL_BRUSH_SELECTION="colBrushSelection",t.COL_ROW_RESIZE="rowColResize",t.DATA_CELL_MULTI_SELECTION="dataCellMultiSelection",t.RANGE_SELECTION="rangeSelection",t.SELECTED_CELL_MOVE="selectedCellMove"})(Tr||(Tr={}));var Se;(function(t){t.ALL_SELECTED="allSelected",t.SELECTED="selected",t.BRUSH_SELECTED="brushSelected",t.UNSELECTED="unselected",t.HOVER="hover",t.HOVER_FOCUS="hoverFocus",t.HIGHLIGHT="highlight",t.SEARCH_RESULT="searchResult",t.PREPARE_SELECT="prepareSelect"})(Se||(Se={}));var de;(function(t){t.DATA_CELL="dataCell",t.HEADER_CELL="headerCell",t.ROW_CELL="rowCell",t.COL_CELL="colCell",t.CORNER_CELL="cornerCell",t.MERGED_CELL="mergedCell"})(de||(de={}));var Od=800,tt={textOpacity:"fillOpacity",backgroundOpacity:"fillOpacity",backgroundColor:"fill",borderOpacity:"strokeOpacity",borderColor:"stroke",borderWidth:"lineWidth",opacity:"opacity"},Md={textShape:["textOpacity"],textShapes:["textOpacity"],linkFieldShape:["opacity"],interactiveBgShape:["backgroundColor","backgroundOpacity"],interactiveBorderShape:["borderColor","borderOpacity","borderWidth"]},Zs="interactionStateInfo",pr;(function(t){t.CLICK="click",t.UN_DRAGGED="unDragged",t.DRAGGED="dragged"})(pr||(pr={}));var gr;(function(t){t.SHIFT="Shift",t.COPY="c",t.ESC="Escape",t.META="Meta",t.CONTROL="Control",t.ARROW_UP="ArrowUp",t.ARROW_DOWN="ArrowDown",t.ARROW_LEFT="ArrowLeft",t.ARROW_RIGHT="ArrowRight"})(gr||(gr={}));var Up;(function(t){t.ASC="ASC",t.DESC="DESC"})(Up||(Up={}));var Ge;(function(t){t.HOVER="hover",t.CLICK="click",t.BRUSH_SELECTION="brushSelection",t.ROW_BRUSH_SELECTION="rowBrushSelection",t.COL_BRUSH_SELECTION="colBrushSelection",t.MULTI_SELECTION="multiSelection",t.RESIZE="resize"})(Ge||(Ge={}));var Yp={x:{value:0,scroll:!1},y:{value:0,scroll:!1}},Qs;(function(t){t.CONTENT="content",t.CANVAS="canvas"})(Qs||(Qs={}));var Ur;(function(t){t.SCROLL_UP="scrollUp",t.SCROLL_DOWN="scrollDown"})(Ur||(Ur={}));var Js;(function(t){t[t.SCROLL_UP=-1]="SCROLL_UP",t[t.SCROLL_DOWN=1]="SCROLL_DOWN"})(Js||(Js={}));var Vp="RESIZE_START_GUIDE_LINE",Tw="RESIZE_END_GUIDE_LINE",Lw="RESIZE_MASK",pn;(function(t){t.Horizontal="col",t.Vertical="row"})(pn||(pn={}));var Lr;(function(t){t.Field="field",t.Cell="cell",t.Tree="tree",t.Series="series"})(Lr||(Lr={}));var eu;(function(t){t.ALL="all",t.CURRENT="current"})(eu||(eu={}));var Xp=1,pi;(function(t){t.Adaptive="adaptive",t.ColAdaptive="colAdaptive",t.Compact="compact"})(pi||(pi={}));var Dd=120,Rw={layoutWidthType:pi.Adaptive,showTreeLeafNodeAlignDot:!1,collapsedRows:{},collapsedCols:{},cellCfg:{width:96,height:30},rowCfg:{width:null,widthByField:{},heightByField:{}},colCfg:{height:30,widthByFieldValue:{},heightByField:{}},device:"pc"},Bd={width:600,height:480,debug:!1,hierarchyType:"grid",conditions:{},totals:{},tooltip:{showTooltip:!1,autoAdjustBoundary:"body",operation:{hiddenColumns:!1,trend:!1,sort:!1,menus:[]}},interaction:{linkFields:[],hiddenColumnFields:[],selectedCellsSpotlight:!1,hoverHighlight:!0,hoverFocus:{duration:Od},scrollSpeedRatio:{horizontal:1,vertical:1},autoResetSheetStyle:!0,brushSelection:{data:!0,row:!1,col:!1},multiSelection:!0,rangeSelection:!0,scrollbarPosition:Qs.CONTENT,resize:{rowCellVertical:!0,cornerCellHorizontal:!0,colCellHorizontal:!0,colCellVertical:!0,rowResizeType:eu.ALL},eventListenerOptions:!1,selectedCellHighlight:!1,overscrollBehavior:"auto"},showSeriesNumber:!1,customSVGIcons:[],showDefaultHeaderActionIcon:!1,headerActionIcons:[],style:Rw,frozenRowHeader:!0,frozenRowCount:0,frozenColCount:0,frozenTrailingRowCount:0,frozenTrailingColCount:0,hdAdapter:!0,cornerText:"",cornerExtraFieldText:"",placeholder:Gi,supportCSSTransform:!1,devicePixelRatio:window.devicePixelRatio},tu=function(t,r){return tu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},tu(t,r)};function Le(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");tu(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var k=function(){return k=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},k.apply(this,arguments)};function ru(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e}function mr(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Q(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a}function re(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))}var Aw=typeof qe.g=="object"&&qe.g&&qe.g.Object===Object&&qe.g,Pd=Aw,Iw=typeof self=="object"&&self&&self.Object===Object&&self,Ow=Pd||Iw||Function("return this")(),Jt=Ow,Mw=Jt.Symbol,er=Mw,jp=Object.prototype,Dw=jp.hasOwnProperty,Bw=jp.toString,gl=er?er.toStringTag:void 0;function Nd(t){var r=Dw.call(t,gl),e=t[gl];try{t[gl]=void 0;var n=!0}catch(a){}var i=Bw.call(t);return n&&(r?t[gl]=e:delete t[gl]),i}var Pw=Object.prototype,Nw=Pw.toString;function Fw(t){return Nw.call(t)}var Hw="[object Null]",zw="[object Undefined]",qp=er?er.toStringTag:void 0;function Rr(t){return t==null?t===void 0?zw:Hw:qp&&qp in Object(t)?Nd(t):Fw(t)}function Pt(t){return t!=null&&typeof t=="object"}var Gw="[object Symbol]";function Yr(t){return typeof t=="symbol"||Pt(t)&&Rr(t)==Gw}var $w=0/0;function Kp(t){return typeof t=="number"?t:Yr(t)?$w:+t}function Et(t,r){for(var e=-1,n=t==null?0:t.length,i=Array(n);++e<n;)i[e]=r(t[e],e,t);return i}var Ww=Array.isArray,_e=Ww,kw=1/0,Zp=er?er.prototype:void 0,Qp=Zp?Zp.toString:void 0;function lr(t){if(typeof t=="string")return t;if(_e(t))return Et(t,lr)+"";if(Yr(t))return Qp?Qp.call(t):"";var r=t+"";return r=="0"&&1/t==-kw?"-0":r}function nu(t,r){return function(e,n){var i;if(e===void 0&&n===void 0)return r;if(e!==void 0&&(i=e),n!==void 0){if(i===void 0)return n;typeof e=="string"||typeof n=="string"?(e=lr(e),n=lr(n)):(e=Kp(e),n=Kp(n)),i=t(e,n)}return i}}var Uw=nu(function(t,r){return t+r},0),Yw=Uw,Vw=/\s/;function Fd(t){for(var r=t.length;r--&&Vw.test(t.charAt(r)););return r}var qt=/^\s+/;function Xw(t){return t&&t.slice(0,Fd(t)+1).replace(qt,"")}function it(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var Hd=0/0,zd=/^[-+]0x[0-9a-f]+$/i,jw=/^0b[01]+$/i,qw=/^0o[0-7]+$/i,Kw=parseInt;function Zr(t){if(typeof t=="number")return t;if(Yr(t))return Hd;if(it(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=it(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=Xw(t);var e=jw.test(t);return e||qw.test(t)?Kw(t.slice(2),e?2:8):zd.test(t)?Hd:+t}var Zw=1/0,Qw=17976931348623157e292;function gi(t){if(!t)return t===0?t:0;if(t=Zr(t),t===Zw||t===-Zw){var r=t<0?-1:1;return r*Qw}return t===t?t:0}function Ve(t){var r=gi(t),e=r%1;return r===r?e?r-e:r:0}var Jw="Expected a function";function J_(t,r){if(typeof r!="function")throw new TypeError(Jw);return t=Ve(t),function(){if(--t<1)return r.apply(this,arguments)}}function yr(t){return t}var e2="[object AsyncFunction]",t2="[object Function]",Jp="[object GeneratorFunction]",rt="[object Proxy]";function Ce(t){if(!it(t))return!1;var r=Rr(t);return r==t2||r==Jp||r==e2||r==rt}var r2=Jt["__core-js_shared__"],iu=r2,Gd=function(){var t=/[^.]+$/.exec(iu&&iu.keys&&iu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function eg(t){return!!Gd&&Gd in t}var n2=Function.prototype,i2=n2.toString;function Ta(t){if(t!=null){try{return i2.call(t)}catch(r){}try{return t+""}catch(r){}}return""}var $d=/[\\^$.*+?()[\]{}|]/g,au=/^\[object .+?Constructor\]$/,eT=Function.prototype,a2=Object.prototype,o2=eT.toString,l2=a2.hasOwnProperty,s2=RegExp("^"+o2.call(l2).replace($d,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function tg(t){if(!it(t)||eg(t))return!1;var r=Ce(t)?s2:au;return r.test(Ta(t))}function u2(t,r){return t==null?void 0:t[r]}function La(t,r){var e=u2(t,r);return tg(e)?e:void 0}var c2=La(Jt,"WeakMap"),ml=c2,d2=ml&&new ml,yo=d2,f2=yo?function(t,r){return yo.set(t,r),t}:yr,h2=f2,rg=Object.create,v2=function(){function t(){}return function(r){if(!it(r))return{};if(rg)return rg(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}(),Co=v2;function yl(t){return function(){var r=arguments;switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);case 5:return new t(r[0],r[1],r[2],r[3],r[4]);case 6:return new t(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new t(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var e=Co(t.prototype),n=t.apply(e,r);return it(n)?n:e}}var Cr=1;function wo(t,r,e){var n=r&Cr,i=yl(t);function a(){var o=this&&this!==Jt&&this instanceof a?i:t;return o.apply(n?e:this,arguments)}return a}function Ar(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}var p2=Math.max;function ng(t,r,e,n){for(var i=-1,a=t.length,o=e.length,s=-1,c=r.length,d=p2(a-o,0),h=Array(c+d),v=!n;++s<c;)h[s]=r[s];for(;++i<o;)(v||i<a)&&(h[e[i]]=t[i]);for(;d--;)h[s++]=t[i++];return h}var Wd=Math.max;function ig(t,r,e,n){for(var i=-1,a=t.length,o=-1,s=e.length,c=-1,d=r.length,h=Wd(a-s,0),v=Array(h+d),g=!n;++i<h;)v[i]=t[i];for(var C=i;++c<d;)v[C+c]=r[c];for(;++o<s;)(g||i<a)&&(v[C+e[o]]=t[i++]);return v}function g2(t,r){for(var e=t.length,n=0;e--;)t[e]===r&&++n;return n}function ou(){}var kd=4294967295;function Qe(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=kd,this.__views__=[]}Qe.prototype=Co(ou.prototype),Qe.prototype.constructor=Qe;function Oe(){}var m2=yo?function(t){return yo.get(t)}:Oe,lu=m2,ag={},Kt=ag,og=Object.prototype,Ud=og.hasOwnProperty;function Cl(t){for(var r=t.name+"",e=Kt[r],n=Ud.call(Kt,r)?e.length:0;n--;){var i=e[n],a=i.func;if(a==null||a==t)return i.name}return r}function gn(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=void 0}gn.prototype=Co(ou.prototype),gn.prototype.constructor=gn;function Ir(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r}function Yd(t){if(t instanceof Qe)return t.clone();var r=new gn(t.__wrapped__,t.__chain__);return r.__actions__=Ir(t.__actions__),r.__index__=t.__index__,r.__values__=t.__values__,r}var lg=Object.prototype,sg=lg.hasOwnProperty;function P(t){if(Pt(t)&&!_e(t)&&!(t instanceof Qe)){if(t instanceof gn)return t;if(sg.call(t,"__wrapped__"))return Yd(t)}return new gn(t)}P.prototype=ou.prototype,P.prototype.constructor=P;function su(t){var r=Cl(t),e=P[r];if(typeof e!="function"||!(r in Qe.prototype))return!1;if(t===e)return!0;var n=lu(e);return!!n&&t===n[0]}var y2=800,ug=16,C2=Date.now;function cg(t){var r=0,e=0;return function(){var n=C2(),i=ug-(n-e);if(e=n,i>0){if(++r>=y2)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}var w2=cg(h2),Vd=w2,dg=/\{\n\/\* \[wrapped with (.+)\] \*/,fg=/,? & /;function x2(t){var r=t.match(dg);return r?r[1].split(fg):[]}var uu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function hg(t,r){var e=r.length;if(!e)return t;var n=e-1;return r[n]=(e>1?"& ":"")+r[n],r=r.join(e>2?", ":" "),t.replace(uu,`{
/* [wrapped with `+r+`] */
`)}function at(t){return function(){return t}}var tr=function(){try{var t=La(Object,"defineProperty");return t({},"",{}),t}catch(r){}}(),xo=tr,Xd=xo?function(t,r){return xo(t,"toString",{configurable:!0,enumerable:!1,value:at(r),writable:!0})}:yr,cu=Xd,du=cg(cu),bo=du;function Or(t,r){for(var e=-1,n=t==null?0:t.length;++e<n&&r(t[e],e,t)!==!1;);return t}function Ra(t,r,e,n){for(var i=t.length,a=e+(n?1:-1);n?a--:++a<i;)if(r(t[a],a,t))return a;return-1}function fu(t){return t!==t}function hu(t,r,e){for(var n=e-1,i=t.length;++n<i;)if(t[n]===r)return n;return-1}function mi(t,r,e){return r===r?hu(t,r,e):Ra(t,fu,e)}function Aa(t,r){var e=t==null?0:t.length;return!!e&&mi(t,r,0)>-1}var b2=1,vu=2,pu=8,S2=16,E2=32,_2=64,T2=128,Qr=256,vg=512,jd=[["ary",T2],["bind",b2],["bindKey",vu],["curry",pu],["curryRight",S2],["flip",vg],["partial",E2],["partialRight",_2],["rearg",Qr]];function L2(t,r){return Or(jd,function(e){var n="_."+e[0];r&e[1]&&!Aa(t,n)&&t.push(n)}),t.sort()}function pg(t,r,e){var n=r+"";return bo(t,hg(n,L2(x2(n),e)))}var R2=1,gg=2,qd=4,mg=8,yg=32,Cg=64;function Kd(t,r,e,n,i,a,o,s,c,d){var h=r&mg,v=h?o:void 0,g=h?void 0:o,C=h?a:void 0,w=h?void 0:a;r|=h?yg:Cg,r&=~(h?Cg:yg),r&qd||(r&=~(R2|gg));var S=[t,r,i,C,v,w,g,s,c,d],_=e.apply(void 0,S);return su(t)&&Vd(_,S),_.placeholder=n,pg(_,t,r)}function So(t){var r=t;return r.placeholder}var A2=9007199254740991,wg=/^(?:0|[1-9]\d*)$/;function Zn(t,r){var e=typeof t;return r=r==null?A2:r,!!r&&(e=="number"||e!="symbol"&&wg.test(t))&&t>-1&&t%1==0&&t<r}var xg=Math.min;function bg(t,r){for(var e=t.length,n=xg(r.length,e),i=Ir(t);n--;){var a=r[n];t[n]=Zn(a,e)?i[a]:void 0}return t}var gt="__lodash_placeholder__";function Pn(t,r){for(var e=-1,n=t.length,i=0,a=[];++e<n;){var o=t[e];(o===r||o===gt)&&(t[e]=gt,a[i++]=e)}return a}var gu=1,wl=2,xl=8,bl=16,Sl=128,El=512;function Wi(t,r,e,n,i,a,o,s,c,d){var h=r&Sl,v=r&gu,g=r&wl,C=r&(xl|bl),w=r&El,S=g?void 0:yl(t);function _(){for(var T=arguments.length,M=Array(T),D=T;D--;)M[D]=arguments[D];if(C)var B=So(_),G=g2(M,B);if(n&&(M=ng(M,n,i,C)),a&&(M=ig(M,a,o,C)),T-=G,C&&T<d){var V=Pn(M,B);return Kd(t,r,Wi,_.placeholder,e,M,V,s,c,d-T)}var q=v?e:this,J=g?q[t]:t;return T=M.length,s?M=bg(M,s):w&&T>1&&M.reverse(),h&&c<T&&(M.length=c),this&&this!==Jt&&this instanceof _&&(J=S||yl(J)),J.apply(q,M)}return _}function _l(t,r,e){var n=yl(t);function i(){for(var a=arguments.length,o=Array(a),s=a,c=So(i);s--;)o[s]=arguments[s];var d=a<3&&o[0]!==c&&o[a-1]!==c?[]:Pn(o,c);if(a-=d.length,a<e)return Kd(t,r,Wi,i.placeholder,void 0,o,d,void 0,void 0,e-a);var h=this&&this!==Jt&&this instanceof i?n:t;return Ar(h,this,o)}return i}var Zd=1;function Tl(t,r,e,n){var i=r&Zd,a=yl(t);function o(){for(var s=-1,c=arguments.length,d=-1,h=n.length,v=Array(h+c),g=this&&this!==Jt&&this instanceof o?a:t;++d<h;)v[d]=n[d];for(;c--;)v[d++]=arguments[++s];return Ar(g,i?e:this,v)}return o}var Eo="__lodash_placeholder__",mu=1,Sg=2,Eg=4,Qd=8,_o=128,rr=256,Nn=Math.min;function I2(t,r){var e=t[1],n=r[1],i=e|n,a=i<(mu|Sg|_o),o=n==_o&&e==Qd||n==_o&&e==rr&&t[7].length<=r[8]||n==(_o|rr)&&r[7].length<=r[8]&&e==Qd;if(!(a||o))return t;n&mu&&(t[2]=r[2],i|=e&mu?0:Eg);var s=r[3];if(s){var c=t[3];t[3]=c?ng(c,s,r[4]):s,t[4]=c?Pn(t[3],Eo):r[4]}return s=r[5],s&&(c=t[5],t[5]=c?ig(c,s,r[6]):s,t[6]=c?Pn(t[5],Eo):r[6]),s=r[7],s&&(t[7]=s),n&_o&&(t[8]=t[8]==null?r[8]:Nn(t[8],r[8])),t[9]==null&&(t[9]=r[9]),t[0]=r[0],t[1]=i,t}var O2="Expected a function",_g=1,M2=2,Jd=8,ef=16,tf=32,Tg=64,Lg=Math.max;function yi(t,r,e,n,i,a,o,s){var c=r&M2;if(!c&&typeof t!="function")throw new TypeError(O2);var d=n?n.length:0;if(d||(r&=~(tf|Tg),n=i=void 0),o=o===void 0?o:Lg(Ve(o),0),s=s===void 0?s:Ve(s),d-=i?i.length:0,r&Tg){var h=n,v=i;n=i=void 0}var g=c?void 0:lu(t),C=[t,r,e,n,i,h,v,a,o,s];if(g&&I2(C,g),t=C[0],r=C[1],e=C[2],n=C[3],i=C[4],s=C[9]=C[9]===void 0?c?0:t.length:Lg(C[9]-d,0),!s&&r&(Jd|ef)&&(r&=~(Jd|ef)),!r||r==_g)var w=wo(t,r,e);else r==Jd||r==ef?w=_l(t,r,s):(r==tf||r==(_g|tf))&&!i.length?w=Tl(t,r,e,n):w=Wi.apply(void 0,C);var S=g?h2:Vd;return pg(S(w,C),t,r)}var D2=128;function Rg(t,r,e){return r=e?void 0:r,r=t&&r==null?t.length:r,yi(t,D2,void 0,void 0,void 0,void 0,r)}function Ci(t,r,e){r=="__proto__"&&xo?xo(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e}function Fn(t,r){return t===r||t!==t&&r!==r}var B2=Object.prototype,Ag=B2.hasOwnProperty;function Ll(t,r,e){var n=t[r];(!(Ag.call(t,r)&&Fn(n,e))||e===void 0&&!(r in t))&&Ci(t,r,e)}function Qn(t,r,e,n){var i=!e;e||(e={});for(var a=-1,o=r.length;++a<o;){var s=r[a],c=n?n(e[s],t[s],s,e,t):void 0;c===void 0&&(c=t[s]),i?Ci(e,s,c):Ll(e,s,c)}return e}var Ig=Math.max;function Og(t,r,e){return r=Ig(r===void 0?t.length-1:r,0),function(){for(var n=arguments,i=-1,a=Ig(n.length-r,0),o=Array(a);++i<a;)o[i]=n[r+i];i=-1;for(var s=Array(r+1);++i<r;)s[i]=n[i];return s[r]=e(o),Ar(t,this,s)}}function je(t,r){return bo(Og(t,r,yr),t+"")}var rf=9007199254740991;function yu(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=rf}function wr(t){return t!=null&&yu(t.length)&&!Ce(t)}function xr(t,r,e){if(!it(e))return!1;var n=typeof r;return(n=="number"?wr(e)&&Zn(r,e.length):n=="string"&&r in e)?Fn(e[r],t):!1}function Ia(t){return je(function(r,e){var n=-1,i=e.length,a=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,o&&xr(e[0],e[1],o)&&(a=i<3?void 0:a,i=1),r=Object(r);++n<i;){var s=e[n];s&&t(r,s,n,a)}return r})}var P2=Object.prototype;function Rl(t){var r=t&&t.constructor,e=typeof r=="function"&&r.prototype||P2;return t===e}function nf(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}var N2="[object Arguments]";function Mg(t){return Pt(t)&&Rr(t)==N2}var Dg=Object.prototype,F2=Dg.hasOwnProperty,H2=Dg.propertyIsEnumerable,z2=Mg(function(){return arguments}())?Mg:function(t){return Pt(t)&&F2.call(t,"callee")&&!H2.call(t,"callee")},Oa=z2;function af(){return!1}var Bg=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Pg=Bg&&!0&&Ft&&!Ft.nodeType&&Ft,G2=Pg&&Pg.exports===Bg,Ng=G2?Jt.Buffer:void 0,$2=Ng?Ng.isBuffer:void 0,W2=$2||af,Jn=W2,k2="[object Arguments]",U2="[object Array]",Fg="[object Boolean]",Y2="[object Date]",Hg="[object Error]",V2="[object Function]",st="[object Map]",Re="[object Number]",X2="[object Object]",of="[object RegExp]",j2="[object Set]",Hn="[object String]",lf="[object WeakMap]",zg="[object ArrayBuffer]",q2="[object DataView]",sf="[object Float32Array]",uf="[object Float64Array]",mn="[object Int8Array]",K2="[object Int16Array]",Cu="[object Int32Array]",wu="[object Uint8Array]",Gg="[object Uint8ClampedArray]",$g="[object Uint16Array]",Wg="[object Uint32Array]",_t={};_t[sf]=_t[uf]=_t[mn]=_t[K2]=_t[Cu]=_t[wu]=_t[Gg]=_t[$g]=_t[Wg]=!0,_t[k2]=_t[U2]=_t[zg]=_t[Fg]=_t[q2]=_t[Y2]=_t[Hg]=_t[V2]=_t[st]=_t[Re]=_t[X2]=_t[of]=_t[j2]=_t[Hn]=_t[lf]=!1;function Z2(t){return Pt(t)&&yu(t.length)&&!!_t[Rr(t)]}function ft(t){return function(r){return t(r)}}var kg=typeof exports=="object"&&exports&&!exports.nodeType&&exports,wi=kg&&!0&&Ft&&!Ft.nodeType&&Ft,Ug=wi&&wi.exports===kg,ei=Ug&&Pd.process,Q2=function(){try{var t=wi&&wi.require&&wi.require("util").types;return t||ei&&ei.binding&&ei.binding("util")}catch(r){}}(),It=Q2,Yg=It&&It.isTypedArray,xu=Yg?ft(Yg):Z2,he=xu,J2=Object.prototype,ex=J2.hasOwnProperty;function Al(t,r){var e=_e(t),n=!e&&Oa(t),i=!e&&!n&&Jn(t),a=!e&&!n&&!i&&he(t),o=e||n||i||a,s=o?nf(t.length,String):[],c=s.length;for(var d in t)(r||ex.call(t,d))&&!(o&&(d=="length"||i&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Zn(d,c)))&&s.push(d);return s}function Vg(t,r){return function(e){return t(r(e))}}var Xg=Vg(Object.keys,Object),jg=Xg,tx=Object.prototype,qg=tx.hasOwnProperty;function cf(t){if(!Rl(t))return jg(t);var r=[];for(var e in Object(t))qg.call(t,e)&&e!="constructor"&&r.push(e);return r}function bt(t){return wr(t)?Al(t):cf(t)}var nr=Object.prototype,sr=nr.hasOwnProperty,Jr=Ia(function(t,r){if(Rl(r)||wr(r)){Qn(r,bt(r),t);return}for(var e in r)sr.call(r,e)&&Ll(t,e,r[e])}),xi=Jr;function To(t){var r=[];if(t!=null)for(var e in Object(t))r.push(e);return r}var Ma=Object.prototype,Il=Ma.hasOwnProperty;function Kg(t){if(!it(t))return To(t);var r=Rl(t),e=[];for(var n in t)n=="constructor"&&(r||!Il.call(t,n))||e.push(n);return e}function Mr(t){return wr(t)?Al(t,!0):Kg(t)}var rx=Ia(function(t,r){Qn(r,Mr(r),t)}),Lo=rx,Zg=Ia(function(t,r,e,n){Qn(r,Mr(r),t,n)}),bu=Zg,nx=Ia(function(t,r,e,n){Qn(r,bt(r),t,n)}),ix=nx,ax=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ro=/^\w*$/;function Ol(t,r){if(_e(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||Yr(t)?!0:Ro.test(t)||!ax.test(t)||r!=null&&t in Object(r)}var Su=La(Object,"create"),Da=Su;function ki(){this.__data__=Da?Da(null):{},this.size=0}function Qg(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var Jg="__lodash_hash_undefined__",e0=Object.prototype,Eu=e0.hasOwnProperty;function ox(t){var r=this.__data__;if(Da){var e=r[t];return e===Jg?void 0:e}return Eu.call(r,t)?r[t]:void 0}var Ao=Object.prototype,df=Ao.hasOwnProperty;function _u(t){var r=this.__data__;return Da?r[t]!==void 0:df.call(r,t)}var Tu="__lodash_hash_undefined__";function lx(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Da&&r===void 0?Tu:r,this}function yn(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}yn.prototype.clear=ki,yn.prototype.delete=Qg,yn.prototype.get=ox,yn.prototype.has=_u,yn.prototype.set=lx;function t0(){this.__data__=[],this.size=0}function Ui(t,r){for(var e=t.length;e--;)if(Fn(t[e][0],r))return e;return-1}var sx=Array.prototype,Cn=sx.splice;function r0(t){var r=this.__data__,e=Ui(r,t);if(e<0)return!1;var n=r.length-1;return e==n?r.pop():Cn.call(r,e,1),--this.size,!0}function ux(t){var r=this.__data__,e=Ui(r,t);return e<0?void 0:r[e][1]}function ff(t){return Ui(this.__data__,t)>-1}function n0(t,r){var e=this.__data__,n=Ui(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this}function bi(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}bi.prototype.clear=t0,bi.prototype.delete=r0,bi.prototype.get=ux,bi.prototype.has=ff,bi.prototype.set=n0;var cx=La(Jt,"Map"),Ml=cx;function dx(){this.size=0,this.__data__={hash:new yn,map:new(Ml||bi),string:new yn}}function hf(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function Lu(t,r){var e=t.__data__;return hf(r)?e[typeof r=="string"?"string":"hash"]:e.map}function i0(t){var r=Lu(this,t).delete(t);return this.size-=r?1:0,r}function fx(t){return Lu(this,t).get(t)}function hx(t){return Lu(this,t).has(t)}function vx(t,r){var e=Lu(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this}function en(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}en.prototype.clear=dx,en.prototype.delete=i0,en.prototype.get=fx,en.prototype.has=hx,en.prototype.set=vx;var px="Expected a function";function Yi(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(px);var e=function(){var n=arguments,i=r?r.apply(this,n):n[0],a=e.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return e.cache=a.set(i,o)||a,o};return e.cache=new(Yi.Cache||en),e}Yi.Cache=en;var Ru=500;function Vi(t){var r=Yi(t,function(n){return e.size===Ru&&e.clear(),n}),e=r.cache;return r}var gx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mx=/\\(\\)?/g,yx=Vi(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(gx,function(e,n,i,a){r.push(i?a.replace(mx,"$1"):n||e)}),r}),a0=yx;function ct(t){return t==null?"":lr(t)}function Si(t,r){return _e(t)?t:Ol(t,r)?[t]:a0(ct(t))}var Cx=1/0;function wn(t){if(typeof t=="string"||Yr(t))return t;var r=t+"";return r=="0"&&1/t==-Cx?"-0":r}function Xi(t,r){r=Si(r,t);for(var e=0,n=r.length;t!=null&&e<n;)t=t[wn(r[e++])];return e&&e==n?t:void 0}function Me(t,r,e){var n=t==null?void 0:Xi(t,r);return n===void 0?e:n}function vf(t,r){for(var e=-1,n=r.length,i=Array(n),a=t==null;++e<n;)i[e]=a?void 0:Me(t,r[e]);return i}function ji(t,r){for(var e=-1,n=r.length,i=t.length;++e<n;)t[i+e]=r[e];return t}var Au=er?er.isConcatSpreadable:void 0;function wx(t){return _e(t)||Oa(t)||!!(Au&&t&&t[Au])}function Ut(t,r,e,n,i){var a=-1,o=t.length;for(e||(e=wx),i||(i=[]);++a<o;){var s=t[a];r>0&&e(s)?r>1?Ut(s,r-1,e,n,i):ji(i,s):n||(i[i.length]=s)}return i}function Iu(t){var r=t==null?0:t.length;return r?Ut(t,1):[]}function ti(t){return bo(Og(t,void 0,Iu),t+"")}var xx=ti(vf),bx=xx,Sx=Vg(Object.getPrototypeOf,Object),Io=Sx,o0="[object Object]",Ex=Function.prototype,Dr=Object.prototype,l0=Ex.toString,s0=Dr.hasOwnProperty,_x=l0.call(Object);function Dl(t){if(!Pt(t)||Rr(t)!=o0)return!1;var r=Io(t);if(r===null)return!0;var e=s0.call(r,"constructor")&&r.constructor;return typeof e=="function"&&e instanceof e&&l0.call(e)==_x}var Bl="[object DOMException]",Tx="[object Error]";function Ou(t){if(!Pt(t))return!1;var r=Rr(t);return r==Tx||r==Bl||typeof t.message=="string"&&typeof t.name=="string"&&!Dl(t)}var u0=je(function(t,r){try{return Ar(t,void 0,r)}catch(e){return Ou(e)?e:new Error(e)}}),c0=u0,Lx="Expected a function";function d0(t,r){var e;if(typeof r!="function")throw new TypeError(Lx);return t=Ve(t),function(){return--t>0&&(e=r.apply(this,arguments)),t<=1&&(r=void 0),e}}var tn=1,Rx=32,pf=je(function(t,r,e){var n=tn;if(e.length){var i=Pn(e,So(pf));n|=Rx}return yi(t,n,r,e,i)});pf.placeholder={};var qi=pf,f0=ti(function(t,r){return Or(r,function(e){e=wn(e),Ci(t,e,qi(t[e],t))}),t}),Ax=f0,Ix=1,Ox=2,h0=32,gf=je(function(t,r,e){var n=Ix|Ox;if(e.length){var i=Pn(e,So(gf));n|=h0}return yi(r,n,t,e,i)});gf.placeholder={};var v0=gf;function xn(t,r,e){var n=-1,i=t.length;r<0&&(r=-r>i?0:i+r),e=e>i?i:e,e<0&&(e+=i),i=r>e?0:e-r>>>0,r>>>=0;for(var a=Array(i);++n<i;)a[n]=t[n+r];return a}function Ki(t,r,e){var n=t.length;return e=e===void 0?n:e,!r&&e>=n?t:xn(t,r,e)}var Mx="\\ud800-\\udfff",Dx="\\u0300-\\u036f",p0="\\ufe20-\\ufe2f",mf="\\u20d0-\\u20ff",Bx=Dx+p0+mf,Px="\\ufe0e\\ufe0f",Pl="\\u200d",Nx=RegExp("["+Pl+Mx+Bx+Px+"]");function Ba(t){return Nx.test(t)}function g0(t){return t.split("")}var yf="\\ud800-\\udfff",Fx="\\u0300-\\u036f",m0="\\ufe20-\\ufe2f",Hx="\\u20d0-\\u20ff",zx=Fx+m0+Hx,Gx="\\ufe0e\\ufe0f",$x="["+yf+"]",Cf="["+zx+"]",Nl="\\ud83c[\\udffb-\\udfff]",wf="(?:"+Cf+"|"+Nl+")",Mu="[^"+yf+"]",xf="(?:\\ud83c[\\udde6-\\uddff]){2}",y0="[\\ud800-\\udbff][\\udc00-\\udfff]",Wx="\\u200d",C0=wf+"?",w0="["+Gx+"]?",kx="(?:"+Wx+"(?:"+[Mu,xf,y0].join("|")+")"+w0+C0+")*",Ux=w0+C0+kx,Yx="(?:"+[Mu+Cf+"?",Cf,xf,y0,$x].join("|")+")",Vx=RegExp(Nl+"(?="+Nl+")|"+Yx+Ux,"g");function Xx(t){return t.match(Vx)||[]}function bn(t){return Ba(t)?Xx(t):g0(t)}function x0(t){return function(r){r=ct(r);var e=Ba(r)?bn(r):void 0,n=e?e[0]:r.charAt(0),i=e?Ki(e,1).join(""):r.slice(1);return n[t]()+i}}var jx=x0("toUpperCase"),bf=jx;function b0(t){return bf(ct(t).toLowerCase())}function Sf(t,r,e,n){var i=-1,a=t==null?0:t.length;for(n&&a&&(e=t[++i]);++i<a;)e=r(e,t[i],i,t);return e}function Ef(t){return function(r){return t==null?void 0:t[r]}}var _f={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},qx=Ef(_f),Tf=qx,S0=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kx="\\u0300-\\u036f",E0="\\ufe20-\\ufe2f",Zx="\\u20d0-\\u20ff",Qx=Kx+E0+Zx,Lf="["+Qx+"]",Fl=RegExp(Lf,"g");function Du(t){return t=ct(t),t&&t.replace(S0,Tf).replace(Fl,"")}var Pa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Hl(t){return t.match(Pa)||[]}var _0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Rf(t){return _0.test(t)}var Bu="\\ud800-\\udfff",T0="\\u0300-\\u036f",Jx="\\ufe20-\\ufe2f",L0="\\u20d0-\\u20ff",eb=T0+Jx+L0,R0="\\u2700-\\u27bf",A0="a-z\\xdf-\\xf6\\xf8-\\xff",tb="\\xac\\xb1\\xd7\\xf7",rb="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",I0="\\u2000-\\u206f",nb=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",O0="A-Z\\xc0-\\xd6\\xd8-\\xde",ib="\\ufe0e\\ufe0f",M0=tb+rb+I0+nb,D0="['\u2019]",B0="["+M0+"]",ab="["+eb+"]",P0="\\d+",ob="["+R0+"]",Oo="["+A0+"]",zl="[^"+Bu+M0+P0+R0+A0+O0+"]",Af="\\ud83c[\\udffb-\\udfff]",lb="(?:"+ab+"|"+Af+")",sb="[^"+Bu+"]",N0="(?:\\ud83c[\\udde6-\\uddff]){2}",F0="[\\ud800-\\udbff][\\udc00-\\udfff]",Mo="["+O0+"]",ub="\\u200d",H0="(?:"+Oo+"|"+zl+")",cb="(?:"+Mo+"|"+zl+")",z0="(?:"+D0+"(?:d|ll|m|re|s|t|ve))?",G0="(?:"+D0+"(?:D|LL|M|RE|S|T|VE))?",$0=lb+"?",Pu="["+ib+"]?",db="(?:"+ub+"(?:"+[sb,N0,F0].join("|")+")"+Pu+$0+")*",W0="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",k0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",U0=Pu+$0+db,fb="(?:"+[ob,N0,F0].join("|")+")"+U0,hb=RegExp([Mo+"?"+Oo+"+"+z0+"(?="+[B0,Mo,"$"].join("|")+")",cb+"+"+G0+"(?="+[B0,Mo+H0,"$"].join("|")+")",Mo+"?"+H0+"+"+z0,Mo+"+"+G0,k0,W0,P0,fb].join("|"),"g");function Y0(t){return t.match(hb)||[]}function V0(t,r,e){return t=ct(t),r=e?void 0:r,r===void 0?Rf(t)?Y0(t):Hl(t):t.match(r)||[]}var X0="['\u2019]",vb=RegExp(X0,"g");function Do(t){return function(r){return Sf(V0(Du(r).replace(vb,"")),t,"")}}var pb=Do(function(t,r,e){return r=r.toLowerCase(),t+(e?b0(r):r)}),gb=pb;function Zi(){if(!arguments.length)return[];var t=arguments[0];return _e(t)?t:[t]}var mb=Jt.isFinite,j0=Math.min;function Gl(t){var r=Math[t];return function(e,n){if(e=Zr(e),n=n==null?0:j0(Ve(n),292),n&&mb(e)){var i=(ct(e)+"e").split("e"),a=r(i[0]+"e"+(+i[1]+n));return i=(ct(a)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return r(e)}}var yb=Gl("ceil"),q0=yb;function If(t){var r=P(t);return r.__chain__=!0,r}var Cb=Math.ceil,K0=Math.max;function Z0(t,r,e){(e?xr(t,r,e):r===void 0)?r=1:r=K0(Ve(r),0);var n=t==null?0:t.length;if(!n||r<1)return[];for(var i=0,a=0,o=Array(Cb(n/r));i<n;)o[a++]=xn(t,i,i+=r);return o}function Na(t,r,e){return t===t&&(e!==void 0&&(t=t<=e?t:e),r!==void 0&&(t=t>=r?t:r)),t}function Nu(t,r,e){return e===void 0&&(e=r,r=void 0),e!==void 0&&(e=Zr(e),e=e===e?e:0),r!==void 0&&(r=Zr(r),r=r===r?r:0),Na(Zr(t),r,e)}function Q0(){this.__data__=new bi,this.size=0}function wb(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e}function Of(t){return this.__data__.get(t)}function J0(t){return this.__data__.has(t)}var Mf=200;function xb(t,r){var e=this.__data__;if(e instanceof bi){var n=e.__data__;if(!Ml||n.length<Mf-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new en(n)}return e.set(t,r),this.size=e.size,this}function rn(t){var r=this.__data__=new bi(t);this.size=r.size}rn.prototype.clear=Q0,rn.prototype.delete=wb,rn.prototype.get=Of,rn.prototype.has=J0,rn.prototype.set=xb;function em(t,r){return t&&Qn(r,bt(r),t)}function bb(t,r){return t&&Qn(r,Mr(r),t)}var tm=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Df=tm&&!0&&Ft&&!Ft.nodeType&&Ft,Sb=Df&&Df.exports===tm,rm=Sb?Jt.Buffer:void 0,nm=rm?rm.allocUnsafe:void 0;function Fa(t,r){if(r)return t.slice();var e=t.length,n=nm?nm(e):new t.constructor(e);return t.copy(n),n}function nn(t,r){for(var e=-1,n=t==null?0:t.length,i=0,a=[];++e<n;){var o=t[e];r(o,e,t)&&(a[i++]=o)}return a}function $l(){return[]}var Eb=Object.prototype,im=Eb.propertyIsEnumerable,am=Object.getOwnPropertySymbols,Wl=am?function(t){return t==null?[]:(t=Object(t),nn(am(t),function(r){return im.call(t,r)}))}:$l,Bf=Wl;function _b(t,r){return Qn(t,Bf(t),r)}var an=Object.getOwnPropertySymbols,Pf=an?function(t){for(var r=[];t;)ji(r,Bf(t)),t=Io(t);return r}:$l,Nf=Pf;function Tb(t,r){return Qn(t,Nf(t),r)}function Ff(t,r,e){var n=r(t);return _e(t)?n:ji(n,e(t))}function Bo(t){return Ff(t,bt,Bf)}function Hf(t){return Ff(t,Mr,Nf)}var Lb=La(Jt,"DataView"),zf=Lb,Rb=La(Jt,"Promise"),kl=Rb,Fu=La(Jt,"Set"),Po=Fu,om="[object Map]",Ab="[object Object]",lm="[object Promise]",sm="[object Set]",Hu="[object WeakMap]",um="[object DataView]",Ib=Ta(zf),zu=Ta(Ml),cm=Ta(kl),Ob=Ta(Po),Mb=Ta(ml),Ha=Rr;(zf&&Ha(new zf(new ArrayBuffer(1)))!=um||Ml&&Ha(new Ml)!=om||kl&&Ha(kl.resolve())!=lm||Po&&Ha(new Po)!=sm||ml&&Ha(new ml)!=Hu)&&(Ha=function(t){var r=Rr(t),e=r==Ab?t.constructor:void 0,n=e?Ta(e):"";if(n)switch(n){case Ib:return um;case zu:return om;case cm:return lm;case Ob:return sm;case Mb:return Hu}return r});var Sn=Ha,dm=Object.prototype,Db=dm.hasOwnProperty;function Bb(t){var r=t.length,e=new t.constructor(r);return r&&typeof t[0]=="string"&&Db.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var Pb=Jt.Uint8Array,Gu=Pb;function Gf(t){var r=new t.constructor(t.byteLength);return new Gu(r).set(new Gu(t)),r}function Nb(t,r){var e=r?Gf(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var Fb=/\w*$/;function Hb(t){var r=new t.constructor(t.source,Fb.exec(t));return r.lastIndex=t.lastIndex,r}var Ul=er?er.prototype:void 0,fm=Ul?Ul.valueOf:void 0;function hm(t){return fm?Object(fm.call(t)):{}}function Yl(t,r){var e=r?Gf(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var vm="[object Boolean]",pm="[object Date]",zb="[object Map]",gm="[object Number]",Gb="[object RegExp]",$b="[object Set]",No="[object String]",Wb="[object Symbol]",kb="[object ArrayBuffer]",Ub="[object DataView]",Yb="[object Float32Array]",$f="[object Float64Array]",Vb="[object Int8Array]",Xb="[object Int16Array]",jb="[object Int32Array]",qb="[object Uint8Array]",Kb="[object Uint8ClampedArray]",Zb="[object Uint16Array]",mm="[object Uint32Array]";function Qb(t,r,e){var n=t.constructor;switch(r){case kb:return Gf(t);case vm:case pm:return new n(+t);case Ub:return Nb(t,e);case Yb:case $f:case Vb:case Xb:case jb:case qb:case Kb:case Zb:case mm:return Yl(t,e);case zb:return new n;case gm:case No:return new n(t);case Gb:return Hb(t);case $b:return new n;case Wb:return hm(t)}}function ym(t){return typeof t.constructor=="function"&&!Rl(t)?Co(Io(t)):{}}var Jb="[object Map]";function eS(t){return Pt(t)&&Sn(t)==Jb}var Wf=It&&It.isMap,tS=Wf?ft(Wf):eS,Cm=tS,rS="[object Set]";function nS(t){return Pt(t)&&Sn(t)==rS}var wm=It&&It.isSet,iS=wm?ft(wm):nS,Vl=iS,xm=1,aS=2,oS=4,bm="[object Arguments]",lS="[object Array]",Xl="[object Boolean]",sS="[object Date]",uS="[object Error]",Sm="[object Function]",cS="[object GeneratorFunction]",Em="[object Map]",dS="[object Number]",_m="[object Object]",Tm="[object RegExp]",fS="[object Set]",hS="[object String]",vS="[object Symbol]",kf="[object WeakMap]",pS="[object ArrayBuffer]",gS="[object DataView]",mS="[object Float32Array]",yS="[object Float64Array]",CS="[object Int8Array]",wS="[object Int16Array]",xS="[object Int32Array]",Lm="[object Uint8Array]",$u="[object Uint8ClampedArray]",Wu="[object Uint16Array]",bS="[object Uint32Array]",mt={};mt[bm]=mt[lS]=mt[pS]=mt[gS]=mt[Xl]=mt[sS]=mt[mS]=mt[yS]=mt[CS]=mt[wS]=mt[xS]=mt[Em]=mt[dS]=mt[_m]=mt[Tm]=mt[fS]=mt[hS]=mt[vS]=mt[Lm]=mt[$u]=mt[Wu]=mt[bS]=!0,mt[uS]=mt[Sm]=mt[kf]=!1;function on(t,r,e,n,i,a){var o,s=r&xm,c=r&aS,d=r&oS;if(e&&(o=i?e(t,n,i,a):e(t)),o!==void 0)return o;if(!it(t))return t;var h=_e(t);if(h){if(o=Bb(t),!s)return Ir(t,o)}else{var v=Sn(t),g=v==Sm||v==cS;if(Jn(t))return Fa(t,s);if(v==_m||v==bm||g&&!i){if(o=c||g?{}:ym(t),!s)return c?Tb(t,bb(o,t)):_b(t,em(o,t))}else{if(!mt[v])return i?t:{};o=Qb(t,v,s)}}a||(a=new rn);var C=a.get(t);if(C)return C;a.set(t,o),Vl(t)?t.forEach(function(_){o.add(on(_,r,e,_,t,a))}):Cm(t)&&t.forEach(function(_,T){o.set(T,on(_,r,e,T,t,a))});var w=d?c?Hf:Bo:c?Mr:bt,S=h?void 0:w(t);return Or(S||t,function(_,T){S&&(T=_,_=t[T]),Ll(o,T,on(_,r,e,T,t,a))}),o}var SS=4;function Fo(t){return on(t,SS)}var ES=1,_S=4;function jl(t){return on(t,ES|_S)}var TS=1,Rm=4;function LS(t,r){return r=typeof r=="function"?r:void 0,on(t,TS|Rm,r)}var RS=4;function AS(t,r){return r=typeof r=="function"?r:void 0,on(t,RS,r)}function IS(){return new gn(this.value(),this.__chain__)}function zn(t){for(var r=-1,e=t==null?0:t.length,n=0,i=[];++r<e;){var a=t[r];a&&(i[n++]=a)}return i}function Ho(){var t=arguments.length;if(!t)return[];for(var r=Array(t-1),e=arguments[0],n=t;n--;)r[n-1]=arguments[n];return ji(_e(e)?Ir(e):[e],Ut(r,1))}var OS="__lodash_hash_undefined__";function MS(t){return this.__data__.set(t,OS),this}function DS(t){return this.__data__.has(t)}function za(t){var r=-1,e=t==null?0:t.length;for(this.__data__=new en;++r<e;)this.add(t[r])}za.prototype.add=za.prototype.push=MS,za.prototype.has=DS;function ku(t,r){for(var e=-1,n=t==null?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}function zo(t,r){return t.has(r)}var BS=1,PS=2;function Am(t,r,e,n,i,a){var o=e&BS,s=t.length,c=r.length;if(s!=c&&!(o&&c>s))return!1;var d=a.get(t),h=a.get(r);if(d&&h)return d==r&&h==t;var v=-1,g=!0,C=e&PS?new za:void 0;for(a.set(t,r),a.set(r,t);++v<s;){var w=t[v],S=r[v];if(n)var _=o?n(S,w,v,r,t,a):n(w,S,v,t,r,a);if(_!==void 0){if(_)continue;g=!1;break}if(C){if(!ku(r,function(T,M){if(!zo(C,M)&&(w===T||i(w,T,e,n,a)))return C.push(M)})){g=!1;break}}else if(!(w===S||i(w,S,e,n,a))){g=!1;break}}return a.delete(t),a.delete(r),g}function Uu(t){var r=-1,e=Array(t.size);return t.forEach(function(n,i){e[++r]=[i,n]}),e}function Yu(t){var r=-1,e=Array(t.size);return t.forEach(function(n){e[++r]=n}),e}var NS=1,FS=2,HS="[object Boolean]",zS="[object Date]",Im="[object Error]",GS="[object Map]",$S="[object Number]",Uf="[object RegExp]",Om="[object Set]",WS="[object String]",kS="[object Symbol]",US="[object ArrayBuffer]",YS="[object DataView]",Yf=er?er.prototype:void 0,Vf=Yf?Yf.valueOf:void 0;function Zt(t,r,e,n,i,a,o){switch(e){case YS:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case US:return!(t.byteLength!=r.byteLength||!a(new Gu(t),new Gu(r)));case HS:case zS:case $S:return Fn(+t,+r);case Im:return t.name==r.name&&t.message==r.message;case Uf:case WS:return t==r+"";case GS:var s=Uu;case Om:var c=n&NS;if(s||(s=Yu),t.size!=r.size&&!c)return!1;var d=o.get(t);if(d)return d==r;n|=FS,o.set(t,r);var h=Am(s(t),s(r),n,i,a,o);return o.delete(t),h;case kS:if(Vf)return Vf.call(t)==Vf.call(r)}return!1}var VS=1,XS=Object.prototype,jS=XS.hasOwnProperty;function qS(t,r,e,n,i,a){var o=e&VS,s=Bo(t),c=s.length,d=Bo(r),h=d.length;if(c!=h&&!o)return!1;for(var v=c;v--;){var g=s[v];if(!(o?g in r:jS.call(r,g)))return!1}var C=a.get(t),w=a.get(r);if(C&&w)return C==r&&w==t;var S=!0;a.set(t,r),a.set(r,t);for(var _=o;++v<c;){g=s[v];var T=t[g],M=r[g];if(n)var D=o?n(M,T,g,r,t,a):n(T,M,g,t,r,a);if(!(D===void 0?T===M||i(T,M,e,n,a):D)){S=!1;break}_||(_=g=="constructor")}if(S&&!_){var B=t.constructor,G=r.constructor;B!=G&&"constructor"in t&&"constructor"in r&&!(typeof B=="function"&&B instanceof B&&typeof G=="function"&&G instanceof G)&&(S=!1)}return a.delete(t),a.delete(r),S}var KS=1,Mm="[object Arguments]",Vu="[object Array]",Go="[object Object]",tT=Object.prototype,Dm=tT.hasOwnProperty;function rT(t,r,e,n,i,a){var o=_e(t),s=_e(r),c=o?Vu:Sn(t),d=s?Vu:Sn(r);c=c==Mm?Go:c,d=d==Mm?Go:d;var h=c==Go,v=d==Go,g=c==d;if(g&&Jn(t)){if(!Jn(r))return!1;o=!0,h=!1}if(g&&!h)return a||(a=new rn),o||he(t)?Am(t,r,e,n,i,a):Zt(t,r,c,e,n,i,a);if(!(e&KS)){var C=h&&Dm.call(t,"__wrapped__"),w=v&&Dm.call(r,"__wrapped__");if(C||w){var S=C?t.value():t,_=w?r.value():r;return a||(a=new rn),i(S,_,e,n,a)}}return g?(a||(a=new rn),qS(t,r,e,n,i,a)):!1}function Ei(t,r,e,n,i){return t===r?!0:t==null||r==null||!Pt(t)&&!Pt(r)?t!==t&&r!==r:rT(t,r,e,n,Ei,i)}var Bm=1,nT=2;function Qi(t,r,e,n){var i=e.length,a=i,o=!n;if(t==null)return!a;for(t=Object(t);i--;){var s=e[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=e[i];var c=s[0],d=t[c],h=s[1];if(o&&s[2]){if(d===void 0&&!(c in t))return!1}else{var v=new rn;if(n)var g=n(d,h,c,t,r,v);if(!(g===void 0?Ei(h,d,Bm|nT,n,v):g))return!1}}return!0}function Xu(t){return t===t&&!it(t)}function Pm(t){for(var r=bt(t),e=r.length;e--;){var n=r[e],i=t[n];r[e]=[n,i,Xu(i)]}return r}function Xf(t,r){return function(e){return e==null?!1:e[t]===r&&(r!==void 0||t in Object(e))}}function Nm(t){var r=Pm(t);return r.length==1&&r[0][2]?Xf(r[0][0],r[0][1]):function(e){return e===t||Qi(e,t,r)}}function iT(t,r){return t!=null&&r in Object(t)}function ju(t,r,e){r=Si(r,t);for(var n=-1,i=r.length,a=!1;++n<i;){var o=wn(r[n]);if(!(a=t!=null&&e(t,o)))break;t=t[o]}return a||++n!=i?a:(i=t==null?0:t.length,!!i&&yu(i)&&Zn(o,i)&&(_e(t)||Oa(t)))}function Ji(t,r){return t!=null&&ju(t,r,iT)}var Fm=1,aT=2;function ea(t,r){return Ol(t)&&Xu(r)?Xf(wn(t),r):function(e){var n=Me(e,t);return n===void 0&&n===r?Ji(e,t):Ei(r,n,Fm|aT)}}function qu(t){return function(r){return r==null?void 0:r[t]}}function ZS(t){return function(r){return Xi(r,t)}}function Hm(t){return Ol(t)?qu(wn(t)):ZS(t)}function He(t){return typeof t=="function"?t:t==null?yr:typeof t=="object"?_e(t)?ea(t[0],t[1]):Nm(t):Hm(t)}var QS="Expected a function";function zm(t){var r=t==null?0:t.length,e=He;return t=r?Et(t,function(n){if(typeof n[1]!="function")throw new TypeError(QS);return[e(n[0]),n[1]]}):[],je(function(n){for(var i=-1;++i<r;){var a=t[i];if(Ar(a[0],this,n))return Ar(a[1],this,n)}})}function jf(t,r,e){var n=e.length;if(t==null)return!n;for(t=Object(t);n--;){var i=e[n],a=r[i],o=t[i];if(o===void 0&&!(i in t)||!a(o))return!1}return!0}function JS(t){var r=bt(t);return function(e){return jf(e,t,r)}}var eE=1;function tE(t){return JS(on(t,eE))}function oT(t,r){return r==null||jf(t,r,bt(r))}function rE(t,r,e,n){for(var i=-1,a=t==null?0:t.length;++i<a;){var o=t[i];r(n,o,e(o),t)}return n}function Gm(t){return function(r,e,n){for(var i=-1,a=Object(r),o=n(r),s=o.length;s--;){var c=o[t?s:++i];if(e(a[c],c,a)===!1)break}return r}}var nE=Gm(),qf=nE;function Gn(t,r){return t&&qf(t,r,bt)}function $m(t,r){return function(e,n){if(e==null)return e;if(!wr(e))return t(e,n);for(var i=e.length,a=r?i:-1,o=Object(e);(r?a--:++a<i)&&n(o[a],a,o)!==!1;);return e}}var Wm=$m(Gn),Ga=Wm;function iE(t,r,e,n){return Ga(t,function(i,a,o){r(n,i,e(i),o)}),n}function ql(t,r){return function(e,n){var i=_e(e)?rE:iE,a=r?r():{};return i(e,t,He(n),a)}}var aE=Object.prototype,lT=aE.hasOwnProperty,oE=ql(function(t,r,e){lT.call(t,e)?++t[e]:Ci(t,e,1)}),sT=oE;function lE(t,r){var e=Co(t);return r==null?e:em(e,r)}var sE=8;function km(t,r,e){r=e?void 0:r;var n=yi(t,sE,void 0,void 0,void 0,void 0,void 0,r);return n.placeholder=km.placeholder,n}km.placeholder={};var uE=16;function Kf(t,r,e){r=e?void 0:r;var n=yi(t,uE,void 0,void 0,void 0,void 0,void 0,r);return n.placeholder=Kf.placeholder,n}Kf.placeholder={};var Um=function(){return Jt.Date.now()},Kl=Um,cE="Expected a function",Ym=Math.max,uT=Math.min;function l(t,r,e){var n,i,a,o,s,c,d=0,h=!1,v=!1,g=!0;if(typeof t!="function")throw new TypeError(cE);r=Zr(r)||0,it(e)&&(h=!!e.leading,v="maxWait"in e,a=v?Ym(Zr(e.maxWait)||0,r):a,g="trailing"in e?!!e.trailing:g);function C(V){var q=n,J=i;return n=i=void 0,d=V,o=t.apply(J,q),o}function w(V){return d=V,s=setTimeout(T,r),h?C(V):o}function S(V){var q=V-c,J=V-d,te=r-q;return v?uT(te,a-J):te}function _(V){var q=V-c,J=V-d;return c===void 0||q>=r||q<0||v&&J>=a}function T(){var V=Kl();if(_(V))return M(V);s=setTimeout(T,S(V))}function M(V){return s=void 0,g&&n?C(V):(n=i=void 0,o)}function D(){s!==void 0&&clearTimeout(s),d=0,n=c=i=s=void 0}function B(){return s===void 0?o:M(Kl())}function G(){var V=Kl(),q=_(V);if(n=arguments,i=this,c=V,q){if(s===void 0)return w(c);if(v)return clearTimeout(s),s=setTimeout(T,r),C(c)}return s===void 0&&(s=setTimeout(T,r)),o}return G.cancel=D,G.flush=B,G}function u(t,r){return t==null||t!==t?r:t}var f=Object.prototype,p=f.hasOwnProperty,m=je(function(t,r){t=Object(t);var e=-1,n=r.length,i=n>2?r[2]:void 0;for(i&&xr(r[0],r[1],i)&&(n=1);++e<n;)for(var a=r[e],o=Mr(a),s=-1,c=o.length;++s<c;){var d=o[s],h=t[d];(h===void 0||Fn(h,f[d])&&!p.call(t,d))&&(t[d]=a[d])}return t}),y=m;function x(t,r,e){(e!==void 0&&!Fn(t[r],e)||e===void 0&&!(r in t))&&Ci(t,r,e)}function b(t){return Pt(t)&&wr(t)}function E(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}function A(t){return Qn(t,Mr(t))}function I(t,r,e,n,i,a,o){var s=E(t,e),c=E(r,e),d=o.get(c);if(d){x(t,e,d);return}var h=a?a(s,c,e+"",t,r,o):void 0,v=h===void 0;if(v){var g=_e(c),C=!g&&Jn(c),w=!g&&!C&&he(c);h=c,g||C||w?_e(s)?h=s:b(s)?h=Ir(s):C?(v=!1,h=Fa(c,!0)):w?(v=!1,h=Yl(c,!0)):h=[]:Dl(c)||Oa(c)?(h=s,Oa(s)?h=A(s):(!it(s)||Ce(s))&&(h=ym(c))):v=!1}v&&(o.set(c,h),i(h,c,n,a,o),o.delete(c)),x(t,e,h)}function R(t,r,e,n,i){t!==r&&qf(r,function(a,o){if(i||(i=new rn),it(a))I(t,r,o,e,R,n,i);else{var s=n?n(E(t,o),a,o+"",t,r,i):void 0;s===void 0&&(s=a),x(t,o,s)}},Mr)}function O(t,r,e,n,i,a){return it(t)&&it(r)&&(a.set(r,t),R(t,r,void 0,O,a),a.delete(r)),t}var N=Ia(function(t,r,e,n){R(t,r,e,n)}),H=N,Y=je(function(t){return t.push(void 0,O),Ar(H,void 0,t)}),W=Y,U="Expected a function";function j(t,r,e){if(typeof t!="function")throw new TypeError(U);return setTimeout(function(){t.apply(void 0,e)},r)}var ee=je(function(t,r){return j(t,1,r)}),Z=ee,ae=je(function(t,r,e){return j(t,Zr(r)||0,e)}),ne=ae;function fe(t,r,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(r,t[n]))return!0;return!1}var be=200;function ge(t,r,e,n){var i=-1,a=Aa,o=!0,s=t.length,c=[],d=r.length;if(!s)return c;e&&(r=Et(r,ft(e))),n?(a=fe,o=!1):r.length>=be&&(a=zo,o=!1,r=new za(r));e:for(;++i<s;){var h=t[i],v=e==null?h:e(h);if(h=n||h!==0?h:0,o&&v===v){for(var g=d;g--;)if(r[g]===v)continue e;c.push(h)}else a(r,v,n)||c.push(h)}return c}var Be=je(function(t,r){return b(t)?ge(t,Ut(r,1,b,!0)):[]}),Ke=Be;function Fe(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}var Yt=je(function(t,r){var e=Fe(r);return b(e)&&(e=void 0),b(t)?ge(t,Ut(r,1,b,!0),He(e)):[]}),Tt=Yt,Vt=je(function(t,r){var e=Fe(r);return b(e)&&(e=void 0),b(t)?ge(t,Ut(r,1,b,!0),void 0,e):[]}),ir=Vt,$n=nu(function(t,r){return t/r},1),ri=$n;function ta(t,r,e){var n=t==null?0:t.length;return n?(r=e||r===void 0?1:Ve(r),xn(t,r<0?0:r,n)):[]}function ln(t,r,e){var n=t==null?0:t.length;return n?(r=e||r===void 0?1:Ve(r),r=n-r,xn(t,0,r<0?0:r)):[]}function En(t,r,e,n){for(var i=t.length,a=n?i:-1;(n?a--:++a<i)&&r(t[a],a,t););return e?xn(t,n?0:a,n?a+1:i):xn(t,n?a+1:0,n?i:a)}function Br(t,r){return t&&t.length?En(t,He(r),!0,!0):[]}function $a(t,r){return t&&t.length?En(t,He(r),!0):[]}function Pr(t){return typeof t=="function"?t:yr}function Ae(t,r){var e=_e(t)?Or:Ga;return e(t,Pr(r))}function $o(t,r){for(var e=t==null?0:t.length;e--&&r(t[e],e,t)!==!1;);return t}var Wo=Gm(!0),Ue=Wo;function Ze(t,r){return t&&Ue(t,r,bt)}var ht=$m(Ze,!0),zt=ht;function ur(t,r){var e=_e(t)?$o:zt;return e(t,Pr(r))}function Nr(t,r,e){t=ct(t),r=lr(r);var n=t.length;e=e===void 0?n:Na(Ve(e),0,n);var i=e;return e-=r.length,e>=0&&t.slice(e,i)==r}function sn(t,r){return Et(r,function(e){return[e,t[e]]})}function ra(t){var r=-1,e=Array(t.size);return t.forEach(function(n){e[++r]=[n,n]}),e}var Wn="[object Map]",Zf="[object Set]";function Vm(t){return function(r){var e=Sn(r);return e==Wn?Uu(r):e==Zf?ra(r):sn(r,t(r))}}var Zl=Vm(bt),Ku=Zl,LA=Vm(Mr),cT=LA,RA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},AA=Ef(RA),IA=AA,dT=/[&<>"']/g,OA=RegExp(dT.source);function dE(t){return t=ct(t),t&&OA.test(t)?t.replace(dT,IA):t}var fT=/[\\^$.*+?()[\]{}|]/g,MA=RegExp(fT.source);function DA(t){return t=ct(t),t&&MA.test(t)?t.replace(fT,"\\$&"):t}function hT(t,r){for(var e=-1,n=t==null?0:t.length;++e<n;)if(!r(t[e],e,t))return!1;return!0}function BA(t,r){var e=!0;return Ga(t,function(n,i,a){return e=!!r(n,i,a),e}),e}function Xm(t,r,e){var n=_e(t)?hT:BA;return e&&xr(t,r,e)&&(r=void 0),n(t,He(r))}var PA=4294967295;function vT(t){return t?Na(Ve(t),0,PA):0}function NA(t,r,e,n){var i=t.length;for(e=Ve(e),e<0&&(e=-e>i?0:i+e),n=n===void 0||n>i?i:Ve(n),n<0&&(n+=i),n=e>n?0:vT(n);e<n;)t[e++]=r;return t}function FA(t,r,e,n){var i=t==null?0:t.length;return i?(e&&typeof e!="number"&&xr(t,r,e)&&(e=0,n=i),NA(t,r,e,n)):[]}function pT(t,r){var e=[];return Ga(t,function(n,i,a){r(n,i,a)&&e.push(n)}),e}function Wa(t,r){var e=_e(t)?nn:pT;return e(t,He(r))}function gT(t){return function(r,e,n){var i=Object(r);if(!wr(r)){var a=He(e);r=bt(r),e=function(s){return a(i[s],s,i)}}var o=t(r,e,n);return o>-1?i[a?r[o]:o]:void 0}}var HA=Math.max;function Zu(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var i=e==null?0:Ve(e);return i<0&&(i=HA(n+i,0)),Ra(t,He(r),i)}var zA=gT(Zu),Vr=zA;function mT(t,r,e){var n;return e(t,function(i,a,o){if(r(i,a,o))return n=a,!1}),n}function GA(t,r){return mT(t,He(r),Gn)}var $A=Math.max,WA=Math.min;function yT(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return e!==void 0&&(i=Ve(e),i=e<0?$A(n+i,0):WA(i,n-1)),Ra(t,He(r),i,!0)}var kA=gT(yT),jm=kA;function UA(t,r){return mT(t,He(r),Ze)}function Qu(t){return t&&t.length?t[0]:void 0}function CT(t,r){var e=-1,n=wr(t)?Array(t.length):[];return Ga(t,function(i,a,o){n[++e]=r(i,a,o)}),n}function nt(t,r){var e=_e(t)?Et:CT;return e(t,He(r))}function Qf(t,r){return Ut(nt(t,r),1)}var YA=1/0;function VA(t,r){return Ut(nt(t,r),YA)}function XA(t,r,e){return e=e===void 0?1:Ve(e),Ut(nt(t,r),e)}var jA=1/0;function wT(t){var r=t==null?0:t.length;return r?Ut(t,jA):[]}function qA(t,r){var e=t==null?0:t.length;return e?(r=r===void 0?1:Ve(r),Ut(t,r)):[]}var KA=512;function ZA(t){return yi(t,KA)}var QA=Gl("floor"),JA=QA,eI="Expected a function",tI=8,rI=32,nI=128,iI=256;function xT(t){return ti(function(r){var e=r.length,n=e,i=gn.prototype.thru;for(t&&r.reverse();n--;){var a=r[n];if(typeof a!="function")throw new TypeError(eI);if(i&&!o&&Cl(a)=="wrapper")var o=new gn([],!0)}for(n=o?n:e;++n<e;){a=r[n];var s=Cl(a),c=s=="wrapper"?lu(a):void 0;c&&su(c[0])&&c[1]==(nI|tI|rI|iI)&&!c[4].length&&c[9]==1?o=o[Cl(c[0])].apply(o,c[3]):o=a.length==1&&su(a)?o[s]():o.thru(a)}return function(){var d=arguments,h=d[0];if(o&&d.length==1&&_e(h))return o.plant(h).value();for(var v=0,g=e?r[v].apply(this,d):h;++v<e;)g=r[v].call(this,g);return g}})}var aI=xT(),oI=aI,lI=xT(!0),sI=lI;function bT(t,r){return t==null?t:qf(t,Pr(r),Mr)}function uI(t,r){return t==null?t:Ue(t,Pr(r),Mr)}function cI(t,r){return t&&Gn(t,Pr(r))}function dI(t,r){return t&&Ze(t,Pr(r))}function fI(t){for(var r=-1,e=t==null?0:t.length,n={};++r<e;){var i=t[r];n[i[0]]=i[1]}return n}function qm(t,r){return nn(r,function(e){return Ce(t[e])})}function hI(t){return t==null?[]:qm(t,bt(t))}function vI(t){return t==null?[]:qm(t,Mr(t))}var pI=Object.prototype,gI=pI.hasOwnProperty,mI=ql(function(t,r,e){gI.call(t,e)?t[e].push(r):Ci(t,e,[r])}),yI=mI;function fE(t,r){return t>r}function Km(t){return function(r,e){return typeof r=="string"&&typeof e=="string"||(r=Zr(r),e=Zr(e)),t(r,e)}}var CI=Km(fE),wI=CI,xI=Km(function(t,r){return t>=r}),bI=xI,SI=Object.prototype,EI=SI.hasOwnProperty;function _I(t,r){return t!=null&&EI.call(t,r)}function hE(t,r){return t!=null&&ju(t,r,_I)}var TI=Math.max,LI=Math.min;function RI(t,r,e){return t>=LI(r,e)&&t<TI(r,e)}function vE(t,r,e){return r=gi(r),e===void 0?(e=r,r=0):e=gi(e),t=Zr(t),RI(t,r,e)}var AI="[object String]";function Ju(t){return typeof t=="string"||!_e(t)&&Pt(t)&&Rr(t)==AI}function pE(t,r){return Et(r,function(e){return t[e]})}function ka(t){return t==null?[]:pE(t,bt(t))}var II=Math.max;function un(t,r,e,n){t=wr(t)?t:ka(t),e=e&&!n?Ve(e):0;var i=t.length;return e<0&&(e=II(i+e,0)),Ju(t)?e<=i&&t.indexOf(r,e)>-1:!!i&&mi(t,r,e)>-1}var OI=Math.max;function Jf(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var i=e==null?0:Ve(e);return i<0&&(i=OI(n+i,0)),mi(t,r,i)}function MI(t){var r=t==null?0:t.length;return r?xn(t,0,-1):[]}var DI=Math.min;function gE(t,r,e){for(var n=e?fe:Aa,i=t[0].length,a=t.length,o=a,s=Array(a),c=1/0,d=[];o--;){var h=t[o];o&&r&&(h=Et(h,ft(r))),c=DI(h.length,c),s[o]=!e&&(r||i>=120&&h.length>=120)?new za(o&&h):void 0}h=t[0];var v=-1,g=s[0];e:for(;++v<i&&d.length<c;){var C=h[v],w=r?r(C):C;if(C=e||C!==0?C:0,!(g?zo(g,w):n(d,w,e))){for(o=a;--o;){var S=s[o];if(!(S?zo(S,w):n(t[o],w,e)))continue e}g&&g.push(w),d.push(C)}}return d}function mE(t){return b(t)?t:[]}var BI=je(function(t){var r=Et(t,mE);return r.length&&r[0]===t[0]?gE(r):[]}),ST=BI,PI=je(function(t){var r=Fe(t),e=Et(t,mE);return r===Fe(e)?r=void 0:e.pop(),e.length&&e[0]===t[0]?gE(e,He(r)):[]}),NI=PI,FI=je(function(t){var r=Fe(t),e=Et(t,mE);return r=typeof r=="function"?r:void 0,r&&e.pop(),e.length&&e[0]===t[0]?gE(e,void 0,r):[]}),HI=FI;function zI(t,r,e,n){return Gn(t,function(i,a,o){r(n,e(i),a,o)}),n}function ET(t,r){return function(e,n){return zI(e,t,r(n),{})}}var GI=Object.prototype,$I=GI.toString,WI=ET(function(t,r,e){r!=null&&typeof r.toString!="function"&&(r=$I.call(r)),t[r]=e},at(yr)),kI=WI,_T=Object.prototype,UI=_T.hasOwnProperty,YI=_T.toString,VI=ET(function(t,r,e){r!=null&&typeof r.toString!="function"&&(r=YI.call(r)),UI.call(t,r)?t[r].push(e):t[r]=[e]},He),XI=VI;function TT(t,r){return r.length<2?t:Xi(t,xn(r,0,-1))}function eh(t,r,e){r=Si(r,t),t=TT(t,r);var n=t==null?t:t[wn(Fe(r))];return n==null?void 0:Ar(n,t,e)}var jI=je(eh),qI=jI,KI=je(function(t,r,e){var n=-1,i=typeof r=="function",a=wr(t)?Array(t.length):[];return Ga(t,function(o){a[++n]=i?Ar(r,o,e):eh(o,r,e)}),a}),ZI=KI,QI="[object ArrayBuffer]";function JI(t){return Pt(t)&&Rr(t)==QI}var LT=It&&It.isArrayBuffer,e8=LT?ft(LT):JI,t8=e8,r8="[object Boolean]";function na(t){return t===!0||t===!1||Pt(t)&&Rr(t)==r8}var n8="[object Date]";function i8(t){return Pt(t)&&Rr(t)==n8}var RT=It&&It.isDate,a8=RT?ft(RT):i8,o8=a8;function l8(t){return Pt(t)&&t.nodeType===1&&!Dl(t)}var s8="[object Map]",u8="[object Set]",c8=Object.prototype,d8=c8.hasOwnProperty;function ve(t){if(t==null)return!0;if(wr(t)&&(_e(t)||typeof t=="string"||typeof t.splice=="function"||Jn(t)||he(t)||Oa(t)))return!t.length;var r=Sn(t);if(r==s8||r==u8)return!t.size;if(Rl(t))return!cf(t).length;for(var e in t)if(d8.call(t,e))return!1;return!0}function Fr(t,r){return Ei(t,r)}function f8(t,r,e){e=typeof e=="function"?e:void 0;var n=e?e(t,r):void 0;return n===void 0?Ei(t,r,void 0,e):!!n}var h8=Jt.isFinite;function v8(t){return typeof t=="number"&&h8(t)}function AT(t){return typeof t=="number"&&t==Ve(t)}function p8(t,r){return t===r||Qi(t,r,Pm(r))}function g8(t,r,e){return e=typeof e=="function"?e:void 0,Qi(t,r,Pm(r),e)}var m8="[object Number]";function _n(t){return typeof t=="number"||Pt(t)&&Rr(t)==m8}function yE(t){return _n(t)&&t!=+t}var y8=iu?Ce:af,C8=y8,w8="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function x8(t){if(C8(t))throw new Error(w8);return tg(t)}function Qt(t){return t==null}function IT(t){return t===null}var b8="[object RegExp]";function S8(t){return Pt(t)&&Rr(t)==b8}var OT=It&&It.isRegExp,E8=OT?ft(OT):S8,CE=E8,MT=9007199254740991;function _8(t){return AT(t)&&t>=-MT&&t<=MT}function Zm(t){return t===void 0}var T8="[object WeakMap]";function L8(t){return Pt(t)&&Sn(t)==T8}var R8="[object WeakSet]";function A8(t){return Pt(t)&&Rr(t)==R8}var I8=1;function O8(t){return He(typeof t=="function"?t:on(t,I8))}var M8=Array.prototype,D8=M8.join;function B8(t,r){return t==null?"":D8.call(t,r)}var P8=Do(function(t,r,e){return t+(e?"-":"")+r.toLowerCase()}),N8=P8,F8=ql(function(t,r,e){Ci(t,e,r)}),H8=F8;function z8(t,r,e){for(var n=e+1;n--;)if(t[n]===r)return n;return n}var G8=Math.max,$8=Math.min;function W8(t,r,e){var n=t==null?0:t.length;if(!n)return-1;var i=n;return e!==void 0&&(i=Ve(e),i=i<0?G8(n+i,0):$8(i,n-1)),r===r?z8(t,r,i):Ra(t,fu,i,!0)}var k8=Do(function(t,r,e){return t+(e?" ":"")+r.toLowerCase()}),wE=k8,U8=x0("toLowerCase"),Y8=U8;function xE(t,r){return t<r}var V8=Km(xE),X8=V8,j8=Km(function(t,r){return t<=r}),q8=j8;function DT(t,r){var e={};return r=He(r),Gn(t,function(n,i,a){Ci(e,r(n,i,a),n)}),e}function K8(t,r){var e={};return r=He(r),Gn(t,function(n,i,a){Ci(e,i,r(n,i,a))}),e}var Z8=1;function bE(t){return Nm(on(t,Z8))}var Q8=1;function J8(t,r){return ea(t,on(r,Q8))}function Qm(t,r,e){for(var n=-1,i=t.length;++n<i;){var a=t[n],o=r(a);if(o!=null&&(s===void 0?o===o&&!Yr(o):e(o,s)))var s=o,c=a}return c}function Ua(t){return t&&t.length?Qm(t,yr,fE):void 0}function SE(t,r){return t&&t.length?Qm(t,He(r),fE):void 0}function EE(t,r){for(var e,n=-1,i=t.length;++n<i;){var a=r(t[n]);a!==void 0&&(e=e===void 0?a:e+a)}return e}var eO=0/0;function BT(t,r){var e=t==null?0:t.length;return e?EE(t,r)/e:eO}function tO(t){return BT(t,yr)}function rO(t,r){return BT(t,He(r))}var nO=Ia(function(t,r,e){R(t,r,e)}),Jm=nO,iO=je(function(t,r){return function(e){return eh(e,t,r)}}),aO=iO,oO=je(function(t,r){return function(e){return eh(t,e,r)}}),lO=oO;function _E(t){return t&&t.length?Qm(t,yr,xE):void 0}function sO(t,r){return t&&t.length?Qm(t,He(r),xE):void 0}function PT(t,r,e){var n=bt(r),i=qm(r,n),a=!(it(e)&&"chain"in e)||!!e.chain,o=Ce(t);return Or(i,function(s){var c=r[s];t[s]=c,o&&(t.prototype[s]=function(){var d=this.__chain__;if(a||d){var h=t(this.__wrapped__),v=h.__actions__=Ir(this.__actions__);return v.push({func:c,args:arguments,thisArg:t}),h.__chain__=d,h}return c.apply(t,ji([this.value()],arguments))})}),t}var uO=nu(function(t,r){return t*r},1),cO=uO,dO="Expected a function";function th(t){if(typeof t!="function")throw new TypeError(dO);return function(){var r=arguments;switch(r.length){case 0:return!t.call(this);case 1:return!t.call(this,r[0]);case 2:return!t.call(this,r[0],r[1]);case 3:return!t.call(this,r[0],r[1],r[2])}return!t.apply(this,r)}}function fO(t){for(var r,e=[];!(r=t.next()).done;)e.push(r.value);return e}var hO="[object Map]",vO="[object Set]",TE=er?er.iterator:void 0;function NT(t){if(!t)return[];if(wr(t))return Ju(t)?bn(t):Ir(t);if(TE&&t[TE])return fO(t[TE]());var r=Sn(t),e=r==hO?Uu:r==vO?Yu:ka;return e(t)}function pO(){this.__values__===void 0&&(this.__values__=NT(this.value()));var t=this.__index__>=this.__values__.length,r=t?void 0:this.__values__[this.__index__++];return{done:t,value:r}}function FT(t,r){var e=t.length;if(e)return r+=r<0?e:0,Zn(r,e)?t[r]:void 0}function gO(t,r){return t&&t.length?FT(t,Ve(r)):void 0}function mO(t){return t=Ve(t),je(function(r){return FT(r,t)})}function LE(t,r){return r=Si(r,t),t=TT(t,r),t==null||delete t[wn(Fe(r))]}function yO(t){return Dl(t)?void 0:t}var CO=1,wO=2,xO=4,bO=ti(function(t,r){var e={};if(t==null)return e;var n=!1;r=Et(r,function(a){return a=Si(a,t),n||(n=a.length>1),a}),Qn(t,Hf(t),e),n&&(e=on(e,CO|wO|xO,yO));for(var i=r.length;i--;)LE(e,r[i]);return e}),RE=bO;function rh(t,r,e,n){if(!it(t))return t;r=Si(r,t);for(var i=-1,a=r.length,o=a-1,s=t;s!=null&&++i<a;){var c=wn(r[i]),d=e;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(i!=o){var h=s[c];d=n?n(h,c,s):void 0,d===void 0&&(d=it(h)?h:Zn(r[i+1])?[]:{})}Ll(s,c,d),s=s[c]}return t}function HT(t,r,e){for(var n=-1,i=r.length,a={};++n<i;){var o=r[n],s=Xi(t,o);e(s,o)&&rh(a,Si(o,t),s)}return a}function AE(t,r){if(t==null)return{};var e=Et(Hf(t),function(n){return[n]});return r=He(r),HT(t,e,function(n,i){return r(n,i[0])})}function SO(t,r){return AE(t,th(He(r)))}function EO(t){return d0(2,t)}function _O(t,r){var e=t.length;for(t.sort(r);e--;)t[e]=t[e].value;return t}function zT(t,r){if(t!==r){var e=t!==void 0,n=t===null,i=t===t,a=Yr(t),o=r!==void 0,s=r===null,c=r===r,d=Yr(r);if(!s&&!d&&!a&&t>r||a&&o&&c&&!s&&!d||n&&o&&c||!e&&c||!i)return 1;if(!n&&!a&&!d&&t<r||d&&e&&i&&!n&&!a||s&&e&&i||!o&&i||!c)return-1}return 0}function TO(t,r,e){for(var n=-1,i=t.criteria,a=r.criteria,o=i.length,s=e.length;++n<o;){var c=zT(i[n],a[n]);if(c){if(n>=s)return c;var d=e[n];return c*(d=="desc"?-1:1)}}return t.index-r.index}function GT(t,r,e){r.length?r=Et(r,function(a){return _e(a)?function(o){return Xi(o,a.length===1?a[0]:a)}:a}):r=[yr];var n=-1;r=Et(r,ft(He));var i=CT(t,function(a,o,s){var c=Et(r,function(d){return d(a)});return{criteria:c,index:++n,value:a}});return _O(i,function(a,o){return TO(a,o,e)})}function IE(t,r,e,n){return t==null?[]:(_e(r)||(r=r==null?[]:[r]),e=n?void 0:e,_e(e)||(e=e==null?[]:[e]),GT(t,r,e))}function OE(t){return ti(function(r){return r=Et(r,ft(He)),je(function(e){var n=this;return t(r,function(i){return Ar(i,n,e)})})})}var LO=OE(Et),RO=LO,AO=je,IO=AO,OO=Math.min,MO=IO(function(t,r){r=r.length==1&&_e(r[0])?Et(r[0],ft(He)):Et(Ut(r,1),ft(He));var e=r.length;return je(function(n){for(var i=-1,a=OO(n.length,e);++i<a;)n[i]=r[i].call(this,n[i]);return Ar(t,this,n)})}),DO=MO,BO=OE(hT),PO=BO,NO=OE(ku),FO=NO,HO=9007199254740991,zO=Math.floor;function ME(t,r){var e="";if(!t||r<1||r>HO)return e;do r%2&&(e+=t),r=zO(r/2),r&&(t+=t);while(r);return e}var GO=qu("length"),$O=GO,$T="\\ud800-\\udfff",WO="\\u0300-\\u036f",kO="\\ufe20-\\ufe2f",UO="\\u20d0-\\u20ff",YO=WO+kO+UO,VO="\\ufe0e\\ufe0f",XO="["+$T+"]",DE="["+YO+"]",BE="\\ud83c[\\udffb-\\udfff]",jO="(?:"+DE+"|"+BE+")",WT="[^"+$T+"]",kT="(?:\\ud83c[\\udde6-\\uddff]){2}",UT="[\\ud800-\\udbff][\\udc00-\\udfff]",qO="\\u200d",YT=jO+"?",VT="["+VO+"]?",KO="(?:"+qO+"(?:"+[WT,kT,UT].join("|")+")"+VT+YT+")*",ZO=VT+YT+KO,QO="(?:"+[WT+DE+"?",DE,kT,UT,XO].join("|")+")",XT=RegExp(BE+"(?="+BE+")|"+QO+ZO,"g");function JO(t){for(var r=XT.lastIndex=0;XT.test(t);)++r;return r}function ec(t){return Ba(t)?JO(t):$O(t)}var e6=Math.ceil;function e1(t,r){r=r===void 0?" ":lr(r);var e=r.length;if(e<2)return e?ME(r,t):r;var n=ME(r,e6(t/ec(r)));return Ba(r)?Ki(bn(n),0,t).join(""):n.slice(0,t)}var t6=Math.ceil,r6=Math.floor;function n6(t,r,e){t=ct(t),r=Ve(r);var n=r?ec(t):0;if(!r||n>=r)return t;var i=(r-n)/2;return e1(r6(i),e)+t+e1(t6(i),e)}function i6(t,r,e){t=ct(t),r=Ve(r);var n=r?ec(t):0;return r&&n<r?t+e1(r-n,e):t}function a6(t,r,e){t=ct(t),r=Ve(r);var n=r?ec(t):0;return r&&n<r?e1(r-n,e)+t:t}var o6=/^\s+/,l6=Jt.parseInt;function s6(t,r,e){return e||r==null?r=0:r&&(r=+r),l6(ct(t).replace(o6,""),r||0)}var u6=32,PE=je(function(t,r){var e=Pn(r,So(PE));return yi(t,u6,void 0,r,e)});PE.placeholder={};var jT=PE,c6=64,NE=je(function(t,r){var e=Pn(r,So(NE));return yi(t,c6,void 0,r,e)});NE.placeholder={};var d6=NE,f6=ql(function(t,r,e){t[e?0:1].push(r)},function(){return[[],[]]}),h6=f6;function v6(t,r){return HT(t,r,function(e,n){return Ji(t,n)})}var p6=ti(function(t,r){return t==null?{}:v6(t,r)}),qT=p6;function g6(t){for(var r,e=this;e instanceof ou;){var n=Yd(e);n.__index__=0,n.__values__=void 0,r?i.__wrapped__=n:r=n;var i=n;e=e.__wrapped__}return i.__wrapped__=t,r}function m6(t){return function(r){return t==null?void 0:Xi(t,r)}}function y6(t,r,e,n){for(var i=e-1,a=t.length;++i<a;)if(n(t[i],r))return i;return-1}var C6=Array.prototype,KT=C6.splice;function FE(t,r,e,n){var i=n?y6:mi,a=-1,o=r.length,s=t;for(t===r&&(r=Ir(r)),e&&(s=Et(t,ft(e)));++a<o;)for(var c=0,d=r[a],h=e?e(d):d;(c=i(s,h,c,n))>-1;)s!==t&&KT.call(s,c,1),KT.call(t,c,1);return t}function ZT(t,r){return t&&t.length&&r&&r.length?FE(t,r):t}var w6=je(ZT),x6=w6;function b6(t,r,e){return t&&t.length&&r&&r.length?FE(t,r,He(e)):t}function S6(t,r,e){return t&&t.length&&r&&r.length?FE(t,r,void 0,e):t}var E6=Array.prototype,_6=E6.splice;function QT(t,r){for(var e=t?r.length:0,n=e-1;e--;){var i=r[e];if(e==n||i!==a){var a=i;Zn(i)?_6.call(t,i,1):LE(t,i)}}return t}var T6=ti(function(t,r){var e=t==null?0:t.length,n=vf(t,r);return QT(t,Et(r,function(i){return Zn(i,e)?+i:i}).sort(zT)),n}),L6=T6,R6=Math.floor,A6=Math.random;function HE(t,r){return t+R6(A6()*(r-t+1))}var I6=parseFloat,O6=Math.min,M6=Math.random;function D6(t,r,e){if(e&&typeof e!="boolean"&&xr(t,r,e)&&(r=e=void 0),e===void 0&&(typeof r=="boolean"?(e=r,r=void 0):typeof t=="boolean"&&(e=t,t=void 0)),t===void 0&&r===void 0?(t=0,r=1):(t=gi(t),r===void 0?(r=t,t=0):r=gi(r)),t>r){var n=t;t=r,r=n}if(e||t%1||r%1){var i=M6();return O6(t+i*(r-t+I6("1e-"+((i+"").length-1))),r)}return HE(t,r)}var B6=Math.ceil,P6=Math.max;function N6(t,r,e,n){for(var i=-1,a=P6(B6((r-t)/(e||1)),0),o=Array(a);a--;)o[n?a:++i]=t,t+=e;return o}function JT(t){return function(r,e,n){return n&&typeof n!="number"&&xr(r,e,n)&&(e=n=void 0),r=gi(r),e===void 0?(e=r,r=0):e=gi(e),n=n===void 0?r<e?1:-1:gi(n),N6(r,e,n,t)}}var F6=JT(),tc=F6,H6=JT(!0),z6=H6,G6=256,$6=ti(function(t,r){return yi(t,G6,void 0,void 0,void 0,r)}),W6=$6;function eL(t,r,e,n,i){return i(t,function(a,o,s){e=n?(n=!1,a):r(e,a,o,s)}),e}function nh(t,r,e){var n=_e(t)?Sf:eL,i=arguments.length<3;return n(t,He(r),e,i,Ga)}function k6(t,r,e,n){var i=t==null?0:t.length;for(n&&i&&(e=t[--i]);i--;)e=r(e,t[i],i,t);return e}function U6(t,r,e){var n=_e(t)?k6:eL,i=arguments.length<3;return n(t,He(r),e,i,zt)}function Y6(t,r){var e=_e(t)?nn:pT;return e(t,th(He(r)))}function V6(t,r){var e=[];if(!(t&&t.length))return e;var n=-1,i=[],a=t.length;for(r=He(r);++n<a;){var o=t[n];r(o,n,t)&&(e.push(o),i.push(n))}return QT(t,i),e}function X6(t,r,e){return(e?xr(t,r,e):r===void 0)?r=1:r=Ve(r),ME(ct(t),r)}function j6(){var t=arguments,r=ct(t[0]);return t.length<3?r:r.replace(t[1],t[2])}var q6="Expected a function";function K6(t,r){if(typeof t!="function")throw new TypeError(q6);return r=r===void 0?r:Ve(r),je(t,r)}function Z6(t,r,e){r=Si(r,t);var n=-1,i=r.length;for(i||(i=1,t=void 0);++n<i;){var a=t==null?void 0:t[wn(r[n])];a===void 0&&(n=i,a=e),t=Ce(a)?a.call(t):a}return t}var Q6=Array.prototype,J6=Q6.reverse;function zE(t){return t==null?t:J6.call(t)}var e3=Gl("round"),t3=e3;function tL(t){var r=t.length;return r?t[HE(0,r-1)]:void 0}function r3(t){return tL(ka(t))}function n3(t){var r=_e(t)?tL:r3;return r(t)}function t1(t,r){var e=-1,n=t.length,i=n-1;for(r=r===void 0?n:r;++e<r;){var a=HE(e,i),o=t[a];t[a]=t[e],t[e]=o}return t.length=r,t}function i3(t,r){return t1(Ir(t),Na(r,0,t.length))}function a3(t,r){var e=ka(t);return t1(e,Na(r,0,e.length))}function o3(t,r,e){(e?xr(t,r,e):r===void 0)?r=1:r=Ve(r);var n=_e(t)?i3:a3;return n(t,r)}function ih(t,r,e){return t==null?t:rh(t,r,e)}function l3(t,r,e,n){return n=typeof n=="function"?n:void 0,t==null?t:rh(t,r,e,n)}function s3(t){return t1(Ir(t))}function u3(t){return t1(ka(t))}function c3(t){var r=_e(t)?s3:u3;return r(t)}var d3="[object Map]",f3="[object Set]";function Ql(t){if(t==null)return 0;if(wr(t))return Ju(t)?ec(t):t.length;var r=Sn(t);return r==d3||r==f3?t.size:cf(t).length}function h3(t,r,e){var n=t==null?0:t.length;return n?(e&&typeof e!="number"&&xr(t,r,e)?(r=0,e=n):(r=r==null?0:Ve(r),e=e===void 0?n:Ve(e)),xn(t,r,e)):[]}var v3=Do(function(t,r,e){return t+(e?"_":"")+r.toLowerCase()}),p3=v3;function g3(t,r){var e;return Ga(t,function(n,i,a){return e=r(n,i,a),!e}),!!e}function rL(t,r,e){var n=_e(t)?ku:g3;return e&&xr(t,r,e)&&(r=void 0),n(t,He(r))}var m3=je(function(t,r){if(t==null)return[];var e=r.length;return e>1&&xr(t,r[0],r[1])?r=[]:e>2&&xr(r[0],r[1],r[2])&&(r=[r[0]]),GT(t,Ut(r,1),[])}),GE=m3,y3=4294967295,C3=y3-1,w3=Math.floor,x3=Math.min;function $E(t,r,e,n){var i=0,a=t==null?0:t.length;if(a===0)return 0;r=e(r);for(var o=r!==r,s=r===null,c=Yr(r),d=r===void 0;i<a;){var h=w3((i+a)/2),v=e(t[h]),g=v!==void 0,C=v===null,w=v===v,S=Yr(v);if(o)var _=n||w;else d?_=w&&(n||g):s?_=w&&g&&(n||!C):c?_=w&&g&&!C&&(n||!S):C||S?_=!1:_=n?v<=r:v<r;_?i=h+1:a=h}return x3(a,C3)}var b3=4294967295,S3=b3>>>1;function r1(t,r,e){var n=0,i=t==null?n:t.length;if(typeof r=="number"&&r===r&&i<=S3){for(;n<i;){var a=n+i>>>1,o=t[a];o!==null&&!Yr(o)&&(e?o<=r:o<r)?n=a+1:i=a}return i}return $E(t,r,yr,e)}function E3(t,r){return r1(t,r)}function _3(t,r,e){return $E(t,r,He(e))}function T3(t,r){var e=t==null?0:t.length;if(e){var n=r1(t,r);if(n<e&&Fn(t[n],r))return n}return-1}function L3(t,r){return r1(t,r,!0)}function R3(t,r,e){return $E(t,r,He(e),!0)}function A3(t,r){var e=t==null?0:t.length;if(e){var n=r1(t,r,!0)-1;if(Fn(t[n],r))return n}return-1}function nL(t,r){for(var e=-1,n=t.length,i=0,a=[];++e<n;){var o=t[e],s=r?r(o):o;if(!e||!Fn(s,c)){var c=s;a[i++]=o===0?0:o}}return a}function I3(t){return t&&t.length?nL(t):[]}function O3(t,r){return t&&t.length?nL(t,He(r)):[]}var M3=4294967295;function iL(t,r,e){return e&&typeof e!="number"&&xr(t,r,e)&&(r=e=void 0),e=e===void 0?M3:e>>>0,e?(t=ct(t),t&&(typeof r=="string"||r!=null&&!CE(r))&&(r=lr(r),!r&&Ba(t))?Ki(bn(t),0,e):t.split(r,e)):[]}var D3="Expected a function",B3=Math.max;function P3(t,r){if(typeof t!="function")throw new TypeError(D3);return r=r==null?0:B3(Ve(r),0),je(function(e){var n=e[r],i=Ki(e,0,r);return n&&ji(i,n),Ar(t,this,i)})}var N3=Do(function(t,r,e){return t+(e?" ":"")+bf(r)}),F3=N3;function H3(t,r,e){return t=ct(t),e=e==null?0:Na(Ve(e),0,t.length),r=lr(r),t.slice(e,e+r.length)==r}function z3(){return{}}function G3(){return""}function aL(){return!0}var $3=nu(function(t,r){return t-r},0),W3=$3;function k3(t){return t&&t.length?EE(t,yr):0}function oL(t,r){return t&&t.length?EE(t,He(r)):0}function U3(t){var r=t==null?0:t.length;return r?xn(t,1,r):[]}function Y3(t,r,e){return t&&t.length?(r=e||r===void 0?1:Ve(r),xn(t,0,r<0?0:r)):[]}function V3(t,r,e){var n=t==null?0:t.length;return n?(r=e||r===void 0?1:Ve(r),r=n-r,xn(t,r<0?0:r,n)):[]}function X3(t,r){return t&&t.length?En(t,He(r),!1,!0):[]}function j3(t,r){return t&&t.length?En(t,He(r)):[]}function q3(t,r){return r(t),t}var lL=Object.prototype,K3=lL.hasOwnProperty;function sL(t,r,e,n){return t===void 0||Fn(t,lL[e])&&!K3.call(n,e)?r:t}var Z3={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Q3(t){return"\\"+Z3[t]}var J3=/<%=([\s\S]+?)%>/g,uL=J3,e4=/<%-([\s\S]+?)%>/g,t4=e4,r4=/<%([\s\S]+?)%>/g,n4=r4,i4={escape:t4,evaluate:n4,interpolate:uL,variable:"",imports:{_:{escape:dE}}},WE=i4,a4="Invalid `variable` option passed into `_.template`",o4=/\b__p \+= '';/g,l4=/\b(__p \+=) '' \+/g,s4=/(__e\(.*?\)|\b__t\)) \+\n'';/g,u4=/[()=,{}\[\]\/\s]/,c4=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,n1=/($^)/,d4=/['\n\r\u2028\u2029\\]/g,f4=Object.prototype,cL=f4.hasOwnProperty;function h4(t,r,e){var n=WE.imports._.templateSettings||WE;e&&xr(t,r,e)&&(r=void 0),t=ct(t),r=bu({},r,n,sL);var i=bu({},r.imports,n.imports,sL),a=bt(i),o=pE(i,a),s,c,d=0,h=r.interpolate||n1,v="__p += '",g=RegExp((r.escape||n1).source+"|"+h.source+"|"+(h===uL?c4:n1).source+"|"+(r.evaluate||n1).source+"|$","g"),C=cL.call(r,"sourceURL")?"//# sourceURL="+(r.sourceURL+"").replace(/\s/g," ")+`
`:"";t.replace(g,function(_,T,M,D,B,G){return M||(M=D),v+=t.slice(d,G).replace(d4,Q3),T&&(s=!0,v+=`' +
__e(`+T+`) +
'`),B&&(c=!0,v+=`';
`+B+`;
__p += '`),M&&(v+=`' +
((__t = (`+M+`)) == null ? '' : __t) +
'`),d=G+_.length,_}),v+=`';
`;var w=cL.call(r,"variable")&&r.variable;if(!w)v=`with (obj) {
`+v+`
}
`;else if(u4.test(w))throw new Error(a4);v=(c?v.replace(o4,""):v).replace(l4,"$1").replace(s4,"$1;"),v="function("+(w||"obj")+`) {
`+(w?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(s?", __e = _.escape":"")+(c?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+v+`return __p
}`;var S=c0(function(){return Function(a,C+"return "+v).apply(void 0,o)});if(S.source=v,Ou(S))throw S;return S}var v4="Expected a function";function kE(t,r,e){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(v4);return it(e)&&(n="leading"in e?!!e.leading:n,i="trailing"in e?!!e.trailing:i),l(t,r,{leading:n,maxWait:r,trailing:i})}function ah(t,r){return r(t)}var p4=9007199254740991,UE=4294967295,g4=Math.min;function m4(t,r){if(t=Ve(t),t<1||t>p4)return[];var e=UE,n=g4(t,UE);r=Pr(r),t-=UE;for(var i=nf(n,r);++e<t;)r(e);return i}function y4(){return this}function dL(t,r){var e=t;return e instanceof Qe&&(e=e.value()),Sf(r,function(n,i){return i.func.apply(i.thisArg,ji([n],i.args))},e)}function YE(){return dL(this.__wrapped__,this.__actions__)}function C4(t){return ct(t).toLowerCase()}function w4(t){return _e(t)?Et(t,wn):Yr(t)?[t]:Ir(a0(ct(t)))}var fL=9007199254740991;function x4(t){return t?Na(Ve(t),-fL,fL):t===0?t:0}function oh(t){return ct(t).toUpperCase()}function b4(t,r,e){var n=_e(t),i=n||Jn(t)||he(t);if(r=He(r),e==null){var a=t&&t.constructor;i?e=n?new a:[]:it(t)?e=Ce(a)?Co(Io(t)):{}:e={}}return(i?Or:Gn)(t,function(o,s,c){return r(e,o,s,c)}),e}function hL(t,r){for(var e=t.length;e--&&mi(r,t[e],0)>-1;);return e}function vL(t,r){for(var e=-1,n=t.length;++e<n&&mi(r,t[e],0)>-1;);return e}function VE(t,r,e){if(t=ct(t),t&&(e||r===void 0))return Xw(t);if(!t||!(r=lr(r)))return t;var n=bn(t),i=bn(r),a=vL(n,i),o=hL(n,i)+1;return Ki(n,a,o).join("")}function S4(t,r,e){if(t=ct(t),t&&(e||r===void 0))return t.slice(0,Fd(t)+1);if(!t||!(r=lr(r)))return t;var n=bn(t),i=hL(n,bn(r))+1;return Ki(n,0,i).join("")}var E4=/^\s+/;function _4(t,r,e){if(t=ct(t),t&&(e||r===void 0))return t.replace(E4,"");if(!t||!(r=lr(r)))return t;var n=bn(t),i=vL(n,bn(r));return Ki(n,i).join("")}var T4=30,L4="...",R4=/\w*$/;function A4(t,r){var e=T4,n=L4;if(it(r)){var i="separator"in r?r.separator:i;e="length"in r?Ve(r.length):e,n="omission"in r?lr(r.omission):n}t=ct(t);var a=t.length;if(Ba(t)){var o=bn(t);a=o.length}if(e>=a)return t;var s=e-ec(n);if(s<1)return n;var c=o?Ki(o,0,s).join(""):t.slice(0,s);if(i===void 0)return c+n;if(o&&(s+=c.length-s),CE(i)){if(t.slice(s).search(i)){var d,h=c;for(i.global||(i=RegExp(i.source,ct(R4.exec(i))+"g")),i.lastIndex=0;d=i.exec(h);)var v=d.index;c=c.slice(0,v===void 0?s:v)}}else if(t.indexOf(lr(i),s)!=s){var g=c.lastIndexOf(i);g>-1&&(c=c.slice(0,g))}return c+n}function I4(t){return Rg(t,1)}var O4={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},M4=Ef(O4),D4=M4,pL=/&(?:amp|lt|gt|quot|#39);/g,B4=RegExp(pL.source);function P4(t){return t=ct(t),t&&B4.test(t)?t.replace(pL,D4):t}var N4=1/0,F4=Po&&1/Yu(new Po([,-0]))[1]==N4?function(t){return new Po(t)}:Oe,H4=F4,z4=200;function ko(t,r,e){var n=-1,i=Aa,a=t.length,o=!0,s=[],c=s;if(e)o=!1,i=fe;else if(a>=z4){var d=r?null:H4(t);if(d)return Yu(d);o=!1,i=zo,c=new za}else c=r?[]:s;e:for(;++n<a;){var h=t[n],v=r?r(h):h;if(h=e||h!==0?h:0,o&&v===v){for(var g=c.length;g--;)if(c[g]===v)continue e;r&&c.push(v),s.push(h)}else i(c,v,e)||(c!==s&&c.push(v),s.push(h))}return s}var G4=je(function(t){return ko(Ut(t,1,b,!0))}),$4=G4,W4=je(function(t){var r=Fe(t);return b(r)&&(r=void 0),ko(Ut(t,1,b,!0),He(r))}),k4=W4,U4=je(function(t){var r=Fe(t);return r=typeof r=="function"?r:void 0,ko(Ut(t,1,b,!0),void 0,r)}),Y4=U4;function Ya(t){return t&&t.length?ko(t):[]}function gL(t,r){return t&&t.length?ko(t,He(r)):[]}function V4(t,r){return r=typeof r=="function"?r:void 0,t&&t.length?ko(t,void 0,r):[]}var X4=0;function j4(t){var r=++X4;return ct(t)+r}function XE(t,r){return t==null?!0:LE(t,r)}var q4=Math.max;function jE(t){if(!(t&&t.length))return[];var r=0;return t=nn(t,function(e){if(b(e))return r=q4(e.length,r),!0}),nf(r,function(e){return Et(t,qu(e))})}function mL(t,r){if(!(t&&t.length))return[];var e=jE(t);return r==null?e:Et(e,function(n){return Ar(r,void 0,n)})}function yL(t,r,e,n){return rh(t,r,e(Xi(t,r)),n)}function K4(t,r,e){return t==null?t:yL(t,r,Pr(e))}function Z4(t,r,e,n){return n=typeof n=="function"?n:void 0,t==null?t:yL(t,r,Pr(e),n)}var Q4=Do(function(t,r,e){return t+(e?" ":"")+r.toUpperCase()}),J4=Q4;function eM(t){return t==null?[]:pE(t,Mr(t))}var tM=je(function(t,r){return b(t)?ge(t,r):[]}),rM=tM;function nM(t,r){return jT(Pr(r),t)}var iM=ti(function(t){var r=t.length,e=r?t[0]:0,n=this.__wrapped__,i=function(a){return vf(a,t)};return r>1||this.__actions__.length||!(n instanceof Qe)||!Zn(e)?this.thru(i):(n=n.slice(e,+e+(r?1:0)),n.__actions__.push({func:ah,args:[i],thisArg:void 0}),new gn(n,this.__chain__).thru(function(a){return r&&!a.length&&a.push(void 0),a}))}),aM=iM;function oM(){return If(this)}function lM(){var t=this.__wrapped__;if(t instanceof Qe){var r=t;return this.__actions__.length&&(r=new Qe(this)),r=r.reverse(),r.__actions__.push({func:ah,args:[zE],thisArg:void 0}),new gn(r,this.__chain__)}return this.thru(zE)}function qE(t,r,e){var n=t.length;if(n<2)return n?ko(t[0]):[];for(var i=-1,a=Array(n);++i<n;)for(var o=t[i],s=-1;++s<n;)s!=i&&(a[i]=ge(a[i]||o,t[s],r,e));return ko(Ut(a,1),r,e)}var sM=je(function(t){return qE(nn(t,b))}),uM=sM,cM=je(function(t){var r=Fe(t);return b(r)&&(r=void 0),qE(nn(t,b),He(r))}),dM=cM,fM=je(function(t){var r=Fe(t);return r=typeof r=="function"?r:void 0,qE(nn(t,b),void 0,r)}),hM=fM,vM=je(jE),i1=vM;function CL(t,r,e){for(var n=-1,i=t.length,a=r.length,o={};++n<i;){var s=n<a?r[n]:void 0;e(o,t[n],s)}return o}function pM(t,r){return CL(t||[],r||[],Ll)}function gM(t,r){return CL(t||[],r||[],rh)}var mM=je(function(t){var r=t.length,e=r>1?t[r-1]:void 0;return e=typeof e=="function"?(t.pop(),e):void 0,mL(t,e)}),yM=mM,Ee={chunk:Z0,compact:zn,concat:Ho,difference:Ke,differenceBy:Tt,differenceWith:ir,drop:ta,dropRight:ln,dropRightWhile:Br,dropWhile:$a,fill:FA,findIndex:Zu,findLastIndex:yT,first:Qu,flatten:Iu,flattenDeep:wT,flattenDepth:qA,fromPairs:fI,head:Qu,indexOf:Jf,initial:MI,intersection:ST,intersectionBy:NI,intersectionWith:HI,join:B8,last:Fe,lastIndexOf:W8,nth:gO,pull:x6,pullAll:ZT,pullAllBy:b6,pullAllWith:S6,pullAt:L6,remove:V6,reverse:zE,slice:h3,sortedIndex:E3,sortedIndexBy:_3,sortedIndexOf:T3,sortedLastIndex:L3,sortedLastIndexBy:R3,sortedLastIndexOf:A3,sortedUniq:I3,sortedUniqBy:O3,tail:U3,take:Y3,takeRight:V3,takeRightWhile:X3,takeWhile:j3,union:$4,unionBy:k4,unionWith:Y4,uniq:Ya,uniqBy:gL,uniqWith:V4,unzip:jE,unzipWith:mL,without:rM,xor:uM,xorBy:dM,xorWith:hM,zip:i1,zipObject:pM,zipObjectDeep:gM,zipWith:yM},St={countBy:sT,each:Ae,eachRight:ur,every:Xm,filter:Wa,find:Vr,findLast:jm,flatMap:Qf,flatMapDeep:VA,flatMapDepth:XA,forEach:Ae,forEachRight:ur,groupBy:yI,includes:un,invokeMap:ZI,keyBy:H8,map:nt,orderBy:IE,partition:h6,reduce:nh,reduceRight:U6,reject:Y6,sample:n3,sampleSize:o3,shuffle:c3,size:Ql,some:rL,sortBy:GE},CM={now:Kl},Xt={after:J_,ary:Rg,before:d0,bind:qi,bindKey:v0,curry:km,curryRight:Kf,debounce:l,defer:Z,delay:ne,flip:ZA,memoize:Yi,negate:th,once:EO,overArgs:DO,partial:jT,partialRight:d6,rearg:W6,rest:K6,spread:P3,throttle:kE,unary:I4,wrap:nM},Pe={castArray:Zi,clone:Fo,cloneDeep:jl,cloneDeepWith:LS,cloneWith:AS,conformsTo:oT,eq:Fn,gt:wI,gte:bI,isArguments:Oa,isArray:_e,isArrayBuffer:t8,isArrayLike:wr,isArrayLikeObject:b,isBoolean:na,isBuffer:Jn,isDate:o8,isElement:l8,isEmpty:ve,isEqual:Fr,isEqualWith:f8,isError:Ou,isFinite:v8,isFunction:Ce,isInteger:AT,isLength:yu,isMap:Cm,isMatch:p8,isMatchWith:g8,isNaN:yE,isNative:x8,isNil:Qt,isNull:IT,isNumber:_n,isObject:it,isObjectLike:Pt,isPlainObject:Dl,isRegExp:CE,isSafeInteger:_8,isSet:Vl,isString:Ju,isSymbol:Yr,isTypedArray:he,isUndefined:Zm,isWeakMap:L8,isWeakSet:A8,lt:X8,lte:q8,toArray:NT,toFinite:gi,toInteger:Ve,toLength:vT,toNumber:Zr,toPlainObject:A,toSafeInteger:x4,toString:ct},cn={add:Yw,ceil:q0,divide:ri,floor:JA,max:Ua,maxBy:SE,mean:tO,meanBy:rO,min:_E,minBy:sO,multiply:cO,round:t3,subtract:W3,sum:k3,sumBy:oL},KE={clamp:Nu,inRange:vE,random:D6},$e={assign:xi,assignIn:Lo,assignInWith:bu,assignWith:ix,at:bx,create:lE,defaults:y,defaultsDeep:W,entries:Ku,entriesIn:cT,extend:Lo,extendWith:bu,findKey:GA,findLastKey:UA,forIn:bT,forInRight:uI,forOwn:cI,forOwnRight:dI,functions:hI,functionsIn:vI,get:Me,has:hE,hasIn:Ji,invert:kI,invertBy:XI,invoke:qI,keys:bt,keysIn:Mr,mapKeys:DT,mapValues:K8,merge:Jm,mergeWith:H,omit:RE,omitBy:SO,pick:qT,pickBy:AE,result:Z6,set:ih,setWith:l3,toPairs:Ku,toPairsIn:cT,transform:b4,unset:XE,update:K4,updateWith:Z4,values:ka,valuesIn:eM},ia={at:aM,chain:If,commit:IS,lodash:P,next:pO,plant:g6,reverse:lM,tap:q3,thru:ah,toIterator:y4,toJSON:YE,value:YE,valueOf:YE,wrapperChain:oM},vt={camelCase:gb,capitalize:b0,deburr:Du,endsWith:Nr,escape:dE,escapeRegExp:DA,kebabCase:N8,lowerCase:wE,lowerFirst:Y8,pad:n6,padEnd:i6,padStart:a6,parseInt:s6,repeat:X6,replace:j6,snakeCase:p3,split:iL,startCase:F3,startsWith:H3,template:h4,templateSettings:WE,toLower:C4,toUpper:oh,trim:VE,trimEnd:S4,trimStart:_4,truncate:A4,unescape:P4,upperCase:J4,upperFirst:bf,words:V0},yt={attempt:c0,bindAll:Ax,cond:zm,conforms:tE,constant:at,defaultTo:u,flow:oI,flowRight:sI,identity:yr,iteratee:O8,matches:bE,matchesProperty:J8,method:aO,methodOf:lO,mixin:PT,noop:Oe,nthArg:mO,over:RO,overEvery:PO,overSome:FO,property:Hm,propertyOf:m6,range:tc,rangeRight:z6,stubArray:$l,stubFalse:af,stubObject:z3,stubString:G3,stubTrue:aL,times:m4,toPath:w4,uniqueId:j4};function wM(){var t=new Qe(this.__wrapped__);return t.__actions__=Ir(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ir(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ir(this.__views__),t}function xM(){if(this.__filtered__){var t=new Qe(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}var bM=Math.max,SM=Math.min;function EM(t,r,e){for(var n=-1,i=e.length;++n<i;){var a=e[n],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":r-=o;break;case"take":r=SM(r,t+o);break;case"takeRight":t=bM(t,r-o);break}}return{start:t,end:r}}var _M=1,TM=2,LM=Math.min;function RM(){var t=this.__wrapped__.value(),r=this.__dir__,e=_e(t),n=r<0,i=e?t.length:0,a=EM(0,i,this.__views__),o=a.start,s=a.end,c=s-o,d=n?s:o-1,h=this.__iteratees__,v=h.length,g=0,C=LM(c,this.__takeCount__);if(!e||!n&&i==c&&C==c)return dL(t,this.__actions__);var w=[];e:for(;c--&&g<C;){d+=r;for(var S=-1,_=t[d];++S<v;){var T=h[S],M=T.iteratee,D=T.type,B=M(_);if(D==TM)_=B;else if(!B){if(D==_M)continue e;break e}}w[g++]=_}return w}var AM="4.17.21",IM=2,OM=1,MM=3,wL=4294967295,DM=Array.prototype,BM=Object.prototype,xL=BM.hasOwnProperty,bL=er?er.iterator:void 0,PM=Math.max,SL=Math.min,ZE=function(t){return function(r,e,n){if(n==null){var i=it(e),a=i&&bt(e),o=a&&a.length&&qm(e,a);(o?o.length:i)||(n=e,e=r,r=this)}return t(r,e,n)}}(PT);P.after=Xt.after,P.ary=Xt.ary,P.assign=$e.assign,P.assignIn=$e.assignIn,P.assignInWith=$e.assignInWith,P.assignWith=$e.assignWith,P.at=$e.at,P.before=Xt.before,P.bind=Xt.bind,P.bindAll=yt.bindAll,P.bindKey=Xt.bindKey,P.castArray=Pe.castArray,P.chain=ia.chain,P.chunk=Ee.chunk,P.compact=Ee.compact,P.concat=Ee.concat,P.cond=yt.cond,P.conforms=yt.conforms,P.constant=yt.constant,P.countBy=St.countBy,P.create=$e.create,P.curry=Xt.curry,P.curryRight=Xt.curryRight,P.debounce=Xt.debounce,P.defaults=$e.defaults,P.defaultsDeep=$e.defaultsDeep,P.defer=Xt.defer,P.delay=Xt.delay,P.difference=Ee.difference,P.differenceBy=Ee.differenceBy,P.differenceWith=Ee.differenceWith,P.drop=Ee.drop,P.dropRight=Ee.dropRight,P.dropRightWhile=Ee.dropRightWhile,P.dropWhile=Ee.dropWhile,P.fill=Ee.fill,P.filter=St.filter,P.flatMap=St.flatMap,P.flatMapDeep=St.flatMapDeep,P.flatMapDepth=St.flatMapDepth,P.flatten=Ee.flatten,P.flattenDeep=Ee.flattenDeep,P.flattenDepth=Ee.flattenDepth,P.flip=Xt.flip,P.flow=yt.flow,P.flowRight=yt.flowRight,P.fromPairs=Ee.fromPairs,P.functions=$e.functions,P.functionsIn=$e.functionsIn,P.groupBy=St.groupBy,P.initial=Ee.initial,P.intersection=Ee.intersection,P.intersectionBy=Ee.intersectionBy,P.intersectionWith=Ee.intersectionWith,P.invert=$e.invert,P.invertBy=$e.invertBy,P.invokeMap=St.invokeMap,P.iteratee=yt.iteratee,P.keyBy=St.keyBy,P.keys=bt,P.keysIn=$e.keysIn,P.map=St.map,P.mapKeys=$e.mapKeys,P.mapValues=$e.mapValues,P.matches=yt.matches,P.matchesProperty=yt.matchesProperty,P.memoize=Xt.memoize,P.merge=$e.merge,P.mergeWith=$e.mergeWith,P.method=yt.method,P.methodOf=yt.methodOf,P.mixin=ZE,P.negate=th,P.nthArg=yt.nthArg,P.omit=$e.omit,P.omitBy=$e.omitBy,P.once=Xt.once,P.orderBy=St.orderBy,P.over=yt.over,P.overArgs=Xt.overArgs,P.overEvery=yt.overEvery,P.overSome=yt.overSome,P.partial=Xt.partial,P.partialRight=Xt.partialRight,P.partition=St.partition,P.pick=$e.pick,P.pickBy=$e.pickBy,P.property=yt.property,P.propertyOf=yt.propertyOf,P.pull=Ee.pull,P.pullAll=Ee.pullAll,P.pullAllBy=Ee.pullAllBy,P.pullAllWith=Ee.pullAllWith,P.pullAt=Ee.pullAt,P.range=yt.range,P.rangeRight=yt.rangeRight,P.rearg=Xt.rearg,P.reject=St.reject,P.remove=Ee.remove,P.rest=Xt.rest,P.reverse=Ee.reverse,P.sampleSize=St.sampleSize,P.set=$e.set,P.setWith=$e.setWith,P.shuffle=St.shuffle,P.slice=Ee.slice,P.sortBy=St.sortBy,P.sortedUniq=Ee.sortedUniq,P.sortedUniqBy=Ee.sortedUniqBy,P.split=vt.split,P.spread=Xt.spread,P.tail=Ee.tail,P.take=Ee.take,P.takeRight=Ee.takeRight,P.takeRightWhile=Ee.takeRightWhile,P.takeWhile=Ee.takeWhile,P.tap=ia.tap,P.throttle=Xt.throttle,P.thru=ah,P.toArray=Pe.toArray,P.toPairs=$e.toPairs,P.toPairsIn=$e.toPairsIn,P.toPath=yt.toPath,P.toPlainObject=Pe.toPlainObject,P.transform=$e.transform,P.unary=Xt.unary,P.union=Ee.union,P.unionBy=Ee.unionBy,P.unionWith=Ee.unionWith,P.uniq=Ee.uniq,P.uniqBy=Ee.uniqBy,P.uniqWith=Ee.uniqWith,P.unset=$e.unset,P.unzip=Ee.unzip,P.unzipWith=Ee.unzipWith,P.update=$e.update,P.updateWith=$e.updateWith,P.values=$e.values,P.valuesIn=$e.valuesIn,P.without=Ee.without,P.words=vt.words,P.wrap=Xt.wrap,P.xor=Ee.xor,P.xorBy=Ee.xorBy,P.xorWith=Ee.xorWith,P.zip=Ee.zip,P.zipObject=Ee.zipObject,P.zipObjectDeep=Ee.zipObjectDeep,P.zipWith=Ee.zipWith,P.entries=$e.toPairs,P.entriesIn=$e.toPairsIn,P.extend=$e.assignIn,P.extendWith=$e.assignInWith,ZE(P,P),P.add=cn.add,P.attempt=yt.attempt,P.camelCase=vt.camelCase,P.capitalize=vt.capitalize,P.ceil=cn.ceil,P.clamp=KE.clamp,P.clone=Pe.clone,P.cloneDeep=Pe.cloneDeep,P.cloneDeepWith=Pe.cloneDeepWith,P.cloneWith=Pe.cloneWith,P.conformsTo=Pe.conformsTo,P.deburr=vt.deburr,P.defaultTo=yt.defaultTo,P.divide=cn.divide,P.endsWith=vt.endsWith,P.eq=Pe.eq,P.escape=vt.escape,P.escapeRegExp=vt.escapeRegExp,P.every=St.every,P.find=St.find,P.findIndex=Ee.findIndex,P.findKey=$e.findKey,P.findLast=St.findLast,P.findLastIndex=Ee.findLastIndex,P.findLastKey=$e.findLastKey,P.floor=cn.floor,P.forEach=St.forEach,P.forEachRight=St.forEachRight,P.forIn=$e.forIn,P.forInRight=$e.forInRight,P.forOwn=$e.forOwn,P.forOwnRight=$e.forOwnRight,P.get=$e.get,P.gt=Pe.gt,P.gte=Pe.gte,P.has=$e.has,P.hasIn=$e.hasIn,P.head=Ee.head,P.identity=yr,P.includes=St.includes,P.indexOf=Ee.indexOf,P.inRange=KE.inRange,P.invoke=$e.invoke,P.isArguments=Pe.isArguments,P.isArray=_e,P.isArrayBuffer=Pe.isArrayBuffer,P.isArrayLike=Pe.isArrayLike,P.isArrayLikeObject=Pe.isArrayLikeObject,P.isBoolean=Pe.isBoolean,P.isBuffer=Pe.isBuffer,P.isDate=Pe.isDate,P.isElement=Pe.isElement,P.isEmpty=Pe.isEmpty,P.isEqual=Pe.isEqual,P.isEqualWith=Pe.isEqualWith,P.isError=Pe.isError,P.isFinite=Pe.isFinite,P.isFunction=Pe.isFunction,P.isInteger=Pe.isInteger,P.isLength=Pe.isLength,P.isMap=Pe.isMap,P.isMatch=Pe.isMatch,P.isMatchWith=Pe.isMatchWith,P.isNaN=Pe.isNaN,P.isNative=Pe.isNative,P.isNil=Pe.isNil,P.isNull=Pe.isNull,P.isNumber=Pe.isNumber,P.isObject=it,P.isObjectLike=Pe.isObjectLike,P.isPlainObject=Pe.isPlainObject,P.isRegExp=Pe.isRegExp,P.isSafeInteger=Pe.isSafeInteger,P.isSet=Pe.isSet,P.isString=Pe.isString,P.isSymbol=Pe.isSymbol,P.isTypedArray=Pe.isTypedArray,P.isUndefined=Pe.isUndefined,P.isWeakMap=Pe.isWeakMap,P.isWeakSet=Pe.isWeakSet,P.join=Ee.join,P.kebabCase=vt.kebabCase,P.last=Fe,P.lastIndexOf=Ee.lastIndexOf,P.lowerCase=vt.lowerCase,P.lowerFirst=vt.lowerFirst,P.lt=Pe.lt,P.lte=Pe.lte,P.max=cn.max,P.maxBy=cn.maxBy,P.mean=cn.mean,P.meanBy=cn.meanBy,P.min=cn.min,P.minBy=cn.minBy,P.stubArray=yt.stubArray,P.stubFalse=yt.stubFalse,P.stubObject=yt.stubObject,P.stubString=yt.stubString,P.stubTrue=yt.stubTrue,P.multiply=cn.multiply,P.nth=Ee.nth,P.noop=yt.noop,P.now=CM.now,P.pad=vt.pad,P.padEnd=vt.padEnd,P.padStart=vt.padStart,P.parseInt=vt.parseInt,P.random=KE.random,P.reduce=St.reduce,P.reduceRight=St.reduceRight,P.repeat=vt.repeat,P.replace=vt.replace,P.result=$e.result,P.round=cn.round,P.sample=St.sample,P.size=St.size,P.snakeCase=vt.snakeCase,P.some=St.some,P.sortedIndex=Ee.sortedIndex,P.sortedIndexBy=Ee.sortedIndexBy,P.sortedIndexOf=Ee.sortedIndexOf,P.sortedLastIndex=Ee.sortedLastIndex,P.sortedLastIndexBy=Ee.sortedLastIndexBy,P.sortedLastIndexOf=Ee.sortedLastIndexOf,P.startCase=vt.startCase,P.startsWith=vt.startsWith,P.subtract=cn.subtract,P.sum=cn.sum,P.sumBy=cn.sumBy,P.template=vt.template,P.times=yt.times,P.toFinite=Pe.toFinite,P.toInteger=Ve,P.toLength=Pe.toLength,P.toLower=vt.toLower,P.toNumber=Pe.toNumber,P.toSafeInteger=Pe.toSafeInteger,P.toString=Pe.toString,P.toUpper=vt.toUpper,P.trim=vt.trim,P.trimEnd=vt.trimEnd,P.trimStart=vt.trimStart,P.truncate=vt.truncate,P.unescape=vt.unescape,P.uniqueId=yt.uniqueId,P.upperCase=vt.upperCase,P.upperFirst=vt.upperFirst,P.each=St.forEach,P.eachRight=St.forEachRight,P.first=Ee.head,ZE(P,function(){var t={};return Gn(P,function(r,e){xL.call(P.prototype,e)||(t[e]=r)}),t}(),{chain:!1}),P.VERSION=AM,(P.templateSettings=vt.templateSettings).imports._=P,Or(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){P[t].placeholder=P}),Or(["drop","take"],function(t,r){Qe.prototype[t]=function(e){e=e===void 0?1:PM(Ve(e),0);var n=this.__filtered__&&!r?new Qe(this):this.clone();return n.__filtered__?n.__takeCount__=SL(e,n.__takeCount__):n.__views__.push({size:SL(e,wL),type:t+(n.__dir__<0?"Right":"")}),n},Qe.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Or(["filter","map","takeWhile"],function(t,r){var e=r+1,n=e==OM||e==MM;Qe.prototype[t]=function(i){var a=this.clone();return a.__iteratees__.push({iteratee:He(i),type:e}),a.__filtered__=a.__filtered__||n,a}}),Or(["head","last"],function(t,r){var e="take"+(r?"Right":"");Qe.prototype[t]=function(){return this[e](1).value()[0]}}),Or(["initial","tail"],function(t,r){var e="drop"+(r?"":"Right");Qe.prototype[t]=function(){return this.__filtered__?new Qe(this):this[e](1)}}),Qe.prototype.compact=function(){return this.filter(yr)},Qe.prototype.find=function(t){return this.filter(t).head()},Qe.prototype.findLast=function(t){return this.reverse().find(t)},Qe.prototype.invokeMap=je(function(t,r){return typeof t=="function"?new Qe(this):this.map(function(e){return eh(e,t,r)})}),Qe.prototype.reject=function(t){return this.filter(th(He(t)))},Qe.prototype.slice=function(t,r){t=Ve(t);var e=this;return e.__filtered__&&(t>0||r<0)?new Qe(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),r!==void 0&&(r=Ve(r),e=r<0?e.dropRight(-r):e.take(r-t)),e)},Qe.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Qe.prototype.toArray=function(){return this.take(wL)},Gn(Qe.prototype,function(t,r){var e=/^(?:filter|find|map|reject)|While$/.test(r),n=/^(?:head|last)$/.test(r),i=P[n?"take"+(r=="last"?"Right":""):r],a=n||/^find/.test(r);i&&(P.prototype[r]=function(){var o=this.__wrapped__,s=n?[1]:arguments,c=o instanceof Qe,d=s[0],h=c||_e(o),v=function(T){var M=i.apply(P,ji([T],s));return n&&g?M[0]:M};h&&e&&typeof d=="function"&&d.length!=1&&(c=h=!1);var g=this.__chain__,C=!!this.__actions__.length,w=a&&!g,S=c&&!C;if(!a&&h){o=S?o:new Qe(this);var _=t.apply(o,s);return _.__actions__.push({func:ah,args:[v],thisArg:void 0}),new gn(_,g)}return w&&S?t.apply(this,s):(_=this.thru(v),w?n?_.value()[0]:_.value():_)})}),Or(["pop","push","shift","sort","splice","unshift"],function(t){var r=DM[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);P.prototype[t]=function(){var i=arguments;if(n&&!this.__chain__){var a=this.value();return r.apply(_e(a)?a:[],i)}return this[e](function(o){return r.apply(_e(o)?o:[],i)})}}),Gn(Qe.prototype,function(t,r){var e=P[r];if(e){var n=e.name+"";xL.call(Kt,n)||(Kt[n]=[]),Kt[n].push({name:r,func:e})}}),Kt[Wi(void 0,IM).name]=[{name:"wrapper",func:void 0}],Qe.prototype.clone=wM,Qe.prototype.reverse=xM,Qe.prototype.value=RM,P.prototype.at=ia.at,P.prototype.chain=ia.wrapperChain,P.prototype.commit=ia.commit,P.prototype.next=ia.next,P.prototype.plant=ia.plant,P.prototype.reverse=ia.reverse,P.prototype.toJSON=P.prototype.valueOf=P.prototype.value=ia.value,P.prototype.first=P.prototype.head,bL&&(P.prototype[bL]=ia.toIterator);var EL={exports:{}};(function(t){(function(r){var e=/^\s+/,n=/\s+$/,i=0,a=r.round,o=r.min,s=r.max,c=r.random;function d(F,X){if(F=F||"",X=X||{},F instanceof d)return F;if(!(this instanceof d))return new d(F,X);var z=h(F);this._originalInput=F,this._r=z.r,this._g=z.g,this._b=z.b,this._a=z.a,this._roundA=a(100*this._a)/100,this._format=X.format||z.format,this._gradientType=X.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=z.ok,this._tc_id=i++}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var F=this.toRgb();return(F.r*299+F.g*587+F.b*114)/1e3},getLuminance:function(){var F=this.toRgb(),X,z,oe,we,xe,dt;return X=F.r/255,z=F.g/255,oe=F.b/255,X<=.03928?we=X/12.92:we=r.pow((X+.055)/1.055,2.4),z<=.03928?xe=z/12.92:xe=r.pow((z+.055)/1.055,2.4),oe<=.03928?dt=oe/12.92:dt=r.pow((oe+.055)/1.055,2.4),.2126*we+.7152*xe+.0722*dt},setAlpha:function(F){return this._a=ze(F),this._roundA=a(100*this._a)/100,this},toHsv:function(){var F=w(this._r,this._g,this._b);return{h:F.h*360,s:F.s,v:F.v,a:this._a}},toHsvString:function(){var F=w(this._r,this._g,this._b),X=a(F.h*360),z=a(F.s*100),oe=a(F.v*100);return this._a==1?"hsv("+X+", "+z+"%, "+oe+"%)":"hsva("+X+", "+z+"%, "+oe+"%, "+this._roundA+")"},toHsl:function(){var F=g(this._r,this._g,this._b);return{h:F.h*360,s:F.s,l:F.l,a:this._a}},toHslString:function(){var F=g(this._r,this._g,this._b),X=a(F.h*360),z=a(F.s*100),oe=a(F.l*100);return this._a==1?"hsl("+X+", "+z+"%, "+oe+"%)":"hsla("+X+", "+z+"%, "+oe+"%, "+this._roundA+")"},toHex:function(F){return _(this._r,this._g,this._b,F)},toHexString:function(F){return"#"+this.toHex(F)},toHex8:function(F){return T(this._r,this._g,this._b,this._a,F)},toHex8String:function(F){return"#"+this.toHex8(F)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(Ie(this._r,255)*100)+"%",g:a(Ie(this._g,255)*100)+"%",b:a(Ie(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+a(Ie(this._r,255)*100)+"%, "+a(Ie(this._g,255)*100)+"%, "+a(Ie(this._b,255)*100)+"%)":"rgba("+a(Ie(this._r,255)*100)+"%, "+a(Ie(this._g,255)*100)+"%, "+a(Ie(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:et[_(this._r,this._g,this._b,!0)]||!1},toFilter:function(F){var X="#"+M(this._r,this._g,this._b,this._a),z=X,oe=this._gradientType?"GradientType = 1, ":"";if(F){var we=d(F);z="#"+M(we._r,we._g,we._b,we._a)}return"progid:DXImageTransform.Microsoft.gradient("+oe+"startColorstr="+X+",endColorstr="+z+")"},toString:function(F){var X=!!F;F=F||this._format;var z=!1,oe=this._a<1&&this._a>=0,we=!X&&oe&&(F==="hex"||F==="hex6"||F==="hex3"||F==="hex4"||F==="hex8"||F==="name");return we?F==="name"&&this._a===0?this.toName():this.toRgbString():(F==="rgb"&&(z=this.toRgbString()),F==="prgb"&&(z=this.toPercentageRgbString()),(F==="hex"||F==="hex6")&&(z=this.toHexString()),F==="hex3"&&(z=this.toHexString(!0)),F==="hex4"&&(z=this.toHex8String(!0)),F==="hex8"&&(z=this.toHex8String()),F==="name"&&(z=this.toName()),F==="hsl"&&(z=this.toHslString()),F==="hsv"&&(z=this.toHsvString()),z||this.toHexString())},clone:function(){return d(this.toString())},_applyModification:function(F,X){var z=F.apply(null,[this].concat([].slice.call(X)));return this._r=z._r,this._g=z._g,this._b=z._b,this.setAlpha(z._a),this},lighten:function(){return this._applyModification(V,arguments)},brighten:function(){return this._applyModification(q,arguments)},darken:function(){return this._applyModification(J,arguments)},desaturate:function(){return this._applyModification(D,arguments)},saturate:function(){return this._applyModification(B,arguments)},greyscale:function(){return this._applyModification(G,arguments)},spin:function(){return this._applyModification(te,arguments)},_applyCombination:function(F,X){return F.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(Te,arguments)},complement:function(){return this._applyCombination(se,arguments)},monochromatic:function(){return this._applyCombination(le,arguments)},splitcomplement:function(){return this._applyCombination(me,arguments)},triad:function(){return this._applyCombination(ue,arguments)},tetrad:function(){return this._applyCombination(ce,arguments)}},d.fromRatio=function(F,X){if(typeof F=="object"){var z={};for(var oe in F)F.hasOwnProperty(oe)&&(oe==="a"?z[oe]=F[oe]:z[oe]=Ct(F[oe]));F=z}return d(F,X)};function h(F){var X={r:0,g:0,b:0},z=1,oe=null,we=null,xe=null,dt=!1,Mt=!1;return typeof F=="string"&&(F=_h(F)),typeof F=="object"&&(Un(F.r)&&Un(F.g)&&Un(F.b)?(X=v(F.r,F.g,F.b),dt=!0,Mt=String(F.r).substr(-1)==="%"?"prgb":"rgb"):Un(F.h)&&Un(F.s)&&Un(F.v)?(oe=Ct(F.s),we=Ct(F.v),X=S(F.h,oe,we),dt=!0,Mt="hsv"):Un(F.h)&&Un(F.s)&&Un(F.l)&&(oe=Ct(F.s),xe=Ct(F.l),X=C(F.h,oe,xe),dt=!0,Mt="hsl"),F.hasOwnProperty("a")&&(z=F.a)),z=ze(z),{ok:dt,format:F.format||Mt,r:o(255,s(X.r,0)),g:o(255,s(X.g,0)),b:o(255,s(X.b,0)),a:z}}function v(F,X,z){return{r:Ie(F,255)*255,g:Ie(X,255)*255,b:Ie(z,255)*255}}function g(F,X,z){F=Ie(F,255),X=Ie(X,255),z=Ie(z,255);var oe=s(F,X,z),we=o(F,X,z),xe,dt,Mt=(oe+we)/2;if(oe==we)xe=dt=0;else{var Gt=oe-we;switch(dt=Mt>.5?Gt/(2-oe-we):Gt/(oe+we),oe){case F:xe=(X-z)/Gt+(X<z?6:0);break;case X:xe=(z-F)/Gt+2;break;case z:xe=(F-X)/Gt+4;break}xe/=6}return{h:xe,s:dt,l:Mt}}function C(F,X,z){var oe,we,xe;F=Ie(F,360),X=Ie(X,100),z=Ie(z,100);function dt(Sr,Oi,dn){return dn<0&&(dn+=1),dn>1&&(dn-=1),dn<1/6?Sr+(Oi-Sr)*6*dn:dn<1/2?Oi:dn<2/3?Sr+(Oi-Sr)*(2/3-dn)*6:Sr}if(X===0)oe=we=xe=z;else{var Mt=z<.5?z*(1+X):z+X-z*X,Gt=2*z-Mt;oe=dt(Gt,Mt,F+1/3),we=dt(Gt,Mt,F),xe=dt(Gt,Mt,F-1/3)}return{r:oe*255,g:we*255,b:xe*255}}function w(F,X,z){F=Ie(F,255),X=Ie(X,255),z=Ie(z,255);var oe=s(F,X,z),we=o(F,X,z),xe,dt,Mt=oe,Gt=oe-we;if(dt=oe===0?0:Gt/oe,oe==we)xe=0;else{switch(oe){case F:xe=(X-z)/Gt+(X<z?6:0);break;case X:xe=(z-F)/Gt+2;break;case z:xe=(F-X)/Gt+4;break}xe/=6}return{h:xe,s:dt,v:Mt}}function S(F,X,z){F=Ie(F,360)*6,X=Ie(X,100),z=Ie(z,100);var oe=r.floor(F),we=F-oe,xe=z*(1-X),dt=z*(1-we*X),Mt=z*(1-(1-we)*X),Gt=oe%6,Sr=[z,dt,xe,xe,Mt,z][Gt],Oi=[Mt,z,z,dt,xe,xe][Gt],dn=[xe,xe,Mt,z,z,dt][Gt];return{r:Sr*255,g:Oi*255,b:dn*255}}function _(F,X,z,oe){var we=[ut(a(F).toString(16)),ut(a(X).toString(16)),ut(a(z).toString(16))];return oe&&we[0].charAt(0)==we[0].charAt(1)&&we[1].charAt(0)==we[1].charAt(1)&&we[2].charAt(0)==we[2].charAt(1)?we[0].charAt(0)+we[1].charAt(0)+we[2].charAt(0):we.join("")}function T(F,X,z,oe,we){var xe=[ut(a(F).toString(16)),ut(a(X).toString(16)),ut(a(z).toString(16)),ut(An(oe))];return we&&xe[0].charAt(0)==xe[0].charAt(1)&&xe[1].charAt(0)==xe[1].charAt(1)&&xe[2].charAt(0)==xe[2].charAt(1)&&xe[3].charAt(0)==xe[3].charAt(1)?xe[0].charAt(0)+xe[1].charAt(0)+xe[2].charAt(0)+xe[3].charAt(0):xe.join("")}function M(F,X,z,oe){var we=[ut(An(oe)),ut(a(F).toString(16)),ut(a(X).toString(16)),ut(a(z).toString(16))];return we.join("")}d.equals=function(F,X){return!F||!X?!1:d(F).toRgbString()==d(X).toRgbString()},d.random=function(){return d.fromRatio({r:c(),g:c(),b:c()})};function D(F,X){X=X===0?0:X||10;var z=d(F).toHsl();return z.s-=X/100,z.s=Je(z.s),d(z)}function B(F,X){X=X===0?0:X||10;var z=d(F).toHsl();return z.s+=X/100,z.s=Je(z.s),d(z)}function G(F){return d(F).desaturate(100)}function V(F,X){X=X===0?0:X||10;var z=d(F).toHsl();return z.l+=X/100,z.l=Je(z.l),d(z)}function q(F,X){X=X===0?0:X||10;var z=d(F).toRgb();return z.r=s(0,o(255,z.r-a(255*-(X/100)))),z.g=s(0,o(255,z.g-a(255*-(X/100)))),z.b=s(0,o(255,z.b-a(255*-(X/100)))),d(z)}function J(F,X){X=X===0?0:X||10;var z=d(F).toHsl();return z.l-=X/100,z.l=Je(z.l),d(z)}function te(F,X){var z=d(F).toHsl(),oe=(z.h+X)%360;return z.h=oe<0?360+oe:oe,d(z)}function se(F){var X=d(F).toHsl();return X.h=(X.h+180)%360,d(X)}function ue(F){var X=d(F).toHsl(),z=X.h;return[d(F),d({h:(z+120)%360,s:X.s,l:X.l}),d({h:(z+240)%360,s:X.s,l:X.l})]}function ce(F){var X=d(F).toHsl(),z=X.h;return[d(F),d({h:(z+90)%360,s:X.s,l:X.l}),d({h:(z+180)%360,s:X.s,l:X.l}),d({h:(z+270)%360,s:X.s,l:X.l})]}function me(F){var X=d(F).toHsl(),z=X.h;return[d(F),d({h:(z+72)%360,s:X.s,l:X.l}),d({h:(z+216)%360,s:X.s,l:X.l})]}function Te(F,X,z){X=X||6,z=z||30;var oe=d(F).toHsl(),we=360/z,xe=[d(F)];for(oe.h=(oe.h-(we*X>>1)+720)%360;--X;)oe.h=(oe.h+we)%360,xe.push(d(oe));return xe}function le(F,X){X=X||6;for(var z=d(F).toHsv(),oe=z.h,we=z.s,xe=z.v,dt=[],Mt=1/X;X--;)dt.push(d({h:oe,s:we,v:xe})),xe=(xe+Mt)%1;return dt}d.mix=function(F,X,z){z=z===0?0:z||50;var oe=d(F).toRgb(),we=d(X).toRgb(),xe=z/100,dt={r:(we.r-oe.r)*xe+oe.r,g:(we.g-oe.g)*xe+oe.g,b:(we.b-oe.b)*xe+oe.b,a:(we.a-oe.a)*xe+oe.a};return d(dt)},d.readability=function(F,X){var z=d(F),oe=d(X);return(r.max(z.getLuminance(),oe.getLuminance())+.05)/(r.min(z.getLuminance(),oe.getLuminance())+.05)},d.isReadable=function(F,X,z){var oe=d.readability(F,X),we,xe;switch(xe=!1,we=V_(z),we.level+we.size){case"AAsmall":case"AAAlarge":xe=oe>=4.5;break;case"AAlarge":xe=oe>=3;break;case"AAAsmall":xe=oe>=7;break}return xe},d.mostReadable=function(F,X,z){var oe=null,we=0,xe,dt,Mt,Gt;z=z||{},dt=z.includeFallbackColors,Mt=z.level,Gt=z.size;for(var Sr=0;Sr<X.length;Sr++)xe=d.readability(F,X[Sr]),xe>we&&(we=xe,oe=d(X[Sr]));return d.isReadable(F,oe,{level:Mt,size:Gt})||!dt?oe:(z.includeFallbackColors=!1,d.mostReadable(F,["#fff","#000"],z))};var pe=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},et=d.hexNames=Xe(pe);function Xe(F){var X={};for(var z in F)F.hasOwnProperty(z)&&(X[F[z]]=z);return X}function ze(F){return F=parseFloat(F),(isNaN(F)||F<0||F>1)&&(F=1),F}function Ie(F,X){Nt(F)&&(F="100%");var z=ot(F);return F=o(X,s(0,parseFloat(F))),z&&(F=parseInt(F*X,10)/100),r.abs(F-X)<1e-6?1:F%X/parseFloat(X)}function Je(F){return o(1,s(0,F))}function ke(F){return parseInt(F,16)}function Nt(F){return typeof F=="string"&&F.indexOf(".")!=-1&&parseFloat(F)===1}function ot(F){return typeof F=="string"&&F.indexOf("%")!=-1}function ut(F){return F.length==1?"0"+F:""+F}function Ct(F){return F<=1&&(F=F*100+"%"),F}function An(F){return r.round(parseFloat(F)*255).toString(16)}function qa(F){return ke(F)/255}var or=function(){var F="[-\\+]?\\d+%?",X="[-\\+]?\\d*\\.\\d+%?",z="(?:"+X+")|(?:"+F+")",oe="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",we="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?";return{CSS_UNIT:new RegExp(z),rgb:new RegExp("rgb"+oe),rgba:new RegExp("rgba"+we),hsl:new RegExp("hsl"+oe),hsla:new RegExp("hsla"+we),hsv:new RegExp("hsv"+oe),hsva:new RegExp("hsva"+we),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Un(F){return!!or.CSS_UNIT.exec(F)}function _h(F){F=F.replace(e,"").replace(n,"").toLowerCase();var X=!1;if(pe[F])F=pe[F],X=!0;else if(F=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var z;return(z=or.rgb.exec(F))?{r:z[1],g:z[2],b:z[3]}:(z=or.rgba.exec(F))?{r:z[1],g:z[2],b:z[3],a:z[4]}:(z=or.hsl.exec(F))?{h:z[1],s:z[2],l:z[3]}:(z=or.hsla.exec(F))?{h:z[1],s:z[2],l:z[3],a:z[4]}:(z=or.hsv.exec(F))?{h:z[1],s:z[2],v:z[3]}:(z=or.hsva.exec(F))?{h:z[1],s:z[2],v:z[3],a:z[4]}:(z=or.hex8.exec(F))?{r:ke(z[1]),g:ke(z[2]),b:ke(z[3]),a:qa(z[4]),format:X?"name":"hex8"}:(z=or.hex6.exec(F))?{r:ke(z[1]),g:ke(z[2]),b:ke(z[3]),format:X?"name":"hex"}:(z=or.hex4.exec(F))?{r:ke(z[1]+""+z[1]),g:ke(z[2]+""+z[2]),b:ke(z[3]+""+z[3]),a:qa(z[4]+""+z[4]),format:X?"name":"hex8"}:(z=or.hex3.exec(F))?{r:ke(z[1]+""+z[1]),g:ke(z[2]+""+z[2]),b:ke(z[3]+""+z[3]),format:X?"name":"hex"}:!1}function V_(F){var X,z;return F=F||{level:"AA",size:"small"},X=(F.level||"AA").toUpperCase(),z=(F.size||"small").toLowerCase(),X!=="AA"&&X!=="AAA"&&(X="AA"),z!=="small"&&z!=="large"&&(z="small"),{level:X,size:z}}t.exports?t.exports=d:window.tinycolor=d})(Math)})(EL);var _L=EL.exports,NM="#FFFFFF",FM="#000000",HM=[95,85,75,30,15,0,15,30,45,60,80],zM=15,TL=function(t){return _L(t).getLuminance()<=.5},GM=[{fontColorIndex:0,bgColorIndex:3},{fontColorIndex:13,bgColorIndex:8},{fontColorIndex:14,bgColorIndex:1}],$M=function(t){for(var r=[],e=0;e<11;e++){var n=HM[e];r.push(oh(n===0?t:_L.mix(t,e<5?NM:FM,n).toHexString()))}return r},QE=function(t){t===void 0&&(t={});var r=Array.from(Array(zM)).fill(Id),e=t.basicColorRelations,n=e===void 0?[]:e,i=t.brandColor,a=$M(i);return n.forEach(function(o){r[o.basicColorIndex]=a[o.standardColorIndex]}),GM.forEach(function(o){var s=o.fontColorIndex,c=o.bgColorIndex;r[s]=TL(r[c])?Id:Ad}),k(k({},t),{basicColors:r})},WM={brandColor:"#3471F9",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:5},{basicColorIndex:4,standardColorIndex:6},{basicColorIndex:5,standardColorIndex:6},{basicColorIndex:6,standardColorIndex:6},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:4},{basicColorIndex:11,standardColorIndex:4},{basicColorIndex:12,standardColorIndex:5}]},kM=QE(WM),UM={brandColor:"#326EF4",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:5},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:5},{basicColorIndex:12,standardColorIndex:5}]},YM=QE(UM),VM={brandColor:"#9DA7B6",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:8},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:3},{basicColorIndex:12,standardColorIndex:3}]},XM=QE(VM),jM={default:YM,colorful:kM,gray:XM},ni="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif",qM=12,KM={\u5C0F\u8BA1:"\u5C0F\u8BA1",\u603B\u8BA1:"\u603B\u8BA1",\u603B\u548C:"\uFF08\u603B\u548C\uFF09",\u9879:"\u9879",\u5DF2\u9009\u62E9:"\u5DF2\u9009\u62E9",\u5E8F\u53F7:"\u5E8F\u53F7",\u5EA6\u91CF:"\u5EA6\u91CF",\u6570\u503C:"\u6570\u503C",\u5171\u8BA1:"\u5171\u8BA1",\u6761:"\u6761",\u8D8B\u52BF:"\u8D8B\u52BF",\u9690\u85CF:"\u9690\u85CF",\u7EC4\u5185\u5347\u5E8F:"\u7EC4\u5185\u5347\u5E8F",\u5347\u5E8F:"\u5347\u5E8F",\u964D\u5E8F:"\u964D\u5E8F",\u7EC4\u5185\u964D\u5E8F:"\u7EC4\u5185\u964D\u5E8F",\u4E0D\u6392\u5E8F:"\u4E0D\u6392\u5E8F","\uFF0C":"\uFF0C"},ZM={\u5C0F\u8BA1:"Total",\u603B\u8BA1:"Total",\u603B\u548C:"(SUM)",\u9879:"items",\u5DF2\u9009\u62E9:"selected",\u5E8F\u53F7:"Index",\u5EA6\u91CF:"Measure",\u6570\u503C:"Measure",\u5171\u8BA1:"Total",\u6761:"",\u9690\u85CF:"Hide",\u8D8B\u52BF:"Trend",\u7EC4\u5185\u5347\u5E8F:"Group ASC",\u7EC4\u5185\u964D\u5E8F:"Group DESC",\u5347\u5E8F:"ASC",\u964D\u5E8F:"DESC",\u4E0D\u6392\u5E8F:"No order","\uFF0C":", "},LL="zh_CN",JE=LL,a1={zh_CN:KM,en_US:ZM},RL=function(){return JE},pP=function(t){JE=t||LL},QM=function(t){a1=Jm({},a1,t)},gP=function(){return a1},ar=function(t,r){return r===void 0&&(r=t),Me(a1,[JE,t],r)},e_="".concat(Ld,"-tooltip"),t_="".concat(e_,"-container"),JM="".concat(t_,"-show"),e5="".concat(t_,"-hide"),mP="".concat(e_,"-operation"),AL={x:15,y:10},t5=function(){return{key:"hiddenColumns",text:ar("\u9690\u85CF"),icon:"EyeOutlined"}},r5=function(){return{key:"trend",text:ar("\u8D8B\u52BF"),icon:"Trend"}},n5=function(){return[{key:"asc",icon:"groupAsc",text:ar("\u7EC4\u5185\u5347\u5E8F")},{key:"desc",icon:"groupDesc",text:ar("\u7EC4\u5185\u964D\u5E8F")},{key:"none",text:ar("\u4E0D\u6392\u5E8F")}]},i5=function(){return[{key:"asc",icon:"groupAsc",text:ar("\u5347\u5E8F")},{key:"desc",icon:"groupDesc",text:ar("\u964D\u5E8F")},{key:"none",text:ar("\u4E0D\u6392\u5E8F")}]},lh;(function(t){t[t.ALL=0]="ALL",t[t.COL=1]="COL",t[t.ROW=2]="ROW"})(lh||(lh={}));var r_=1,ii;(function(t){t.All="all",t.DetailOnly="detailOnly"})(ii||(ii={}));function br(t){return t==="mobile"?!0:/(iPhone|iPad|SymbianOS|Windows Phone|iPod|iOS|Android)/i.test(navigator.userAgent)}function a5(){return/iPhone/gi.test(navigator.userAgent)&&window.screen.height===812&&window.screen.width===375}function n_(){return/windows/i.test(navigator.userAgent)}var o5=function(t){var r=t||"default";return jM[r.toLowerCase()]},l5=function(t){var r,e,n,i,a,o=(t==null?void 0:t.palette)||o5(t==null?void 0:t.name),s=o.basicColors,c=o.semanticColors,d=o.others,h=(r=t==null?void 0:t.spreadsheet)===null||r===void 0?void 0:r.isTableMode(),v=n_()?"bold":700,g=function(){var C,w;return{bolderText:{fontFamily:ni,fontSize:12,fontWeight:v,fill:s[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:s[6]},text:{fontFamily:ni,fontSize:12,fontWeight:"normal",fill:s[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:s[6]},cell:{crossBackgroundColor:s[1],backgroundColor:s[8],backgroundColorOpacity:1,horizontalBorderColor:s[9],horizontalBorderColorOpacity:1,verticalBorderColor:s[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:8,right:8,bottom:8,left:8},interactionState:{hover:{backgroundColor:s[2],backgroundOpacity:.6},hoverFocus:{backgroundColor:s[2],backgroundOpacity:.6,borderColor:s[14],borderWidth:1,borderOpacity:1},selected:{backgroundColor:s[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},searchResult:{backgroundColor:(C=d==null?void 0:d.results)!==null&&C!==void 0?C:s[2],backgroundOpacity:1},highlight:{backgroundColor:(w=d==null?void 0:d.highlight)!==null&&w!==void 0?w:s[6],backgroundOpacity:1},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1}}},miniChart:{line:{point:{size:2.2,fill:s[6],opacity:1},linkLine:{size:1.5,fill:s[6],opacity:.6}},bar:{intervalPadding:4,fill:s[6],opacity:1},bullet:{progressBar:{widthPercent:.6,height:10,innerHeight:6},comparativeMeasure:{width:1,height:12,fill:s[13],opacity:.25},rangeColors:{good:c==null?void 0:c.green,satisfactory:c.yellow,bad:c.red},backgroundColor:"#E9E9E9"},interval:{height:qM,fill:s[7]}},icon:{fill:s[13],downIconColor:c.red,upIconColor:c.green,size:10,margin:{right:4,left:4}}}};return{cornerCell:{bolderText:{fontFamily:ni,fontSize:12,fontWeight:v,fill:s[0],opacity:1,textAlign:h?"center":"left",textBaseline:"middle"},text:{fontFamily:ni,fontSize:12,fontWeight:v,fill:s[0],opacity:1,textAlign:"right",textBaseline:"middle"},cell:{backgroundColor:s[3],backgroundColorOpacity:1,horizontalBorderColor:s[10],horizontalBorderColorOpacity:1,verticalBorderColor:s[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:0,right:8,bottom:0,left:8}},icon:{fill:s[0],size:10,margin:{right:4,left:4}}},rowCell:{seriesText:{fontFamily:ni,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textBaseline:h?"middle":"top",textAlign:"center"},measureText:{fontFamily:ni,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textAlign:h?"center":"left",textBaseline:"top"},bolderText:{fontFamily:ni,fontSize:12,fontWeight:v,fill:s[14],linkTextFill:s[6],opacity:1,textAlign:h?"center":"left",textBaseline:"top"},text:{fontFamily:ni,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textBaseline:"top",textAlign:h?"center":"left"},cell:{backgroundColor:s[1],backgroundColorOpacity:1,horizontalBorderColor:s[9],horizontalBorderColorOpacity:1,verticalBorderColor:s[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:s[2],backgroundOpacity:.6},selected:{backgroundColor:s[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:(e=d==null?void 0:d.results)!==null&&e!==void 0?e:s[2],backgroundOpacity:1},highlight:{backgroundColor:(n=d==null?void 0:d.highlight)!==null&&n!==void 0?n:s[6],backgroundOpacity:1}}},icon:{fill:s[14],size:10,margin:{right:4,left:4}},seriesNumberWidth:80},colCell:{measureText:{fontFamily:ni,fontSize:12,fontWeight:"normal",fill:s[0],opacity:1,textAlign:"right",textBaseline:"middle"},bolderText:{fontFamily:ni,fontSize:12,fontWeight:v,fill:s[0],opacity:1,textAlign:"center",textBaseline:"middle"},text:{fontFamily:ni,fontSize:12,fontWeight:"normal",fill:s[0],opacity:1,textAlign:"center",textBaseline:"middle"},cell:{backgroundColor:s[3],backgroundColorOpacity:1,horizontalBorderColor:s[10],horizontalBorderColorOpacity:1,verticalBorderColor:s[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:s[4],backgroundOpacity:.6},selected:{backgroundColor:s[4],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:(i=d==null?void 0:d.results)!==null&&i!==void 0?i:s[2],backgroundOpacity:1},highlight:{backgroundColor:(a=d==null?void 0:d.highlight)!==null&&a!==void 0?a:s[6],backgroundOpacity:1}}},icon:{fill:s[0],size:10,margin:{top:6,right:4,bottom:6,left:4}}},dataCell:g(),mergedCell:g(),resizeArea:{size:3,background:s[7],backgroundOpacity:0,guideLineColor:s[7],guideLineDisableColor:"rgba(0,0,0,0.25)",guideLineDash:[3,3],interactionState:{hover:{backgroundColor:s[7],backgroundOpacity:1}}},scrollBar:{trackColor:"rgba(0,0,0,0.01)",thumbHoverColor:"rgba(0,0,0,0.25)",thumbColor:"rgba(0,0,0,0.15)",thumbHorizontalMinSize:32,thumbVerticalMinSize:32,size:br()?3:6,hoverSize:br()?4:8,lineCap:"round"},splitLine:{horizontalBorderColor:s[12],horizontalBorderColorOpacity:.2,horizontalBorderWidth:2,verticalBorderColor:s[11],verticalBorderColorOpacity:.25,verticalBorderWidth:2,showShadow:!0,shadowWidth:8,shadowColors:{left:"rgba(0,0,0,0.1)",right:"rgba(0,0,0,0)"},borderDash:[]},prepareSelectMask:{backgroundColor:s[5],backgroundOpacity:.3},background:{color:s[8],opacity:1}}},Hr=function(){function t(r){this.x=0,this.y=0,this.width=0,this.height=0,this.colIndex=-1,this.level=0,this.isLeaf=!1,this.children=[],this.padding=0;var e=r.id,n=r.key,i=r.value,a=r.label,o=r.parent,s=r.level,c=r.rowIndex,d=r.isTotals,h=r.isGrandTotals,v=r.isSubTotals,g=r.isCollapsed,C=r.isTotalRoot,w=r.hierarchy,S=r.isPivotMode,_=r.seriesNumberWidth,T=r.field,M=r.spreadsheet,D=r.query,B=r.belongsCell,G=r.inCollapseNode,V=r.isTotalMeasure,q=r.isLeaf,J=r.extra;this.id=e,this.key=n,this.value=i,this.label=a||i,this.parent=o,this.level=s,this.rowIndex=c,this.isTotals=d,this.isCollapsed=g,this.hierarchy=w,this.isPivotMode=S,this.seriesNumberWidth=_,this.field=T,this.spreadsheet=M,this.query=D,this.belongsCell=B,this.inCollapseNode=G,this.isTotalMeasure=V,this.isLeaf=q,this.isGrandTotals=h,this.isSubTotals=v,this.isTotalRoot=C,this.extra=J}return t.getFieldPath=function(r,e){if(r&&!r.isTotals||r&&e){for(var n=r.parent,i=[r.field];n&&n.id!==pl;)i.push(n.field),n=n.parent;return i.reverse()}},t.getAllLeaveNodes=function(r){var e=[];if(r.isLeaf)return[r];for(var n=re([],Q(r.children),!1),i=n.shift();i;)i.isLeaf?e.push(i):n.unshift.apply(n,re([],Q(i.children),!1)),i=n.shift();return e},t.getAllChildrenNodes=function(r){var e=[];if(r.isLeaf)return[r];for(var n=re([],Q(r.children||[]),!1),i=n.shift();i;)e.push(i),n.unshift.apply(n,re([],Q(i.children),!1)),i=n.shift();return e},t.getAllBranch=function(r){for(var e=[],n=this.getAllLeaveNodes(r),i=n.shift(),a=[];i;){a.unshift(i);for(var o=i.parent;o&&!Fr(o,r);){a.unshift(o);o=o.parent}e.push(a),i=n.shift(),a=[]}return e},t.blankNode=function(){return new t({id:"",key:"",value:""})},t.rootNode=function(){return new t({id:"root",key:"",value:""})},t.prototype.toJSON=function(){return RE(this,["config","hierarchy","parent","spreadsheet"])},t.prototype.getHeadLeafChild=function(){for(var r=this;!ve(r.children);)r=Qu(r.children);return r},t.prototype.getTotalHeightForTreeHierarchy=function(){return this.height===0||ve(this.children)?this.height:this.children.reduce(function(r,e){return r+e.getTotalHeightForTreeHierarchy()},this.height)},t}(),IL=function(){function t(){this.width=0,this.height=0,this.maxLevel=-1,this.sampleNodesForAllLevels=[],this.sampleNodeForLastLevel=null,this.allNodesWithoutRoot=[],this.indexNode=[]}return t.prototype.getLeaves=function(){return this.allNodesWithoutRoot.filter(function(r){return r.isLeaf})},t.prototype.getNodes=function(r){return r!==void 0?this.allNodesWithoutRoot.filter(function(e){return e.level===r}):this.allNodesWithoutRoot},t.prototype.getNodesLessThanLevel=function(r){return this.allNodesWithoutRoot.filter(function(e){return e.level<=r})},t.prototype.pushNode=function(r,e){e===void 0&&(e=-1),e===-1?this.allNodesWithoutRoot.push(r):this.allNodesWithoutRoot.splice(e,0,r)},t.prototype.pushIndexNode=function(r){this.indexNode.push(r)},t.prototype.getIndexNodes=function(){return this.indexNode},t}(),rc=function(){function t(r){var e=r.label,n=r.isSubTotals,i=r.isGrandTotals,a=r.isTotalRoot;this.label=e,this.isSubTotals=n,this.isGrandTotals=i,this.isTotalRoot=a}return t}(),s5=function(t){var r,e=t.isFirstField,n=t.currentField,i=t.fieldValues,a=t.spreadsheet,o=t.lastField,s=a.getTotalsConfig(e?n:o),c,d;e?s!=null&&s.showGrandTotals&&(c=s.reverseLayout?"unshift":"push",d=new rc({label:s.label,isSubTotals:!1,isGrandTotals:!0,isTotalRoot:!0})):s!=null&&s.showSubTotals&&(P.size(i)>1||P.get(s,"showSubTotals.always")!==!1)&&n!==Ye&&(c=s.reverseSubLayout?"unshift":"push",d=new rc({label:s.subLabel,isSubTotals:!0,isGrandTotals:!1,isTotalRoot:!0})),(r=i[c])===null||r===void 0||r.call(i,d)};function i_(t,r){for(var e={},n=t;n&&n.key;)(!n.isTotalRoot||r)&&n.value!==zi&&(e[n.key]=n.value),n=n.parent;return e}var u5="Transform Data",c5="Header Layout",d5="Data Cell Render",aa=function(){function t(){var r=this;this.debug=!1,this.debugCallback=function(e,n){if(r.debug){var i=performance.now();n();var a=performance.now();console.log(e,"".concat(a-i," ms"))}else n()},this.logger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];r.debug&&console.log.apply(console,re([e],Q(n),!1))}}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.setDebug=function(r){this.debug=r},t}(),f5=`
<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="\u9875\u9762-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">
    <text id="\u2193" fill="#29A294">
        <tspan x="-0.225097656" y="8.5">\u2193</tspan>
    </text>
</g>
</svg>`,h5=`<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="\u9875\u9762-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">
    <text id="\u2191" fill="#FF4D4F">
        <tspan x="-0.225097656" y="8.5">\u2191</tspan>
    </text>
</g>
</svg>
`,v5=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 58 (84663) - https://sketch.com -->
    <title>down</title>
    <desc>Created with Sketch.</desc>
    <g id="\u4E00\u671F\u5F00\u53D1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polygon id="down" fill="#58AE57" transform="translate(3.500000, 4.500000) scale(1, -1) translate(-3.500000, -4.500000) " points="3.5 0 7 9 0 9"></polygon>
    </g>
</svg>`,p5=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 58 (84663) - https://sketch.com -->
    <title>up</title>
    <desc>Created with Sketch.</desc>
    <g id="\u4E00\u671F\u5F00\u53D1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polygon id="up" fill="#F46649" points="3.5 0 7 9 0 9"></polygon>
    </g>
</svg> `,g5=`<svg t="1557124621626" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="17452"
xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
<defs>
  <style type="text/css"></style>
</defs>
<path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 626.944h176c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8h-176A8 8 0 0 1 384 857.984v-56c0-4.416 3.584-8 8-8z m0-424h368c4.416 0 8 3.648 8 8v56a8 8 0 0 1-8 8h-368A8 8 0 0 1 384 433.984v-56c0-4.352 3.584-8 8-8z m528-139.968h-528A8 8 0 0 1 384 222.016v-56c0-4.416 3.584-8 8-8h528c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z m-256 424h-272A8 8 0 0 1 384 646.016v-56c0-4.416 3.584-8 8-8h272c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z" p-id="17453"></path>
</svg>`,m5=`<svg t="1557124685600" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17561"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h176A8 8 0 0 0 576 222.016v-56a8 8 0 0 0-8-8h-176A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h368a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-368A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m-256-424h-272A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h272a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17562"></path>
</svg>`,y5=`<svg t="1557124695786" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17670"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 62.976h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17671"></path>
</svg>`,C5=`<svg t="1557124710652" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17779"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17780"></path>
</svg>`,w5=`<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="\u8BBE\u8BA1\u8F93\u51FA" stroke="none" stroke-width="1" fill-opacity="0.25" fill-rule="evenodd">
    <g id="\u8BBE\u8BA1\u8F93\u51FA-\u79FB\u52A8\u7AEF\u6307\u6807\u8BE6\u60C5\u9875-\u9605\u8BFB\u7AEF" transform="translate(-3275.000000, -724.000000)" fill-rule="nonzero">
        <g id="\u7F16\u7EC4-39" transform="translate(3064.500000, 667.000000)">
            <g id="\u7F16\u7EC4-36" transform="translate(80.500000, 44.000000)">
                <g id="\u4E0D\u6392\u5E8F" transform="translate(130.000000, 13.000000)">
                    <path d="M12.0009375,12.40625 C12.0696875,12.40625 12.1259375,12.4625 12.1259375,12.53125 L12.1259375,12.53125 L12.1259375,13.40625 C12.1259375,13.475 12.0696875,13.53125 12.0009375,13.53125 L12.0009375,13.53125 L6.25093747,13.53125 C6.18218747,13.53125 6.12593747,13.475 6.12593747,13.40625 L6.12593747,13.40625 L6.12593747,12.53125 C6.12593747,12.4625 6.18218747,12.40625 6.25093747,12.40625 L6.25093747,12.40625 Z M2.93949997,2.5801875 L2.97437497,2.6109375 L4.72437497,4.828125 C4.78062497,4.89776786 4.74503823,4.99725765 4.66779698,5.02426203 L4.62593747,5.03125 L3.438,5.03089062 L3.43843747,10.9691406 L4.62593747,10.9691406 C4.73062497,10.9691406 4.78999997,11.0910156 4.72437497,11.1722656 L2.97437497,13.3894531 C2.92437497,13.4535156 2.82749997,13.4535156 2.77749997,13.3894531 L1.02749997,11.1722656 C0.961874969,11.0894531 1.02124997,10.9691406 1.12593747,10.9691406 L2.31343747,10.9691406 L2.313,5.03089062 L1.12593747,5.03125 C1.03620533,5.03125 0.979764,4.94285714 1.00679571,4.8654519 L1.02749997,4.828125 L2.77749997,2.6109375 C2.81749997,2.5596875 2.88749997,2.5494375 2.93949997,2.5801875 Z M10.5009375,9.09375 C10.5696875,9.09375 10.6259375,9.15 10.6259375,9.21875 L10.6259375,9.21875 L10.6259375,10.09375 C10.6259375,10.1625 10.5696875,10.21875 10.5009375,10.21875 L10.5009375,10.21875 L6.25093747,10.21875 C6.18218747,10.21875 6.12593747,10.1625 6.12593747,10.09375 L6.12593747,10.09375 L6.12593747,9.21875 C6.12593747,9.15 6.18218747,9.09375 6.25093747,9.09375 L6.25093747,9.09375 Z M14.5009375,5.78125 C14.5696875,5.78125 14.6259375,5.8375 14.6259375,5.90625 L14.6259375,5.90625 L14.6259375,6.78125 C14.6259375,6.85 14.5696875,6.90625 14.5009375,6.90625 L14.5009375,6.90625 L6.25093747,6.90625 C6.18218747,6.90625 6.12593747,6.85 6.12593747,6.78125 L6.12593747,6.78125 L6.12593747,5.90625 C6.12593747,5.8375 6.18218747,5.78125 6.25093747,5.78125 L6.25093747,5.78125 Z M9.00093747,2.46875 C9.06968747,2.46875 9.12593747,2.525 9.12593747,2.59375 L9.12593747,2.59375 L9.12593747,3.46875 C9.12593747,3.5375 9.06968747,3.59375 9.00093747,3.59375 L9.00093747,3.59375 L6.25093747,3.59375 C6.18218747,3.59375 6.12593747,3.5375 6.12593747,3.46875 L6.12593747,3.46875 L6.12593747,2.59375 C6.12593747,2.525 6.18218747,2.46875 6.25093747,2.46875 L6.25093747,2.46875 Z" id="\u5F62\u72B6\u7ED3\u5408"></path>
                </g>
            </g>
        </g>
    </g>q
</g>
</svg>`,x5='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1590389330617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19656" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="" p-id="19657"></path><path d="M464 336c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48-48 21.5-48 48zM536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-272c0-4.4-3.6-8-8-8z" fill="" p-id="19658"></path></svg>',b5=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="23px" height="12px" viewBox="0 0 23 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>\u7F16\u7EC4 8\u5907\u4EFD 3</title>
    <g id="----\u9690\u85CF\u5217\u6807\u6CE8\uFF01" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="\u9690\u85CF\u5217\u6807\u6CE8" transform="translate(-275.000000, -824.000000)">
            <rect fill="#FFFFFF" x="0" y="0" width="1333" height="1167"></rect>
            <g id="\u7F16\u7EC4-8\u5907\u4EFD-3" transform="translate(275.000000, 824.000000)">
                <rect id="\u77E9\u5F62" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="0.5" y="0.5" width="11" height="11"></rect>
                <rect id="\u77E9\u5F62\u5907\u4EFD-9" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="11.5" y="0.5" width="11" height="11"></rect>
                <g id="7.Icon/arrow/15.down/fill" transform="translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) " fill="#000000" fill-rule="nonzero" opacity="0.65">
                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>
                </g>
                <g id="7.Icon/arrow/15.down/fill" transform="translate(17.000000, 6.000000) rotate(270.000000) translate(-17.000000, -6.000000) translate(11.000000, 0.000000)" fill="#000000" fill-rule="nonzero" opacity="0.65">
                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>
                </g>
            </g>
            <line x1="286.5" y1="813" x2="286.5" y2="864.5" id="\u8DEF\u5F84-2\u5907\u4EFD-3" stroke="#000000" opacity="0.25"></line>
        </g>
    </g>
</svg>`,S5=`<svg t="1557140120188" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="16909" xmlns:xlink="http://www.w3.org/1999/xlink"
width="200" height="200">
	<defs>
		<style type="text/css">
		</style>
	</defs>
	<path d="M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"
	p-id="16910">
	</path>
	<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"
	p-id="16911">
	</path>
</svg>`,E5=`<svg t="1557140186692" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="17025" xmlns:xlink="http://www.w3.org/1999/xlink"
width="200" height="200">
	<defs>
		<style type="text/css">
		</style>
	</defs>
	<path d="M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"
	p-id="17026">
	</path>
	<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"
	p-id="17027">
	</path>
</svg>`,_5=`<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"
    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>
</svg>
`,T5=`<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    fill-opacity="0.45"
    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"
    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>
</svg>
`,L5=`<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
<defs>
<style type="text/css"></style>
</defs>
<path
d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"
p-id="17621"></path>
</svg>
`,R5=`<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    fill-opacity="0.45"
    d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"
    p-id="17621"></path>
</svg>
`,A5='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1596433821690" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20229" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6c-3.1-3.1-8.2-3.1-11.3 0l-230 229.9L461.4 404c-3.1-3.1-8.2-3.1-11.3 0L266.3 586.7c-3.1 3.1-3.1 8.2 0 11.3l39.5 39.7z" p-id="20230"></path></svg>',I5=`<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1608030723688" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21482" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M547.648 696a32 32 0 0 1 31.488 26.24l0.512 5.76v151.68l145.216-144.512a32 32 0 0 1 40.832-3.648l4.416 3.712a32 32 0 0 1 3.584 40.832l-3.712 4.48-203.072 202.24a32 32 0 0 1-40.768 3.648l-4.416-3.712-202.24-202.24a32 32 0 0 1 40.832-48.96l4.416 3.712 150.912 150.912v-158.144a32 32 0 0 1 32-32z m194.56-529.28l4.928 3.072 233.792 180.224a32 32 0 0 1 1.728 49.28l-4.864 3.52-409.792 245.568a32 32 0 0 1-27.328 2.624l-5.184-2.432-422.4-245.568a32 32 0 0 1-7.552-49.28l4.544-4.032 242.816-180.288a32 32 0 0 1 42.432 47.552l-4.288 3.84-203.84 151.296 364.16 211.648 353.28-211.712-196.608-151.552a32 32 0 0 1-8.896-40l3.136-4.864a32 32 0 0 1 40-8.96zM547.712 28.672a32 32 0 0 1 31.488 26.24l0.512 5.76v396.992a32 32 0 0 1-63.488 5.76l-0.512-5.76V60.736a32 32 0 0 1 32-32z" p-id="21483" fill="currentColor"></path></svg>
`,O5='<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>',OL=Object.freeze({__proto__:null,ArrowDown:f5,ArrowUp:h5,CellDown:v5,CellUp:p5,GlobalAsc:g5,GlobalDesc:m5,GroupAsc:y5,GroupDesc:C5,GroupNone:w5,Minus:S5,Plus:E5,SortDown:T5,SortUp:R5,SortDownSelected:_5,SortUpSelected:L5,InfoCircle:x5,ExpandColIcon:b5,Trend:A5,DrillDownIcon:I5,EyeOutlined:O5}),ML={},DL=function(t,r){ML[wE(t)]=r},BL=function(t){return ML[wE(t)]};bt(OL).forEach(function(t){DL(t,OL[t])});var PL="<svg",NL="data:image/svg+xml",FL={},sh=function(t){Le(r,t);function r(e){var n=t.call(this,e)||this;return n.isOnlineLink=function(i){return/^(https?:)?(\/\/)/.test(i)},n.render(),n}return r.prototype.getImage=function(e,n,i){var a=this;return new Promise(function(o,s){var c=BL(e);if(c){var d=new Image;d.onload=function(){FL[n]=d,o(d)},d.onerror=s,c.includes(NL)||a.isOnlineLink(c)?d.src=c:(i&&(c=c.replace(/fill=[\'\"]#?\w+[\'\"]/g,""),c=c.replace(/fill>/g,">")),c=c.replace(PL,"".concat(PL,' fill="').concat(i,'"')),d.src="".concat(NL,";utf-8,").concat(encodeURIComponent(c)))}})},r.prototype.render=function(){var e=this.cfg,n=e.name,i=e.fill,a=Fo(this.cfg),o=k(k({},RE(a,"fill")),{type:r.type}),s=new md({attrs:o});this.iconImageShape=s,this.setImageAttrs({name:n,fill:i})},r.prototype.setImageAttrs=function(e){var n=this,i=e.name,a=e.fill,o=this.iconImageShape;i=i||o.attrs.name,a=a||o.attrs.fill;var s="".concat(i,"-").concat(a),c=FL[s];c?(o.attr("img",c),this.addShape("image",o)):this.getImage(i,s,a).then(function(d){var h,v,g,C=(g=(v=(h=n.getParent())===null||h===void 0?void 0:h.getMeta)===null||v===void 0?void 0:v.call(h).spreadsheet)===null||g===void 0?void 0:g.container;if(n.destroyed||C&&!C.get("refreshElements")){aa.getInstance().logger("GuiIcon ".concat(i," destroyed."));return}o.attr("img",d),n.addShape("image",o)}).catch(function(d){if(d instanceof TypeError){console.warn("GuiIcon ".concat(i," destroyed:"),d);return}console.error("GuiIcon ".concat(i," load failed:"),d)})},r.type="__GUI_ICON__",r}(qn),cr;(function(t){t.TOP="TOP",t.BOTTOM="BOTTOM",t.LEFT="LEFT",t.RIGHT="RIGHT"})(cr||(cr={}));var nc;(function(t){t.SUM="SUM",t.MIN="MIN",t.MAX="MAX",t.AVG="AVG"})(nc||(nc={}));var ai;(function(t){t.Row="row",t.Col="col",t.Series="series"})(ai||(ai={}));var M5=function(){function t(){this.store=new Map}return t.prototype.set=function(r,e){return this.store.set(r,e)},t.prototype.get=function(r,e){var n,i=this.store.get(r);return(n=i)!==null&&n!==void 0?n:e},t.prototype.clear=function(){this.store.clear()},t.prototype.size=function(){return this.store.size},t}(),o1=function(t){var r,e,n=t.facetCfg,i=t.level,a=t.fields,o=n.colCfg,s=n.spreadsheet,c=n.dataSet,d=c.moreThanOneValue(),h=(e=(r=s.dataCfg.fields)===null||r===void 0?void 0:r.valueInCols)!==null&&e!==void 0?e:!0,v=(o==null?void 0:o.hideMeasureColumn)&&h&&!d&&un(a,Ye),g=v?2:1;return i===a.length-g},HL=function(t,r,e,n){return r.layoutArrange?r.layoutArrange(r.spreadsheet,e,n,t):t},a_=function(t,r,e,n){var i,a,o=(a=(i=t.spreadsheet)===null||i===void 0?void 0:i.facet)===null||a===void 0?void 0:a.getHiddenColumnsInfo(e);if(o&&t.columns.find(function(S){return S===e.field}))return!1;var s=!0,c=function(S,_,T){_===void 0&&(_=-1),T===void 0&&(T=-1),_===-1?(r.children.push(S),n.pushNode(S)):(r.children.splice(_,0,S),n.pushNode(S,T))};if(t.layoutHierarchy){var d=t.layoutHierarchy(t.spreadsheet,e);if(d){var h=na(d==null?void 0:d.delete)?d==null?void 0:d.delete:!1;s=!h;var v=d.push,g=d.unshift,C=r.children.length,w=n.getNodes().length;ve(g)||(Ae(g,function(S){c(S)}),C=r.children.length,w=n.getNodes().length),ve(v)||Ae(v,function(S){c(S)}),h||c(e,C,w)}else c(e)}else c(e);return s},o_=function(t,r,e){t!=null&&t.layoutCoordinate&&(r!=null&&r.isLeaf||e!=null&&e.isLeaf)&&(t==null||t.layoutCoordinate(t.spreadsheet,r,e))},D5=function(t,r){var e=t==null?void 0:t.layoutDataPosition;if(e){var n=r.getCellMeta,i=e(t.spreadsheet,n);return k(k({},r),{getCellMeta:i})}return r},zL=function(){function t(r){this.label=r}return t}(),GL=function(t){var r=t.addTotalMeasureInTotal,e=t.parentNode,n=t.currentField,i=t.fields,a=t.facetCfg,o=t.hierarchy,s=i.indexOf(n),c=a.dataSet,d=a.values,h=a.spreadsheet,v=[],g={},C=h.getTotalsConfig(n),w=e.isGrandTotals?C.totalsGroupDimensions:C.subTotalsGroupDimensions;if(w!=null&&w.includes(n)){g=i_(e);var S=c.getDimensionValues(n,g);v.push.apply(v,re([],Q((S||[]).map(function(T){return new rc({label:T,isSubTotals:e.isSubTotals,isGrandTotals:e.isGrandTotals,isTotalRoot:!1})})),!1)),ve(v)&&n&&v.push(zi)}else if(r&&n===Ye)g=i_(e),v.push.apply(v,re([],Q(d.map(function(T){return new zL(T)})),!1));else if(o1({facetCfg:a,level:s,fields:i})){e.isLeaf=!0,o.pushIndexNode(e),e.rowIndex=o.getIndexNodes().length-1;return}else{GL(k(k({},t),{currentField:i[s+1]}));return}var _=v.filter(function(T){return!Zm(T)});l_(k(k({},t),{fieldValues:_,level:s,parentNode:e,query:g}))},B5=function(t){var r,e=t.parentNode,n=t.currentField,i=t.fields,a=t.facetCfg,o=i.indexOf(n),s=a.dataSet,c=a.spreadsheet,d=[],h={};h=i_(e,!0);var v=s.getDimensionValues(n,h),g=HL(v,a,e,n);d.push.apply(d,re([],Q(g||[]),!1)),ve(d)&&n&&(n===Ye?d.push.apply(d,re([],Q((r=s.fields)===null||r===void 0?void 0:r.values),!1)):d.push(zi)),s5({currentField:n,lastField:i[o-1],isFirstField:o===0,fieldValues:d,spreadsheet:c});var C=d.filter(function(w){return!Zm(w)});l_(k(k({},t),{fieldValues:C,level:o,parentNode:e,query:h}))},$L=function(t){t.parentNode.isTotals?GL(t):B5(t)},uh=function(t,r){return"".concat(t).concat(vr).concat(r)},l_=function(t){var r,e,n,i,a,o,s,c,d,h,v=t.currentField,g=t.fields,C=t.fieldValues,w=t.facetCfg,S=t.hierarchy,_=t.parentNode,T=t.level,M=t.query,D=t.addMeasureInTotalQuery,B=t.addTotalMeasureInTotal,G=w.spreadsheet,V=w.collapsedCols;try{for(var q=mr(C.entries()),J=q.next();!J.done;J=q.next()){var te=Q(J.value,2),se=te[0],ue=te[1],ce=ue instanceof rc,me=ue instanceof zL,Te=void 0,le=void 0,pe=!1,et=!1,Xe=!1,ze=!1,Ie=v;if(ce){var Je=ue;et=Je.isGrandTotals,Xe=Je.isSubTotals,ze=Je.isTotalRoot,Te=ar(ue.label),ze?le=M:le=k(k({},M),(n={},n[v]=Te,n)),D&&(le[Ye]=(s=G==null?void 0:G.dataSet)===null||s===void 0?void 0:s.fields.values[0]),pe=o1({facetCfg:w,level:T,fields:g})}else me?(Te=ar(ue.label),le=k(k({},M),(i={},i[Ye]=Te,i)),Ie=Ye,et=_.isGrandTotals,Xe=_.isSubTotals,pe=o1({facetCfg:w,level:T,fields:g})):G.isTableMode()?(Te=ue,Ie=g[se],le=k(k({},M),(a={},a[Ie]=Te,a)),pe=!0):(Te=ue,le=Te===zi?k({},M):k(k({},M),(o={},o[v]=Te,o)),pe=o1({facetCfg:w,level:T,fields:g}));var ke=uh(_.id,Te);if(!ke)return;var Nt=na(V==null?void 0:V[ke])?V==null?void 0:V[ke]:!1,ot=new Hr({id:ke,key:Ie,value:Te,level:T,field:Ie,parent:_,isTotals:ce||me,isGrandTotals:et,isSubTotals:Xe,isTotalMeasure:me,isCollapsed:Nt,isTotalRoot:ze,hierarchy:S,query:le,spreadsheet:G,isLeaf:pe||Nt}),ut=a_(w,_,ot,S),Ct=(c=G==null?void 0:G.facet)===null||c===void 0?void 0:c.getHiddenColumnsInfo(ot);Ct&&_&&(_.hiddenChildNodeInfo=Ct),T>S.maxLevel&&!et&&!_.isGrandTotals&&!_.isSubTotals&&!ot.isSubTotals&&(S.sampleNodesForAllLevels.push(ot),S.maxLevel=T,S.sampleNodeForLastLevel=Ct?((d=Ct==null?void 0:Ct.displaySiblingNode)===null||d===void 0?void 0:d.next)||((h=Ct==null?void 0:Ct.displaySiblingNode)===null||h===void 0?void 0:h.prev):ot);var An=pe||Nt||!ut;An?(ot.isLeaf=!0,S.pushIndexNode(ot),ot.rowIndex=S.getIndexNodes().length-1):$L({addTotalMeasureInTotal:B,addMeasureInTotalQuery:D,parentNode:ot,currentField:g[T+1],fields:g,facetCfg:w,hierarchy:S})}}catch(qa){r={error:qa}}finally{try{J&&!J.done&&(e=q.return)&&e.call(q)}finally{if(r)throw r.error}}},WL=function(t,r,e,n){var i=r.facetCfg,a=r.hierarchy,o=r.parentNode,s=i.dataSet;t.forEach(function(c,d){typeof c=="string"&&(c={key:c});var h=c.key,v=h===Hi?ar("\u5E8F\u53F7"):s.getFieldName(h),g=n||o;if(l_({currentField:h,fields:[h],fieldValues:[v],facetCfg:i,hierarchy:a,parentNode:g,level:e,query:{},addMeasureInTotalQuery:!1,addTotalMeasureInTotal:!1}),c.children&&c.children.length){var C=g.children[d];C.isLeaf=!1,WL(c.children,r,e+1,C)}})},Jl=function(t,r){return r>0&&t<r},es=function(t,r,e){return r>0&&t>=e-r},l1=function(t,r,e){return e>0&&t<r+e},ch=function(t,r,e){return e>0&&t>=r+1-e},s_=function(t,r,e,n,i,a){var o=Zu(e,function(v,g){var C=t-(Qt(a)?0:a)+i.x;return C>=v&&C<e[g+1]},0);o=Math.max(o,0);var s=Zu(e,function(v,g){var C=i.width+t+i.x;return C>=v&&C<e[g+1]},o);s=Math.min(s===-1?1/0:s,e.length-2);var c=n.getIndexRange(r+i.y,i.height+r+i.y),d=c.start,h=c.end;return[o,s,d,h]},P5=function(t,r,e){var n=2,i=Math.abs(t/r),a=i<=1/n?0:t,o=i>n?0:r;return[a*e.horizontal,o*e.vertical]},Va=function(t,r,e){var n,i,a=t==null?void 0:t.getMatrix(),o=(n=a==null?void 0:a[6])!==null&&n!==void 0?n:0,s=(i=a==null?void 0:a[7])!==null&&i!==void 0?i:0;t==null||t.translate(r-o,e-s)},s1=function(t,r){var e,n=t==null?void 0:t.getMatrix(),i=(e=n==null?void 0:n[6])!==null&&e!==void 0?e:0;t==null||t.translate(r-i,0)},N5=function(t,r){var e,n=t==null?void 0:t.getMatrix(),i=(e=n==null?void 0:n[7])!==null&&e!==void 0?e:0;t==null||t.translate(0,r-i)},F5=function(t,r,e,n){var i=r.frozenColCount,a=r.frozenRowCount,o=r.frozenTrailingColCount,s=r.frozenTrailingRowCount,c=t.colIndex,d=t.rowIndex;return l1(d,n.start,a)?kt.ROW:ch(d,n.end,s)?kt.TRAILING_ROW:Jl(c,i)?kt.COL:es(c,o,e)?kt.TRAILING_COL:kt.SCROLL},H5=function(t,r,e){for(var n,i=t.frozenColCount,a=t.frozenRowCount,o=t.frozenTrailingColCount,s=t.frozenTrailingRowCount,c=(n={},n[kt.TOP]=[],n[kt.BOTTOM]=[],n),d=0;d<i;d++){for(var h=e.start;h<e.start+a;h++)c[kt.TOP].push({x:d,y:h});if(s>0)for(var h=0;h<s;h++){var v=e.end-h;c[kt.BOTTOM].push({x:d,y:v})}}for(var d=0;d<o;d++){for(var g=r-1-d,h=e.start;h<e.start+a;h++)c[kt.TOP].push({x:g,y:h});if(s>0)for(var h=0;h<s;h++){var v=e.end-h;c[kt.BOTTOM].push({x:g,y:v})}}return c},z5=function(t,r,e,n){var i=r.frozenColCount,a=r.frozenRowCount,o=r.frozenTrailingColCount,s=r.frozenTrailingRowCount,c=re([],Q(t),!1);Jl(c[0],i)&&(c[0]=i),es(c[1],o,e)&&(c[1]=e-o-1),l1(c[2],n.start,a)&&(c[2]=n.start+a),ch(c[3],n.end,s)&&(c[3]=n.end-s);var d=re([],Q(c),!1);d[2]=n.start,d[3]=n.start+a-1;var h=re([],Q(c),!1);h[0]=0,h[1]=i-1;var v=re([],Q(c),!1);v[2]=n.end+1-s,v[3]=n.end;var g=re([],Q(c),!1);return g[0]=e-o,g[1]=e-1,{center:c,frozenRow:d,frozenCol:h,frozenTrailingCol:g,frozenTrailingRow:v}},G5=function(t,r){var e=t,n=0,i=e.getTotalLength()-1;if(r){var a=r.current,o=a===void 0?r_:a,s=r.pageSize;n=Math.max((o-1)*s,0),i=Math.min(o*s-1,e.getTotalLength()-1)}return{start:n,end:i}},dh=function(t,r,e){var n=r,i=e,a=function(o){return o.isLeaf?1:o.children?o.children.reduce(function(s,c){return s+=a(c),s},0):0};return r&&(n=t.slice(0,r).reduce(function(o,s){return o+=a(s),o},0)),e&&(i=t.slice(t.length-e).reduce(function(o,s){return o+=a(s),o},0)),{colCount:n,trailingColCount:i}},kL=function(t,r){return t.reduce(function(e,n){typeof n=="string"&&(n={key:n});var i=k({},n);return i.children?(i.children=kL(i.children,r),e.push(i),e):(r[i.key]&&e.push(i),e)},[])},_i=function(t){return t.parent.id==="root"},$5=function(t){for(;!_i(t);)t=t.parent;return t},W5=function(t){var r=[],e=function(n){n.forEach(function(i){typeof i=="string"||!i.children?r.push(i):e(i.children)})};return e(t),r},ts=function(t){var r=W5(t);return r.map(function(e){return typeof e=="string"?e:e.key})},fh=function(t){var r=t.children[0];return r?r.isLeaf?r:fh(r):t},k5=function(t){return ve(t.rows)&&ve(t.columns)&&ve(t.values)&&ve(t.customTreeItems)},ic=function(t,r){var e,n=t.pagination,i=t.frozenFirstRow,a=t.hierarchyType,o=t.showSeriesNumber,s=n&&n.pageSize,c=!1,d=r==null?void 0:r[0];if(!s&&i){c=((e=d==null?void 0:d.children)===null||e===void 0?void 0:e.length)===0;var h=a==="tree"||a==="customTree";h&&!c&&(c=!o)}var v=c&&!!d;return{frozenRowCount:v?1:0,frozenColCount:0,frozenTrailingColCount:0,frozenTrailingRowCount:0,enableFrozenFirstRow:c,frozenRowHeight:v?d.height:0}},U5=function(t){var r=t.facetCfg,e=r.columns,n=r.spreadsheet,i=n.store.get("hiddenColumnsDetail"),a=r==null?void 0:r.showSeriesNumber,o=ts(e),s=o.filter(function(v){return i?i.every(function(g){return g.hideColumnNodes.every(function(C){return C.field!==v})}):!0}),c=re([],Q(s),!1),d=re([],Q(e),!1),h={};a&&(d.unshift({key:Hi}),h[Hi]=!0),c.reduce(function(v,g){return v[g]=!0,v},h),WL(kL(d,h),t,0,null)},UL={en_US:["KMBTP".split(""),[1e3,1e3,1e3,1e3,1e3]],zh_CN:[["\u4E07","\u4EBF"],[1e4,1e4]]},yP=function(t,r,e){if(r===void 0&&(r=2),e===void 0&&(e=UL[RL()]||UL.zh_CN),typeof t!="number"||yE(t))return"";for(var n=t,i=Q(e,2),a=i[0],o=i[1],s=0,c,d=!0;d;)c=o[s],n>=c&&s<a.length?n/=c:d=!1,s+=1;n=parseFloat(n.toFixed(r));var h=n>=1e3?n.toLocaleString("en"):"".concat(n);return s===0?h:"".concat(h," ").concat(a[s-1])},ac=function(t){return Number.parseFloat((Zr(t)||0).toPrecision(Wp))},Uo=function(t,r,e){if(e===void 0&&(e=0),!Object.values(t).find(function(o){return o>0}))return t;var n=k({},t);n.frozenColCount>=r&&(n.frozenColCount=r);var i=r-n.frozenColCount;n.frozenTrailingColCount>i&&(n.frozenTrailingColCount=i),n.frozenRowCount>=e&&(n.frozenRowCount=e);var a=e-n.frozenRowCount;return n.frozenTrailingRowCount>a&&(n.frozenTrailingRowCount=a),n};function kn(t,r,e){var n;return(n=t==null?void 0:t.addShape)===null||n===void 0?void 0:n.call(t,"rect",k({zIndex:1,attrs:r},e||{}))}function Y5(t,r){var e;return(e=t==null?void 0:t.addShape)===null||e===void 0?void 0:e.call(t,"polygon",{attrs:r})}function V5(t,r){var e;return(e=t==null?void 0:t.addShape)===null||e===void 0?void 0:e.call(t,"polyline",{attrs:r})}function YL(t,r){var e;return(e=t==null?void 0:t.addShape)===null||e===void 0?void 0:e.call(t,"circle",{attrs:r})}function rs(t,r,e,n,i,a,o,s){var c;return!ve(r)&&t&&Ae(r,function(d){t.contain(d)&&t.removeChild(d,!0)}),(c=t==null?void 0:t.addShape)===null||c===void 0?void 0:c.call(t,"text",{attrs:k(k({x:e,y:n,text:i,originalText:s},a),o)})}function zr(t,r,e){var n;return(n=t==null?void 0:t.addShape)===null||n===void 0?void 0:n.call(t,"line",{zIndex:100,attrs:k(k({},r),e)})}function Tn(t,r,e){if(!ve(t)){var n=_e(t)?t:[t];n.forEach(function(i){ih(i,"attrs.".concat(r),e)})}}function CP(t,r){Tn(t,"fillOpacity",r)}function wP(t,r){Tn(t,"strokeOpacity",r)}function u_(t,r){var e=new sh(r);return t==null||t.add(e),e}function VL(t,r,e,n,i){var a=new sh(k(k({name:n?"Plus":"Minus"},r),{fill:e}));return Ce(i)&&a.on("click",i),t==null||t.add(a),a}var c_="s2-offscreen-canvas",X5=function(){var t=document.getElementById(c_);return t||(t=document.createElement("canvas"),t.id=c_,t.style.display="none",document.body.appendChild(t),t)},j5=function(){var t;(t=document.getElementById(c_))===null||t===void 0||t.remove()},q5=function(t){var r;return(r=t==null?void 0:t.position)!==null&&r!==void 0?r:"right"},K5=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0),t=ac(t),r=ac(r);var e=t>=0,n=r>=0&&t<=0,i=e?t:r,a=n?0:i,o=r-t;return function(s){var c=e?0:1,d=n?Nu(Math.abs(0-t)/o,0,1):c,h=Nu((s-a)/o,-1,1);return{zeroScale:d,scale:h}}},XL=function(t,r){var e,n,i,a=t.data,o=t.encode,s=t.type,c=r.getMeta(),d=c.x,h=c.y,v=c.height,g=c.width,C=r.getStyle(de.DATA_CELL),w=C.cell,S=C.miniChart,_=[],T=nt(a,function(me){return _.push(me==null?void 0:me[o.y]),{x:me[o.x],y:me[o.y]}}),M=Ua(_),D=_E(_),B=M-D,G=d+w.padding.left,V=d+g-w.padding.right,q=h+w.padding.top,J=h+v-w.padding.bottom,te=J-q,se=s===mo.Bar?(V-G-(_.length-1)*((e=S==null?void 0:S.bar)===null||e===void 0?void 0:e.intervalPadding))/_.length+((n=S==null?void 0:S.bar)===null||n===void 0?void 0:n.intervalPadding):(i=(V-G)/(_.length-1))!==null&&i!==void 0?i:0,ue=[],ce=nt(T,function(me,Te){var le,pe=G+Te*se,et;if(B!==0?et=J-((me==null?void 0:me.y)-D)/B*te:et=D>0?q:J,s===mo.Bar){var Xe=void 0,ze=void 0;D<0&&M>0&&B!==0?(Xe=J-(0-D)/B*te,ze=Math.abs(et-Xe),(me==null?void 0:me.y)<0&&(et=Xe)):(Xe=D<0?q:J,B=Ua([Math.abs(M),Math.abs(D)]),ze=B===0?te:Math.abs((me==null?void 0:me.y)-0)/B*te,et=Xe);var Ie=se-((le=S==null?void 0:S.bar)===null||le===void 0?void 0:le.intervalPadding);ue.push([Ie,ze])}return[pe,et]});return{points:ce,box:ue}},Z5=function(t,r){if(!(ve(t==null?void 0:t.data)||ve(r))){var e=r.getStyle(de.DATA_CELL),n=e.miniChart,i=n.line,a=i.point,o=i.linkLine,s=XL(t,r).points;V5(r,{points:s,stroke:o.fill,lineWidth:o.size,opacity:o.opacity});for(var c=0;c<s.length;c++)YL(r,{x:s[c][0],y:s[c][1],r:a.size,fill:a.fill,fillOpacity:a.opacity})}},Q5=function(t,r){if(!(ve(t==null?void 0:t.data)||ve(r)))for(var e=r.getStyle(de.DATA_CELL),n=e.miniChart,i=n.bar,a=XL(t,r),o=a.points,s=a.box,c=0;c<o.length;c++)kn(r,{x:o[c][0],y:o[c][1],width:s[c][0],height:s[c][1],fill:i.fill,fillOpacity:i.opacity})},J5=function(t,r,e){var n=Number(r)-Number(t);return Number.isNaN(n)||Number(t)<0?e.bad:n<=.1?e.good:n>.1&&n<=.2?e.satisfactory:e.bad},eD=function(t,r){var e,n;r===void 0&&(r={min:0,max:0});var i=Number(t);if(Number.isNaN(i))return t;var a=(e=r==null?void 0:r.min)!==null&&e!==void 0?e:r,o=(n=r==null?void 0:r.max)!==null&&n!==void 0?n:r,s=new Intl.NumberFormat("en-US",{minimumFractionDigits:a,maximumFractionDigits:o,useGrouping:!1,style:"percent"});return s.format(i)},tD=function(t){var r,e,n,i,a,o;if(!ve(t)){var s=t.getCellArea(),c=s.x,d=s.y,h=s.height,v=s.width,g=t.findFieldCondition((r=t.cellConditions)===null||r===void 0?void 0:r.interval);if(g&&g.mapping){var C=t.mappingValue(g);if(!C)return;var w=C.isCompare?C:t.valueRangeByField,S=ac(w.minValue),_=ac(w.maxValue),T=Qt(C==null?void 0:C.fieldValue)?ac(t.getMeta().fieldValue):ac(C==null?void 0:C.fieldValue);if(T<S||T>_)return;var M=(n=(e=t.getStyle().miniChart.interval)===null||e===void 0?void 0:e.height)!==null&&n!==void 0?n:t.getStyle().cell.miniBarChartHeight,D=(a=(i=t.getStyle().miniChart.interval)===null||i===void 0?void 0:i.fill)!==null&&a!==void 0?a:t.getStyle().cell.miniBarChartFillColor,B=K5(S,_),G=B(T),V=G.zeroScale,q=G.scale,J=(o=C.fill)!==null&&o!==void 0?o:D;return kn(t,{x:c+v*V,y:d+h/2-M/2,width:v*q,height:M,fill:J})}}},rD=function(t,r){var e,n=r.getStyle(de.DATA_CELL),i=r.getMeta(),a=i.x,o=i.y,s=i.height,c=i.width,d=i.spreadsheet;if(ve(t)){rs(r,[],a+c-n.cell.padding.right,o+s/2,is(r,d.options.placeholder),n.text);return}var h=n.miniChart.bullet,v=h.progressBar,g=h.comparativeMeasure,C=h.rangeColors,w=h.backgroundColor,S=t.measure,_=t.target,T=Math.max(Number(S),0),M=Math.max(Number(_),0),D=eD(S,2),B=(v==null?void 0:v.widthPercent)>1?(v==null?void 0:v.widthPercent)/100:v==null?void 0:v.widthPercent,G=n.cell.padding,V=c-G.left-G.right,q=B*V,J=V-q,te=a+c-G.right-q,se=o+s/2-v.height/2;kn(r,{x:te,y:se,width:q,height:v.height,fill:w,textBaseline:n.text.textBaseline});var ue=Me(r.getMeta(),"spreadsheet.options.bullet.getRangeColor"),ce=Math.max(Math.min(q*T,q),0);kn(r,{x:te,y:se+(v.height-v.innerHeight)/2,width:ce,height:v.innerHeight,fill:(e=ue==null?void 0:ue(T,M))!==null&&e!==void 0?e:J5(T,M,C)});var me=te+q*M;zr(r,{x1:me,y1:o+(s-g.height)/2,x2:me,y2:o+(s-g.height)/2+g.height},{stroke:(g==null?void 0:g.fill)||(g==null?void 0:g.color),lineWidth:g.width,opacity:g==null?void 0:g.opacity}),rs(r,[],te-G.right,o+s/2,oc({measureTextWidth:d.measureTextWidth,text:D,maxWidth:J-G.right,fontParam:n.text}),n.text)},nD=function(t,r){switch(r==null?void 0:r.type){case mo.Line:Z5(r,t);break;case mo.Bar:Q5(r,t);break;default:rD(r,t);break}},jL=function(t,r){var e=t.x,n=t.y,i=t.width,a=t.height,o=i-(r==null?void 0:r.left)-(r==null?void 0:r.right),s=a-(r==null?void 0:r.top)-(r==null?void 0:r.bottom);return{x:e+(r==null?void 0:r.left),y:n+(r==null?void 0:r.top),width:o,height:s}},qL=function(t){return Jm({size:0,position:"right",margin:{left:0,right:0}},t)},KL=function(t,r){return r=qL(r),t-r.size-r.margin.right-r.margin.left},u1=function(t,r,e){var n=t.y,i=t.height;e===void 0&&(e=0);var a=0;switch(r){case"top":a=n;break;case"middle":a=n+i/2-e/2;break;default:a=n+i-e;break}return a},hh=function(t,r,e,n,i){e===void 0&&(e=0),i===void 0&&(i=1);var a=t.x,o=t.width,s=r.textAlign,c=r.textBaseline,d=qL(n),h=d.size,v=d.margin,g=d.position,C=i*(h+v.left)+(i?v.right:0),w,S;switch(s){case"left":w=a+(g==="left"?C:0),S=a+(g==="left"?v.left:e+v.left);break;case"center":{var _=C-(g==="left"?v.left:v.right)+e,T=a+o/2-_/2;w=T+e/2+(g==="left"?C-v.left:0),S=T+(g==="left"?0:e+v.left);break}default:{w=a+o-(g==="right"?C:0),S=a+o-(g==="right"?C-v.left:e+C-v.left);break}}var M=u1(t,c,0),D=u1(t,c,h);return{text:{x:w,y:M},icon:{x:S,y:D}}},iD=function(t,r){return hh(t,r).text},aD=function(t,r,e){var n=r.start+r.width,i=t.start+t.width,a,o;if(r.start<=t.start&&n>=i)a=t.start+t.width/2,o=t.width;else if(r.start<=t.start){var s=r.width-(t.start-r.start);a=s<e?n-e/2:n-s/2,o=s}else if(n>=i){var s=r.width-(n-i);a=s<e?r.start+e/2:r.start+s/2,o=s}else a=r.start+r.width/2,o=r.width;return{start:a,width:o}},ns=function(t,r,e){var n=r.x,i=r.y,a=r.width,o=r.height,s=e.horizontalBorderWidth,c=e.horizontalBorderColorOpacity,d=e.horizontalBorderColor,h=e.verticalBorderWidth,v=e.verticalBorderColor,g=e.verticalBorderColorOpacity,C=e.borderDash,w,S,_,T,M;if(t===cr.TOP||t===cr.BOTTOM){var D=i;t===cr.TOP?D=i+h/2:D=i+o-h/2,S=D,T=D,w=n,_=n+a,M={lineWidth:s,stroke:d,strokeOpacity:c,lineDash:C}}if(t===cr.LEFT||t===cr.RIGHT){var B=n;t===cr.LEFT?B=n+s/2:B=n+a-s/2,w=B,_=B,S=i,T=i+o,M={lineWidth:h,stroke:v,strokeOpacity:g,lineDash:C}}return{position:{x1:w,x2:_,y1:S,y2:T},style:M}},oD=function(t,r,e){e===void 0&&(e={left:0,right:0});var n=k({},t);return r==="left"?(n.start+=e.left,n.width-=e.left):r==="right"&&(n.width-=e.right),n},lD=function(t,r,e,n){var i=r+e,a=t.start;if(n==="center")return a-e/2;var o=t.width-i>0,s=o?t.width/2:i/2;return n==="left"?a-s:a+s-e},ZL=Yi(function(t,r){if(t===void 0&&(t=""),!r)return 0;var e=X5().getContext("2d"),n=r,i=n.fontSize,a=n.fontFamily,o=n.fontWeight,s=n.fontStyle,c=n.fontVariant;return e.font=[s,c,o,"".concat(i,"px"),a].join(" ").trim(),e.measureText("".concat(t)).width},function(t,r){return re([t],Q(ka(r)),!1).join("")}),QL=function(t,r,e,n){var i=16,a=t(_a,n),o;Ju(r)?o=r:o=ct(r);var s=e,c=[],d,h;if(t(r,n)<=e)return r;for(var v=!0;v;){if(d=o.substr(0,i),h=t(d,n),h+a>s&&h>s){v=!1;break}if(c.push(d),s-=h,o=o.substr(i),!o)return c.join("")}for(var g=!0;g;){if(d=o.substr(0,1),h=t(d,n),h+a>s){g=!1;break}if(c.push(d),s-=h,o=o.substr(1),!o)return c.join("")}return"".concat(c.join(""),"...")},xP=function(t,r){var e,n;r===void 0&&(r={});var i=ZL("a",r),a=ZL("\u8682",r),o=0;if(!t)return o;try{for(var s=mr(t),c=s.next();!c.done;c=s.next()){var d=c.value,h=d.charCodeAt(0);o+=h>=0&&h<=255?i:a}}catch(v){e={error:v}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o},oc=function(t){var r=t.measureTextWidth,e=t.text,n=t.maxWidth,i=t.fontParam,a=t.priorityParam,o=t.placeholder,s={},c=o!=null?o:Gi,d=Qt(e)||e===""||e===zi,h=d?c:"".concat(e),v=a;if(i&&_e(i)?v=i:s=i||{},!v||!v.length)return QL(r,h,n,s);var g=[],C=[h];v.forEach(function(T){C.forEach(function(M,D){var B=-1,G=M.match(new RegExp(T));if(G){var V=G[0];B=G.index,g.push(V);var q=B+V.length,J=M.slice(0,B),te=M.slice(q),se=[J,te].filter(function(ue){return!!ue});C.splice.apply(C,re([D,1],Q(se),!1))}})}),C=g.concat(C);var w=h,S=r(_a,s),_=n;return C.forEach(function(T){if(_<=0){var M=w.indexOf(T),D=w.slice(M-3,M);if(D&&D!==_a){var B=r(T,s);w=w.replace(T,B>S?_a:T)}else w=w.replace(T,"");_-=S}else{var B=r(T,s);if(_<B&&B>S){var G=QL(r,T,_,s);w=w.replace(T,G),_=0}else _-=B}}),w},sD=function(t){return _n(t)?t>=0:!!t&&!VE(t).startsWith("-")},uD=function(t){return Qt(t)||t===""||Number(String(t).replace(/[^0-9.]+/g,""))===0},cD=function(t,r){return uD(t)||t===r},dD=function(t,r,e,n){n===void 0&&(n="left");var i=r.right,a=r.left,o=e||0;return n==="left"?t+i/2+o:n==="right"?t-i/2-o:t+a/2+o},fD=function(t){var r,e,n=t.getMeta().isTotals,i=(e=(r=t).isMeasureField)===null||e===void 0?void 0:e.call(r),a=t.getStyle(t.cellType||de.DATA_CELL),o;return i?o=a.measureText:n?o=a.bolderText:o=a.text,{cellStyle:a,textStyle:o}},hD=function(t){var r=t.rowIndex,e=t.colIndex,n=t.meta,i=t.data,a=t.textStyle,o=t.textCondition,s=a.fill;return o!=null&&o.mapping&&(s=o==null?void 0:o.mapping(i,{rowIndex:r,colIndex:e,meta:n}).fill),k(k({},a),{fill:s})},is=function(t,r){return Ce(r)?r(t):r},vD=function(t,r,e){for(var n=t.x,i=t.y,a=t.width,o=t.height,s=o/Ql(r),c=[],d,h,v,g=0,C=nt(e,function(T){return T>1?T/100:T}),w=0;w<Ql(r);w++){h=i+s*w;var S=[];d=n,g=0;for(var _=0;_<Ql(r[w]);_++)v=ve(C)?a/Ql(r[0]):a*C[_],d=dD(n,{left:0,right:0},g,"left"),g+=v,S.push({x:d,y:h,width:v,height:s});c.push(S)}return c},JL=function(t,r,e){var n,i,a,o;e===void 0&&(e=!0);var s=t.getContentArea(),c=s.x,d=s.y,h=s.height,v=s.width,g=r||t.getMeta().fieldValue,C=g.values,w=t.getMeta().spreadsheet,S=w.options,_=w.measureTextWidth,T=S.style.cellCfg.valuesCfg,M=(i=(n=S==null?void 0:S.conditions)===null||n===void 0?void 0:n.text)===null||i===void 0?void 0:i[0],D=(o=(a=S==null?void 0:S.conditions)===null||a===void 0?void 0:a.icon)===null||o===void 0?void 0:o[0];if(!_e(C)){nD(t,C);return}var B=T==null?void 0:T.widthPercent,G=0;if(g!=null&&g.label){var V=t.getStyle(de.DATA_CELL),q=V.bolderText;G=h/(C.length+1);var J=rs(t,[],c,d+G/2,oc({measureTextWidth:_,text:g.label,maxWidth:v,fontParam:q}),q);t.addTextShape(J)}for(var te=fD(t),se=te.cellStyle,ue=te.textStyle,ce=se==null?void 0:se.icon,me=D&&D.mapping&&{size:ce==null?void 0:ce.size,margin:ce==null?void 0:ce.margin,position:D==null?void 0:D.position},Te,le=vD({x:c,y:d+G,height:h-G,width:v},C,B),pe=0;pe<C.length;pe++)for(var et=Fo(C[pe]),Xe=0;Xe<et.length;Xe++){Te=et[Xe];var ze=e?hD({rowIndex:pe,colIndex:Xe,meta:t==null?void 0:t.getMeta(),data:Te,textStyle:ue,textCondition:M}):ue,Ie=(t==null?void 0:t.getMeta().spreadsheet.options).placeholder,Je=is(t==null?void 0:t.getMeta(),Ie),ke=KL(le[pe][Xe].width,ce),Nt=oc({measureTextWidth:_,text:Te,maxWidth:ke,fontParam:ze,placeholder:Je}),ot=_(Nt,ue),ut=hh(le[pe][Xe],ue,ot,me,D?1:0),J=rs(t,[],ut.text.x,ut.text.y,Nt,ze,{},Te==null?void 0:Te.toString());if(t.addTextShape(J),D&&e){var Ct=D==null?void 0:D.mapping(Te,{rowIndex:pe,colIndex:Xe,meta:t==null?void 0:t.getMeta()});if(Ct){var An=u_(t,k(k({},ut.icon),{name:Ct.icon,width:ce==null?void 0:ce.size,height:ce==null?void 0:ce.size,fill:Ct.fill}));t.addConditionIconShape(An)}}}},d_=function(t,r){return r===void 0&&(r=1),(t==null?void 0:t.width)*r},f_=function(t){try{return JSON.parse(t)}catch(r){return null}},pD=function(t,r,e){return t.sort(function(n,i){e&&(n=e(n),i=e(i));var a=r.indexOf(n),o=r.indexOf(i);return a===-1&&o===-1?0:a===-1?1:o===-1?-1:a-o})},gD=function(t){return t===void 0&&(t=[]),t.filter(function(r){return r!==Kn&&r!==js})},mD=function(t){return _e(t)?wT(t):[t]},yD=function(t,r){var e;return(e=t==null?void 0:t.filter(function(n){return!(r!=null&&r.includes(n))}))===null||e===void 0?void 0:e.concat(r)};function CD(t,r){var e=t.isRowTotal,n=t.isRowSubTotal,i=t.isColTotal,a=t.isColSubTotal,o=r||{},s=o.row,c=o.col,d=s||{},h=d.calcTotals,v=h===void 0?{}:h,g=d.calcSubTotals,C=g===void 0?{}:g,w=c||{},S=w.calcTotals,_=S===void 0?{}:S,T=w.calcSubTotals,M=T===void 0?{}:T,D=function(B,G){if((B.aggregation||B.calcFunc)&&G)return{aggregation:B.aggregation,calcFunc:B.calcFunc}};return D(_,i)||D(M,a)||D(v,e)||D(C,n)}function vh(t){return t===Xs}function as(t,r,e){return t===void 0&&(t={}),r===void 0&&(r=[]),e===void 0&&(e=Kn),r.reduce(function(n,i){var a=t[i];return i in t?n.push(String(a)):n.push(e),n},[])}function eR(t,r){var e=r.filter(function(n){return n in t});return ve(e)&&e.push(js),e}function tR(t,r,e){t===void 0&&(t={}),r===void 0&&(r=[]);var n=[];function i(a,o,s){return o.reduce(function(c,d){var h=a[d];return d in a?c.push(String(h)):d===Ye&&s?c.push(s):c.push(Kn),c},[])}return e?e.forEach(function(a){n.push(i(t,r,a))}):n.push(i(t,r)),n}function wD(t,r,e){var n,i=r.slice(0,r.indexOf(t)+1);return(n=e.map(function(a){return i.map(function(o){return a[o]}).join("".concat(vr))}))===null||n===void 0?void 0:n.filter(function(a){return a})}function c1(t,r){return t.concat(r).filter(function(e){return e!==Ye}).join(vr)}function d1(t){var r=t.rowDimensionValues,e=t.colDimensionValues,n=t.isFirstCreate,i=t.onFirstCreate,a=t.rowFields,o=t.colFields,s=t.rowPivotMeta,c=t.colPivotMeta,d=t.prefix,h=d===void 0?"":d,v=function(w,S,_,T){for(var M=_,D=[],B=0;B<S.length;B++){var G=S[B];if(n&&M&&!(M!=null&&M.has(G))){var V=S.slice(0,B+1).map(function(ce){return String(ce)}),q=V.join(vr),J=G===Kn,te=void 0;J?te=0:M.has(Kn)?te=M.size:te=M.size+1,M.set(G,{id:q,dimensions:V,value:G,level:te,children:new Map}),i==null||i({dimension:w==null?void 0:w[B],dimensionPath:q,careRepeated:T})}var se=M==null?void 0:M.get(G);if(D.push(vh(G)?G:se==null?void 0:se.level),se){var ue=w==null?void 0:w[B+1];n&&se.childField!==ue&&(se.childField=ue),M=se==null?void 0:se.children}}return D},g=v(a,r,s,!1),C=v(o,e,c,!0);return re(re([h],Q(g),!1),Q(C),!1)}function xD(t){var r=t.rows,e=t.columns,n=t.values,i=t.valueInCols,a=t.data,o=a===void 0?[]:a,s=t.indexesData,c=s===void 0?{}:s,d=t.sortedDimensionValues,h=t.rowPivotMeta,v=t.colPivotMeta,g=t.getExistValuesByDataItem,C=[],w=new Set(ST(r,e)),S=function(T){var M=T.dimension,D=T.dimensionPath,B=T.careRepeated,G=B===void 0?!0:B;G&&w.has(M)||(d[M]||(d[M]=[])).push(D)},_=c1(r,e);return o.forEach(function(T){var M,D,B,G;if(!(!T||ve(T))){var V=g?g(T,n):eR(T,n),q=tR(T,r,i?null:V),J=tR(T,e,i?V:null);try{for(var te=mr(q),se=te.next();!se.done;se=te.next()){var ue=se.value;try{for(var ce=(B=void 0,mr(J)),me=ce.next();!me.done;me=ce.next()){var Te=me.value,le=d1({rowDimensionValues:ue,colDimensionValues:Te,rowPivotMeta:h,colPivotMeta:v,rowFields:r,colFields:e,isFirstCreate:!0,onFirstCreate:S,prefix:_});C.push(le),ih(c,le,T)}}catch(pe){B={error:pe}}finally{try{me&&!me.done&&(G=ce.return)&&G.call(ce)}finally{if(B)throw B.error}}}}catch(pe){M={error:pe}}finally{try{se&&!se.done&&(D=te.return)&&D.call(te)}finally{if(M)throw M.error}}}}),{paths:C,indexesData:c,rowPivotMeta:h,colPivotMeta:v,sortedDimensionValues:d}}function rR(t,r){if(!(!t||!r)){var e=r.split(vr),n=Fe(e),i=t;Ae(e,function(a,o){var s=i.get(a);return s?(a===n?(s.children=new Map,s.childField=void 0):i=s.children,!0):o===0&&a===pl})}}function bD(t,r,e){var n=function(o){var s=Vr(t,function(c){var d=c.field;return d===o});return Me(s,"name",o)},i=r||e,a={field:Ye,name:i,formatter:function(o){return n(o)}};return a}function ph(t,r){return{isRowTotal:t.isGrandTotals,isRowSubTotal:t.isSubTotals,isColTotal:r.isGrandTotals,isColSubTotal:r.isSubTotals}}function SD(t){for(var r=null,e=0;e<t.length;e++){var n=t[e];if(vh(n))r=e;else if(!IT(r)&&r<e)return!0}return!1}function nR(t){var r=t.pivotMeta,e=t.dimensionValues,n=t.fieldIdx,i=t.queryType,a=t.fields,o=t.sortedDimensionValues,s={children:r},c=[s];function d(g,C){var w,S=Qf(g,function(T){var M=re([],Q(T.children.values()),!1);return M.filter(function(D){return D.value!==js&&(i===ii.All?!0:D.value!==Kn)})});if(g.length>1){var _=(w=o[C])!==null&&w!==void 0?w:[];return GE(S,function(T){return Jf(_,T.id)})}return S}for(var h=function(g){var C=e[g],w=a[g];vh(C)?c=d(c,w):c=c.map(function(S){return S.children.get(C)}).filter(Boolean)},v=0;v<=n;v++)h(v);return c}function iR(t){var r=t.dimensionValues,e=t.pivotMeta,n=t.fields,i=t.sortedDimensionValues,a=t.queryType,o=a===void 0?ii.All:a;if(!SD(r))return[r];var s=nR({pivotMeta:e,dimensionValues:r,fieldIdx:r.length-1,queryType:o,fields:n,sortedDimensionValues:i});return s.map(function(c){return c.dimensions})}function ED(t){var r=t.rowFields,e=t.rowDimensionValues,n=t.rowPivotMeta,i=t.colFields,a=t.colDimensionValues,o=t.colPivotMeta,s=t.queryType,c=t.sortedDimensionValues,d=iR({dimensionValues:e,pivotMeta:n,fields:r,sortedDimensionValues:c,queryType:s}),h=iR({dimensionValues:a,pivotMeta:o,fields:i,sortedDimensionValues:c,queryType:s});return{rowQueries:d,colQueries:h}}function _D(t,r){return t?_e(t)?Qf(t,function(e){if(!_e(e))return zn([e]);var n=r===ii.DetailOnly?1:0;return zn(e.slice(n))}):zn([t]):[]}var f1;function aR(t,r){return!t||!r?!1:String(t).toLowerCase()===String(r).toLowerCase()}var TD=`\r
`,LD="	",h1=function(t,r){var e=t.getColumnNodes().find(function(n){return n.id===r});return t.isPivotMode()?e==null?void 0:e.value:e==null?void 0:e.field},RD=function(t,r){var e=r.getColumnNodes().find(function(n){return n.colIndex===t});return h1(r,e.id)},AD=function(t,r){var e=t.rowIndex,n=t.colIndex;return[r.getRowNodes().find(function(i){return i.rowIndex===e}),r.getColumnNodes().find(function(i){return i.colIndex===n})]},gh=function(t,r){var e=r.getColumnNodes().find(function(i){return i.colIndex===t}),n=h1(r,e.id);return r.options.interaction.copyWithFormat?r.dataSet.getFieldFormatter(n):function(i){return i}},ID=function(t){var r,e,n,i,a=((i=(n=(e=t.options)===null||e===void 0?void 0:e.style)===null||n===void 0?void 0:n.colCfg)===null||i===void 0?void 0:i.hideMeasureColumn)&&t.isValueInCols();return a?(r={},r[Ye]=t.dataCfg.fields.values[0],r):{}},OD=function(t,r,e){var n,i;if(e.isPivotMode()){var a=Q(AD(t,e),2),o=a[0],s=a[1],c=ID(e),d=e.dataSet.getCellData({query:k(k(k({},o.query),s.query),c),rowNode:o,isTotals:o.isTotals||o.isTotalMeasure||s.isTotals||s.isTotalMeasure,totalStatus:ph(o,s)});return(n=d==null?void 0:d[kr])!==null&&n!==void 0?n:""}var h=RD(t.colIndex,e);return(i=r[t.rowIndex])===null||i===void 0?void 0:i[h]},oR=function(t,r,e){var n=gh(t.colIndex,e);return n(OD(t,r,e))},h_=function(t){return/\n/.test(t)?'"'+t.replace(/\r\n?/g,`
`)+'"':t},mh=function(t,r){var e=t.split(vr);return r?e.slice(e.length-r):(e.shift(),e)},v_=function(t,r){return nt(t,function(e){return r.dataSet.getFieldName(e)})},Ot;(function(t){t.PLAIN="text/plain",t.HTML="text/html"})(Ot||(Ot={}));var MD=function(t){return{type:Ot.PLAIN,content:nt(t,function(r){return r.join(LD)}).join(TD)}},DD=function(t){function r(n,i){return n.map(function(a){return"<".concat(i,">").concat(dE(a),"</").concat(i,">")}).join("")}function e(n,i){return n.map(function(a){return"<".concat(i,">").concat(r(a,"td"),"</").concat(i,">")}).join("")}return{type:Ot.HTML,content:'<meta charset="utf-8"><table><tbody>'.concat(e(t,"tr"),"</tbody></table>")}},lR=(f1={},f1[Ot.PLAIN]=MD,f1[Ot.HTML]=DD,f1);function bP(t,r){lR[t]=r}function Ln(t){return lR[t]}function v1(t,r){return r===void 0&&(r=Ot.PLAIN),Array.isArray(r)?[].concat(t).filter(function(e){return r.includes(e.type)}).map(function(e){return e.content}):[].concat(t).filter(function(e){return(e==null?void 0:e.type)===r}).map(function(e){return e.content})[0]||""}var sR=function(t,r,e){var n,i,a,o,s,c,d=(i=(n=t[0])===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0,h=(a=r==null?void 0:r.length)!==null&&a!==void 0?a:0,v=(s=(o=e[0])===null||o===void 0?void 0:o.length)!==null&&s!==void 0?s:0,g=(c=e.length)!==null&&c!==void 0?c:0,C=d+v,w=h+g,S=Array.from(Array(w),function(){return new Array(C)});return S=nt(S,function(_,T){return nt(_,function(M,D){if(D>=0&&D<d&&T>=0&&T<h)return"";if(D>=d&&D<=C&&T>=0&&T<h)return r[T][D-d];if(D>=0&&D<d&&T>=h&&T<w)return t[T-h][D];if(D>=d&&D<=C&&T>=h&&T<w)return e[T-h][D-d]})}),[Ln(Ot.PLAIN)(S),Ln(Ot.HTML)(S)]},BD=function(t,r,e){var n=r.map(function(i){return i.map(function(a){return a?h_(oR(a,t,e)):""})});return[Ln(Ot.PLAIN)(n),Ln(Ot.HTML)(n)]},PD=function(t){if(!(t!=null&&t.length))return[];var r=Q([{row:1/0,col:1/0},{row:0,col:0}],2),e=r[0],n=r[1];t.forEach(function(c){var d=c.rowIndex,h=c.colIndex;e.col=Math.min(h,e.col),e.row=Math.min(d,e.row),n.col=Math.max(h,n.col),n.row=Math.max(d,n.row)});var i=Q([n.row-e.row+1,n.col-e.col+1],2),a=i[0],o=i[1],s=new Array(a).fill("").map(function(){return new Array(o).fill("")});return t.forEach(function(c){var d=c.rowIndex,h=c.colIndex,v=Q([d-e.row,h-e.col],2),g=v[0],C=v[1];s[g][C]=c}),s},ND=function(t,r){var e=t.dataSet.getDisplayDataSet(),n=r.length?r.map(function(a){return{field:h1(t,a.id),formatter:gh(a.colIndex,t)}}):t.dataCfg.fields.columns.map(function(a){return t.getColumnNodes().find(function(o){return o.field===a})}).map(function(a){return{field:h1(t,a.id),formatter:gh(a.colIndex,t)}}),i=e.map(function(a){return n.map(function(o){var s=o.field,c=o.formatter;return h_(c(a[s]))})});return[Ln(Ot.PLAIN)(i),Ln(Ot.HTML)(i)]},uR=function(t,r,e){return nt(t,function(n){return r.map(function(i){var a,o=e.dataSet.getCellData({query:k(k({},n.query),i.query),rowNode:n,isTotals:n.isTotals||n.isTotalMeasure||i.isTotals||i.isTotalMeasure,totalStatus:ph(n,i)});return gh(i.colIndex,e)((a=o==null?void 0:o[kr])!==null&&a!==void 0?a:"")})})},FD=function(t,r,e){var n=uR(r,e,t);return[Ln(Ot.PLAIN)(n),Ln(Ot.HTML)(n)]},HD=function(t,r,e){var n=nt(r,function(o){return mh(o.id)}),i=i1.apply(void 0,re([],Q(nt(e,function(o){return mh(o.id)})),!1)),a=uR(r,e,t);return sR(n,i,a)};function cR(t,r,e){var n=t.options.interaction.copyWithHeader;return n?HD(t,r,e):FD(t,r,e)}var zD=function(t,r){var e=t.getRowNodes().filter(function(a){return a.isLeaf||t.isHierarchyTreeType()}),n=t.getColumnNodes().filter(function(a){return a.isLeaf}),i=r.length?r.reduce(function(a,o){return a.push.apply(a,re([],Q(n.filter(function(s){return s.id.startsWith(o.id)})),!1)),a},[]):n;return cR(t,e,i)},p1=function(t,r,e){return r.isPivotMode()?zD(r,e):ND(r,e)},GD=function(t,r){var e=t.dataSet.getDisplayDataSet(),n=e.filter(function(i,a){return r.map(function(o){return o.rowIndex}).includes(a)}).map(function(i){var a=t.getColumnNodes().reduce(function(o,s,c){return o[s.field]=c,o},{});return Object.keys(i).sort(function(o,s){return a[o]-a[s]}).map(function(o){return t.getColumnNodes().find(function(s){return s.field===o})}).filter(Boolean).map(function(o){return h_(gh(o.colIndex,t)(i[o.field]))})});return[Ln(Ot.PLAIN)(n),Ln(Ot.HTML)(n)]},$D=function(t,r){var e=t.getRowNodes().filter(function(a){return a.isLeaf||t.isHierarchyTreeType()}),n=t.getColumnNodes().filter(function(a){return a.isLeaf}),i=r.reduce(function(a,o){return a.push.apply(a,re([],Q(e.filter(function(s){return s.id.startsWith(o.id)})),!1)),a},[]);return cR(t,i,n)},dR=function(t,r,e){return r.isPivotMode()?$D(r,e):GD(r,e)};function SP(t,r,e){e===void 0&&(e=Ot.PLAIN);var n=t.dataSet.getDisplayDataSet(),i=t.interaction.getState().cells||[];if(r===lh.ALL)return v1(p1(n,t,[]),e);if(r===lh.COL){var a=i.reduce(function(d,h){return d.find(function(v){return v===h.colIndex})||d.push(h.colIndex),d},[]),o=t.facet.layoutResult.colLeafNodes.filter(function(d){return a.includes(d.colIndex)}).map(function(d){return{id:d.id,colIndex:d.colIndex,rowIndex:d.rowIndex,type:de.COL_CELL}});return v1(p1(n,t,o),e)}if(r===lh.ROW){var s=i.reduce(function(d,h){return d.find(function(v){return v===h.rowIndex})||d.push(h.rowIndex),d},[]),c=s.map(function(d){return{id:d+"-"+t.facet.layoutResult.colLeafNodes[0].id,colIndex:0,rowIndex:d,type:de.ROW_CELL}});return v1(dR(n,t,c),e)}}var WD=function(t,r,e){var n=i1.apply(void 0,re([],Q(nt(t[0],function(o){var s,c,d=(c=(s=o.id.split(Gi))===null||s===void 0?void 0:s[1])!==null&&c!==void 0?c:"";return v_(mh(d),e)})),!1)),i=nt(t,function(o){var s,c,d=(c=(s=o[0].id.split(Gi))===null||s===void 0?void 0:s[0])!==null&&c!==void 0?c:"";return v_(mh(d),e)}),a=nt(t,function(o){return nt(o,function(s){return oR(s,r,e)})});return sR(i,n,a)};function kD(t){var r=new Set;return Ae(t,function(e){var n=e.getMeta().level;r.has(n)||r.add(n)}),r}function UD(t,r){return Wa(t,function(e){var n=e.getMeta(),i=n.level===r,a=n.isTotals&&ve(n.children);return i||a})}function YD(t,r){for(var e=t,n={level:r},i=e.label;e.level>=0;){for(var a=n.level-e.level;a>0;)i="".concat(e.label).concat(vr).concat(i),a--;n=e,e=e.parent}return i}function VD(t,r,e){return nt(t,function(n){var i=n.getMeta(),a=i.id,o=i.isTotals,s=i.spreadsheet,c=o?YD(i,r):a,d=mh(c,e.size);return v_(d,s)})}function XD(t){var r,e=kD(t),n=(r=Ua(Array.from(e)))!==null&&r!==void 0?r:0,i=UD(t,n),a=t[0].cellType===de.COL_CELL,o=VD(i,n,e);return a&&(o=i1.apply(void 0,re([],Q(o),!1))),[Ln(Ot.PLAIN)(o),Ln(Ot.HTML)(o)]}var jD=function(t,r,e){return nt(r,function(n){var i;return(i=t[n])!==null&&i!==void 0?i:e})},qD=function(t,r){var e=t.options.placeholder,n=t.dataCfg.fields,i=n.rows,a=n.columns,o=n.values,s=is(t,e),c=t.getColumnLeafNodes(),d=[];if(t.isTableMode()){var h=Wa(c,function(w){return w.field!==Hi});d=nt(r,function(w){return nt(h,function(S){var _;return(_=w==null?void 0:w[S.field])!==null&&_!==void 0?_:s})})}else if(t.isPivotMode()){var v=re(re(re([],Q(i),!1),Q(a),!1),Q(o),!1),g=mD(r),C=g.filter(function(w){return re(re([],Q(i),!1),Q(a),!1).every(function(S){return!Qt(w[S])})});d=nh(C,function(w,S){return re(re([],Q(w),!1),[jD(S,v,s)],!1)},[])}return[Ln(Ot.PLAIN)(d),Ln(Ot.HTML)(d)]};function KD(t,r){var e,n,i=r.filter(function(h){var v=h.type;return v===de.COL_CELL}),a=r.filter(function(h){var v=h.type;return v===de.ROW_CELL}),o=t.dataSet.getDisplayDataSet();if(t.interaction.getCurrentStateName()===Se.ALL_SELECTED)n=p1(o,t,[]);else if(i.length)n=p1(o,t,i);else if(a.length)n=dR(o,t,a);else{if(!r.length)return;var s=PD(r),c=t.interaction.getSelectedCellHighlight().currentRow;if(c){var d=IE(r,"rowIndex","asc").map(function(h){return t.dataSet.getRowData(h)});n=qD(t,d)}else!((e=t.options.interaction)===null||e===void 0)&&e.copyWithHeader?n=WD(s,o,t):n=BD(o,s,t)}return n}var ZD=function(t){var r,e=t.interaction,n=e.getState().cells||[],i,a=(r=e.getInteractedCells())!==null&&r!==void 0?r:[],o=ve(a)?!1:Xm(a,function(s){return s.cellType===de.ROW_CELL||s.cellType===de.COL_CELL});return o?i=XD(a):i=KD(t,n),i&&hR(i),v1(i,Ot.PLAIN)};function yh(t){if(!t)return t;if(typeof t=="string"){var r=t;return'"'.concat(r.replace(/"/g,'""'),'"')}return'"'.concat(t,'"')}var fR=function(t){return new Promise(function(r,e){var n;Array.isArray(t)?n=Me(t.filter(function(o){return o.type===Ot.PLAIN}),"[0].content",""):n=t.content||"";var i=document.createElement("textarea");i.value=n,document.body.appendChild(i),i.focus({preventScroll:!0}),i.select();var a=document.execCommand("copy");document.body.removeChild(i),a?r():e()})},QD=function(t){return navigator.clipboard.write([new ClipboardItem([].concat(t).reduce(function(r,e){var n,i=e.type,a=e.content,o=a.replace(/\x00/g,"");return k(k({},r),(n={},n[i]=new Blob([o],{type:i}),n))},{}))]).catch(function(){return fR(t)})},hR=function(t,r){r===void 0&&(r=!1);var e;return typeof t=="string"?e={content:t,type:Ot.PLAIN}:e=t,!navigator.clipboard||!window.ClipboardItem||r?fR(e):QD(e)},JD=function(t,r){try{var e=document.createElement("a");e.download="".concat(r,".csv");var n=new Blob(["\uFEFF".concat(t)],{type:"text/csv;charset=utf-8"});e.href=URL.createObjectURL(n),e.click(),URL.revokeObjectURL(e.href)}catch(i){console.error(i)}},e7=function(t){var r=t!=null&&t.label?[t==null?void 0:t.label]:[],e=t==null?void 0:t.values;return ve(e)||Ae(e,function(n){r.push(n.join(" "))}),r.join("$")},t7=function(t,r){var e,n,i,a;return r?(a=t==null?void 0:t.values)===null||a===void 0?void 0:a[0]:(n=(e=t==null?void 0:t.originalValues)===null||e===void 0?void 0:e[0])!==null&&n!==void 0?n:(i=t==null?void 0:t.values)===null||i===void 0?void 0:i[0]},r7=function(t,r,e){var n,i,a,o=t.dataSet.getDisplayDataSet(),s=((a=t.dataCfg)===null||a===void 0?void 0:a.fields).columns,c=ts(s||[]),d=[],h=function(_,T){var M=[];e?M=c.map(function(D){var B=t.dataSet.getFieldFormatter(D);return yh(B(T[D],T))}):M=c.map(function(D){return yh(T[D])}),t.options.showSeriesNumber&&(M=[yh(_+1)].concat(M)),d.push(M.join(r))};try{for(var v=mr(o.entries()),g=v.next();!g.done;g=v.next()){var C=Q(g.value,2),w=C[0],S=C[1];h(w,S)}}catch(_){n={error:_}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}return d},n7=function(t,r,e){if(!t)return"";var n=t.fieldValue,i=t.valueField,a=t.data;if(it(n))return e7(n);if(!e)return"".concat(n);var o=r.dataSet.getFieldFormatter(i);return o(n,a)},i7=function(t,r,e,n){var i=[];if(t){var a=t.fieldValue,o=t.valueField,s=t.data;if(it(a))return i=t7(a,n),i;if(Qt(a)&&e.length>1)return i.push.apply(i,re([],Q(e),!1)),i;if(!n)i.push(a);else{var c=r.dataSet.getFieldFormatter(o);i.push(c(a,s))}}else i.push.apply(i,re([],Q(e),!1));return i.join("    ")},vR=function(t){var r=f_(t);return _e(r)?r:t},a7=function(t,r,e){var n=vR(r.label),i=_e(n)?n.length:1,a=e.options.placeholder,o=Ce(a)?a(t):a;return Array(i).fill(o)},o7=function(t){var r=t.map(function(e){return e.map(function(n){return _e(n)?n:_e(e[0])?re([n],Q(new Array(e[0].length-1)),!1):n})});return r},pR=function(t){var r,e,n,i,a=(n=(e=(r=t.spreadsheet)===null||r===void 0?void 0:r.dataSet)===null||e===void 0?void 0:e.getFieldFormatter)===null||n===void 0?void 0:n.call(e,t.field);return(i=a==null?void 0:a(t.label))!==null&&i!==void 0?i:t.label},l7=function(t){var r=[],e=function(n){if(n.id!==pl){var i=pR(n);if(r.unshift(i),n!=null&&n.parent)return e(n.parent)}};return e(t),r},s7=function(t){var r,e;return typeof t=="object"?{isFormatHeader:(r=t.isFormatHeader)!==null&&r!==void 0?r:!1,isFormatData:(e=t.isFormatData)!==null&&e!==void 0?e:!1}:{isFormatHeader:t!=null?t:!1,isFormatData:t!=null?t:!1}},u7=function(t,r,e){var n,i,a,o,s,c=s7(e),d=c.isFormatHeader,h=c.isFormatData,v=(s=t==null?void 0:t.facet)===null||s===void 0?void 0:s.layoutResult,g=v.rowsHierarchy,C=v.rowLeafNodes,w=v.colLeafNodes,S=v.getCellMeta,_=g.maxLevel,T=t.dataCfg.fields.valueInCols,M=g.sampleNodesForAllLevels.map(function(F){return t.dataSet.getFieldName(F.key)}),D=C.reduce(function(F,X){var z,oe=((z=X.level)!==null&&z!==void 0?z:0)+1;return oe>F?oe:F},0),B=[],G=0;if(!t.isPivotMode())B=r7(t,r,h);else{var V=C.filter(function(F){return F.height!==0});try{for(var q=mr(V),J=q.next();!J.done;J=q.next()){var te=J.value,se=[];if(d)se=l7(te);else{te.label=VE(te==null?void 0:te.label);var ue=te.id.replace(go,"");se=ue.split(vr)}var ce=_+1,me=ce-se.length;me>0&&se.push.apply(se,re([],Q(new Array(me)),!1));var Te=t.dataSet.getFieldName(Fe(se));se[se.length-1]=Te;try{for(var le=(a=void 0,mr(w)),pe=le.next();!pe.done;pe=le.next()){var et=pe.value;if(T){var Xe=S(te.rowIndex,et.colIndex);se.push(n7(Xe,t,h))}else{var Xe=S(te.rowIndex,et.colIndex),ze=a7(Xe,et,t),Ie=i7(Xe,t,ze,h);_e(Ie)?se=se.concat.apply(se,re([],Q(Ie),!1)):se.push(Ie)}}}catch(F){a={error:F}}finally{try{pe&&!pe.done&&(o=le.return)&&o.call(le)}finally{if(a)throw a.error}}G=Ua([se.length,G]);var Je=se.map(function(F){return yh(F)}).join(r);B.push(Je)}}catch(F){n={error:F}}finally{try{J&&!J.done&&(i=q.return)&&i.call(q)}finally{if(n)throw n.error}}}var ke=[];if(ve(w)&&!t.isPivotMode())ke=[M];else{var Nt=0,ot=Fo(w).map(function(F){for(var X=F,z=[];X.level!==void 0;){var oe=vR(X.label);_e(oe)?Nt=Ua([Nt,Ql(oe)]):oe=d&&t.isPivotMode()?pR(X):oe,z.push(oe),X=X.parent}return z});Nt>1&&(ot=o7(ot));for(var ut=ot.map(function(F){return F.length}),Ct=Ua(ut),An=[],qa=function(F){var X=ot.map(function(z){return z.length<Ct?re(re([],Q(new Array(Ct-z.length)),!1),Q(z),!1):z}).map(function(z){return z[F]}).map(function(z){return t.dataSet.getFieldName(z)});An.push(Iu(X))},or=Ct-1;or>=0;or-=1)qa(or);ke=An.map(function(F,X){var z,oe;if(t.isPivotMode()){var we=t.facet.cornerHeader.cfg,xe=we.columns,dt=we.rows,Mt=we.data,Gt=Mt.filter(function(Oi){var dn=Oi.cornerType;return dn===ai.Col});if(X<An.length-1)return re(re(re([],Q(Array(_).fill("")),!1),[((oe=Gt.find(function(Oi){var dn=Oi.field;return dn===xe[X]}))===null||oe===void 0?void 0:oe.label)||""],!1),Q(F),!1);var Sr=dt.slice(0,D);return Sr.length<D&&Sr.unshift.apply(Sr,re([],Q(Array(D-Sr.length).fill("")),!1)),re(re([],Q(Sr.map(function(Oi){return t.dataSet.getFieldName(Oi)||""})),!1),Q(F),!1)}return X<An.length?(z=Array(D).fill("")).concat.apply(z,re([],Q(F),!1)):M.concat.apply(M,re([],Q(F),!1))})}var Un=ke.map(function(F){var X=G-F.length;return X>0&&F.unshift.apply(F,re([],Q(new Array(X)),!1)),F.map(function(z){return yh(z)}).join(r)}).join(`\r
`),_h=[Un].concat(B),V_=_h.join(`\r
`);return V_},c7=function(t){var r,e,n,i,a,o,s=(n=(e=(r=t.target)===null||r===void 0?void 0:r.attrs)===null||e===void 0?void 0:e.appendInfo)===null||n===void 0?void 0:n.cellData,c=(a=(i=t.target).get)===null||a===void 0?void 0:a.call(i,"parent"),d=((o=c==null?void 0:c.getMeta)===null||o===void 0?void 0:o.call(c))||s;return{target:c,viewMeta:d,event:t}},p_=function(t,r,e){var n,i=t.split(vr);if(e)n=[t];else{n=[uh(i[0],i[1])];for(var a=2;a<i.length;a+=1)n.push(uh(n[a-2],i[a]))}var o=Wa(r,function(s){var c;return n.includes((c=s.getMeta())===null||c===void 0?void 0:c.id)});return o},gR=function(t,r,e){if(t){var n=p_(t,r);Ae(n,function(i){i.updateByState(e)})}},d7=function(t,r){return typeof t=="function"?t(r):t.some(function(e){return e===r.key||e===r.id||e===r.valueField})},g1=function(t){Le(r,t);function r(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var o=t.call(this,{})||this;return o.textShapes=[],o.actualTextWidth=0,o.conditionIconShapes=[],o.stateShapes=new Map,o.meta=e,o.spreadsheet=n,o.theme=n.theme,o.conditions=o.spreadsheet.options.conditions,o.handleRestOptions.apply(o,re([],Q(i),!1)),o.shouldInit()&&o.initCell(),o}return r.prototype.getMeta=function(){return this.meta},r.prototype.setMeta=function(e){this.meta=e},r.prototype.getIconStyle=function(){return this.theme[this.cellType].icon},r.prototype.getTextAndIconPosition=function(e){e===void 0&&(e=1);var n=this.getTextStyle(),i=this.getIconStyle();return hh(this.getContentArea(),n,this.actualTextWidth,i,e)},r.prototype.getActualText=function(){return this.actualText},r.prototype.isTextOverflowing=function(){var e=this.getActualText();return e?un(e,_a):e!==this.getFieldValue()},r.prototype.getFieldValue=function(){var e=this.getFormattedFieldValue().formattedValue;return e===zi?this.getActualText():e},r.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]},r.prototype.shouldInit=function(){var e=this.meta,n=e.width,i=e.height;return n>0&&i>0},r.prototype.getStyle=function(e){return Me(this.theme,e||this.cellType)},r.prototype.getResizeAreaStyle=function(){return this.getStyle("resizeArea")},r.prototype.shouldDrawResizeAreaByType=function(e,n){var i=this.spreadsheet.options.interaction.resize;return na(i)?i:Ce(i.visible)?i.visible(n):i[e]},r.prototype.getCellArea=function(){var e=this.meta,n=e.x,i=e.y,a=e.height,o=e.width;return{x:n,y:i,height:a,width:o}},r.prototype.getContentArea=function(){var e=this.getStyle()||this.theme.dataCell,n=(e==null?void 0:e.cell).padding;return jL(this.getCellArea(),n)},r.prototype.getIconPosition=function(e){return e===void 0&&(e=1),this.getTextAndIconPosition(e).icon},r.prototype.drawTextShape=function(){var e=this.getFormattedFieldValue().formattedValue,n=this.getMaxTextWidth(),i=this.getTextStyle(),a=this.spreadsheet,o=a.options.placeholder,s=a.measureTextWidth,c=is(this,o),d=oc({measureTextWidth:s,text:e,maxWidth:n,fontParam:i,placeholder:c});this.actualText=d,this.actualTextWidth=s(d,i);var h=this.getTextPosition();this.textShape=rs(this,[this.textShape],h.x,h.y,d,i),this.textShapes.push(this.textShape)},r.prototype.drawLinkFieldShape=function(e,n){if(e){var i=this.spreadsheet.options.style.device;if(!br(i)){var a=this.getTextStyle(),o=this.getTextPosition(),s=o.x;a.textAlign==="center"?s-=this.actualTextWidth/2:a.textAlign==="right"&&(s-=this.actualTextWidth);var c=this.textShape.getBBox().maxY;this.linkFieldShape=zr(this,{x1:s,y1:c+1,x2:s+this.actualTextWidth,y2:c+1},{stroke:n,lineWidth:1})}this.textShape.attr({fill:n,cursor:"pointer",appendInfo:{isLinkFieldText:!0,cellData:this.meta}})}},r.prototype.getLinkFieldStyle=function(){return this.getTextStyle().linkTextFill},r.prototype.drawLinkField=function(e){var n=this.spreadsheet.options.interaction.linkFields,i=n===void 0?[]:n,a=this.getLinkFieldStyle(),o=d7(i,e);this.drawLinkFieldShape(o,a)},r.prototype.updateByState=function(e,n){var i=this;this.spreadsheet.interaction.setInteractedCells(n);var a=Me(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(e));Ae(a,function(o,s){var c=bt(AE(Md,function(d){return un(d,s)}));c.forEach(function(d){var h=i.stateShapes.has(d),v=h?i.stateShapes.get(d):i[d],g=_e(v)?v:[v];if(h&&g.forEach(function(w){w.set("visible",!0)}),d==="interactiveBorderShape"&&s==="borderWidth"&&_n(o)){var C=i.getInteractiveBorderShapeStyle(o);Ae(C,function(w,S){Tn(g,S,w)})}Tn(g,tt[s],o)})})},r.prototype.getInteractiveBorderShapeStyle=function(e){var n=this.getCellArea(),i=n.x,a=n.y,o=n.height,s=n.width,c=this.theme.dataCell.cell,d=c.horizontalBorderWidth,h=c.verticalBorderWidth;return{x:i+h/2+e/2,y:a+d/2+e/2,width:s-h-e,height:o-d-e}},r.prototype.hideInteractionShape=function(){this.stateShapes.forEach(function(e){Tn(e,tt.backgroundOpacity,0),Tn(e,tt.backgroundColor,"transparent"),Tn(e,tt.borderOpacity,0),Tn(e,tt.borderWidth,1),Tn(e,tt.borderColor,"transparent")})},r.prototype.clearUnselectedState=function(){Tn(this.backgroundShape,tt.backgroundOpacity,1),Tn(this.textShapes,tt.textOpacity,1),Tn(this.linkFieldShape,tt.opacity,1)},r.prototype.getTextShape=function(){return this.textShape},r.prototype.getTextShapes=function(){return this.textShapes||[this.textShape]},r.prototype.addTextShape=function(e){e&&this.textShapes.push(e)},r.prototype.getConditionIconShape=function(){return this.conditionIconShape},r.prototype.getConditionIconShapes=function(){return this.conditionIconShapes||[this.conditionIconShape]},r.prototype.addConditionIconShape=function(e){e&&this.conditionIconShapes.push(e)},r.prototype.resetTextAndConditionIconShapes=function(){this.textShapes=[],this.conditionIconShapes=[]},Object.defineProperty(r.prototype,"cellConditions",{get:function(){return this.conditions},enumerable:!1,configurable:!0}),r.prototype.drawConditionIconShapes=function(){var e,n=this.findFieldCondition((e=this.conditions)===null||e===void 0?void 0:e.icon);if(n&&n.mapping){var i=this.mappingValue(n),a=this.getIconPosition(),o=this.theme.dataCell.icon.size;ve(i==null?void 0:i.icon)||(this.conditionIconShape=u_(this,k(k({},a),{name:i.icon,width:o,height:o,fill:i.fill})),this.addConditionIconShape(this.conditionIconShape))}},r.prototype.getTextConditionFill=function(e){var n,i,a=e.fill,o=this.findFieldCondition((n=this.conditions)===null||n===void 0?void 0:n.text);return o!=null&&o.mapping&&(a=((i=this.mappingValue(o))===null||i===void 0?void 0:i.fill)||e.fill),a},r.prototype.getCrossBackgroundColor=function(e){var n=this.getStyle().cell,i=n.crossBackgroundColor,a=n.backgroundColorOpacity;return i&&e%2===0?{backgroundColorOpacity:a,backgroundColor:i}:{backgroundColorOpacity:a,backgroundColor:this.getStyle().cell.backgroundColor}},r}(qn),mR=function(t,r){return r?r(t[Ye],t[kr]):t[kr]},os=function(t,r){var e=r.getMeta().id;return t.some(function(n){return Fr(n.id,e)})},m1=function(t,r){return"".concat(t).concat(Gi).concat(r)},f7=function(t){var r=t.interaction.getSelectedCellHighlight(),e=r.currentRow,n=r.currentCol,i=r.rowHeader,a=r.colHeader;return e||n||i||a},g_=function(t){return t.type===de.DATA_CELL},h7=function(t,r){Ae(t,function(e){g_(e)&&e.rowIndex===r.getMeta().rowIndex&&r.updateByState(Se.SELECTED)})},v7=function(t,r){Ae(t,function(e){g_(e)&&e.colIndex===r.getMeta().colIndex&&r.updateByState(Se.SELECTED)})},p7=function(t,r){Ae(t,function(e){g_(e)&&e.rowIndex===r.getMeta().rowIndex&&e.colIndex===r.getMeta().colIndex&&r.updateByState(Se.SELECTED)})},g7=function(t,r,e){var n=e.interaction.getSelectedCellHighlight(),i=n.rowHeader,a=n.colHeader,o=n.currentRow,s=n.currentCol,c=r.cellType===de.ROW_CELL,d=e.isTableMode()&&e.options.showSeriesNumber&&i&&c;(o||d)&&h7(t,r),s&&v7(t,r),(i||a)&&p7(t,r)},Xa=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"cellType",{get:function(){return de.DATA_CELL},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"valueRangeByField",{get:function(){return this.spreadsheet.dataSet.getValueRangeByField(this.meta.valueField)},enumerable:!1,configurable:!0}),r.prototype.handleByStateName=function(e,n){os(e,this)&&this.updateByState(n)},r.prototype.handleSearchResult=function(e){if(os(e,this)){var n=Vr(e,function(i){return i==null?void 0:i.isTarget});n.id===this.getMeta().id?this.updateByState(Se.HIGHLIGHT):this.updateByState(Se.SEARCH_RESULT)}},r.prototype.handleSelect=function(e){var n,i=(n=e==null?void 0:e[0])===null||n===void 0?void 0:n.type;switch(i){case de.COL_CELL:this.changeRowColSelectState("colIndex");break;case de.ROW_CELL:this.changeRowColSelectState("rowIndex");break;case de.DATA_CELL:f7(this.spreadsheet)?g7(e,this,this.spreadsheet):os(e,this)?this.updateByState(Se.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight&&this.updateByState(Se.UNSELECTED);break}},r.prototype.handleHover=function(e){var n=Qu(e);if(n.type!==de.DATA_CELL){this.hideInteractionShape();return}var i=this.spreadsheet.interaction.getHoverHighlight(),a=i.currentRow,o=i.currentCol;if(a||o){var s=this.meta.colIndex,c=this.meta.rowIndex;o&&s===(n==null?void 0:n.colIndex)||a&&c===(n==null?void 0:n.rowIndex)?this.updateByState(Se.HOVER):this.hideInteractionShape()}var d=this.getMeta(),h=d.id,v=d.rowIndex,g=d.colIndex;Fr(n.id,h)&&Fr(n.rowIndex,v)&&Fr(n.colIndex,g)&&this.updateByState(Se.HOVER_FOCUS)},r.prototype.update=function(){var e=this.spreadsheet.interaction.getCurrentStateName(),n=this.spreadsheet.interaction.getCells();if(e===Se.ALL_SELECTED){this.updateByState(Se.SELECTED);return}if(!(ve(n)||!e))switch(e){case Se.SELECTED:this.handleSelect(n);break;case Se.HOVER_FOCUS:case Se.HOVER:this.handleHover(n);break;case Se.SEARCH_RESULT:this.handleSearchResult(n);break;default:this.handleByStateName(n,e);break}},r.prototype.setMeta=function(e){t.prototype.setMeta.call(this,e),this.initCell()},r.prototype.drawTextShape=function(){t.prototype.drawTextShape.call(this),this.drawLinkField(this.meta)},r.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.shouldHideRowSubtotalData()||(this.drawConditionIntervalShape(),this.drawTextShape(),this.drawConditionIconShapes()),this.drawInteractiveBorderShape(),this.meta.isFrozenCorner&&this.drawBorderShape(),this.update()},r.prototype.getDefaultTextFill=function(e){var n=e.fill,i=this.getBackgroundColor(),a=i.backgroundColor,o=i.intelligentReverseTextColor;return TL(a)&&e.fill===Ad&&o&&(n=Id),n},r.prototype.getTextStyle=function(){var e=this.meta.isTotals,n=e?this.theme.dataCell.bolderText:this.theme.dataCell.text,i=this.getTextConditionFill(k(k({},n),{fill:this.getDefaultTextFill(n)}));return k(k({},n),{fill:i})},r.prototype.getIconStyle=function(){var e,n=this.theme.dataCell.icon,i=n.size,a=n.margin,o=this.findFieldCondition((e=this.conditions)===null||e===void 0?void 0:e.icon),s=o&&o.mapping&&{size:i,margin:a,position:q5(o)};return s},r.prototype.drawConditionIntervalShape=function(){this.conditionIntervalShape=tD(this)},r.prototype.shouldHideRowSubtotalData=function(){var e,n=this.meta,i=n.rowId,a=n.rowIndex,o=this.spreadsheet.store.get("drillDownIdPathMap");if(o!=null&&o.has(i))return!1;var s=((e=this.spreadsheet.options.totals)!==null&&e!==void 0?e:{}).row,c=s===void 0?{}:s,d=this.spreadsheet.facet.layoutResult.rowLeafNodes[a],h=!(d!=null&&d.isGrandTotals)&&(d==null?void 0:d.isTotals);return this.spreadsheet.options.hierarchyType==="tree"&&!c.showSubTotals&&h},r.prototype.getFormattedFieldValue=function(){if(this.shouldHideRowSubtotalData())return{value:null,formattedValue:Gi};var e=this.meta,n=e.rowId,i=e.valueField,a=e.fieldValue,o=e.data,s=this.spreadsheet.dataSet.getFieldMeta(n),c=s?n:i,d=this.spreadsheet.dataSet.getFieldFormatter(c),h=d(a,o,this.meta);return{value:a,formattedValue:h}},r.prototype.getMaxTextWidth=function(){var e=this.getContentArea().width;return KL(e,this.getIconStyle())},r.prototype.getTextPosition=function(){return this.getTextAndIconPosition().text},r.prototype.getBackgroundColor=function(){var e,n=this.getCrossBackgroundColor(this.meta.rowIndex),i=n.backgroundColor,a=n.backgroundColorOpacity;if(this.shouldHideRowSubtotalData())return{backgroundColor:i,backgroundColorOpacity:a};var o=this.findFieldCondition((e=this.conditions)===null||e===void 0?void 0:e.background),s=!1;if(o&&o.mapping){var c=this.mappingValue(o);c&&(i=c.fill,s=c.intelligentReverseTextColor)}return{backgroundColor:i,backgroundColorOpacity:a,intelligentReverseTextColor:s}},r.prototype.drawBackgroundShape=function(){var e=this.getBackgroundColor(),n=e.backgroundColor,i=e.backgroundColorOpacity;this.backgroundShape=kn(this,k(k({},this.getCellArea()),{fill:n,fillOpacity:i}))},r.prototype.drawInteractiveBorderShape=function(){var e=1,n=this.getCellArea(),i=n.x,a=n.y,o=n.height,s=n.width;this.stateShapes.set("interactiveBorderShape",kn(this,{x:i+e,y:a+e,width:s-e*2,height:o-e*2},{capture:!1,visible:!1}))},r.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",kn(this,k({},this.getCellArea()),{visible:!1}))},r.prototype.changeRowColSelectState=function(e){var n=this.spreadsheet.interaction,i=Me(this.meta,e),a=n.getState(),o=a.nodes,s=o===void 0?[]:o,c=a.cells,d=c===void 0?[]:c,h=!1;if(this.spreadsheet.isTableMode()&&s.length){var v=s[0].hierarchy.getLeaves();h=v.some(function(g,C){return s.some(function(w){return w===g})?C===i:!1})}else h=re(re([],Q(s),!1),Q(d),!1).some(function(g){return Me(g,e)===i});h?this.updateByState(Se.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight?this.updateByState(Se.UNSELECTED):this.hideInteractionShape()},r.prototype.drawBorderShape=function(){var e=this;[cr.BOTTOM,cr.RIGHT].forEach(function(n){var i=ns(n,e.getCellArea(),e.getStyle().cell),a=i.position,o=i.style;zr(e,a,o)})},r.prototype.findFieldCondition=function(e){var n=this;return jm(e,function(i){return i.field instanceof RegExp?i.field.test(n.meta.valueField):i.field===n.meta.valueField})},r.prototype.mappingValue=function(e){var n=this.meta.fieldValue,i=this.spreadsheet.isTableMode()?this.spreadsheet.dataSet.getCellData({query:{rowIndex:this.meta.rowIndex}}):this.meta.data;return e==null?void 0:e.mapping(n,i)},r.prototype.updateByState=function(e){if(t.prototype.updateByState.call(this,e,this),e===Se.UNSELECTED){var n=Me(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(e));n&&this.toggleConditionIntervalShapeOpacity(n.opacity)}},r.prototype.clearUnselectedState=function(){t.prototype.clearUnselectedState.call(this),this.toggleConditionIntervalShapeOpacity(1)},r.prototype.toggleConditionIntervalShapeOpacity=function(e){Tn(this.conditionIntervalShape,tt.backgroundOpacity,e),Tn(this.conditionIconShapes,tt.opacity,e)},r.prototype.drawLeftBorder=function(){var e=ns(cr.LEFT,this.getCellArea(),this.getStyle().cell),n=e.position,i=e.style;zr(this,n,i)},r}(g1),m7=function(t){Le(r,t);function r(e,n,i){return t.call(this,i,e,n)||this}return r.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=Q(e,1),a=i[0];this.cells=a},Object.defineProperty(r.prototype,"cellType",{get:function(){return de.MERGED_CELL},enumerable:!1,configurable:!0}),r.prototype.update=function(){},r.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.conditions=this.spreadsheet.options.conditions,this.drawBackgroundShape(),this.drawTextShape()},r.prototype.drawBackgroundShape=function(){var e=x7(this.cells),n=this.theme.dataCell.cell;this.backgroundShape=Y5(this,{points:e,stroke:n.horizontalBorderColor,fill:n.backgroundColor,lineHeight:n.horizontalBorderWidth})},r.prototype.drawTextShape=function(){ve(this.meta)||(it(this.meta.fieldValue)?JL(this):t.prototype.drawTextShape.call(this))},r}(Xa),y7=function(t,r,e,n){var i=[t,r],a=[t+e,r],o=[t+e,r+n],s=[t,r+n];return[[i,a],[a,o],[o,s],[s,i]]},C7=function(t){var r=[];return Ae(t,function(e){var n=[e[1],e[0]];JSON.stringify(t).includes(JSON.stringify(n))||r.push(e)}),r},w7=function(t,r){return Vr(r,function(e){return Fr(e[0],t[1])})},x7=function(t){var r=[];t.forEach(function(o){var s=o.getMeta(),c=s.x,d=s.y,h=s.width,v=s.height;r=r.concat(y7(c,d,h,v))}),r=C7(r);for(var e=[],n=r[0],i=n,a=[];!Fr(n,a);)e=e.concat(i),a=w7(i,r),i=a;return e},b7=function(t,r){var e=[],n;return Ae(t,function(i){var a,o,s,c=(o=(a=r==null?void 0:r.facet)===null||a===void 0?void 0:a.layoutResult)===null||o===void 0?void 0:o.getCellMeta(i.rowIndex,i.colIndex);if(c){var d=(s=r==null?void 0:r.facet)===null||s===void 0?void 0:s.cfg.dataCell(c);n=i!=null&&i.showText?c:n,e.push(d)}}),{cells:e,cellsMeta:n}},S7=function(t,r){var e=[],n=[],i;return Ae(t,function(a){var o=Vr(r,function(s){var c,d=(c=s==null?void 0:s.getMeta)===null||c===void 0?void 0:c.call(s);if((d==null?void 0:d.colIndex)===(a==null?void 0:a.colIndex)&&(d==null?void 0:d.rowIndex)===(a==null?void 0:a.rowIndex))return s});o?(e.push(o),i=a!=null&&a.showText?o==null?void 0:o.getMeta():i):n.push(a)}),{cells:e,invisibleCellInfo:n,cellsMeta:i}},yR=function(t,r,e){var n;e===void 0&&(e=[]);var i=S7(e,t),a=i.cellsMeta,o=i.cells,s=i.invisibleCellInfo,c=a,d=o,h=(s==null?void 0:s.length)>0&&s.length<e.length;if(h){var v=b7(s,r),g=v.cells,C=v.cellsMeta;c=c||C,d=o.concat(g)}return!ve(o)&&!c&&(c=(n=d[0])===null||n===void 0?void 0:n.getMeta()),{cells:d,viewMeta:c}},E7=function(t){var r=t.interaction,e=r.getActiveCells(),n=[];return Ae(e,function(i,a){var o=i.getMeta(),s=a===0?{showText:!0}:{};n.push(k(k({},s),{colIndex:o==null?void 0:o.colIndex,rowIndex:o==null?void 0:o.rowIndex}))}),n},CR=function(t,r,e){return t.options.mergedCell?t.options.mergedCell(t,r,e):new m7(t,r,e)},_7=function(t,r,e){var n,i=r||E7(t);if((i==null?void 0:i.length)<=1){console.error("then merged cells must be more than one");return}var a=t.interaction.getPanelGroupAllDataCells(),o=yR(a,t,i),s=o.cells,c=o.viewMeta;if(!ve(s)){var d=((n=t.options)===null||n===void 0?void 0:n.mergedCellsInfo)||[];d.push(i),t.setOptions({mergedCellsInfo:d});var h=e?void 0:c;t.panelScrollGroup.addMergeCell(CR(t,s,h))}},T7=function(t,r){var e=nt(t.cells,function(n){return{colIndex:n.getMeta().colIndex,rowIndex:n.getMeta().rowIndex}});return Wa(r,function(n){var i=n.map(function(a){return a.showText?{colIndex:a.colIndex,rowIndex:a.rowIndex}:a});return!Fr(i,e)})},L7=function(t,r){var e,n,i;if(!r||r.cellType!==de.MERGED_CELL){console.error("unmergeCell: the ".concat(r," is not a MergedCell"));return}var a=T7(r,(e=t.options)===null||e===void 0?void 0:e.mergedCellsInfo);(a==null?void 0:a.length)!==((i=(n=t.options)===null||n===void 0?void 0:n.mergedCellsInfo)===null||i===void 0?void 0:i.length)&&(t.setOptions({mergedCellsInfo:a}),r.remove(!0))},EP=function(t,r){var e={};return re(re([],Q(t),!1),Q(r),!1).forEach(function(n){e[n.viewMeta.id]=n}),Object.values(e)},R7=function(t){return nt(t,function(r){return{cells:r.cells,viewMeta:r.getMeta()}})},wR=function(t,r){return ir(t,r,function(e,n){return Fr(e.viewMeta.id,n.viewMeta.id)})},A7=function(t,r){var e,n=(e=t.options)===null||e===void 0?void 0:e.mergedCellsInfo;if(!ve(n)){var i=t.interaction.getPanelGroupAllDataCells();if(!ve(i)){var a=[];n.forEach(function(h){var v=yR(i,t,h);v.cells.length>0&&a.push(v)});var o=r.getChildren(),s=R7(o),c=wR(s,a),d=wR(a,s);Ae(c,function(h){var v=Vr(o,function(g){return Fr(g.getMeta().id,h.viewMeta.id)});v==null||v.remove(!0)}),Ae(d,function(h){var v=h.cells,g=h.viewMeta;r.add(CR(t,v,g))})}}},xR=function(t){var r=t.includes(vr)?"id":"field";return r},m_=function(t,r){r===void 0&&(r=[]);var e=t.getInitColumnLeafNodes();return zn(r.map(function(n){var i=xR(n);return e.find(function(a){return a[i]===n})}))},I7=function(t,r){if(r===void 0&&(r=[]),ve(r))return{prev:null,next:null};var e=t.getInitColumnLeafNodes(),n=m_(t,r).map(function(c){return c==null?void 0:c.colIndex}),i=Math.max.apply(Math,re([],Q(n),!1)),a=Math.min.apply(Math,re([],Q(n),!1)),o=e.find(function(c){return c.colIndex===i+1}),s=e.find(function(c){return c.colIndex===a-1});return{prev:s||null,next:o||null}},O7=function(t,r){if(ve(r))return[];var e=Number.NEGATIVE_INFINITY;return t.reduce(function(n,i,a){if(!r.includes(i))return n;if(a===e+1){var o=Fe(n);o.push(i)}else{var s=[i];n.push(s)}return e=a,n},[])},bR=function(t,r,e){r===void 0&&(r=[]),e===void 0&&(e=!1);var n=function(v,g){v===void 0&&(v=[]),g===void 0&&(g=[]),t.setOptions({interaction:{hiddenColumnFields:v}}),t.interaction.reset(),t.store.set("hiddenColumnsDetail",g),t.render(!1,{reBuildHiddenColumnsDetail:!1})};if(ve(r)&&e){n();return}var i=t.store.get("hiddenColumnsDetail",[]),a=t.options.interaction.hiddenColumnFields;if(!(Fr(r,a)&&!e)){var o=Ya(re(re([],Q(r),!1),Q(a),!1)),s=m_(t,o).every(function(v,g,C){var w=C[g+1];return!w||Math.abs(v.colIndex-w.colIndex)===1}),c=I7(t,s?o:r),d={hideColumnNodes:m_(t,r),displaySiblingNode:c},h=re(re([],Q(i),!1),[d],!1);t.emit(K.LAYOUT_COLS_HIDDEN,d,h),n(o,h)}},M7=function(t){var r=t.dataCfg.fields.columns,e=r===void 0?[]:r;return t.isTableMode()?e:t.getInitColumnLeafNodes().map(function(n){var i=n.id;return i})},y_=function(t,r,e){r===void 0&&(r=[]),e===void 0&&(e=!1),ve(r)&&e&&bR(t,r,!0);var n=M7(t),i=ts(n),a=O7(i,r);a.forEach(function(o){bR(t,o,e)})},D7=function(t,r){var e=t.getColumnLeafNodes(),n=t.getInitColumnLeafNodes(),i=xR(r);return Me(Fe(e),i)===r&&Me(Fe(n),i)!==r},B7=function(t){return(t==null?void 0:t.next)||(t==null?void 0:t.prev)},P7=function(t){var r=B7(t);return r==null?void 0:r.id},C_=function(t,r){return P7(t)===r},Ch=function(t){var r=t.type,e=t.id,n=t.theme,i=t.width,a=t.height,o=ru(t,["type","id","theme","width","height"]),s=r===pn.Horizontal?n.size:null,c=r===pn.Vertical?n.size:null;return{fill:n.background,fillOpacity:n.backgroundOpacity,cursor:"".concat(r,"-resize"),width:s,height:c,appendInfo:k(k({},o),{isResizeArea:!0,type:r,id:e,width:i,height:a,size:n.size})}},wh=function(t,r){if(t.foregroundGroup){var e=t.foregroundGroup.findById(r);return e||t.foregroundGroup.addGroup({id:r,zIndex:qs})}},w_=function(t,r,e){var n=e!=null?e:{},i=n.scrollX,a=i===void 0?0:i,o=n.scrollY,s=o===void 0?0:o,c=!(t.x-a>r.x+r.width||t.x+t.width-a<r.x),d=!(t.y-s>r.y+r.height||t.y+t.height-s<r.y);return c&&d},N7=function(t,r,e){if(!t)return!1;var n=t.iconNames,i=t.displayCondition,a=t.belongsCell;return ve(n)||a!==e?!1:i?n.some(function(o){return i(r,o)}):!0},x_=function(t,r,e){var n=Vr(t,function(a){return N7(a,r,e)});if(n){var i=n.iconNames;return n.displayCondition&&(i=i.filter(function(a){return n.displayCondition(r,a)})),k(k({},n),{iconNames:i})}},SR=function(t,r){var e=t.label,n=t.field;return Fr(n,Ye)?{formattedValue:r||e,value:e}:{formattedValue:e,value:e}},lc=function(t){return oh(t)==="ASC"},b_=function(t){return oh(t)==="DESC"},ER=function(t){return!yE(Number(t))},_R=function(t,r,e){var n=lc(r)?1:-1,i=["-",void 0];return t==null?void 0:t.sort(function(a,o){var s=a,c=o;if(e){if(s=a[e],c=o[e],ER(s)&&ER(c))return(Number(s)-Number(c))*n;if(s&&(i!=null&&i.includes(s==null?void 0:s.toString())))return-n;if(Number(s)&&(i!=null&&i.includes(c==null?void 0:c.toString())))return n}return!Qt(s)&&!Qt(c)?s.toString().localeCompare(c.toString(),"zh")*n:s?n:-n})},TR=function(t,r,e){return e?yD(r,Ya(t)):re([],Q(new Set(re(re([],Q(t),!1),Q(r),!1))),!1)},LR=function(t){var r=t.sortByValues,e=t.originValues,n=e.filter(function(s){return r.find(function(c){return Nr(s,c)})}),i=n.map(function(s){var c=s.split(vr);if(c.length>1){var d=c.slice(0,c.length-1).join(vr);return[d,c[c.length-1]]}return c}),a=Array.from(new Set(i.map(function(s){return s[0]})));i.sort(function(s,c){var d=s.slice(0,s.length-1),h=c.slice(0,c.length-1);if(d.join()!==h.join()){var v=a.indexOf(d[0]),g=a.indexOf(h[0]);return v-g}var C=r.indexOf(s[s.length-1]),w=r.indexOf(c[c.length-1]);return C-w});var o=i.map(function(s){return s.join(vr)});return pD(e,o)},F7=function(t){var r=t.originValues,e=t.measureValues,n=t.sortParam,i=t.dataSet,a=n.sortFunc,o=n.sortFieldId,s=n.sortMethod,c=a(k({data:e},n));return c!=null&&c.length?(i.fields.rows.indexOf(o)>0||i.fields.columns.indexOf(o)>0)&&!un(c[0],vr)?LR({sortByValues:c,originValues:r}):TR(c,r,lc(s)):r},H7=function(t){var r=t.sortParam,e=t.measureValues,n=t.originValues,i=t.dataSet,a=r.sortByMeasure,o=r.query,s=r.sortFieldId,c=r.sortMethod,d=i.fields,h=d.rows,v=d.columns,g=h.includes(s),C;if(a){var w=_R(e,c,a===Kn?o[Ye]:a);C=wD(s,g?h:ts(v),w)}else C=nt(_R(e,c));return TR(C,n,lc(c))},z7=function(t){var r=t.sortParam,e=t.originValues,n=t.measureValues,i=t.dataSet,a=r.sortFunc,o=r.sortMethod,s=r.sortBy,c=e,d={originValues:e,measureValues:n,sortParam:r,dataSet:i};return a?c=F7(d):s?c=LR({sortByValues:s,originValues:e}):(lc(o)||b_(o))&&(c=H7(d)),c},G7=function(t,r,e){var n,i={},a=un(t,vr);if(a)for(var o=iL(t,vr),s=!((n=r==null?void 0:r.rows)===null||n===void 0)&&n.includes(e)?r.rows:ts(r.columns),c=0;c<=Jf(s,e);c++)i[s[c]]=o[c];else i[e]=t;return i},RR=function(t){return t.filter(function(r){return r!==Ye})},$7=function(t){var r=t.dataSet,e=t.sortParam,n=t.originValues,i=r.fields,a=e.sortByMeasure,o=e.query,s=e.sortFieldId;if(a!==Kn){var c=r.getMultiData(o,{queryType:ii.DetailOnly});return c}var d=r.getMultiData(o,{queryType:ii.All}),h=ts(i.columns),v=un(i.rows,s),g=RR(v?i.rows:h),C=RR(v?h:i.rows),w=g[g.indexOf(s)+1],S=bt(o),_=C.filter(function(M){return!S.includes(M)}),T=d.filter(function(M){var D=new Set(Object.keys(M[xd]));if(!D.has(s)||D.has(w))return!1;var B=_.every(function(G){return!D.has(G)});return B});return ve(T)?zn(nt(n,function(M){var D=G7(M,i,s);return r.getTotalValue(k(k({},o),D))})):T},W7=function(t){var r=t.dataSet,e=t.sortParam,n=t.originValues,i=t.isSortByMeasure,a;return i?a=$7(t):a=n,z7({sortParam:e,originValues:n,measureValues:a,dataSet:r})},AR=function(t,r){if(t!=null&&t.sortMethod){if(lc(t==null?void 0:t.sortMethod))return"groupAsc";if(b_(t==null?void 0:t.sortMethod))return"groupDesc"}if(r)return"SortDown"},IR=function(t){var r,e,n=t.pivotMeta,i=t.dimensions,a=t.sortedDimensionValues,o=t.sortFieldId,s={children:n},c=[s];try{for(var d=mr(i),h=d.next();!h.done;h=d.next()){var v=h.value;if(v!==o)c=Qf(c,function(g){return re([],Q(g.children.values()),!1)});else{c.forEach(function(g){var C=re([],Q(g.children.values()),!1),w=GE(C,function(S){return Jf(a,S.id)}).map(function(S){return[S.value,S]});g.children=new Map(w)});break}}}catch(g){r={error:g}}finally{try{h&&!h.done&&(e=d.return)&&e.call(d)}finally{if(r)throw r.error}}return s.children},S_=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=Q(e,1),a=i[0];this.headerConfig=k({},a);var o=this.meta,s=o.value,c=o.query,d=this.spreadsheet.dataCfg.sortParams,h=this.isSortCell(),v=Vr(re([],Q(d),!1).reverse(),function(C){return h&&(C==null?void 0:C.sortByMeasure)===s&&Fr(Me(C,"query"),c)}),g=AR(v,h);this.headerConfig.sortParam=k(k(k({},this.headerConfig.sortParam),v||{query:c}),{type:g})},r.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.actionIcons=[],this.hasDefaultHiddenIcon=!1},r.prototype.getTreeIcon=function(){return this.treeIcon},r.prototype.getInteractiveBorderShapeStyle=function(e){var n=this.getCellArea(),i=n.x,a=n.y,o=n.height,s=n.width;return{x:i+e,y:a+e,width:s-e*2,height:o-e*2}},r.prototype.getFormattedFieldValue=function(){var e=this.meta,n=e.label,i=e.isTotalRoot,a=e.isGrandTotals,o=this.spreadsheet.dataSet.getFieldFormatter(this.meta.field),s=!0;this.spreadsheet.isTableMode()?s=!1:this.spreadsheet.isHierarchyTreeType()?s=!(a&&i):s=!i;var c=s&&o?o(n,void 0,this.meta):n;return{formattedValue:c,value:n}},r.prototype.getActionIconCfg=function(){return x_(this.spreadsheet.options.headerActionIcons,this.meta,this.cellType)},r.prototype.showSortIcon=function(){var e=this.spreadsheet,n=e.options,i=e.dataCfg,a=ve(i.fields.values);if(n.showDefaultHeaderActionIcon&&!a){var o=this.headerConfig.sortParam,s=this.meta.query;return s&&Fr(o==null?void 0:o.query,s)&&(o==null?void 0:o.type)&&(o==null?void 0:o.type)!=="none"}return!1},r.prototype.getActionIconsCount=function(){if(this.showSortIcon())return 1;var e=this.getActionIconCfg();if(e){var n=e.iconNames;return n.length}return 0},r.prototype.getActionIconsWidth=function(){var e=this.getStyle().icon,n=e.size,i=e.margin;return(n+i.left)*this.getActionIconsCount()},r.prototype.drawSortIcons=function(){var e=this;if(this.showSortIcon()){var n=this.getStyle(),i=n.icon,a=n.text,o=this.getTextConditionFill(a),s=this.headerConfig.sortParam,c=this.getIconPosition(),d=new sh(k(k({name:Me(s,"type","none")},c),{width:i.size,height:i.size,fill:o}));d.on("click",function(h){e.spreadsheet.emit(K.GLOBAL_ACTION_ICON_CLICK,h),e.spreadsheet.handleGroupSort(h,e.meta)}),this.add(d),this.actionIcons.push(d)}},r.prototype.hasDefaultHideActionIcon=function(){return this.hasDefaultHiddenIcon},r.prototype.addActionIcon=function(e){var n=this,i=e.x,a=e.y,o=e.iconName,s=e.defaultHide,c=e.action,d=e.onClick,h=e.onHover,v=this.getStyle(),g=v.icon,C=v.text,w=this.getTextConditionFill(C),S=(g==null?void 0:g.fill)||w,_=new sh({name:o,x:i,y:a,width:g==null?void 0:g.size,height:g==null?void 0:g.size,fill:S});_.set("visible",!s),_.on("mouseover",function(T){n.spreadsheet.emit(K.GLOBAL_ACTION_ICON_HOVER,T),h==null||h({hovering:!0,iconName:o,meta:n.meta,event:T})}),_.on("mouseleave",function(T){n.spreadsheet.emit(K.GLOBAL_ACTION_ICON_HOVER_OFF,T),h==null||h({hovering:!1,iconName:o,meta:n.meta,event:T})}),_.on("click",function(T){var M;n.spreadsheet.emit(K.GLOBAL_ACTION_ICON_CLICK,T),(M=d||c)===null||M===void 0||M({iconName:o,meta:n.meta,event:T})}),this.actionIcons.push(_),this.add(_)},r.prototype.drawActionIcons=function(){var e=this;if(this.showSortIcon()){this.drawSortIcons();return}var n=this.getActionIconCfg();if(n){var i=n.iconNames,a=n.action,o=n.onClick,s=n.onHover,c=n.defaultHide,d=this.getIconPosition(i.length),h=this.getStyle().icon,v=h.size,g=h.margin;Ae(i,function(C,w){var S=d.x+w*v+w*g.left,_=d.y,T=typeof c=="function"?c(e.meta,C):c;T&&(e.hasDefaultHiddenIcon=!0),e.addActionIcon({iconName:C,x:S,y:_,defaultHide:T,action:a,onClick:o,onHover:s})})}},r.prototype.drawBackgroundShape=function(){var e=this.getBackgroundColor(),n=e.backgroundColor,i=e.backgroundColorOpacity;this.backgroundShape=kn(this,k(k({},this.getCellArea()),{fill:n,fillOpacity:i}))},r.prototype.isSortCell=function(){var e,n,i,a=(n=(e=this.meta.spreadsheet)===null||e===void 0?void 0:e.isValueInCols)===null||n===void 0?void 0:n.call(e),o=this.meta.level===((i=this.meta.hierarchy)===null||i===void 0?void 0:i.maxLevel);return a?o&&this.cellType===de.COL_CELL:o&&this.cellType===de.ROW_CELL},r.prototype.handleByStateName=function(e,n){os(e,this)&&this.updateByState(n)},r.prototype.handleSearchResult=function(e){if(os(e,this)){var n=Vr(e,function(i){return i==null?void 0:i.isTarget});n.id===this.getMeta().id?this.updateByState(Se.HIGHLIGHT):this.updateByState(Se.SEARCH_RESULT)}},r.prototype.handleHover=function(e){var n;os(e,this)&&(this.updateByState(Se.HOVER),this.hasDefaultHideActionIcon()&&this.toggleActionIcon((n=e==null?void 0:e[0])===null||n===void 0?void 0:n.id))},r.prototype.handleSelect=function(e,n){os(e,this)&&this.updateByState(Se.SELECTED);var i=nt(n,"id");un(i,this.meta.id)&&this.updateByState(Se.SELECTED)},r.prototype.getTextStyle=function(){var e=this.getStyle(),n=e.text,i=e.bolderText,a=e.measureText,o;this.isMeasureField()?o=a||n:this.isBolderText()?o=i:o=n;var s=this.getTextConditionFill(o);return k(k({},o),{fill:s})},r.prototype.getBackgroundColor=function(){var e,n=((e=this.getStyle())===null||e===void 0?void 0:e.cell)||{},i=n.backgroundColor,a=n.backgroundColorOpacity;return this.getBackgroundColorByCondition(i,a)},r.prototype.getBackgroundColorByCondition=function(e,n){var i,a=e,o=this.findFieldCondition((i=this.conditions)===null||i===void 0?void 0:i.background);if(o&&o.mapping){var s=this.mappingValue(o);s&&(a=s.fill)}return{backgroundColor:a,backgroundColorOpacity:n}},r.prototype.toggleActionIcon=function(e){if(this.getMeta().id===e){var n=[];Ae(this.actionIcons,function(i){i.get("visible")||(i.set("visible",!0),n.push(i))}),this.spreadsheet.store.set("visibleActionIcons",n)}},r.prototype.update=function(){var e=this.spreadsheet.interaction,n=e==null?void 0:e.getState(),i=e==null?void 0:e.getCells([de.CORNER_CELL,de.COL_CELL,de.ROW_CELL]);if(Qu(i))switch(n==null?void 0:n.stateName){case Se.SELECTED:case Se.BRUSH_SELECTED:this.handleSelect(i,n==null?void 0:n.nodes);break;case Se.HOVER_FOCUS:case Se.HOVER:this.handleHover(i);break;case Se.SEARCH_RESULT:this.handleSearchResult(i);break;default:this.handleByStateName(i,n==null?void 0:n.stateName);break}},r.prototype.updateByState=function(e){t.prototype.updateByState.call(this,e,this)},r.prototype.hideInteractionShape=function(){t.prototype.hideInteractionShape.call(this)},r.prototype.isMeasureField=function(){return[Ye,ow].includes(this.meta.field)},r.prototype.mappingValue=function(e){var n=this.getMeta().label;return e==null?void 0:e.mapping(n,this.meta)},r.prototype.findFieldCondition=function(e){var n=this;return jm(e,function(i){return i.field instanceof RegExp?i.field.test(n.meta.field):i.field===n.meta.field})},r}(g1),xh=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"cellType",{get:function(){return de.COL_CELL},enumerable:!1,configurable:!0}),r.prototype.initCell=function(){t.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorders(),this.drawResizeArea(),this.addExpandColumnIconShapes(),this.update()},r.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",kn(this,k({},this.getCellArea()),{visible:!1}))},r.prototype.drawInteractiveBorderShape=function(){var e=2;this.stateShapes.set("interactiveBorderShape",kn(this,this.getInteractiveBorderShapeStyle(e),{visible:!1}))},r.prototype.getMaxTextWidth=function(){var e=this.getContentArea().width;return e-this.getActionIconsWidth()},r.prototype.getIconPosition=function(){if(this.meta.isLeaf)return t.prototype.getIconPosition.call(this,this.getActionIconsCount());var e=this.getIconStyle(),n=e.margin.left,i=this.getTextStyle(),a=this.textPosition,o=a.x,s=a.y-e.size/2;return i.textAlign==="left"?{x:o+this.actualTextWidth+n,y:s}:i.textAlign==="right"?{x:o+n,y:s}:{x:o+this.actualTextWidth/2+n,y:s}},r.prototype.isBolderText=function(){var e=this.meta,n=e.isLeaf,i=e.isTotals;return!!(i||!n)},r.prototype.getTextPosition=function(){var e,n=this.meta.isLeaf,i=this.headerConfig,a=i.width,o=i.scrollContainsRowHeader,s=i.cornerWidth,c=i.scrollX,d=this.getTextStyle(),h=this.getContentArea(),v=this.getIconStyle();if(n)return hh(h,d,this.actualTextWidth,v,this.getActionIconsCount()).text;var g={start:c-(o?s:0),width:a+(o?s:0)},C=this.getTextStyle().textAlign,w=oD(g,C,(e=this.getStyle().cell)===null||e===void 0?void 0:e.padding),S=this.getActionIconsWidth(),_=this.actualTextWidth+S,T=aD(w,{start:h.x,width:h.width},_),M=lD(T,this.actualTextWidth,S,C),D=h.y+h.height/2;return this.textPosition={x:M,y:D},this.textPosition},r.prototype.getActionIconsWidth=function(){var e=this.getStyle().icon,n=e.size,i=e.margin,a=this.getActionIconsCount();return(n+i.left)*a+(a>0?i.right:0)},r.prototype.getColResizeAreaKey=function(){return this.meta.key},r.prototype.getColResizeArea=function(){return wh(this.spreadsheet,Np)},r.prototype.getHorizontalResizeAreaName=function(){return"".concat(zp).concat(this.meta.key)},r.prototype.drawHorizontalResizeArea=function(){var e,n,i=((n=(e=this.spreadsheet.options.style)===null||e===void 0?void 0:e.colCfg)===null||n===void 0?void 0:n.height)===0;if(!(i||!this.shouldDrawResizeAreaByType("colCellVertical",this))){var a=this.headerConfig,o=a.cornerWidth,s=a.viewportWidth,c=this.meta,d=c.y,h=c.height,v=this.getResizeAreaStyle(),g=this.getColResizeArea(),C=this.getHorizontalResizeAreaName(),w=g.find(function(_){return _.attrs.name===C});if(!w){var S=o+s;g.addShape("rect",{attrs:k(k({},Ch({theme:v,type:pn.Vertical,id:this.getColResizeAreaKey(),effect:Lr.Field,offsetX:0,offsetY:d,width:S,height:h,meta:this.meta})),{name:C,x:0,y:d+h-v.size/2,width:S})})}}},r.prototype.shouldAddVerticalResizeArea=function(){var e=this.meta,n=e.x,i=e.y,a=e.width,o=e.height,s=this.headerConfig,c=s.scrollX,d=s.scrollY,h=s.scrollContainsRowHeader,v=s.cornerWidth,g=s.height,C=s.width,w=this.getResizeAreaStyle(),S={x:n+a-w.size/2,y:i,width:w.size,height:o},_={x:h?-v:0,y:0,width:h?v+C:C,height:g};return w_(S,_,{scrollX:c,scrollY:d})},r.prototype.getVerticalResizeAreaOffset=function(){var e=this.meta,n=e.x,i=e.y,a=this.headerConfig,o=a.scrollX,s=a.position;return{x:s.x+n-o,y:s.y+i}},r.prototype.drawVerticalResizeArea=function(){if(!(!this.meta.isLeaf||!this.shouldDrawResizeAreaByType("colCellHorizontal",this))){var e=this.meta,n=e.label,i=e.width,a=e.height,o=this.getResizeAreaStyle(),s=this.getColResizeArea();if(this.shouldAddVerticalResizeArea()){var c=this.getVerticalResizeAreaOffset(),d=c.x,h=c.y;s.addShape("rect",{attrs:k(k({},Ch({theme:o,type:pn.Horizontal,effect:Lr.Cell,id:n,offsetX:d,offsetY:h,width:i,height:a,meta:this.meta})),{x:d+i-o.size/2,y:h,height:a})})}}},r.prototype.drawResizeArea=function(){this.drawHorizontalResizeArea(),this.drawVerticalResizeArea()},r.prototype.drawHorizontalBorder=function(){var e=ns(cr.TOP,this.meta,this.theme.colCell.cell),n=e.position,i=e.style;zr(this,n,i)},r.prototype.drawVerticalBorder=function(e){var n=ns(e,this.meta,this.theme.colCell.cell),i=n.position,a=n.style;zr(this,i,a)},r.prototype.drawBorders=function(){var e=this.spreadsheet,n=e.options,i=e.isTableMode;this.meta.colIndex===0&&i()&&!n.showSeriesNumber&&this.drawVerticalBorder(cr.LEFT),this.drawHorizontalBorder(),this.drawVerticalBorder(cr.RIGHT)},r.prototype.hasHiddenColumnCell=function(){var e=this,n=this.spreadsheet.options,i=n.interaction.hiddenColumnFields,a=i===void 0?[]:i,o=n.tooltip.operation,s=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return ve(s)||ve(a)||!o.hiddenColumns?!1:!!s.find(function(c){return C_(c==null?void 0:c.displaySiblingNode,e.meta.id)})},r.prototype.getExpandIconTheme=function(){var e=this.getStyle();return e.icon},r.prototype.addExpandColumnSplitLine=function(){var e=this.meta,n=e.x,i=e.y,a=e.width,o=e.height,s=this.theme.splitLine,c=s.horizontalBorderColor,d=s.horizontalBorderWidth,h=s.horizontalBorderColorOpacity,v=s.borderDash,g=this.isLastColumn()?n+a-d:n;zr(this,{x1:g,y1:i,x2:g,y2:i+o},{stroke:c,lineWidth:d,strokeOpacity:h,lineDash:v})},r.prototype.addExpandColumnIconShapes=function(){this.hasHiddenColumnCell()&&(this.addExpandColumnSplitLine(),this.addExpandColumnIcons())},r.prototype.addExpandColumnIcons=function(){var e=this.isLastColumn();this.addExpandColumnIcon(e),this.isAllDisplaySiblingNodeHidden()&&e&&this.addExpandColumnIcon(!1)},r.prototype.addExpandColumnIcon=function(e){var n=this,i=this.getExpandColumnIconConfig(e),a=u_(this,k(k({},i),{name:"ExpandColIcon",cursor:"pointer"}));a.on("click",function(){n.spreadsheet.emit(K.LAYOUT_COLS_EXPANDED,n.meta)})},r.prototype.getExpandColumnIconConfig=function(e){var n=this.getExpandIconTheme().size,i=this.getCellArea(),a=i.x,o=i.y,s=i.width,c=i.height,d=a-n,h=e?d+s:d,v=o+c/2-n/2;return{x:h,y:v,width:n*2,height:n}},r.prototype.isLastColumn=function(){return D7(this.spreadsheet,this.meta.id)},r.prototype.isAllDisplaySiblingNodeHidden=function(){var e=this.meta.id,n=this.spreadsheet.store.get("hiddenColumnsDetail",[]),i=n.find(function(o){var s,c=o.displaySiblingNode;return((s=c==null?void 0:c.next)===null||s===void 0?void 0:s.id)===e}),a=n.find(function(o){var s,c=o.displaySiblingNode;return((s=c==null?void 0:c.prev)===null||s===void 0?void 0:s.id)===e});return a&&i},r}(S_),k7=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.isBolderText=function(){var e=this.meta.cornerType;return e===ai.Col},Object.defineProperty(r.prototype,"cellType",{get:function(){return de.CORNER_CELL},enumerable:!1,configurable:!0}),r.prototype.initCell=function(){t.prototype.initCell.call(this),this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawTreeIcon(),this.drawCellText(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorderShape(),this.drawResizeArea(),this.update()},r.prototype.drawCellText=function(){this.drawTextShape()},r.prototype.drawTextShape=function(){var e=this.getContentArea().x,n=this.getCellArea(),i=n.y,a=n.height,o=this.getTextStyle(),s=this.getCornerText(),c=this.getMaxTextWidth(),d=is(this.meta,this.spreadsheet.options.placeholder),h=this.spreadsheet.measureTextWidth,v=oc({measureTextWidth:h,text:s,maxWidth:c,fontParam:o,placeholder:d});this.actualText=v;var g=v.indexOf(_a),C=v,w="";if(g!==-1&&this.spreadsheet.isHierarchyTreeType()){var S=g+(a5()?1:0);C=s.substr(0,S),w=s.slice(S),w=oc({measureTextWidth:h,text:w,maxWidth:c,fontParam:o})}var _=iD({x:e+this.getTreeIconWidth(),y:i,width:c,height:a},o).x,T=i+(ve(w)?a/2:a/4);this.addTextShape(rs(this,[this.textShapes[0]],_,T,C,o)),ve(w)||this.addTextShape(rs(this,[this.textShapes[1]],_,i+a*.75,w,o)),this.actualTextWidth=Ua([h(C,o),h(w,o)])},r.prototype.drawTreeIcon=function(){var e=this;if(!(!this.showTreeIcon()||this.meta.cornerType===ai.Col)){var n=this.headerConfig.hierarchyCollapse,i=this.getStyle().icon.size,a=this.getTextStyle(),o=a.textBaseline,s=a.fill,c=this.getContentArea();this.treeIcon=VL(this,{x:c.x,y:u1(c,o,i),width:i,height:i},s,n,function(){e.headerConfig.spreadsheet.store.set("scrollY",0),e.headerConfig.spreadsheet.emit(K.LAYOUT_TREE_ROWS_COLLAPSE_ALL,n)})}},r.prototype.drawBorderShape=function(){var e=this;[cr.TOP,cr.LEFT].forEach(function(n){var i=ns(n,e.getCellArea(),e.getStyle().cell),a=i.position,o=i.style;zr(e,a,o)})},r.prototype.isLastRowCornerCell=function(){var e=this.meta,n=e.cornerType,i=e.field,a=this.headerConfig.rows;return n===ai.Row&&(this.spreadsheet.isHierarchyTreeType()||Fe(a)===i)},r.prototype.getResizeAreaEffect=function(){var e=this.meta.cornerType;return e===ai.Series?Lr.Series:this.isLastRowCornerCell()&&this.spreadsheet.isHierarchyTreeType()?Lr.Tree:Lr.Field},r.prototype.drawResizeArea=function(){if(this.shouldDrawResizeAreaByType("cornerCellHorizontal",this)){var e=this.getResizeAreaStyle(),n=wh(this.spreadsheet,hi),i=this.headerConfig,a=i.position,o=i.scrollX,s=i.scrollY,c=i.width,d=i.height,h=this.meta,v=h.x,g=h.y,C=h.width,w=h.height,S=h.field,_=h.cornerType,T={x:v+C-e.size/2,y:g,width:e.size,height:w},M={x:0,y:0,width:c,height:d};if(!(_===ai.Col||!w_(T,M,{scrollX:o,scrollY:s}))){var D=a.x+v-o,B=a.y+(this.isLastRowCornerCell()?0:g);n.addShape("rect",{attrs:k(k({},Ch({theme:e,id:S,type:pn.Horizontal,effect:this.getResizeAreaEffect(),offsetX:D,offsetY:B,width:C,height:w,meta:this.meta})),{x:D+C-e.size/2,y:B,height:this.isLastRowCornerCell()?d:w})})}}},r.prototype.showTreeIcon=function(){var e;return this.spreadsheet.isHierarchyTreeType()&&((e=this.meta)===null||e===void 0?void 0:e.x)===0},r.prototype.getIconPosition=function(){var e,n,i=(n=(e=this.textShapes)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.cfg.attrs,a=this.getTextStyle(),o=a.textBaseline,s=a.textAlign,c=this.getStyle().icon,d=c.size,h=c.margin,v=(i==null?void 0:i.x)+zm([[bE("center"),at(this.actualTextWidth/2)],[bE("right"),at(0)],[aL,at(this.actualTextWidth)]])(s)+h.left,g=u1(this.getContentArea(),o,d);return{x:v,y:g}},r.prototype.getTreeIconWidth=function(){var e=this.getStyle().icon,n=e.size,i=e.margin;return this.showTreeIcon()?n+i.right:0},r.prototype.getTextStyle=function(){var e=this.getStyle(),n=e.text,i=e.bolderText,a=this.isBolderText()?n:i,o=this.getTextConditionFill(a);return k(k({},a),{fill:o})},r.prototype.getMaxTextWidth=function(){var e=this.getContentArea().width;return e-this.getTreeIconWidth()-this.getActionIconsWidth()},r.prototype.getTextPosition=function(){return{x:0,y:0}},r.prototype.getFormattedFieldValue=function(){return SR(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},r.prototype.getCornerText=function(){var e=this.getFormattedFieldValue().formattedValue;return e},r}(S_),U7=function(t,r,e,n){var i,a,o=Me(n,"size"),s=Me(n,"margin"),c=0;return t.options.showDefaultHeaderActionIcon?c=1:c=(a=(i=x_(t.options.headerActionIcons,r,e))===null||i===void 0?void 0:i.iconNames.length)!==null&&a!==void 0?a:0,c*(o+s.left)+(c>0?s.right:0)},OR=function(t,r,e){var n,i,a=((n=e.icon.margin)===null||n===void 0?void 0:n.left)||0,o=((i=e.icon.margin)===null||i===void 0?void 0:i.right)||0,s=t.store.get("hiddenColumnsDetail",[]),c=!1,d=!1;s.forEach(function(v){var g,C,w,S;((C=(g=v==null?void 0:v.displaySiblingNode)===null||g===void 0?void 0:g.prev)===null||C===void 0?void 0:C.field)===r&&(c=!0),((S=(w=v==null?void 0:v.displaySiblingNode)===null||w===void 0?void 0:w.next)===null||S===void 0?void 0:S.field)===r&&(d=!0)});var h=Me(e,"icon.size");return{left:d?h+o:0,right:c?h+a:0}},Y7=function(t,r,e){var n=Me(e,"cell.padding"),i=OR(t,r.field,e);return n.left+n.right+U7(t,r,de.COL_CELL,Me(e,"icon"))+i.left+i.right},MR=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=Q(e,1),a=i[0];this.headerConfig=k({},a);var o=this.meta.field,s=this.spreadsheet.dataCfg.sortParams,c=Vr(s,function(h){return(h==null?void 0:h.sortFieldId)===o}),d=AR(c,!0);this.headerConfig.sortParam=k(k(k({},this.headerConfig.sortParam),c||{}),{type:d})},r.prototype.isFrozenCell=function(){var e=this.spreadsheet.options,n=e.frozenColCount,i=e.frozenTrailingColCount,a=this.spreadsheet.facet.layoutResult.colNodes.filter(function(s){return _i(s)}),o=$5(this.meta).colIndex;return Jl(o,n)||es(o,i,a.length)},r.prototype.getFormattedFieldValue=function(){return SR(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},r.prototype.shouldAddVerticalResizeArea=function(){return this.isFrozenCell()?!0:t.prototype.shouldAddVerticalResizeArea.call(this)},r.prototype.getVerticalResizeAreaOffset=function(){var e=this.meta,n=e.x,i=e.y,a=this.headerConfig,o=a.scrollX,s=a.position;return this.isFrozenCell()?{x:n,y:i}:{x:s.x+n-o,y:s.y+i}},r.prototype.getColResizeArea=function(){var e=this.isFrozenCell();return e?wh(this.spreadsheet,Fp):t.prototype.getColResizeArea.call(this)},r.prototype.isSortCell=function(){return!0},r.prototype.showSortIcon=function(){return this.spreadsheet.options.showDefaultHeaderActionIcon},r.prototype.getTextStyle=function(){var e=this.getStyle();return e==null?void 0:e.bolderText},r.prototype.getContentArea=function(){var e,n=(((e=this.getStyle())===null||e===void 0?void 0:e.cell)||this.theme.dataCell.cell).padding,i=k({},n),a=OR(this.spreadsheet,this.meta.field,this.getStyle());return a.left&&(i.left=(i.left||0)+a.left),a.right&&(i.right=(i.right||0)+a.right),jL(this.getCellArea(),i)},r.prototype.getHorizontalResizeAreaName=function(){return"".concat(zp).concat("table-col-cell")},r.prototype.drawBackgroundShape=function(){var e=this.getStyle().cell.backgroundColor;this.backgroundShape=kn(this,k(k({},this.getCellArea()),{fill:e}))},r}(xh),V7=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getStyle=function(e){return e?this.theme[e]:Me(this,"theme.cornerCell")},r.prototype.showSortIcon=function(){return!1},r.prototype.drawLeftBorder=function(){var e=ns(cr.LEFT,this.getCellArea(),this.getStyle().cell),n=e.position,i=e.style;zr(this,n,i)},r.prototype.drawBorders=function(){t.prototype.drawBorders.call(this),this.meta.colIndex===0&&this.drawLeftBorder()},r}(MR),y1=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getLinkFieldStyle=function(){return this.theme.rowCell.text.linkTextFill},r.prototype.drawBorderShape=function(){t.prototype.drawBorderShape.call(this),this.meta.colIndex===0&&this.drawLeftBorder()},r.prototype.shouldDrawResizeArea=function(){return this.meta.colIndex===0},r.prototype.drawResizeArea=function(){if(this.shouldDrawResizeArea()){var e=this.getCellArea(),n=e.x,i=e.y,a=e.width,o=e.height,s=this.meta.rowIndex,c=this.getResizeAreaStyle(),d=this.spreadsheet.options,h=d.frozenRowCount,v=d.frozenTrailingRowCount,g=this.spreadsheet.facet.getCellRange(),C=l1(s,g.start,h),w=ch(s,g.end,v),S=C||w,_=S?Ed:po,T=wh(this.spreadsheet,_),M=this.spreadsheet.facet.layoutResult.colsHierarchy.height,D=this.spreadsheet.facet.getScrollOffset().scrollY,B=this.spreadsheet.facet.getPaginationScrollY(),G=D+B,V=i+(w?0:M);w||(V-=C?B:G),T.addShape("rect",{attrs:k(k({},Ch({id:String(this.meta.rowIndex),theme:c,type:pn.Vertical,effect:Lr.Cell,offsetX:n,offsetY:V,width:a,height:o,meta:this.meta})),{x:n,y:V+o-c.size/2,width:a})})}},r}(Xa),DR=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"cellType",{get:function(){return de.ROW_CELL},enumerable:!1,configurable:!0}),r.prototype.getTextStyle=function(){return this.theme.rowCell.seriesText},r}(y1),C1=function(){function t(r){this.EVENT="gesture",this.gm=r}return t.prototype.do=function(r){var e=r.type;switch(e){case"touchstart":this.onTouchStart(r);break;case"touchmove":this.onTouchMove(r);break;case"touchend":this.onTouchEnd(r);break;case"touchcancel":this.onTouchCancel(r);break;default:return}},t.prototype.emit=function(r){this.gm.emit(this.EVENT,r)},t}(),X7=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.EVENT="pan",e}return r.prototype.onTouchCancel=function(e){},r.prototype.onTouchEnd=function(e){},r.prototype.onTouchMove=function(e){var n=e.x,i=e.y,a=n-this.preX,o=i-this.preY;this.preX=n,this.preY=i,this.emit({x:n,y:i,deltaX:a,deltaY:o,event:e})},r.prototype.onTouchStart=function(e){var n=e.x,i=e.y;this.preX=n,this.preY=i},r}(C1),Yo=typeof performance=="object"&&performance.now?performance:Date,j7=300,BR=10,q7=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.EVENT="press",e}return r.prototype.onTouchCancel=function(e){this.clearTimeout()},r.prototype.onTouchEnd=function(e){this.clearTimeout()},r.prototype.onTouchMove=function(e){var n=e.x,i=e.y;(n-this.touchStartX>BR||i-this.touchStartY>BR)&&this.clearTimeout()},r.prototype.onTouchStart=function(e){var n=this;this.clearTimeout();var i=e.x,a=e.y;this.touchStartTime=Yo.now(),this.touchStartX=i,this.touchStartY=a,this.pressTimeout=window.setTimeout(function(){n.emit({x:i,y:a,event:e})},j7)},r.prototype.clearTimeout=function(){window.clearTimeout(this.pressTimeout)},r}(C1),K7=100,Z7=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.EVENT="swipe",e.latestMoveTime=0,e.ms=0,e.speedX=0,e.speedY=0,e.preX=0,e.preY=0,e}return r.prototype.onTouchCancel=function(e){},r.prototype.onTouchEnd=function(e){var n=this.speedX,i=this.speedY;if(Yo.now()-this.latestMoveTime<K7){var a=e.x,o=e.y;this.emit({x:a,y:o,speedX:n,speedY:i,event:e})}},r.prototype.onTouchMove=function(e){var n=e.x,i=e.y,a=Yo.now(),o=n-this.preX,s=i-this.preY,c=a-this.ms;this.speedX=o/c,this.speedY=s/c,this.latestMoveTime=a},r.prototype.onTouchStart=function(e){var n=e.x,i=e.y;this.speedX=this.speedY=0,this.preX=n,this.preY=i,this.ms=Yo.now()},r}(C1),Q7=300,PR=2,J7=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.EVENT="tap",e}return r.prototype.onTouchCancel=function(e){},r.prototype.onTouchEnd=function(e){var n=e.x,i=e.y;n-this.touchStartX<PR&&i-this.touchStartY<PR&&Yo.now()-this.touchStartTime<Q7&&this.emit({x:n,y:i,event:e})},r.prototype.onTouchMove=function(e){},r.prototype.onTouchStart=function(e){var n=e.x,i=e.y;this.touchStartTime=Yo.now(),this.touchStartX=n,this.touchStartY=i},r}(C1),e9={Pan:X7,Press:q7,Swipe:Z7,Tap:J7},t9=function(t){return e9[t]},NR=function(t){Le(r,t);function r(e,n){n===void 0&&(n={});var i=t.call(this)||this;return i.onTouchStart=function(a){i.preventEvent(a),i.element.on("touchmove",i.onTouchMove),i.element.on("touchend",i.onTouchEnd),i.element.on("touchcancel",i.onTouchCancel),i.emit("touchdown",a),i.doGestures(a)},i.onTouchMove=function(a){i.preventEvent(a),i.emit("touchmove",a),i.doGestures(a)},i.onTouchEnd=function(a){i.preventEvent(a),i.emit("touchend",a),i.element.off("touchmove",i.onTouchMove),i.element.off("touchend",i.onTouchEnd),i.element.off("touchcancel",i.onTouchCancel),i.doGestures(a)},i.onTouchCancel=function(a){i.preventEvent(a),i.emit("touchcancel",a),i.element.off("touchmove",i.onTouchMove),i.element.off("touchend",i.onTouchEnd),i.element.off("touchcancel",i.onTouchCancel),i.doGestures(a)},i.element=e,i.options=n,i.initialGestures(),i.bindTouchStart(),i}return r.prototype.destroy=function(){this.element.off("touchstart",this.onTouchStart),this.off()},r.prototype.initialGestures=function(){var e=this,n=this.options.gestures||["Pan","Press","Swipe","Tap"];this.gestures=n.map(function(i){var a=t9(i);return new a(e)})},r.prototype.bindTouchStart=function(){this.element.on("touchstart",this.onTouchStart)},r.prototype.preventEvent=function(e){var n=e.type,i=this.options.prevents||[];i.includes(n)&&e.preventDefault()},r.prototype.doGestures=function(e){this.gestures.forEach(function(n){n.do(e)})},r}(gs),r9=pv,n9=800,i9="swipe",a9="pan",FR="wheel",o9=function(t){Le(r,t);function r(e){var n=t.call(this)||this;return n.rafMs=0,n.onPan=function(i){n.raf&&cancelAnimationFrame(n.raf);var a=i.deltaX,o=i.deltaY,s=n.getWrapperEvent(i,a,o);n.emit(FR,s)},n.onSwipe=function(i){var a=i.speedX,o=i.speedY;n.rafMs=Yo.now(),n.ms=n.rafMs,(a!==0||o!==0)&&n.rafInertia(i)},n.element=e,n.gm=new NR(e,{gestures:["Pan","Swipe"]}),n.gm.on(i9,n.onSwipe),n.gm.on(a9,n.onPan),n}return r.prototype.destroy=function(){window.cancelAnimationFrame(this.raf),this.gm.destroy(),this.off()},r.prototype.rafInertia=function(e){var n=this,i=e.speedX,a=e.speedY;this.raf=window.requestAnimationFrame(function(){var o=Yo.now(),s=(o-n.ms)/n9;if(s<1){s=r9(1-s);var c=o-n.rafMs,d=i*s*c,h=a*s*c,v=n.getWrapperEvent(e,d,h);n.emit(FR,v),n.rafMs=o,n.rafInertia(e)}})},r.prototype.getWrapperEvent=function(e,n,i){return k(k({},e),{deltaX:-n,deltaY:-i})},r}(gs),l9=function(t){var r=0,e=t.children;return e==null||e.forEach(function(n){r+=n.height||0}),r},HR=function(t,r,e,n,i){var a=0,o=t+(r-i)/2,s=t+(r+i)/2,c=e+n;return t+i>=c?a=t:c<s?a=e+n-i:e>o?t+r-e>i?a=e:a=t+r-i:a=t+(r-i)/2,a},s9=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"cellType",{get:function(){return de.ROW_CELL},enumerable:!1,configurable:!0}),r.prototype.destroy=function(){var e;t.prototype.destroy.call(this),(e=this.gm)===null||e===void 0||e.destroy()},r.prototype.initCell=function(){t.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawTreeIcon(),this.drawTreeLeafNodeAlignDot(),this.drawRectBorder(),this.drawResizeAreaInLeaf(),this.drawActionIcons(),this.update()},r.prototype.getBackgroundColor=function(){var e=this.getCrossBackgroundColor(this.meta.rowIndex),n=e.backgroundColor,i=e.backgroundColorOpacity;return this.getBackgroundColorByCondition(n,i)},r.prototype.drawInteractiveBorderShape=function(){var e=2;this.stateShapes.set("interactiveBorderShape",kn(this,this.getInteractiveBorderShapeStyle(e),{visible:!1}))},r.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",kn(this,k({},this.getCellArea()),{visible:!1}))},r.prototype.showTreeIcon=function(){return this.spreadsheet.isHierarchyTreeType()&&!this.meta.isLeaf},r.prototype.showTreeLeafNodeAlignDot=function(){var e;return((e=this.spreadsheet.options.style)===null||e===void 0?void 0:e.showTreeLeafNodeAlignDot)&&this.spreadsheet.isHierarchyTreeType()},r.prototype.getParentTreeIconCfg=function(){if(!(!this.showTreeLeafNodeAlignDot()||!this.spreadsheet.isHierarchyTreeType()||!this.meta.isLeaf))return Me(this.meta,"parent.belongsCell.treeIcon.cfg")},r.prototype.drawTreeIcon=function(){var e=this;if(this.showTreeIcon()){var n=this.meta,i=n.isCollapsed,a=n.id,o=n.hierarchy,s=this.getContentArea().x,c=this.getTextStyle().fill,d=this.getStyle().icon.size,h=this.getContentIndent(),v=s+h,g=this.getIconYPosition();this.treeIcon=VL(this,{x:v,y:g,width:d,height:d},c,i,function(){if(!br()){if(!i){var C=e.spreadsheet.store.get("scrollY"),w=e.headerConfig.viewportHeight||0,S=l9(e.meta),_=o.height-S;if(C>0&&C+w>_){var T=_-w;e.spreadsheet.store.set("scrollY",T>0?T:0)}}e.spreadsheet.emit(K.ROW_CELL_COLLAPSE_TREE_ROWS,{id:a,isCollapsed:!i,node:e.meta})}}),br()&&(this.gm=new NR(this,{gestures:["Tap"]}),this.gm.on("tap",function(){e.spreadsheet.emit(K.ROW_CELL_COLLAPSE_TREE_ROWS,{id:a,isCollapsed:!i,node:e.meta})}))}},r.prototype.drawTreeLeafNodeAlignDot=function(){var e=this.getParentTreeIconCfg();if(e){var n=this.getStyle().icon,i=n.size,a=n.margin,o=e.x+i+a.right,s=this.getTextPosition().y,c=this.getTextStyle(),d=c.fill,h=c.fontSize,v=i/5;this.treeLeafNodeAlignDot=YL(this,{x:o+i/2,y:s+(h-v)/2,r:v,fill:d,fillOpacity:.3})}},r.prototype.isBolderText=function(){var e=this.meta,n=e.isLeaf,i=e.isTotals,a=e.level;return!n&&a===0||i},r.prototype.drawTextShape=function(){t.prototype.drawTextShape.call(this),this.drawLinkField(this.meta)},r.prototype.drawRectBorder=function(){var e=this,n=this.getCellArea().x,i=this.getContentIndent(),a=this.spreadsheet.isHierarchyTreeType()?n:n+i;[cr.BOTTOM,cr.LEFT].forEach(function(o){var s=ns(o,k(k({},e.getCellArea()),{x:a}),e.getStyle().cell),c=s.position,d=s.style;zr(e,c,d)})},r.prototype.getResizeClipAreaBBox=function(){var e=this.headerConfig,n=e.width,i=e.viewportHeight;return{x:0,y:0,width:n,height:i}},r.prototype.drawResizeAreaInLeaf=function(){if(!(!this.meta.isLeaf||!this.shouldDrawResizeAreaByType("rowCellVertical",this))){var e=this.getCellArea(),n=e.x,i=e.y,a=e.width,o=e.height,s=this.getResizeAreaStyle(),c=wh(this.spreadsheet,po),d=this.headerConfig,h=d.position,v=d.seriesNumberWidth,g=d.width,C=d.scrollX,w=d.scrollY,S={x:n+v,y:i+o-s.size/2,width:a,height:s.size},_=this.getResizeClipAreaBBox();if(w_(S,_,{scrollX:C,scrollY:w})){var T=(h==null?void 0:h.x)+n-C+v,M=(h==null?void 0:h.y)+i-w,D=this.spreadsheet.isFrozenRowHeader()?g-v-(n-C):a;c.addShape("rect",{attrs:k(k({},Ch({id:this.meta.id,theme:s,type:pn.Vertical,effect:Lr.Cell,offsetX:T,offsetY:M,width:a,height:o,meta:this.meta})),{x:T,y:M+o-s.size/2,width:D})})}}},r.prototype.getContentIndent=function(){if(!this.spreadsheet.isHierarchyTreeType())return 0;for(var e=this.getStyle(),n=e.icon,i=e.cell,a=n.size+n.margin.right,o=this.meta.parent,s=0;o;)o.height!==0&&(s+=a),o=o.parent;return this.showTreeLeafNodeAlignDot()&&(s+=this.isTreeLevel()?0:i.padding.right+n.margin.right),s},r.prototype.getTextIndent=function(){var e=this.getStyle().icon,n=e.size,i=e.margin,a=this.getContentIndent(),o=this.showTreeIcon()||this.isTreeLevel()&&this.showTreeLeafNodeAlignDot()?n+i.right:0;return a+o},r.prototype.isTreeLevel=function(){return Vr(Me(this.meta,"parent.children"),function(e){return!e.isLeaf})},r.prototype.getIconPosition=function(){var e=this.textShape.cfg.attrs,n=e.x,i=e.y,a=e.textAlign,o=this.getStyle().icon.margin.left;return a==="left"?{x:n+this.actualTextWidth+o,y:i}:a==="right"?{x:n+o,y:i}:{x:n+this.actualTextWidth/2+o,y:i}},r.prototype.getMaxTextWidth=function(){var e=this.getContentArea().width;return e-this.getTextIndent()-this.getActionIconsWidth()},r.prototype.getTextArea=function(){var e=this.getContentArea(),n=this.getTextIndent();return k(k({},e),{x:e.x+n,width:e.width-n})},r.prototype.getAdjustTextAreaHeight=function(e,n,i){var a=e.height;return!this.spreadsheet.facet.vScrollBar&&e.y+e.height>n+i&&(a=n+i-e.y),a},r.prototype.calculateTextY=function(e){var n=e.textArea,i=e.adjustTextAreaHeight,a=this.headerConfig,o=a.scrollY,s=a.viewportHeight,c=this.getTextStyle().fontSize;return HR(n.y,i,o,s,c)},r.prototype.getTextPosition=function(){var e=this.getTextArea(),n=this.headerConfig,i=n.scrollY,a=n.viewportHeight,o=this.getAdjustTextAreaHeight(e,i,a),s=this.calculateTextY({textArea:e,adjustTextAreaHeight:o}),c=hh(e,this.getTextStyle(),0,this.getIconStyle(),this.getActionIconsCount()).text.x;return{x:c,y:s}},r.prototype.getIconYPosition=function(){var e=this.getTextPosition().y,n=this.getStyle().icon.size,i=this.getTextStyle().fontSize;return e+(i-n)/2},r}(S_),bh=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=Q(e),a=i[0],o=i.slice(1);t.prototype.handleRestOptions.call(this,a,o),this.frozenRowCell=o[0]},r.prototype.getAdjustTextAreaHeight=function(e,n,i){var a=e.y-this.getFrozenFirstRowHeight(),o=e.height;return!this.spreadsheet.facet.vScrollBar&&a+e.height>n+i&&(o=n+i-a),o},r.prototype.calculateTextY=function(e){var n=e.textArea,i=e.adjustTextAreaHeight,a=this.headerConfig,o=a.scrollY,s=a.viewportHeight,c=this.getTextStyle().fontSize;return HR(n.y,i,o+this.getFrozenFirstRowHeight(),s,c)},r.prototype.getResizeClipAreaBBox=function(){return k(k({},t.prototype.getResizeClipAreaBBox.call(this)),{y:this.getFrozenFirstRowHeight()})},r.prototype.getFrozenFirstRowHeight=function(){var e;if(this.frozenRowCell)return 0;var n=this.headerConfig.spreadsheet,i=n.facet,a=ic(n.options,(e=i==null?void 0:i.layoutResult)===null||e===void 0?void 0:e.rowNodes).frozenRowHeight;return a},r}(s9),zR=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.initCell=function(){this.drawBackgroundShape(),this.drawRectBorder(),this.drawTextShape()},r.prototype.getTextStyle=function(){var e;return(e=this.getStyle())===null||e===void 0?void 0:e.seriesText},r.prototype.getTextPosition=function(){return t.prototype.getTextPosition.call(this)},r.prototype.getActionIconsCount=function(){return 0},r.prototype.getIconStyle=function(){},r.prototype.drawResizeAreaInLeaf=function(){},r.prototype.update=function(){},r.prototype.findFieldCondition=function(){},r.prototype.mappingValue=function(){},r}(bh),w1=function(t){return[gr.META,gr.CONTROL].includes(t.key)},GR=function(t){return t.ctrlKey||t.metaKey},Ti=function(t){var r=t.getMeta(),e=r||{},n=e.id,i=e.colIndex,a=e.rowIndex,o=e.rowQuery;return{id:n,colIndex:i,rowIndex:a,type:t.cellType,rowQuery:o}},u9=function(t,r){var e=t.interaction;e.changeState({stateName:Se.SELECTED,cells:r}),t.emit(K.GLOBAL_SELECTED,e.getActiveCells())};function E_(t,r){var e=Math.min(t.rowIndex,r.rowIndex),n=Math.max(t.rowIndex,r.rowIndex),i=Math.min(t.colIndex,r.colIndex),a=Math.max(t.colIndex,r.colIndex);return{start:{rowIndex:e,colIndex:i},end:{rowIndex:n,colIndex:a}}}function c9(t,r){var e=r.interaction,n=r.facet,i=r.options;if(r.isTableMode()){if(!i.showSeriesNumber)return[];var a=n.layoutResult.colLeafNodes[0].id,o=m1(String(t.rowIndex),a),s=[],c=e.getAllCells().find(function(d){return d.getMeta().id===o});return c&&c instanceof DR&&s.push(c),s}return p_(t.rowId,e.getAllRowHeaderCells(),r.isHierarchyTreeType())}var d9=function(t,r){return r.getRowNodes().filter(function(e){return t.includes(e.id)})},f9=function(t,r){return r.getColumnNodes().filter(function(e){return t.includes(e.id)})},h9=function(t,r){var e=r.interaction.getSelectedCellHighlight(),n=e.colHeader,i=e.rowHeader,a=[{shouldGet:i,getter:d9},{shouldGet:n,getter:f9}],o=a.filter(function(s){return s.shouldGet}).reduce(function(s,c){return re(re([],Q(s),!1),Q(c.getter(t.id,r)),!1)},[]).filter(function(s){return!!s.belongsCell}).map(function(s){return Ti(s.belongsCell)});return re([t],Q(o),!1)},_P=function(t,r){var e=nh(t,function(n,i){return re(re([],Q(n),!1),Q(h9(i,r)),!1)},[]);return gL(re(re([],Q(t),!1),Q(e),!1),"id")},__=function(t,r){var e=t.getSelectedCellHighlight(),n=e.colHeader,i=e.rowHeader;n&&t.updateCells(t.getAllColHeaderCells()),i&&t.updateCells(t.getAllRowHeaderCells()),r()},$R=function(t){var r=t.store.get("visibleActionIcons"),e=t.interaction.getInteractedCells(),n=t.interaction.getState().cells;if(ve(e)&&ve(n)&&ve(r))return!1;if(Ae(r,function(a){a.set("visible",!1)}),t.store.set("visibleActionIcons",[]),Ae(e,function(a){a.hideInteractionShape()}),t.interaction.resetState(),t.options.interaction.selectedCellsSpotlight){var i=t.interaction.getPanelGroupAllUnSelectedDataCells()||[];Ae(i,function(a){a.clearUnselectedState()})}return!0},v9=function(t,r){var e=r==null?void 0:r.stateName;t.interaction.isEqualStateName(e)||($R(t),t.hideTooltip(),t.store.set(Zs,r))},p9=function(t,r,e){var n,i,a=e.facet,o=a.panelBBox.width,s=a==null?void 0:a.frozenGroupInfo,c=(n=s==null?void 0:s.frozenCol.width)!==null&&n!==void 0?n:0,d=(i=s==null?void 0:s.frozenTrailingCol.width)!==null&&i!==void 0?i:0,h=a.layoutResult.colLeafNodes[t];return r===Ur.SCROLL_UP?h.x-c:h.x+h.width-(o-d)},g9=function(t,r,e){var n,i,a=e.facet,o=a.viewCellHeights.getCellOffsetY,s=a.panelBBox.height,c=o(t+1);if(Qt(c))return 0;var d=a==null?void 0:a.frozenGroupInfo,h=(n=d==null?void 0:d.frozenRow.height)!==null&&n!==void 0?n:0,v=(i=d==null?void 0:d.frozenTrailingRow.height)!==null&&i!==void 0?i:0;return r===Ur.SCROLL_UP?o(t)-h:c-(s-v)},oa=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=function(i,a){if(_e(i)&&_e(a))return a},n=re(re([],Q(t),!1),[e],!1);return H.apply(void 0,re([{}],Q(n),!1))},m9=function(t){var r=["rows","columns","values"],e=r.reduce(function(n,i){var a=t[i],o=Ya(a);return Fr(o,a)||console.warn("fields.".concat(i,":[").concat(a,"] should be unique")),n[i]=o,n},{});return k(k({},t),e)},x1=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=oa.apply(void 0,re([_w],Q(t),!1));return e.fields=m9(e.fields),(!ve(e.fields.customTreeItems)||ve(e.fields.values))&&(e.fields.valueInCols=!1),e},WR=function(t){return oa(Bd,t)},sc=9e15,Vo=1e9,T_="0123456789abcdef",b1="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",S1="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",L_={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-sc,maxE:sc,crypto:!1},kR,ja,We=!0,E1="[DecimalError] ",Xo=E1+"Invalid argument: ",UR=E1+"Precision limit exceeded",YR=E1+"crypto unavailable",VR="[object Decimal]",Xr=Math.floor,dr=Math.pow,y9=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,C9=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,w9=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,XR=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Li=1e7,Ne=7,x9=9007199254740991,b9=b1.length-1,R_=S1.length-1,ie={toStringTag:VR};ie.absoluteValue=ie.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),De(t)},ie.ceil=function(){return De(new this.constructor(this),this.e+1,2)},ie.clampedTo=ie.clamp=function(t,r){var e,n=this,i=n.constructor;if(t=new i(t),r=new i(r),!t.s||!r.s)return new i(NaN);if(t.gt(r))throw Error(Xo+r);return e=n.cmp(t),e<0?t:n.cmp(r)>0?r:new i(n)},ie.comparedTo=ie.cmp=function(t){var r,e,n,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,c=a.s,d=t.s;if(!o||!s)return!c||!d?NaN:c!==d?c:o===s?0:!o^c<0?1:-1;if(!o[0]||!s[0])return o[0]?c:s[0]?-d:0;if(c!==d)return c;if(a.e!==t.e)return a.e>t.e^c<0?1:-1;for(n=o.length,i=s.length,r=0,e=n<i?n:i;r<e;++r)if(o[r]!==s[r])return o[r]>s[r]^c<0?1:-1;return n===i?0:n>i^c<0?1:-1},ie.cosine=ie.cos=function(){var t,r,e=this,n=e.constructor;return e.d?e.d[0]?(t=n.precision,r=n.rounding,n.precision=t+Math.max(e.e,e.sd())+Ne,n.rounding=1,e=S9(n,JR(n,e)),n.precision=t,n.rounding=r,De(ja==2||ja==3?e.neg():e,t,r,!0)):new n(1):new n(NaN)},ie.cubeRoot=ie.cbrt=function(){var t,r,e,n,i,a,o,s,c,d,h=this,v=h.constructor;if(!h.isFinite()||h.isZero())return new v(h);for(We=!1,a=h.s*dr(h.s*h,1/3),!a||Math.abs(a)==1/0?(e=Gr(h.d),t=h.e,(a=(t-e.length+1)%3)&&(e+=a==1||a==-2?"0":"00"),a=dr(e,1/3),t=Xr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new v(e),n.s=h.s):n=new v(a.toString()),o=(t=v.precision)+3;;)if(s=n,c=s.times(s).times(s),d=c.plus(h),n=Lt(d.plus(h).times(s),d.plus(c),o+2,1),Gr(s.d).slice(0,o)===(e=Gr(n.d)).slice(0,o))if(e=e.slice(o-3,o+1),e=="9999"||!i&&e=="4999"){if(!i&&(De(s,t+1,0),s.times(s).times(s).eq(h))){n=s;break}o+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(De(n,t+1,1),r=!n.times(n).times(n).eq(h));break}return We=!0,De(n,t,v.rounding,r)},ie.decimalPlaces=ie.dp=function(){var t,r=this.d,e=NaN;if(r){if(t=r.length-1,e=(t-Xr(this.e/Ne))*Ne,t=r[t],t)for(;t%10==0;t/=10)e--;e<0&&(e=0)}return e},ie.dividedBy=ie.div=function(t){return Lt(this,new this.constructor(t))},ie.dividedToIntegerBy=ie.divToInt=function(t){var r=this,e=r.constructor;return De(Lt(r,new e(t),0,1,1),e.precision,e.rounding)},ie.equals=ie.eq=function(t){return this.cmp(t)===0},ie.floor=function(){return De(new this.constructor(this),this.e+1,3)},ie.greaterThan=ie.gt=function(t){return this.cmp(t)>0},ie.greaterThanOrEqualTo=ie.gte=function(t){var r=this.cmp(t);return r==1||r===0},ie.hyperbolicCosine=ie.cosh=function(){var t,r,e,n,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;e=o.precision,n=o.rounding,o.precision=e+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),r=(1/R1(4,t)).toString()):(t=16,r="2.3283064365386962890625e-10"),a=uc(o,1,a.times(r),new o(1),!0);for(var c,d=t,h=new o(8);d--;)c=a.times(a),a=s.minus(c.times(h.minus(c.times(h))));return De(a,o.precision=e,o.rounding=n,!0)},ie.hyperbolicSine=ie.sinh=function(){var t,r,e,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(r=a.precision,e=a.rounding,a.precision=r+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=uc(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/R1(5,t)),i=uc(a,2,i,i,!0);for(var o,s=new a(5),c=new a(16),d=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(c.times(o).plus(d))))}return a.precision=r,a.rounding=e,De(i,r,e,!0)},ie.hyperbolicTangent=ie.tanh=function(){var t,r,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(t=n.precision,r=n.rounding,n.precision=t+7,n.rounding=1,Lt(e.sinh(),e.cosh(),n.precision=t,n.rounding=r)):new n(e.s)},ie.inverseCosine=ie.acos=function(){var t,r=this,e=r.constructor,n=r.abs().cmp(1),i=e.precision,a=e.rounding;return n!==-1?n===0?r.isNeg()?Ri(e,i,a):new e(0):new e(NaN):r.isZero()?Ri(e,i+4,a).times(.5):(e.precision=i+6,e.rounding=1,r=r.asin(),t=Ri(e,i+4,a).times(.5),e.precision=i,e.rounding=a,t.minus(r))},ie.inverseHyperbolicCosine=ie.acosh=function(){var t,r,e=this,n=e.constructor;return e.lte(1)?new n(e.eq(1)?0:NaN):e.isFinite()?(t=n.precision,r=n.rounding,n.precision=t+Math.max(Math.abs(e.e),e.sd())+4,n.rounding=1,We=!1,e=e.times(e).minus(1).sqrt().plus(e),We=!0,n.precision=t,n.rounding=r,e.ln()):new n(e)},ie.inverseHyperbolicSine=ie.asinh=function(){var t,r,e=this,n=e.constructor;return!e.isFinite()||e.isZero()?new n(e):(t=n.precision,r=n.rounding,n.precision=t+2*Math.max(Math.abs(e.e),e.sd())+6,n.rounding=1,We=!1,e=e.times(e).plus(1).sqrt().plus(e),We=!0,n.precision=t,n.rounding=r,e.ln())},ie.inverseHyperbolicTangent=ie.atanh=function(){var t,r,e,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,r=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?De(new a(i),t,r,!0):(a.precision=e=n-i.e,i=Lt(i.plus(1),new a(1).minus(i),e+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=r,i.times(.5))):new a(NaN)},ie.inverseSine=ie.asin=function(){var t,r,e,n,i=this,a=i.constructor;return i.isZero()?new a(i):(r=i.abs().cmp(1),e=a.precision,n=a.rounding,r!==-1?r===0?(t=Ri(a,e+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=e+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=e,a.rounding=n,i.times(2)))},ie.inverseTangent=ie.atan=function(){var t,r,e,n,i,a,o,s,c,d=this,h=d.constructor,v=h.precision,g=h.rounding;if(d.isFinite()){if(d.isZero())return new h(d);if(d.abs().eq(1)&&v+4<=R_)return o=Ri(h,v+4,g).times(.25),o.s=d.s,o}else{if(!d.s)return new h(NaN);if(v+4<=R_)return o=Ri(h,v+4,g).times(.5),o.s=d.s,o}for(h.precision=s=v+10,h.rounding=1,e=Math.min(28,s/Ne+2|0),t=e;t;--t)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(We=!1,r=Math.ceil(s/Ne),n=1,c=d.times(d),o=new h(d),i=d;t!==-1;)if(i=i.times(c),a=o.minus(i.div(n+=2)),i=i.times(c),o=a.plus(i.div(n+=2)),o.d[r]!==void 0)for(t=r;o.d[t]===a.d[t]&&t--;);return e&&(o=o.times(2<<e-1)),We=!0,De(o,h.precision=v,h.rounding=g,!0)},ie.isFinite=function(){return!!this.d},ie.isInteger=ie.isInt=function(){return!!this.d&&Xr(this.e/Ne)>this.d.length-2},ie.isNaN=function(){return!this.s},ie.isNegative=ie.isNeg=function(){return this.s<0},ie.isPositive=ie.isPos=function(){return this.s>0},ie.isZero=function(){return!!this.d&&this.d[0]===0},ie.lessThan=ie.lt=function(t){return this.cmp(t)<0},ie.lessThanOrEqualTo=ie.lte=function(t){return this.cmp(t)<1},ie.logarithm=ie.log=function(t){var r,e,n,i,a,o,s,c,d=this,h=d.constructor,v=h.precision,g=h.rounding,C=5;if(t==null)t=new h(10),r=!0;else{if(t=new h(t),e=t.d,t.s<0||!e||!e[0]||t.eq(1))return new h(NaN);r=t.eq(10)}if(e=d.d,d.s<0||!e||!e[0]||d.eq(1))return new h(e&&!e[0]?-1/0:d.s!=1?NaN:e?0:1/0);if(r)if(e.length>1)a=!0;else{for(i=e[0];i%10===0;)i/=10;a=i!==1}if(We=!1,s=v+C,o=qo(d,s),n=r?L1(h,s+10):qo(t,s),c=Lt(o,n,s,1),Sh(c.d,i=v,g))do if(s+=10,o=qo(d,s),n=r?L1(h,s+10):qo(t,s),c=Lt(o,n,s,1),!a){+Gr(c.d).slice(i+1,i+15)+1==1e14&&(c=De(c,v+1,0));break}while(Sh(c.d,i+=10,g));return We=!0,De(c,v,g)},ie.minus=ie.sub=function(t){var r,e,n,i,a,o,s,c,d,h,v,g,C=this,w=C.constructor;if(t=new w(t),!C.d||!t.d)return!C.s||!t.s?t=new w(NaN):C.d?t.s=-t.s:t=new w(t.d||C.s!==t.s?C:NaN),t;if(C.s!=t.s)return t.s=-t.s,C.plus(t);if(d=C.d,g=t.d,s=w.precision,c=w.rounding,!d[0]||!g[0]){if(g[0])t.s=-t.s;else if(d[0])t=new w(C);else return new w(c===3?-0:0);return We?De(t,s,c):t}if(e=Xr(t.e/Ne),h=Xr(C.e/Ne),d=d.slice(),a=h-e,a){for(v=a<0,v?(r=d,a=-a,o=g.length):(r=g,e=h,o=d.length),n=Math.max(Math.ceil(s/Ne),o)+2,a>n&&(a=n,r.length=1),r.reverse(),n=a;n--;)r.push(0);r.reverse()}else{for(n=d.length,o=g.length,v=n<o,v&&(o=n),n=0;n<o;n++)if(d[n]!=g[n]){v=d[n]<g[n];break}a=0}for(v&&(r=d,d=g,g=r,t.s=-t.s),o=d.length,n=g.length-o;n>0;--n)d[o++]=0;for(n=g.length;n>a;){if(d[--n]<g[n]){for(i=n;i&&d[--i]===0;)d[i]=Li-1;--d[i],d[n]+=Li}d[n]-=g[n]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--e;return d[0]?(t.d=d,t.e=T1(d,e),We?De(t,s,c):t):new w(c===3?-0:0)},ie.modulo=ie.mod=function(t){var r,e=this,n=e.constructor;return t=new n(t),!e.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||e.d&&!e.d[0]?De(new n(e),n.precision,n.rounding):(We=!1,n.modulo==9?(r=Lt(e,t.abs(),0,3,1),r.s*=t.s):r=Lt(e,t,0,n.modulo,1),r=r.times(t),We=!0,e.minus(r))},ie.naturalExponential=ie.exp=function(){return A_(this)},ie.naturalLogarithm=ie.ln=function(){return qo(this)},ie.negated=ie.neg=function(){var t=new this.constructor(this);return t.s=-t.s,De(t)},ie.plus=ie.add=function(t){var r,e,n,i,a,o,s,c,d,h,v=this,g=v.constructor;if(t=new g(t),!v.d||!t.d)return!v.s||!t.s?t=new g(NaN):v.d||(t=new g(t.d||v.s===t.s?v:NaN)),t;if(v.s!=t.s)return t.s=-t.s,v.minus(t);if(d=v.d,h=t.d,s=g.precision,c=g.rounding,!d[0]||!h[0])return h[0]||(t=new g(v)),We?De(t,s,c):t;if(a=Xr(v.e/Ne),n=Xr(t.e/Ne),d=d.slice(),i=a-n,i){for(i<0?(e=d,i=-i,o=h.length):(e=h,n=a,o=d.length),a=Math.ceil(s/Ne),o=a>o?a+1:o+1,i>o&&(i=o,e.length=1),e.reverse();i--;)e.push(0);e.reverse()}for(o=d.length,i=h.length,o-i<0&&(i=o,e=h,h=d,d=e),r=0;i;)r=(d[--i]=d[i]+h[i]+r)/Li|0,d[i]%=Li;for(r&&(d.unshift(r),++n),o=d.length;d[--o]==0;)d.pop();return t.d=d,t.e=T1(d,n),We?De(t,s,c):t},ie.precision=ie.sd=function(t){var r,e=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Xo+t);return e.d?(r=jR(e.d),t&&e.e+1>r&&(r=e.e+1)):r=NaN,r},ie.round=function(){var t=this,r=t.constructor;return De(new r(t),t.e+1,r.rounding)},ie.sine=ie.sin=function(){var t,r,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(t=n.precision,r=n.rounding,n.precision=t+Math.max(e.e,e.sd())+Ne,n.rounding=1,e=_9(n,JR(n,e)),n.precision=t,n.rounding=r,De(ja>2?e.neg():e,t,r,!0)):new n(NaN)},ie.squareRoot=ie.sqrt=function(){var t,r,e,n,i,a,o=this,s=o.d,c=o.e,d=o.s,h=o.constructor;if(d!==1||!s||!s[0])return new h(!d||d<0&&(!s||s[0])?NaN:s?o:1/0);for(We=!1,d=Math.sqrt(+o),d==0||d==1/0?(r=Gr(s),(r.length+c)%2==0&&(r+="0"),d=Math.sqrt(r),c=Xr((c+1)/2)-(c<0||c%2),d==1/0?r="5e"+c:(r=d.toExponential(),r=r.slice(0,r.indexOf("e")+1)+c),n=new h(r)):n=new h(d.toString()),e=(c=h.precision)+3;;)if(a=n,n=a.plus(Lt(o,a,e+2,1)).times(.5),Gr(a.d).slice(0,e)===(r=Gr(n.d)).slice(0,e))if(r=r.slice(e-3,e+1),r=="9999"||!i&&r=="4999"){if(!i&&(De(a,c+1,0),a.times(a).eq(o))){n=a;break}e+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(De(n,c+1,1),t=!n.times(n).eq(o));break}return We=!0,De(n,c,h.rounding,t)},ie.tangent=ie.tan=function(){var t,r,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(t=n.precision,r=n.rounding,n.precision=t+10,n.rounding=1,e=e.sin(),e.s=1,e=Lt(e,new n(1).minus(e.times(e)).sqrt(),t+10,0),n.precision=t,n.rounding=r,De(ja==2||ja==4?e.neg():e,t,r,!0)):new n(NaN)},ie.times=ie.mul=function(t){var r,e,n,i,a,o,s,c,d,h=this,v=h.constructor,g=h.d,C=(t=new v(t)).d;if(t.s*=h.s,!g||!g[0]||!C||!C[0])return new v(!t.s||g&&!g[0]&&!C||C&&!C[0]&&!g?NaN:!g||!C?t.s/0:t.s*0);for(e=Xr(h.e/Ne)+Xr(t.e/Ne),c=g.length,d=C.length,c<d&&(a=g,g=C,C=a,o=c,c=d,d=o),a=[],o=c+d,n=o;n--;)a.push(0);for(n=d;--n>=0;){for(r=0,i=c+n;i>n;)s=a[i]+C[n]*g[i-n-1]+r,a[i--]=s%Li|0,r=s/Li|0;a[i]=(a[i]+r)%Li|0}for(;!a[--o];)a.pop();return r?++e:a.shift(),t.d=a,t.e=T1(a,e),We?De(t,v.precision,v.rounding):t},ie.toBinary=function(t,r){return O_(this,2,t,r)},ie.toDecimalPlaces=ie.toDP=function(t,r){var e=this,n=e.constructor;return e=new n(e),t===void 0?e:(Rn(t,0,Vo),r===void 0?r=n.rounding:Rn(r,0,8),De(e,t+e.e+1,r))},ie.toExponential=function(t,r){var e,n=this,i=n.constructor;return t===void 0?e=la(n,!0):(Rn(t,0,Vo),r===void 0?r=i.rounding:Rn(r,0,8),n=De(new i(n),t+1,r),e=la(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+e:e},ie.toFixed=function(t,r){var e,n,i=this,a=i.constructor;return t===void 0?e=la(i):(Rn(t,0,Vo),r===void 0?r=a.rounding:Rn(r,0,8),n=De(new a(i),t+i.e+1,r),e=la(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+e:e},ie.toFraction=function(t){var r,e,n,i,a,o,s,c,d,h,v,g,C=this,w=C.d,S=C.constructor;if(!w)return new S(C);if(d=e=new S(1),n=c=new S(0),r=new S(n),a=r.e=jR(w)-C.e-1,o=a%Ne,r.d[0]=dr(10,o<0?Ne+o:o),t==null)t=a>0?r:d;else{if(s=new S(t),!s.isInt()||s.lt(d))throw Error(Xo+s);t=s.gt(r)?a>0?r:d:s}for(We=!1,s=new S(Gr(w)),h=S.precision,S.precision=a=w.length*Ne*2;v=Lt(s,r,0,1,1),i=e.plus(v.times(n)),i.cmp(t)!=1;)e=n,n=i,i=d,d=c.plus(v.times(i)),c=i,i=r,r=s.minus(v.times(i)),s=i;return i=Lt(t.minus(e),n,0,1,1),c=c.plus(i.times(d)),e=e.plus(i.times(n)),c.s=d.s=C.s,g=Lt(d,n,a,1).minus(C).abs().cmp(Lt(c,e,a,1).minus(C).abs())<1?[d,n]:[c,e],S.precision=h,We=!0,g},ie.toHexadecimal=ie.toHex=function(t,r){return O_(this,16,t,r)},ie.toNearest=function(t,r){var e=this,n=e.constructor;if(e=new n(e),t==null){if(!e.d)return e;t=new n(1),r=n.rounding}else{if(t=new n(t),r===void 0?r=n.rounding:Rn(r,0,8),!e.d)return t.s?e:t;if(!t.d)return t.s&&(t.s=e.s),t}return t.d[0]?(We=!1,e=Lt(e,t,0,r,1).times(t),We=!0,De(e)):(t.s=e.s,e=t),e},ie.toNumber=function(){return+this},ie.toOctal=function(t,r){return O_(this,8,t,r)},ie.toPower=ie.pow=function(t){var r,e,n,i,a,o,s=this,c=s.constructor,d=+(t=new c(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new c(dr(+s,d));if(s=new c(s),s.eq(1))return s;if(n=c.precision,a=c.rounding,t.eq(1))return De(s,n,a);if(r=Xr(t.e/Ne),r>=t.d.length-1&&(e=d<0?-d:d)<=x9)return i=qR(c,s,e,n),t.s<0?new c(1).div(i):De(i,n,a);if(o=s.s,o<0){if(r<t.d.length-1)return new c(NaN);if(t.d[r]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return e=dr(+s,d),r=e==0||!isFinite(e)?Xr(d*(Math.log("0."+Gr(s.d))/Math.LN10+s.e+1)):new c(e+"").e,r>c.maxE+1||r<c.minE-1?new c(r>0?o/0:0):(We=!1,c.rounding=s.s=1,e=Math.min(12,(r+"").length),i=A_(t.times(qo(s,n+e)),n),i.d&&(i=De(i,n+5,1),Sh(i.d,n,a)&&(r=n+10,i=De(A_(t.times(qo(s,r+e)),r),r+5,1),+Gr(i.d).slice(n+1,n+15)+1==1e14&&(i=De(i,n+1,0)))),i.s=o,We=!0,c.rounding=a,De(i,n,a))},ie.toPrecision=function(t,r){var e,n=this,i=n.constructor;return t===void 0?e=la(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Rn(t,1,Vo),r===void 0?r=i.rounding:Rn(r,0,8),n=De(new i(n),t,r),e=la(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+e:e},ie.toSignificantDigits=ie.toSD=function(t,r){var e=this,n=e.constructor;return t===void 0?(t=n.precision,r=n.rounding):(Rn(t,1,Vo),r===void 0?r=n.rounding:Rn(r,0,8)),De(new n(e),t,r)},ie.toString=function(){var t=this,r=t.constructor,e=la(t,t.e<=r.toExpNeg||t.e>=r.toExpPos);return t.isNeg()&&!t.isZero()?"-"+e:e},ie.truncated=ie.trunc=function(){return De(new this.constructor(this),this.e+1,1)},ie.valueOf=ie.toJSON=function(){var t=this,r=t.constructor,e=la(t,t.e<=r.toExpNeg||t.e>=r.toExpPos);return t.isNeg()?"-"+e:e};function Gr(t){var r,e,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,r=1;r<i;r++)n=t[r]+"",e=Ne-n.length,e&&(a+=jo(e)),a+=n;o=t[r],n=o+"",e=Ne-n.length,e&&(a+=jo(e))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Rn(t,r,e){if(t!==~~t||t<r||t>e)throw Error(Xo+t)}function Sh(t,r,e,n){var i,a,o,s;for(a=t[0];a>=10;a/=10)--r;return--r<0?(r+=Ne,i=0):(i=Math.ceil((r+1)/Ne),r%=Ne),a=dr(10,Ne-r),s=t[i]%a|0,n==null?r<3?(r==0?s=s/100|0:r==1&&(s=s/10|0),o=e<4&&s==99999||e>3&&s==49999||s==5e4||s==0):o=(e<4&&s+1==a||e>3&&s+1==a/2)&&(t[i+1]/a/100|0)==dr(10,r-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:r<4?(r==0?s=s/1e3|0:r==1?s=s/100|0:r==2&&(s=s/10|0),o=(n||e<4)&&s==9999||!n&&e>3&&s==4999):o=((n||e<4)&&s+1==a||!n&&e>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==dr(10,r-3)-1,o}function _1(t,r,e){for(var n,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=r;for(i[0]+=T_.indexOf(t.charAt(o++)),n=0;n<i.length;n++)i[n]>e-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/e|0,i[n]%=e)}return i.reverse()}function S9(t,r){var e,n,i;if(r.isZero())return r;n=r.d.length,n<32?(e=Math.ceil(n/3),i=(1/R1(4,e)).toString()):(e=16,i="2.3283064365386962890625e-10"),t.precision+=e,r=uc(t,1,r.times(i),new t(1));for(var a=e;a--;){var o=r.times(r);r=o.times(o).minus(o).times(8).plus(1)}return t.precision-=e,r}var Lt=function(){function t(n,i,a){var o,s=0,c=n.length;for(n=n.slice();c--;)o=n[c]*i+s,n[c]=o%a|0,s=o/a|0;return s&&n.unshift(s),n}function r(n,i,a,o){var s,c;if(a!=o)c=a>o?1:-1;else for(s=c=0;s<a;s++)if(n[s]!=i[s]){c=n[s]>i[s]?1:-1;break}return c}function e(n,i,a,o){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*o+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o,s,c){var d,h,v,g,C,w,S,_,T,M,D,B,G,V,q,J,te,se,ue,ce,me=n.constructor,Te=n.s==i.s?1:-1,le=n.d,pe=i.d;if(!le||!le[0]||!pe||!pe[0])return new me(!n.s||!i.s||(le?pe&&le[0]==pe[0]:!pe)?NaN:le&&le[0]==0||!pe?Te*0:Te/0);for(c?(C=1,h=n.e-i.e):(c=Li,C=Ne,h=Xr(n.e/C)-Xr(i.e/C)),ue=pe.length,te=le.length,T=new me(Te),M=T.d=[],v=0;pe[v]==(le[v]||0);v++);if(pe[v]>(le[v]||0)&&h--,a==null?(V=a=me.precision,o=me.rounding):s?V=a+(n.e-i.e)+1:V=a,V<0)M.push(1),w=!0;else{if(V=V/C+2|0,v=0,ue==1){for(g=0,pe=pe[0],V++;(v<te||g)&&V--;v++)q=g*c+(le[v]||0),M[v]=q/pe|0,g=q%pe|0;w=g||v<te}else{for(g=c/(pe[0]+1)|0,g>1&&(pe=t(pe,g,c),le=t(le,g,c),ue=pe.length,te=le.length),J=ue,D=le.slice(0,ue),B=D.length;B<ue;)D[B++]=0;ce=pe.slice(),ce.unshift(0),se=pe[0],pe[1]>=c/2&&++se;do g=0,d=r(pe,D,ue,B),d<0?(G=D[0],ue!=B&&(G=G*c+(D[1]||0)),g=G/se|0,g>1?(g>=c&&(g=c-1),S=t(pe,g,c),_=S.length,B=D.length,d=r(S,D,_,B),d==1&&(g--,e(S,ue<_?ce:pe,_,c))):(g==0&&(d=g=1),S=pe.slice()),_=S.length,_<B&&S.unshift(0),e(D,S,B,c),d==-1&&(B=D.length,d=r(pe,D,ue,B),d<1&&(g++,e(D,ue<B?ce:pe,B,c))),B=D.length):d===0&&(g++,D=[0]),M[v++]=g,d&&D[0]?D[B++]=le[J]||0:(D=[le[J]],B=1);while((J++<te||D[0]!==void 0)&&V--);w=D[0]!==void 0}M[0]||M.shift()}if(C==1)T.e=h,kR=w;else{for(v=1,g=M[0];g>=10;g/=10)v++;T.e=v+h*C-1,De(T,s?a+T.e+1:a,o,w)}return T}}();function De(t,r,e,n){var i,a,o,s,c,d,h,v,g,C=t.constructor;e:if(r!=null){if(v=t.d,!v)return t;for(i=1,s=v[0];s>=10;s/=10)i++;if(a=r-i,a<0)a+=Ne,o=r,h=v[g=0],c=h/dr(10,i-o-1)%10|0;else if(g=Math.ceil((a+1)/Ne),s=v.length,g>=s)if(n){for(;s++<=g;)v.push(0);h=c=0,i=1,a%=Ne,o=a-Ne+1}else break e;else{for(h=s=v[g],i=1;s>=10;s/=10)i++;a%=Ne,o=a-Ne+i,c=o<0?0:h/dr(10,i-o-1)%10|0}if(n=n||r<0||v[g+1]!==void 0||(o<0?h:h%dr(10,i-o-1)),d=e<4?(c||n)&&(e==0||e==(t.s<0?3:2)):c>5||c==5&&(e==4||n||e==6&&(a>0?o>0?h/dr(10,i-o):0:v[g-1])%10&1||e==(t.s<0?8:7)),r<1||!v[0])return v.length=0,d?(r-=t.e+1,v[0]=dr(10,(Ne-r%Ne)%Ne),t.e=-r||0):v[0]=t.e=0,t;if(a==0?(v.length=g,s=1,g--):(v.length=g+1,s=dr(10,Ne-a),v[g]=o>0?(h/dr(10,i-o)%dr(10,o)|0)*s:0),d)for(;;)if(g==0){for(a=1,o=v[0];o>=10;o/=10)a++;for(o=v[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,v[0]==Li&&(v[0]=1));break}else{if(v[g]+=s,v[g]!=Li)break;v[g--]=0,s=1}for(a=v.length;v[--a]===0;)v.pop()}return We&&(t.e>C.maxE?(t.d=null,t.e=NaN):t.e<C.minE&&(t.e=0,t.d=[0])),t}function la(t,r,e){if(!t.isFinite())return QR(t);var n,i=t.e,a=Gr(t.d),o=a.length;return r?(e&&(n=e-o)>0?a=a.charAt(0)+"."+a.slice(1)+jo(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+jo(-i-1)+a,e&&(n=e-o)>0&&(a+=jo(n))):i>=o?(a+=jo(i+1-o),e&&(n=e-i-1)>0&&(a=a+"."+jo(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),e&&(n=e-o)>0&&(i+1===o&&(a+="."),a+=jo(n))),a}function T1(t,r){var e=t[0];for(r*=Ne;e>=10;e/=10)r++;return r}function L1(t,r,e){if(r>b9)throw We=!0,e&&(t.precision=e),Error(UR);return De(new t(b1),r,1,!0)}function Ri(t,r,e){if(r>R_)throw Error(UR);return De(new t(S1),r,e,!0)}function jR(t){var r=t.length-1,e=r*Ne+1;if(r=t[r],r){for(;r%10==0;r/=10)e--;for(r=t[0];r>=10;r/=10)e++}return e}function jo(t){for(var r="";t--;)r+="0";return r}function qR(t,r,e,n){var i,a=new t(1),o=Math.ceil(n/Ne+4);for(We=!1;;){if(e%2&&(a=a.times(r),eA(a.d,o)&&(i=!0)),e=Xr(e/2),e===0){e=a.d.length-1,i&&a.d[e]===0&&++a.d[e];break}r=r.times(r),eA(r.d,o)}return We=!0,a}function KR(t){return t.d[t.d.length-1]&1}function ZR(t,r,e){for(var n,i=new t(r[0]),a=0;++a<r.length;)if(n=new t(r[a]),n.s)i[e](n)&&(i=n);else{i=n;break}return i}function A_(t,r){var e,n,i,a,o,s,c,d=0,h=0,v=0,g=t.constructor,C=g.rounding,w=g.precision;if(!t.d||!t.d[0]||t.e>17)return new g(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(r==null?(We=!1,c=w):c=r,s=new g(.03125);t.e>-2;)t=t.times(s),v+=5;for(n=Math.log(dr(2,v))/Math.LN10*2+5|0,c+=n,e=a=o=new g(1),g.precision=c;;){if(a=De(a.times(t),c,1),e=e.times(++h),s=o.plus(Lt(a,e,c,1)),Gr(s.d).slice(0,c)===Gr(o.d).slice(0,c)){for(i=v;i--;)o=De(o.times(o),c,1);if(r==null)if(d<3&&Sh(o.d,c-n,C,d))g.precision=c+=10,e=a=s=new g(1),h=0,d++;else return De(o,g.precision=w,C,We=!0);else return g.precision=w,o}o=s}}function qo(t,r){var e,n,i,a,o,s,c,d,h,v,g,C=1,w=10,S=t,_=S.d,T=S.constructor,M=T.rounding,D=T.precision;if(S.s<0||!_||!_[0]||!S.e&&_[0]==1&&_.length==1)return new T(_&&!_[0]?-1/0:S.s!=1?NaN:_?0:S);if(r==null?(We=!1,h=D):h=r,T.precision=h+=w,e=Gr(_),n=e.charAt(0),Math.abs(a=S.e)<15e14){for(;n<7&&n!=1||n==1&&e.charAt(1)>3;)S=S.times(t),e=Gr(S.d),n=e.charAt(0),C++;a=S.e,n>1?(S=new T("0."+e),a++):S=new T(n+"."+e.slice(1))}else return d=L1(T,h+2,D).times(a+""),S=qo(new T(n+"."+e.slice(1)),h-w).plus(d),T.precision=D,r==null?De(S,D,M,We=!0):S;for(v=S,c=o=S=Lt(S.minus(1),S.plus(1),h,1),g=De(S.times(S),h,1),i=3;;){if(o=De(o.times(g),h,1),d=c.plus(Lt(o,new T(i),h,1)),Gr(d.d).slice(0,h)===Gr(c.d).slice(0,h))if(c=c.times(2),a!==0&&(c=c.plus(L1(T,h+2,D).times(a+""))),c=Lt(c,new T(C),h,1),r==null)if(Sh(c.d,h-w,M,s))T.precision=h+=w,d=o=S=Lt(v.minus(1),v.plus(1),h,1),g=De(S.times(S),h,1),i=s=1;else return De(c,T.precision=D,M,We=!0);else return T.precision=D,c;c=d,i+=2}}function QR(t){return String(t.s*t.s/0)}function I_(t,r){var e,n,i;for((e=r.indexOf("."))>-1&&(r=r.replace(".","")),(n=r.search(/e/i))>0?(e<0&&(e=n),e+=+r.slice(n+1),r=r.substring(0,n)):e<0&&(e=r.length),n=0;r.charCodeAt(n)===48;n++);for(i=r.length;r.charCodeAt(i-1)===48;--i);if(r=r.slice(n,i),r){if(i-=n,t.e=e=e-n-1,t.d=[],n=(e+1)%Ne,e<0&&(n+=Ne),n<i){for(n&&t.d.push(+r.slice(0,n)),i-=Ne;n<i;)t.d.push(+r.slice(n,n+=Ne));r=r.slice(n),n=Ne-r.length}else n-=i;for(;n--;)r+="0";t.d.push(+r),We&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function E9(t,r){var e,n,i,a,o,s,c,d,h;if(r.indexOf("_")>-1){if(r=r.replace(/(\d)_(?=\d)/g,"$1"),XR.test(r))return I_(t,r)}else if(r==="Infinity"||r==="NaN")return+r||(t.s=NaN),t.e=NaN,t.d=null,t;if(C9.test(r))e=16,r=r.toLowerCase();else if(y9.test(r))e=2;else if(w9.test(r))e=8;else throw Error(Xo+r);for(a=r.search(/p/i),a>0?(c=+r.slice(a+1),r=r.substring(2,a)):r=r.slice(2),a=r.indexOf("."),o=a>=0,n=t.constructor,o&&(r=r.replace(".",""),s=r.length,a=s-a,i=qR(n,new n(e),a,a*2)),d=_1(r,e,Li),h=d.length-1,a=h;d[a]===0;--a)d.pop();return a<0?new n(t.s*0):(t.e=T1(d,h),t.d=d,We=!1,o&&(t=Lt(t,i,s*4)),c&&(t=t.times(Math.abs(c)<54?dr(2,c):Ai.pow(2,c))),We=!0,t)}function _9(t,r){var e,n=r.d.length;if(n<3)return r.isZero()?r:uc(t,2,r,r);e=1.4*Math.sqrt(n),e=e>16?16:e|0,r=r.times(1/R1(5,e)),r=uc(t,2,r,r);for(var i,a=new t(5),o=new t(16),s=new t(20);e--;)i=r.times(r),r=r.times(a.plus(i.times(o.times(i).minus(s))));return r}function uc(t,r,e,n,i){var a,o,s,c,d=t.precision,h=Math.ceil(d/Ne);for(We=!1,c=e.times(e),s=new t(n);;){if(o=Lt(s.times(c),new t(r++*r++),d,1),s=i?n.plus(o):n.minus(o),n=Lt(o.times(c),new t(r++*r++),d,1),o=s.plus(n),o.d[h]!==void 0){for(a=h;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=n,n=o,o=a}return We=!0,o.d.length=h+1,o}function R1(t,r){for(var e=t;--r;)e*=t;return e}function JR(t,r){var e,n=r.s<0,i=Ri(t,t.precision,1),a=i.times(.5);if(r=r.abs(),r.lte(a))return ja=n?4:1,r;if(e=r.divToInt(i),e.isZero())ja=n?3:2;else{if(r=r.minus(e.times(i)),r.lte(a))return ja=KR(e)?n?2:3:n?4:1,r;ja=KR(e)?n?1:4:n?3:2}return r.minus(i).abs()}function O_(t,r,e,n){var i,a,o,s,c,d,h,v,g,C=t.constructor,w=e!==void 0;if(w?(Rn(e,1,Vo),n===void 0?n=C.rounding:Rn(n,0,8)):(e=C.precision,n=C.rounding),!t.isFinite())h=QR(t);else{for(h=la(t),o=h.indexOf("."),w?(i=2,r==16?e=e*4-3:r==8&&(e=e*3-2)):i=r,o>=0&&(h=h.replace(".",""),g=new C(1),g.e=h.length-o,g.d=_1(la(g),10,i),g.e=g.d.length),v=_1(h,10,i),a=c=v.length;v[--c]==0;)v.pop();if(!v[0])h=w?"0p+0":"0";else{if(o<0?a--:(t=new C(t),t.d=v,t.e=a,t=Lt(t,g,e,n,0,i),v=t.d,a=t.e,d=kR),o=v[e],s=i/2,d=d||v[e+1]!==void 0,d=n<4?(o!==void 0||d)&&(n===0||n===(t.s<0?3:2)):o>s||o===s&&(n===4||d||n===6&&v[e-1]&1||n===(t.s<0?8:7)),v.length=e,d)for(;++v[--e]>i-1;)v[e]=0,e||(++a,v.unshift(1));for(c=v.length;!v[c-1];--c);for(o=0,h="";o<c;o++)h+=T_.charAt(v[o]);if(w){if(c>1)if(r==16||r==8){for(o=r==16?4:3,--c;c%o;c++)h+="0";for(v=_1(h,i,r),c=v.length;!v[c-1];--c);for(o=1,h="1.";o<c;o++)h+=T_.charAt(v[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)h="0"+h;h="0."+h}else if(++a>c)for(a-=c;a--;)h+="0";else a<c&&(h=h.slice(0,a)+"."+h.slice(a))}h=(r==16?"0x":r==2?"0b":r==8?"0o":"")+h}return t.s<0?"-"+h:h}function eA(t,r){if(t.length>r)return t.length=r,!0}function T9(t){return new this(t).abs()}function L9(t){return new this(t).acos()}function R9(t){return new this(t).acosh()}function A9(t,r){return new this(t).plus(r)}function I9(t){return new this(t).asin()}function O9(t){return new this(t).asinh()}function M9(t){return new this(t).atan()}function D9(t){return new this(t).atanh()}function B9(t,r){t=new this(t),r=new this(r);var e,n=this.precision,i=this.rounding,a=n+4;return!t.s||!r.s?e=new this(NaN):!t.d&&!r.d?(e=Ri(this,a,1).times(r.s>0?.25:.75),e.s=t.s):!r.d||t.isZero()?(e=r.s<0?Ri(this,n,i):new this(0),e.s=t.s):!t.d||r.isZero()?(e=Ri(this,a,1).times(.5),e.s=t.s):r.s<0?(this.precision=a,this.rounding=1,e=this.atan(Lt(t,r,a,1)),r=Ri(this,a,1),this.precision=n,this.rounding=i,e=t.s<0?e.minus(r):e.plus(r)):e=this.atan(Lt(t,r,a,1)),e}function P9(t){return new this(t).cbrt()}function N9(t){return De(t=new this(t),t.e+1,2)}function F9(t,r,e){return new this(t).clamp(r,e)}function H9(t){if(!t||typeof t!="object")throw Error(E1+"Object expected");var r,e,n,i=t.defaults===!0,a=["precision",1,Vo,"rounding",0,8,"toExpNeg",-sc,0,"toExpPos",0,sc,"maxE",0,sc,"minE",-sc,0,"modulo",0,9];for(r=0;r<a.length;r+=3)if(e=a[r],i&&(this[e]=L_[e]),(n=t[e])!==void 0)if(Xr(n)===n&&n>=a[r+1]&&n<=a[r+2])this[e]=n;else throw Error(Xo+e+": "+n);if(e="crypto",i&&(this[e]=L_[e]),(n=t[e])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[e]=!0;else throw Error(YR);else this[e]=!1;else throw Error(Xo+e+": "+n);return this}function z9(t){return new this(t).cos()}function G9(t){return new this(t).cosh()}function tA(t){var r,e,n;function i(a){var o,s,c,d=this;if(!(d instanceof i))return new i(a);if(d.constructor=i,rA(a)){d.s=a.s,We?!a.d||a.e>i.maxE?(d.e=NaN,d.d=null):a.e<i.minE?(d.e=0,d.d=[0]):(d.e=a.e,d.d=a.d.slice()):(d.e=a.e,d.d=a.d?a.d.slice():a.d);return}if(c=typeof a,c==="number"){if(a===0){d.s=1/a<0?-1:1,d.e=0,d.d=[0];return}if(a<0?(a=-a,d.s=-1):d.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;We?o>i.maxE?(d.e=NaN,d.d=null):o<i.minE?(d.e=0,d.d=[0]):(d.e=o,d.d=[a]):(d.e=o,d.d=[a]);return}else if(a*0!==0){a||(d.s=NaN),d.e=NaN,d.d=null;return}return I_(d,a.toString())}else if(c!=="string")throw Error(Xo+a);return(s=a.charCodeAt(0))===45?(a=a.slice(1),d.s=-1):(s===43&&(a=a.slice(1)),d.s=1),XR.test(a)?I_(d,a):E9(d,a)}if(i.prototype=ie,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=H9,i.clone=tA,i.isDecimal=rA,i.abs=T9,i.acos=L9,i.acosh=R9,i.add=A9,i.asin=I9,i.asinh=O9,i.atan=M9,i.atanh=D9,i.atan2=B9,i.cbrt=P9,i.ceil=N9,i.clamp=F9,i.cos=z9,i.cosh=G9,i.div=$9,i.exp=W9,i.floor=k9,i.hypot=U9,i.ln=Y9,i.log=V9,i.log10=j9,i.log2=X9,i.max=q9,i.min=K9,i.mod=Z9,i.mul=Q9,i.pow=J9,i.random=eB,i.round=tB,i.sign=rB,i.sin=nB,i.sinh=iB,i.sqrt=aB,i.sub=oB,i.sum=lB,i.tan=sB,i.tanh=uB,i.trunc=cB,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<n.length;)t.hasOwnProperty(e=n[r++])||(t[e]=this[e]);return i.config(t),i}function $9(t,r){return new this(t).div(r)}function W9(t){return new this(t).exp()}function k9(t){return De(t=new this(t),t.e+1,3)}function U9(){var t,r,e=new this(0);for(We=!1,t=0;t<arguments.length;)if(r=new this(arguments[t++]),r.d)e.d&&(e=e.plus(r.times(r)));else{if(r.s)return We=!0,new this(1/0);e=r}return We=!0,e.sqrt()}function rA(t){return t instanceof Ai||t&&t.toStringTag===VR||!1}function Y9(t){return new this(t).ln()}function V9(t,r){return new this(t).log(r)}function X9(t){return new this(t).log(2)}function j9(t){return new this(t).log(10)}function q9(){return ZR(this,arguments,"lt")}function K9(){return ZR(this,arguments,"gt")}function Z9(t,r){return new this(t).mod(r)}function Q9(t,r){return new this(t).mul(r)}function J9(t,r){return new this(t).pow(r)}function eB(t){var r,e,n,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:Rn(t,1,Vo),n=Math.ceil(t/Ne),this.crypto)if(crypto.getRandomValues)for(r=crypto.getRandomValues(new Uint32Array(n));a<n;)i=r[a],i>=429e7?r[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(r=crypto.randomBytes(n*=4);a<n;)i=r[a]+(r[a+1]<<8)+(r[a+2]<<16)+((r[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(r,a):(s.push(i%1e7),a+=4);a=n/4}else throw Error(YR);else for(;a<n;)s[a++]=Math.random()*1e7|0;for(n=s[--a],t%=Ne,n&&t&&(i=dr(10,Ne-t),s[a]=(n/i|0)*i);s[a]===0;a--)s.pop();if(a<0)e=0,s=[0];else{for(e=-1;s[0]===0;e-=Ne)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<Ne&&(e-=Ne-n)}return o.e=e,o.d=s,o}function tB(t){return De(t=new this(t),t.e+1,this.rounding)}function rB(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function nB(t){return new this(t).sin()}function iB(t){return new this(t).sinh()}function aB(t){return new this(t).sqrt()}function oB(t,r){return new this(t).sub(r)}function lB(){var t=0,r=arguments,e=new this(r[t]);for(We=!1;e.s&&++t<r.length;)e=e.plus(r[t]);return We=!0,De(e,this.precision,this.rounding)}function sB(t){return new this(t).tan()}function uB(t){return new this(t).tanh()}function cB(t){return De(t=new this(t),t.e+1,1)}ie[Symbol.for("nodejs.util.inspect.custom")]=ie.toString,ie[Symbol.toStringTag]="Decimal";var Ai=ie.constructor=tA(L_);b1=new Ai(b1),S1=new Ai(S1);var cc,nA=function(t){return typeof t=="number"?Number.isNaN(t):t&&typeof t=="string"?Number.isNaN(Number(t)):!0},M_=function(t,r,e){return e===void 0&&(e=!1),t!=null&&t.length?t.reduce(function(n,i){var a=Me(i,r),o=nA(a);if(e&&o)return n;var s=o?0:a;return n.push(new Ai(s)),n},[]):[]},iA=function(t,r){var e=M_(t,r);return e.length?Ai.sum.apply(Ai,re([],Q(e),!1)).toNumber():0},aA=function(t,r,e){var n=M_(r,e,!0);if(n!=null&&n.length)return Ai[t].apply(Ai,re([],Q(n),!1)).toNumber()},dB=function(t,r){var e=M_(t,r);return e!=null&&e.length?Ai.sum.apply(Ai,re([],Q(e),!1)).dividedBy(e.length).toNumber():0},fB=(cc={},cc[nc.SUM]=iA,cc[nc.MIN]=function(t,r){return aA("min",t,r)},cc[nc.MAX]=function(t,r){return aA("max",t,r)},cc[nc.AVG]=dB,cc),hB=function(t){return it(t)&&"values"in t},vB=function(t){var r=t.spreadsheet,e=t.position,n=t.tooltipContainer,i=t.autoAdjustBoundary,a=r.getCanvasElement(),o=e.x+AL.x,s=e.y+AL.y;if(!i||!a)return{x:o,y:s};var c=i==="body",d=r.facet.panelBBox,h=d.maxX,v=d.maxY,g=r.options,C=g.width,w=g.height,S=a.getBoundingClientRect(),_=S.top,T=S.left,M=n.getBoundingClientRect(),D=M.width,B=M.height,G=document.body.getBoundingClientRect(),V=G.width,q=G.height,J=c?V:Math.min(C,h)+T,te=c?q:Math.min(w,v)+_;return o+D>=J&&(o=J-D),s+B>=te&&(s=te-B),{x:o,y:s}},oA=function(t){return k({operator:{onClick:Oe,menus:[]},enterable:!0,enableFormat:!0},t)},D_=function(t){return k(k({},t==null?void 0:t.colQuery),t==null?void 0:t.rowQuery)},A1=function(t,r){var e;if(t){var n=r.style,i=r.className,a=i===void 0?[]:i,o=r.visible;if(n&&Object.assign(t.style,n),a.length){var s=a.filter(Boolean);(e=t.classList).add.apply(e,re([],Q(s),!1))}t.classList.toggle(JM,o),t.classList.toggle(e5,!o)}},pB=function(t){var r=_n(t)&&Number.isNaN(t),e=t==="";return Qt(t)||r||e?"-":t},B_=function(t,r){var e,n=(e=t==null?void 0:t.dataSet)===null||e===void 0?void 0:e.getFieldFormatter(r);return function(i,a){return pB(n(i,a))}},I1=function(t,r){var e,n=r.data,i=r.field,a=r.valueField,o=r.useCompleteDataForFormatter,s=o===void 0?!0:o,c=(e=t==null?void 0:t.dataSet)===null||e===void 0?void 0:e.getFieldName(i),d=B_(t,i),h=it(n[i])?JSON.stringify(n[i]):n[i],v=d(a||h,s?n:void 0);return{name:c,value:v}},lA=function(t,r,e){var n=Wa(Ho([],r),function(a){return a!==Ye&&e[a]}),i=nt(n,function(a){return I1(t,{data:e,field:a,useCompleteDataForFormatter:!1})});return i},gB=function(t,r,e){var n,i,a,o,s=(e||{}).isTotals,c=[],d=[];if(r){var h=(i=(n=t==null?void 0:t.dataSet)===null||n===void 0?void 0:n.fields)===null||i===void 0?void 0:i.columns,v=(o=(a=t==null?void 0:t.dataSet)===null||a===void 0?void 0:a.fields)===null||o===void 0?void 0:o.rows;c=lA(t,ts(h||[]),r),d=lA(t,v,r)}return ve(c)&&ve(d)&&s&&(c=[{value:ar("\u603B\u8BA1")}]),{cols:c,rows:d}},mB=function(t,r,e){if(r){var n=e.isTotals,i=r[Ye],a=r[i],o=[];if(n)o.push(I1(t,{data:r,field:i,valueField:Me(r,kr)}));else if(hB(a)&&t.getTooltipDataItemMappingCallback()){var s=mR(r,t.getTooltipDataItemMappingCallback());Ae(s,function(c,d){o.push(I1(t,{data:s,field:d}))})}else o.push(I1(t,{data:r,field:i}));return o}},yB=function(t,r,e){var n;if(e)return ar("\u603B\u8BA1");var i=(n=t==null?void 0:t.dataSet)===null||n===void 0?void 0:n.getFieldName(r);return i&&i!=="undefined"?i:""},sA=function(t,r,e){e===void 0&&(e=!0);var n=[];return Ae(r,function(i,a){Ae(t,function(o){!e&&o.colIndex!==-1?n.push([a,o.colIndex]):e&&o.rowIndex!==-1&&n.push([o.rowIndex,a])})}),n},CB=function(t,r){var e,n=r.rowLeafNodes,i=r.colLeafNodes,a=t.interaction.getState(),o=a.nodes,s=o===void 0?[]:o,c=a.cells,d=c===void 0?[]:c,h=(e=d==null?void 0:d[0])===null||e===void 0?void 0:e.type;return h===de.COL_CELL?sA(s,n,!1):h===de.ROW_CELL?sA(s,i):[]},wB=function(t,r,e){var n,i=(n=t.facet)===null||n===void 0?void 0:n.layoutResult,a=function(c){var d=r==null?void 0:r.getMeta(),h=d==null?void 0:d.isTotals,v=(r==null?void 0:r.cellType)===de.COL_CELL,g=(r==null?void 0:r.cellType)===de.ROW_CELL;if(!v&&!g)return!1;var C=i.colNodes.find(function(_){return _.colIndex===c.colIndex}),w=i.rowNodes.find(function(_){return _.rowIndex===c.rowIndex}),S=v?w==null?void 0:w.isTotals:C==null?void 0:C.isTotals;return!h&&(c==null?void 0:c.isTotals)||h&&S};if(e){var o=CB(t,i);return zn(nt(o,function(c){var d=Q(c,2),h=d[0],v=d[1],g=i.getCellMeta(h,v);if(!a(g))return(g==null?void 0:g.data)||D_(g)}))}var s=t.interaction.getCells();return s.filter(function(c){var d=i.getCellMeta(c.rowIndex,c.colIndex);return!a(d)}).map(function(c){var d=i.getCellMeta(c.rowIndex,c.colIndex);return(d==null?void 0:d.data)||D_(d)})},xB=function(t){var r=t.spreadsheet,e=t.targetCell,n=t.options,i=n===void 0?{}:n,a=[],o={},s=r.isTableMode();if(s&&(i!=null&&i.showSingleTips)){var c=e.getMeta(),d=c!=null&&c.field?r.dataSet.getMultiData({field:c.field}):[r.dataSet.getRowData(c)];return[{selectedData:d,name:"",value:""}]}var h=wB(r,e,i.showSingleTips);return Ae(h,function(v){var g;o[v==null?void 0:v[Ye]]?(g=o[v==null?void 0:v[Ye]])===null||g===void 0||g.push(v):o[v==null?void 0:v[Ye]]=[v]}),DT(o,function(v,g){var C,w=yB(r,g,i==null?void 0:i.isTotals),S="",_="";if(Xm(v,function(G){return nA(Me(G,kr))})){var T=r.options.placeholder,M=is(o,T);S=M,_=M}else{var D=B_(r,g),B=iA(v,kr);_=B,S=(C=D==null?void 0:D(B,v))!==null&&C!==void 0?C:parseFloat(B.toPrecision(Wp))}a.push({selectedData:v,name:w,value:S,originValue:_})}),a},bB=function(t){if(t){var r=t.getMeta();if(!r.isTotals){var e=Vr(r.spreadsheet.dataCfg.meta,{field:r.field||r.value||r.valueField}),n=e==null?void 0:e.field;return r.spreadsheet.dataSet.getFieldDescription(n)}}},SB=function(t){var r=t.spreadsheet,e=t.cellInfos,n=e===void 0?[]:e,i=t.options,a=i===void 0?{}:i,o=t.targetCell,s=null,c=null,d=null,h=bB(o),v=n[0]||{};if(!(a!=null&&a.hideSummary))s=xB({spreadsheet:r,options:a,targetCell:o});else if(a.showSingleTips){var g=B_(r,v.valueField),C=g(v.value),w=a.enableFormat?r.dataSet.getFieldName(v.value)||C:r.dataSet.getFieldName(v.valueField);v.name=w||""}else c=gB(r,v,a),d=mB(r,v,a);var S=v||{},_=S.interpretation,T=S.infos,M=S.tips,D=S.name;return{summaries:s,interpretation:_,infos:T,tips:M,name:D,headInfo:c,details:d,description:h}},EB=function(t){return nt(t,function(r){var e=r.getMeta();return xi({},e.query||{},qT(e,["colIndex","rowIndex"]))})},P_=function(t){if(!t.interaction.isSelectedState())return[];var r=t.dataCfg.fields.valueInCols;return t.interaction.getCells().reduce(function(e,n){var i=t.facet.layoutResult.getCellMeta(n==null?void 0:n.rowIndex,n==null?void 0:n.colIndex),a=D_(i);if(ve(i)||ve(a))return[];var o=k(k({},a),{colIndex:r?i.colIndex:null,rowIndex:r?null:i.rowIndex}),s=e.find(function(c){return Fr(o,c)});return s||e.push(o),e},[])},_B=function(t,r){t===void 0&&(t={});var e=function(s){return oa(t,s)},n=t.col,i=t.row,a=t.data,o=t.corner;return r===de.COL_CELL?e(n):r===de.ROW_CELL?e(i):r===de.DATA_CELL?e(a):r===de.CORNER_CELL?e(o):k({},t)},O1=function(t,r){var e;if(!(!r||!t)){var n=(e=t.getCellType)===null||e===void 0?void 0:e.call(t,r==null?void 0:r.target);return _B(t.options.tooltip,n)}},uA=function(t,r){var e=r.defaultMenus,n=e===void 0?[]:e,i=r.cell,a=function(s){return s===void 0&&(s=[]),s.filter(function(c){var d;return Ce(c.visible)?c.visible(i):(d=c.visible)!==null&&d!==void 0?d:!0}).map(function(c){return c.children&&(c.children=a(c.children)),c})},o=a(t.menus);return{onClick:t.onClick,menus:zn(re(re([],Q(n),!1),Q(o),!1))}},TB=function(t,r){for(var e=!1,n=r;n&&n!==document.body;){if(t===n){e=!0;break}n=n.parentElement}return e},LB=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return"".concat(Ld,"-").concat(t.join("-"))},RB=function(t){t.store.set(Ht,Rd)},AB=function(t,r){var e=t.store.get(Ht,Rd);t.store.set(Ht,k(k({},e),r))},IB=function(t,r){var e=t.store.get(Ht,Rd);return e[r]},cA=function(){function t(r){var e=this;this.getFieldMeta=Yi(function(n,i){return Vr(e.meta||i,function(a){return a.field===n})}),this.spreadsheet=r}return t.prototype.getFieldName=function(r){return Me(this.getFieldMeta(r,this.meta),"name",r)},t.prototype.getFieldFormatter=function(r){return Me(this.getFieldMeta(r,this.meta),"formatter",yr)},t.prototype.getFieldDescription=function(r){return Me(this.getFieldMeta(r,this.meta),"description")},t.prototype.setDataCfg=function(r){this.getFieldMeta.cache.clear();var e=this.processDataCfg(r),n=e.fields,i=e.meta,a=e.data,o=e.totalData,s=e.sortParams,c=e.filterParams;this.fields=n,this.meta=i,this.originData=a,this.totalData=o,this.sortParams=s,this.filterParams=c,this.displayData=this.originData,this.indexesData={}},t.prototype.processMeta=function(r,e){var n,i;return r===void 0&&(r=[]),re(re([],Q(r),!1),[bD(r,(i=(n=this.spreadsheet)===null||n===void 0?void 0:n.options)===null||i===void 0?void 0:i.cornerExtraFieldText,e)],!1)},t.prototype.getDisplayDataSet=function(){return this.displayData},t.prototype.isEmpty=function(){return ve(this.getDisplayDataSet())},t.prototype.getEmptyViewIndexes=function(){return[]},t.prototype.getValueRangeByField=function(r){var e,n=IB(this.spreadsheet,r);if(n)return n;var i=zn(nt(this.originData,function(o){var s=o[r];return Qt(s)?null:Number.parseFloat(s)})),a={maxValue:Ua(i),minValue:_E(i)};return AB(this.spreadsheet,(e={},e[r]=a,e)),a},t.prototype.moreThanOneValue=function(){var r,e;return((e=(r=this.fields)===null||r===void 0?void 0:r.values)===null||e===void 0?void 0:e.length)>1},t}(),N_=function(){function t(r){this.extraField=r}return t.createProxyData=function(r,e){return new Proxy(r,new t(e))},t.createProxyDataList=function(r,e){return e.map(function(n){return t.createProxyData(r,n)})},t.prototype.get=function(r,e){return e===xd?r:e===Ye?this.extraField:e===kr?r[this.extraField]:r[e]},t.prototype.has=function(r,e){return e===Ye||e===kr?!0:e in r},t.prototype.ownKeys=function(r){return Object.keys(r).concat(Ye,kr)},t.prototype.getOwnPropertyDescriptor=function(r,e){return e===Ye||e===kr?{configurable:!0,enumerable:!0}:Object.getOwnPropertyDescriptor(r,e)},t}(),F_=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.handleDimensionValuesSort=function(){Ae(e.sortParams,function(n){var i=n.sortFieldId,a=n.sortByMeasure;if(i){var o=re([],Q(e.sortedDimensionValues[i]||[]),!1),s=W7({dataSet:e,sortParam:n,originValues:o,isSortByMeasure:!ve(a)});e.sortedDimensionValues[i]=s,e.handlePivotMetaSort(i,s)}})},e.getTotalStatus=function(n){var i=e.fields,a=i.columns,o=i.rows,s=function(d,h){if(h){var v=Vr(d,function(g){return!hE(n,g)});return v&&v!==Qu(d)}return Xm(d,function(g){return!hE(n,g)})},c=function(d,h){return h?d.filter(function(v){return v!==Ye}):d};return{isRowTotal:s(c(o,!e.spreadsheet.isValueInCols())),isRowSubTotal:s(o,!0),isColTotal:s(c(a,e.spreadsheet.isValueInCols())),isColSubTotal:s(a,!0)}},e}return r.prototype.getExistValuesByDataItem=function(e,n){return eR(e,n)},r.prototype.setDataCfg=function(e){t.prototype.setDataCfg.call(this,e);var n=this.fields.rows;this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map,this.transformIndexesData(this.originData.concat(this.totalData),n),this.handleDimensionValuesSort()},r.prototype.transformIndexesData=function(e,n){var i=this,a=this.fields,o=a.columns,s=a.values,c=a.valueInCols,d;return aa.getInstance().debugCallback(u5,function(){d=xD({rows:n,columns:o,values:s,valueInCols:c,data:e,indexesData:i.indexesData,sortedDimensionValues:i.sortedDimensionValues,rowPivotMeta:i.rowPivotMeta,colPivotMeta:i.colPivotMeta,getExistValuesByDataItem:i.getExistValuesByDataItem}),i.indexesData=d.indexesData,i.rowPivotMeta=d.rowPivotMeta,i.colPivotMeta=d.colPivotMeta,i.sortedDimensionValues=d.sortedDimensionValues}),d},r.prototype.transformDrillDownData=function(e,n,i){var a=this,o,s=Hr.getFieldPath(i,!0),c=re(re([],Q(s),!1),[e],!1),d=this.spreadsheet.store,h=i==null?void 0:i.id,v=(o=d.get("drillDownIdPathMap"))!==null&&o!==void 0?o:new Map;v.has(h)&&(Ae(v.get(h),function(C){XE(a.indexesData,C)}),rR(this.rowPivotMeta,h));var g=this.transformIndexesData(n,c).paths;v.set(h,g),d.set("drillDownIdPathMap",v)},r.prototype.clearDrillDownData=function(e){var n=this,i=this.spreadsheet.store,a=i.get("drillDownIdPathMap");if(!a)return!1;var o=i.get("drillDownDataCache",[]);if(e){var s=a.get(e);s&&Ae(s,function(C){XE(n.indexesData,C)}),rR(this.rowPivotMeta,e),a.delete(e);var c=Wa(o,function(C){return a.has(C==null?void 0:C.rowId)});i.set("drillDownDataCache",c);var d=c.map(function(C){return C==null?void 0:C.drillLevel}),h=i.get("drillDownFieldInLevel",[]),v=h.filter(function(C){return un(d,C==null?void 0:C.drillLevel)});i.set("drillDownFieldInLevel",v)}else{a.clear();var g=this.spreadsheet.store.get("originalDataCfg");ve(g)||this.spreadsheet.setDataCfg(g),this.spreadsheet.store.set("drillItemsNum",-1),this.spreadsheet.store.set("drillDownDataCache",[]),this.spreadsheet.store.set("drillDownFieldInLevel",[])}return i.set("drillDownIdPathMap",a),!0},r.prototype.handlePivotMetaSort=function(e,n){var i=this.fields,a=i.rows,o=i.columns;un(a,e)?this.rowPivotMeta=IR({pivotMeta:this.rowPivotMeta,dimensions:a,sortFieldId:e,sortedDimensionValues:n}):un(o,e)&&(this.colPivotMeta=IR({pivotMeta:this.colPivotMeta,dimensions:o,sortFieldId:e,sortedDimensionValues:n}))},r.prototype.processDataCfg=function(e){var n=e.data,i=e.meta,a=i===void 0?[]:i,o=e.fields,s=e.sortParams,c=s===void 0?[]:s,d=e.totalData,h=o.columns,v=o.rows,g=o.values,C=o.valueInCols,w=o.customValueOrder,S=h,_=v;C?S=this.isCustomMeasuresPosition(w)?this.handleCustomMeasuresOrder(w,S):Ya(re(re([],Q(h),!1),[Ye],!1)):_=this.isCustomMeasuresPosition(w)?this.handleCustomMeasuresOrder(w,_):Ya(re(re([],Q(v),!1),[Ye],!1));var T=this.processMeta(a,ar("\u6570\u503C"));return{data:n,totalData:d,meta:T,fields:k(k({},o),{rows:_,columns:S,values:g}),sortParams:c}},r.prototype.getFieldsAndPivotMetaByField=function(e){var n=this.fields||{},i=n.rows,a=i===void 0?[]:i,o=n.columns,s=o===void 0?[]:o;return a.includes(e)?{dimensions:a,pivotMeta:this.rowPivotMeta}:s.includes(e)?{dimensions:s,pivotMeta:this.colPivotMeta}:{}},r.prototype.getDimensionValues=function(e,n){n===void 0&&(n={});var i=this.getFieldsAndPivotMetaByField(e),a=i.pivotMeta,o=i.dimensions;if(!a||!o)return[];var s=as(n,o,Xs),c=nR({pivotMeta:a,dimensionValues:s,fields:o,fieldIdx:Jf(o,e),queryType:ii.DetailOnly,sortedDimensionValues:this.sortedDimensionValues});return Ya(c.map(function(d){return d.value}))},r.prototype.getTotalValue=function(e,n){var i,a,o=rL(n),s=o?n:this.getTotalStatus(e),c=CD(s,(a=this.spreadsheet.options)===null||a===void 0?void 0:a.totals)||{},d=c.aggregation,h=c.calcFunc,v=fB[d];if(v||h){var g=this.getMultiData(e,{queryType:ii.DetailOnly}),C=void 0;return h?C=h(e,g):v&&(C=v(g,kr)),k(k({},e),(i={},i[kr]=C,i[e[Ye]]=C,i))}},r.prototype.getCellData=function(e){var n,i,a,o=e||{},s=o.query,c=s===void 0?{}:s,d=o.rowNode,h=o.isTotals,v=h===void 0?!1:h,g=o.totalStatus,C=this.fields,w=C.rows,S=C.columns,_=w,T=(n=this.spreadsheet)===null||n===void 0?void 0:n.store.get("drillDownIdPathMap"),M=Array.from((i=T==null?void 0:T.keys())!==null&&i!==void 0?i:[]).some(function(q){return d==null?void 0:d.id.startsWith(q)});d&&M&&(_=(a=Hr.getFieldPath(d,M))!==null&&a!==void 0?a:w);var D=as(c,_),B=as(c,S),G=d1({rowDimensionValues:D,colDimensionValues:B,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:_,colFields:S,prefix:c1(_,S)}),V=Me(this.indexesData,G);if(V)return N_.createProxyData(V,c[Ye]);if(v)return this.getTotalValue(c,g)},r.prototype.getQueryExtraFields=function(e){var n=this.fields.values,i=e[Ye];return i?un(n,i)?[i]:[]:n},r.prototype.getMultiData=function(e,n,i,a,o){var s,c,d,h;e===void 0&&(e={}),a===void 0&&(a=[]),o===void 0&&(o=!0),ve(e)&&console.warn("query: ".concat(e,` shouldn't be empty, you can get all data from dataCfg if you're intended.
 you should use { EXTRA_FIELD: xxx} as least if you want query all specific value data`));var v=it(n)?n:{queryType:o?ii.All:ii.DetailOnly,drillDownFields:a},g=v.drillDownFields,C=g===void 0?[]:g,w=v.queryType,S=w===void 0?ii.All:w,_=this.fields,T=_.rows,M=_.columns,D=ve(C)?T:T.concat(C),B=as(e,D,Xs),G=as(e,M,Xs),V=ED({rowDimensionValues:B,colDimensionValues:G,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:D,colFields:M,sortedDimensionValues:this.sortedDimensionValues,queryType:S}),q=V.rowQueries,J=V.colQueries,te=c1(D,M),se=[];try{for(var ue=mr(q),ce=ue.next();!ce.done;ce=ue.next()){var me=ce.value;try{for(var Te=(d=void 0,mr(J)),le=Te.next();!le.done;le=Te.next()){for(var pe=le.value,et=d1({rowDimensionValues:me,colDimensionValues:pe,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:D,colFields:M,prefix:te}),Xe=!1,ze=this.indexesData,Ie=function(ot){var ut=et[ot];Xe?vh(ut)?ze=_D(ze,S):ze=zn(nt(ze,function(Ct){return Ct==null?void 0:Ct[ut]})):vh(ut)?(Xe=!0,ze=zn([ze]),ot--):ze=ze==null?void 0:ze[ut],Je=ot},Je,ke=0;ke<et.length;ke++)Ie(ke),ke=Je;_e(ze)?se.push.apply(se,re([],Q(ze),!1)):ze&&se.push(ze)}}catch(ot){d={error:ot}}finally{try{le&&!le.done&&(h=Te.return)&&h.call(Te)}finally{if(d)throw d.error}}}}catch(ot){s={error:ot}}finally{try{ce&&!ce.done&&(c=ue.return)&&c.call(ue)}finally{if(s)throw s.error}}var Nt=this.getQueryExtraFields(e);return Qf(Ya(se),function(ot){return ot?N_.createProxyDataList(ot,Nt):[]})},r.prototype.getFieldFormatter=function(e,n){return e===Kn?this.getFieldFormatterForTotalValue(n):t.prototype.getFieldFormatter.call(this,e)},r.prototype.getFieldFormatterForTotalValue=function(e){var n;return!this.spreadsheet.isValueInCols()&&e&&(n=Me(e.rowQuery,Ye)),n=n!=null?n:Me(this.fields.values,0),t.prototype.getFieldFormatter.call(this,n)},r.prototype.handleCustomMeasuresOrder=function(e,n){var i=Ya(re([],Q(n),!1));return n.length>=e?(i.splice(e,0,Ye),i):re(re([],Q(i),!1),[Ye],!1)},r.prototype.isCustomMeasuresPosition=function(e){return _n(e)},r.prototype.getRowData=function(e){return this.getMultiData(e.rowQuery)},r}(cA),dA=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getCellData=function(e){var n=e.query,i=this.fields,a=i.rows,o=i.columns,s=as(n,a),c=as(n,o),d=d1({rowDimensionValues:s,colDimensionValues:c,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:a,colFields:o,prefix:c1(a,o)}),h=Me(this.indexesData,d);return h&&N_.createProxyData(h,n[Ye])},r.prototype.processDataCfg=function(e){var n=e.meta,i=this.processMeta(n,ar("\u6307\u6807"));return k(k({},e),{meta:i,fields:k(k({},e.fields),{rows:[Ye],valueInCols:!1})})},r}(F_),OB=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.handleDimensionValueFilter=function(){Ae(e.filterParams,function(n){var i=n.filterKey,a=n.filteredValues,o=n.customFilter,s=new Set(a),c=function(h){return!s.has(h[i])},d=Wa(e.displayData,function(h){return o?o(h)&&c(h):c(h)});e.displayData=e.getDisplayData(d)})},e.handleDimensionValuesSort=function(){Ae(e.sortParams,function(n){var i=n.sortFieldId,a=n.sortBy,o=n.sortFunc,s=n.sortMethod,c=n.query;if(i){var d=e.displayData,h=[];if(c){var v=[];d.forEach(function(S){for(var _=Object.keys(c),T=!0,M=0;M<_.length;M++){var D=_[M];if(S[D]!==c[D]){T=!1,h.push(S);break}}T&&v.push(S)}),d=v}var g=d;if(o)g=o(k(k({},n),{data:d}));else if(a&&!Ce(a)){var C=re([],Q(a),!1).reverse();g=d.sort(function(S,_){var T=C.indexOf(S[i]),M=C.indexOf(_[i]);return M-T})}else if(lc(s)||b_(s)){var w=Ce(a)?a:null;g=IE(d,[w||i],[s.toLocaleLowerCase()])}h.length&&(g=re(re([],Q(g),!1),Q(h),!1)),e.displayData=e.getDisplayData(g)}})},e}return r.prototype.processDataCfg=function(e){return e},r.prototype.setDataCfg=function(e){t.prototype.setDataCfg.call(this,e),this.handleDimensionValueFilter(),this.handleDimensionValuesSort()},r.prototype.getStartFrozenRows=function(e){var n=(this.spreadsheet.options||{}).frozenRowCount;return n?e.slice(0,n):[]},r.prototype.getEndFrozenRows=function(e){var n=(this.spreadsheet.options||{}).frozenTrailingRowCount;return n?e.slice(-n):[]},r.prototype.getDisplayData=function(e){var n=this.getStartFrozenRows(e),i=this.getEndFrozenRows(e),a=e.slice(n.length||0,-i.length||void 0);return re(re(re([],Q(n),!1),Q(a),!1),Q(i),!1)},r.prototype.getDimensionValues=function(){return[]},r.prototype.getCellData=function(e){var n=e.query;if(!(this.displayData.length===0&&n.rowIndex===0)){var i=this.displayData[n.rowIndex];return!Ji(n,"field")||!it(i)?i:i[n.field]}},r.prototype.getMultiData=function(e){if(!e)return this.displayData;var n=this.displayData[e.rowIndex]?[this.displayData[e.rowIndex]]:this.displayData;return Ji(e,"field")?n.map(function(i){return i[e.field]}):n},r.prototype.getRowData=function(e){return this.getCellData({query:{rowIndex:e.rowIndex}})},r}(cA),ls;(function(t){t.ScrollChange="scroll-change",t.ScrollEnd="scroll-end"})(ls||(ls={}));var H_=function(t){Le(r,t);function r(e){var n=t.call(this,e)||this;n.isMobile=!1,n.eventHandlers=[],n.scrollFrameId=null,n.getCoordinatesName=function(){var C=n.isHorizontal?"x1":"y1",w=n.isHorizontal?"x2":"y2";return{from:C,to:w}},n.getCoordinatesWithBBoxExtraPadding=function(){var C=n.theme.size,w=n.isHorizontal?0:C/2,S=n.isHorizontal?C:C/2;return{start:n.thumbOffset+w,end:n.thumbOffset+n.thumbLen-S}},n.current=function(){var C=n.thumbLen/n.trackLen,w=n.thumbOffset/n.trackLen;return w/(1-C)},n.updateThumbLen=function(C){if(n.thumbLen!==C){n.thumbLen=C;var w=n.getCoordinatesName();n.thumbShape.attr(w.to,n.thumbOffset+C),n.emitScrollChange(n.thumbOffset/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.updateThumbOffset=function(C,w){var S;w===void 0&&(w=!0);var _=n.validateRange(C),T=n.thumbOffset===_&&_!==0;if(!T){n.thumbOffset=_;var M=n.getCoordinatesName(),D=M.from,B=M.to,G=n.getCoordinatesWithBBoxExtraPadding(),V=G.start,q=G.end;n.thumbShape.attr((S={},S[D]=V,S[B]=q,S)),w&&n.emitScrollChange(_/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.onlyUpdateThumbOffset=function(C){var w;n.updateThumbOffset(C,!1),(w=n.get("canvas"))===null||w===void 0||w.draw()},n.emitScrollChange=function(C,w){w===void 0&&(w=!0),cancelAnimationFrame(n.scrollFrameId),n.scrollFrameId=requestAnimationFrame(function(){n.emit(ls.ScrollChange,{offset:C,updateThumbOffset:w})})},n.addEventListener=function(C,w,S){return C==null||C.addEventListener(w,S,!1),{remove:function(){C==null||C.removeEventListener(w,S,!1)}}},n.addEvent=function(C,w,S){C.on(w,S),n.eventHandlers.push({target:C,type:w,handler:S})},n.initScrollBar=function(){n.scrollBarGroup=n.createScrollBarGroup(),n.scrollBarGroup.move(n.position.x,n.position.y),n.bindEvents()},n.createScrollBarGroup=function(){var C=n.addGroup({className:n.isHorizontal?"horizontalBar":"verticalBar"});return n.trackShape=n.createTrackShape(C),n.thumbShape=n.createThumbShape(C),C},n.createTrackShape=function(C){var w=n.theme,S=w.lineCap,_=S===void 0?"round":S,T=w.trackColor,M=w.size,D={lineWidth:M,stroke:T,lineCap:_};return n.isHorizontal?C.addShape("line",{attrs:k(k({},D),{x1:0,y1:M/2,x2:n.trackLen,y2:M/2})}):C.addShape("line",{attrs:k(k({},D),{x1:M/2,y1:0,x2:M/2,y2:n.trackLen})})},n.createThumbShape=function(C){var w=n.theme,S=w.size,_=w.lineCap,T=_===void 0?"round":_,M=w.thumbColor,D={lineWidth:S,stroke:M,lineCap:T,cursor:"default"},B=n.getCoordinatesWithBBoxExtraPadding(),G=B.start,V=B.end;return n.isHorizontal?C.addShape("line",{attrs:k(k({},D),{x1:G,y1:S/2,x2:V,y2:S/2})}):C.addShape("line",{attrs:k(k({},D),{x1:S/2,y1:G,x2:S/2,y2:V})})},n.bindEvents=function(){n.on("mousedown",n.onStartEvent(!1)),n.on("mouseup",n.onMouseUp),n.on("touchstart",n.onStartEvent(!0)),n.on("touchend",n.onMouseUp),n.trackShape.on("click",n.onTrackClick),n.thumbShape.on("mouseover",n.onTrackMouseOver),n.thumbShape.on("mouseout",n.onTrackMouseOut)},n.onStartEvent=function(C){return function(w){w.preventDefault(),n.isMobile=C;var S=n.isMobile?Me(w,"touches.0",w):w,_=S.clientX,T=S.clientY;n.startPos=n.isHorizontal?_:T,n.bindLaterEvent()}},n.bindLaterEvent=function(){var C=n.get("canvas"),w=document.body,S=[];n.isMobile?(S=[n.addEventListener(w,"touchmove",n.onMouseMove),n.addEventListener(w,"touchend",n.onMouseUp),n.addEventListener(w,"touchcancel",n.onMouseUp)],n.addEvent(C,"touchend",n.onMouseUp),n.addEvent(C,"touchcancel",n.onMouseUp)):(S=[n.addEventListener(w,"mousemove",n.onMouseMove),n.addEventListener(w,"mouseup",n.onMouseUp),n.addEventListener(w,"mouseleave",n.onMouseUp)],n.addEvent(C,"mouseup",n.onMouseUp)),n.clearEvents=function(){S.forEach(function(_){_==null||_.remove()}),Ae(n.eventHandlers,function(_){var T;(T=_.target)===null||T===void 0||T.off(_.type,_.handler)}),n.eventHandlers.length=0}},n.onTrackClick=function(C){var w=n.isHorizontal?C.x-n.position.x-n.thumbLen/2:C.y-n.position.y-n.thumbLen/2,S=n.validateRange(w);n.updateThumbOffset(S)},n.onMouseMove=function(C){C.preventDefault();var w=n.isMobile?Me(C,"touches.0",C):C,S=w.clientX,_=w.clientY,T=n.isHorizontal?S:_,M=T-n.startPos;n.startPos=T,n.updateThumbOffset(n.thumbOffset+M)},n.onMouseUp=function(C){var w;n.emit(ls.ScrollEnd,{}),C.preventDefault(),(w=n.clearEvents)===null||w===void 0||w.call(n)},n.onTrackMouseOver=function(){var C=n.theme,w=C.thumbHoverColor,S=C.hoverSize;n.thumbShape.attr("stroke",w),n.thumbShape.attr("lineWidth",S)},n.onTrackMouseOut=function(){var C=n.theme,w=C.thumbColor,S=C.size;n.thumbShape.attr("stroke",w),n.thumbShape.attr("lineWidth",S)},n.validateRange=function(C){var w=C;return C+n.thumbLen>n.trackLen?w=n.trackLen-n.thumbLen:C+n.thumbLen<n.thumbLen&&(w=0),w};var i=e.isHorizontal,a=i===void 0?!1:i,o=e.trackLen,s=e.thumbLen,c=e.position,d=e.thumbOffset,h=d===void 0?0:d,v=e.theme,g=e.scrollTargetMaxOffset;return n.isHorizontal=a,n.thumbOffset=h,n.trackLen=o,n.thumbLen=s,n.position=c,n.theme=v,n.scrollTargetMaxOffset=g,n.initScrollBar(),n}return r}(qn),fA=function(t,r,e){if(e<=0)return{start:0,end:0};var n=Zu(t,function(a,o){var s=r;return s>=a&&s<t[o+1]},0);n=Math.max(n,0);var i=e===r?n:Zu(t,function(a,o){var s=e;return s>a&&s<=t[o+1]},n);return i=Math.min(i===-1?1/0:i,t.length-2),{start:n,end:i}},MB=function(t,r){var e=r.width,n=r.originalWidth,i=Math.min(n-e,t);return i<0?0:i},z_=function(t,r,e){var n=Math.min(r-e,t);return n<0?0:n},Eh=function(t,r){if(t===void 0&&(t=[]),ve(t))return[];var e=[];return t.forEach(function(n){if(n instanceof r&&e.push(n),n instanceof qn){var i=n.getChildren();i.forEach(function(a){a instanceof r&&e.push(a)})}}),e},hA=function(t,r,e){return e.slice(t,r+1).map(function(n){return n.x+n.width})},M1=function(t,r,e){for(var n=[],i=t;i<r+1;i++)n.push(e.getCellOffsetY(i+1));return n},DB=function(t,r,e,n){var i=M1(t,r,n),a=n.getCellOffsetY(t);return i.map(function(o){return o-a+e})},vA=function(t,r,e){var n=Q(e,4),i=n[0],a=n[1],o=n[2],s=n[3];return t>=i&&t<=a&&r>=o&&r<=s},pA=function(t){for(var r=Q(t,4),e=r[0],n=r[1],i=r[2],a=r[3],o=[],s=e;s<=n;s+=1)for(var c=i;c<=a;c+=1)o.push([s,c]);return o},BB=function(t,r){var e=[],n=[];if(ve(t))return ve(r)?{add:e,remove:n}:{add:pA(r),remove:n};if(ve(r))return{add:e,remove:pA(t)};for(var i=Q(t,4),a=i[0],o=i[1],s=i[2],c=i[3],d=Q(r,4),h=d[0],v=d[1],g=d[2],C=d[3],w=a;w<=o;w++)for(var S=s;S<=c;S++)vA(w,S,r)||n.push([w,S]);for(var w=h;w<=v;w+=1)for(var S=g;S<=C;S+=1)vA(w,S,t)||e.push([w,S]);return{add:e,remove:n}},PB=function(t,r){var e=[],n=[];return Object.keys(r).forEach(function(i){var a=BB((t==null?void 0:t[i])||[],r[i]),o=a.add,s=a.remove;e.push.apply(e,re([],Q(o),!1)),n.push.apply(n,re([],Q(s),!1))}),{add:e,remove:n}},gA=function(){function t(r,e){e===void 0&&(e=!1),this.x=0,this.y=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.originalWidth=0,this.originalHeight=0,this.viewportHeight=0,this.viewportWidth=0,this.facet=r,this.spreadsheet=r.spreadsheet,this.layoutResult=r.layoutResult,e&&this.calculateBBox()}return t}(),mA=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.calculateBBox=function(){var e=this.getCornerBBoxWidth(),n=this.getCornerBBoxHeight();this.width=e,this.height=n,this.maxX=e,this.maxY=n},r.prototype.getCornerBBoxOriginalHeight=function(){var e=this.layoutResult.colsHierarchy,n=this.spreadsheet.options.style.colCfg;return e.sampleNodeForLastLevel?Math.floor(e.height):n==null?void 0:n.height},r.prototype.getCornerBBoxHeight=function(){return this.originalHeight=this.getCornerBBoxOriginalHeight(),this.originalHeight},r.prototype.getCornerBBoxWidth=function(){var e=this.layoutResult.rowsHierarchy;return this.originalWidth=Math.floor(e.width+this.facet.getSeriesNumberWidth()),this.spreadsheet.isScrollContainsRowHeader()?this.originalWidth:this.adjustCornerBBoxWidth()},r.prototype.adjustCornerBBoxWidth=function(){var e=this.layoutResult.colsHierarchy,n=this.spreadsheet.options.width,i=n*Ew,a=e==null?void 0:e.width,o=n-this.originalWidth;if(this.originalWidth<=i||a<=o)return this.originalWidth;var s=0,c=n-i;return a<=c?s=this.originalWidth-(a-o):s=i,Math.floor(s)},r}(gA),NB=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.calculateBBox=function(){this.originalWidth=this.facet.getRealWidth(),this.originalHeight=this.facet.getRealHeight();var e=this.facet.cornerBBox,n={x:Math.floor(e.maxX),y:Math.floor(e.maxY)},i=this.spreadsheet.theme.scrollBar.size,a=this.spreadsheet.options,o=a.width,s=a.height,c=Math.max(0,o-n.x),d=Math.max(0,s-n.y-i);this.x=n.x,this.y=n.y,this.width=c,this.height=d,this.viewportHeight=Math.abs(Math.floor(Math.min(d,this.originalHeight))),this.viewportWidth=Math.abs(Math.floor(Math.min(c,this.originalWidth))),this.maxX=n.x+this.viewportWidth,this.maxY=n.y+this.viewportHeight,this.minX=n.x,this.minY=n.y;var h=this.spreadsheet.options,v=h.frozenTrailingColCount,g=h.frozenTrailingRowCount;v>0&&(this.viewportWidth=this.width,this.maxX=n.x+this.width),g>0&&(this.viewportHeight=this.height,this.maxY=n.y+this.height)},r}(gA),G_=function(t){Le(r,t);function r(e){var n=t.call(this,e)||this;return n.isHeaderCellInViewport=function(i,a,o,s){return i+a>=o&&o+s>=i},n.headerConfig=e,n}return r.prototype.getConfig=function(){return this.headerConfig},r.prototype.clearResizeAreaGroup=function(e){var n=this.get("parent"),i=n==null?void 0:n.findById(e);i==null||i.clear()},r.prototype.render=function(e){this.clearResizeAreaGroup(e),this.clear(),this.layout(),this.offset(),this.clip()},r.prototype.onScrollXY=function(e,n,i){this.headerConfig.scrollX=e,this.headerConfig.scrollY=n,this.render(i)},r.prototype.onRowScrollX=function(e,n){this.headerConfig.scrollX=e,this.render(n)},r.prototype.clear=function(){t.prototype.clear.call(this)},r}(qn),$_=function(t){Le(r,t);function r(e){var n=t.call(this,e)||this;return n.scrollGroup=n.addGroup({name:Hp,zIndex:bd}),n}return r.prototype.onColScroll=function(e,n){this.headerConfig.scrollX!==e&&(this.headerConfig.scrollX=e,this.render(n))},r.prototype.clip=function(){var e=this.headerConfig,n=e.width,i=e.height,a=e.scrollX,o=e.spreadsheet,s=o.isFrozenRowHeader();this.scrollGroup.setClip({type:"rect",attrs:{x:s?a:0,y:0,width:s?n:n+a,height:i}})},r.prototype.clear=function(){var e,n;(e=this.scrollGroup)===null||e===void 0||e.clear(),(n=this.background)===null||n===void 0||n.remove(!0)},r.prototype.getCellInstance=function(e,n,i){return new xh(e,n,i)},r.prototype.getCellGroup=function(e){return this.scrollGroup},r.prototype.isColCellInRect=function(e){var n=this.headerConfig,i=n.spreadsheet,a=n.cornerWidth,o=n.width,s=n.scrollX;return o+s>e.x&&s-(i.isFrozenRowHeader()?0:a)<e.x+e.width},r.prototype.layout=function(){var e=this,n=this.headerConfig,i=n.data,a=n.spreadsheet,o=a.options.colCell;Ae(i,function(s){var c=s;if(e.isColCellInRect(c)){var d=(o==null?void 0:o(c,a,e.headerConfig))||e.getCellInstance(c,a,e.headerConfig);c.belongsCell=d;var h=e.getCellGroup(c);h.add(d)}})},r.prototype.offset=function(){var e=this.headerConfig,n=e.position,i=e.scrollX;s1(this.scrollGroup,n.x-i)},r}(G_),FB=function(t){Le(r,t);function r(e){return t.call(this,e)||this}return r.getCornerHeader=function(e,n,i,a,o,s){var c=e.width,d=e.height,h=n.originalWidth,v=n.originalHeight,g=n.width,C=n.height,w=this.getCornerNodes({x:n.x,y:n.y},h,v,a.rows,a.columns,o.rowsHierarchy,o.colsHierarchy,a.dataSet,i,s);return new r({data:w,position:{x:n.x,y:n.y},width:g,height:C,originalHeight:v,originalWidth:h,viewportWidth:c,viewportHeight:d,hierarchyType:a.hierarchyType,hierarchyCollapse:a.hierarchyCollapse,rows:a.rows,columns:a.columns,seriesNumberWidth:i,spreadsheet:s})},r.getCornerNodes=function(e,n,i,a,o,s,c,d,h,v){var g,C,w,S=[],_=v.options.style.colCfg,T=c==null?void 0:c.sampleNodeForLastLevel,M=(g=T==null?void 0:T.y)!==null&&g!==void 0?g:0,D=(w=(C=T==null?void 0:T.height)!==null&&C!==void 0?C:_==null?void 0:_.height)!==null&&w!==void 0?w:0;if(h){var B=new Hr({id:"",key:xw,value:ar("\u5E8F\u53F7")});B.x=e==null?void 0:e.x,B.y=M,B.width=h,B.height=D,B.isPivotMode=!0,B.spreadsheet=v,B.cornerType=ai.Series,S.push(B)}if(v.isHierarchyTreeType()){var G=this.getTreeCornerText(v),V=new Hr({key:"",id:G,value:G});V.x=e.x+h,V.y=M,V.width=n-h,V.height=D,V.seriesNumberWidth=h,V.isPivotMode=!0,V.spreadsheet=v,V.cornerType=ai.Row,S.push(V)}else s.sampleNodesForAllLevels.forEach(function(q){var J=a[q.level],te=new Hr({key:J,id:J,value:d.getFieldName(J)});te.x=q.x+h,te.y=M,te.width=q.width,te.height=D,te.field=J,te.isPivotMode=!0,te.cornerType=ai.Row,te.spreadsheet=v,S.push(te)});return c.sampleNodesForAllLevels.forEach(function(q){if(q.level<c.maxLevel){var J=o[q.level],te=new Hr({key:J,id:J,value:d.getFieldName(J)});te.x=e.x,te.y=q.y,te.width=n,te.height=q.height,te.field=J,te.isPivotMode=!0,te.cornerType=ai.Col,te.spreadsheet=v,S.push(te)}}),S},r.getTreeCornerText=function(e){var n=e.dataSet.fields.rows,i=n===void 0?[]:n,a=e.options.cornerText;if(a)return a;var o=e.store.get("drillDownFieldInLevel",[]),s=o.map(function(d){return d.drillField}),c=i.filter(function(d){return!un(s,d)}).map(function(d){return e.dataSet.getFieldName(d)}).join("/");return c},r.prototype.onCorScroll=function(e,n){this.headerConfig.scrollX=e,this.render(n)},r.prototype.destroy=function(){t.prototype.destroy.call(this)},r.prototype.layout=function(){this.renderCells()},r.prototype.renderCells=function(){var e=this,n,i,a,o,s=this.headerConfig,c=s.data,d=s.spreadsheet,h=(i=(n=d==null?void 0:d.facet)===null||n===void 0?void 0:n.cfg)===null||i===void 0?void 0:i.cornerHeader,v=(o=(a=d==null?void 0:d.facet)===null||a===void 0?void 0:a.cfg)===null||o===void 0?void 0:o.cornerCell;if(h){h(this,d,this.headerConfig);return}c.forEach(function(g){var C;v&&(C=v(g,e.headerConfig.spreadsheet,e.headerConfig)),ve(C)&&(C=new k7(g,e.headerConfig.spreadsheet,e.headerConfig)),e.add(C)})},r.prototype.offset=function(){var e=this.headerConfig.scrollX;s1(this,-e)},r.prototype.clip=function(){var e=this.headerConfig,n=e.width,i=e.height,a=e.scrollX;this.setClip({type:"rect",attrs:{x:a,y:0,width:n,height:i}})},r.prototype.getNodes=function(){return this.headerConfig.data||[]},r}(G_),HB=function(t){Le(r,t);function r(e){var n=t.call(this,e)||this;return n.render(),n}return r.prototype.layout=function(){this.addCornerBottomBorder(),this.addCornerRightBorder(),this.addSplitLineShadow()},r.prototype.render=function(){this.clear(),this.layout()},r.prototype.onBorderScroll=function(e){this.cfg.scrollX=e;var n=this.cfg.position;Va(this,n.x-e,0),this.render()},r.prototype.onChangeShadowVisibility=function(e,n){this.cfg.showViewportLeftShadow=e>0,this.cfg.showViewportRightShadow=Math.floor(e)<Math.floor(n),this.render()},r.prototype.addCornerRightBorder=function(){var e,n=this.cfg,i=n.isPivotMode;if(i){var a=n.width,o=n.height,s=n.viewportHeight,c=n.position,d=n.spreadsheet,h=(e=d.theme)===null||e===void 0?void 0:e.splitLine,v=c.x+a,g=c.y,C=c.y+o+s;this.addShape("line",{attrs:{x1:v,y1:g,x2:v,y2:C,stroke:h.verticalBorderColor,lineWidth:h.verticalBorderWidth,opacity:h.verticalBorderColorOpacity,lineDash:h.borderDash}})}},r.prototype.addCornerBottomBorder=function(){var e,n=this.cfg,i=n.width,a=n.height,o=n.viewportWidth,s=n.position,c=n.scrollX,d=n.scrollContainsRowHeader,h=n.spreadsheet,v=(e=h.theme)===null||e===void 0?void 0:e.splitLine,g=s.x,C=g+i+o+(d?c:0),w=s.y+a-1;this.addShape("line",{attrs:{x1:g,y1:w,x2:C,y2:w,stroke:v.horizontalBorderColor,lineWidth:v.horizontalBorderWidth,opacity:v.horizontalBorderColorOpacity,lineDash:v.borderDash}})},r.prototype.addSplitLineShadow=function(){var e,n=this.cfg,i=n.isPivotMode,a=n.spreadsheet,o=(e=a.theme)===null||e===void 0?void 0:e.splitLine;!i||!o.showShadow||!a.isFrozenRowHeader()||(this.addSplitLineLeftShadow(),this.addSplitLineRightShadow())},r.prototype.addSplitLineLeftShadow=function(){var e,n,i;if(this.cfg.showViewportLeftShadow){var a=this.cfg,o=a.width,s=a.height,c=a.viewportHeight,d=a.position,h=a.spreadsheet,v=(e=h.theme)===null||e===void 0?void 0:e.splitLine,g=d.x+o,C=d.y;this.addShape("rect",{attrs:{x:g,y:C,width:v.shadowWidth,height:c+s,fill:"l (0) 0:".concat((n=v.shadowColors)===null||n===void 0?void 0:n.left," 1:").concat((i=v.shadowColors)===null||i===void 0?void 0:i.right)}})}},r.prototype.addSplitLineRightShadow=function(){var e,n,i;if(this.cfg.showViewportRightShadow){var a=this.cfg,o=a.width,s=a.height,c=a.viewportHeight,d=a.viewportWidth,h=a.position,v=a.spreadsheet,g=(e=v.theme)===null||e===void 0?void 0:e.splitLine,C=h.x+o+d-g.shadowWidth,w=h.y;this.addShape("rect",{attrs:{x:C,y:w,width:g.shadowWidth,height:c+s,fill:"l (0) 0:".concat((n=g.shadowColors)===null||n===void 0?void 0:n.right," 1:").concat((i=g.shadowColors)===null||i===void 0?void 0:i.left)}})}},r}(qn),W_=function(t){Le(r,t);function r(e){return t.call(this,e)||this}return r.prototype.destroy=function(){t.prototype.destroy.call(this),this.gm&&this.gm.destroy()},r.prototype.rowCellInRect=function(e){var n=this.headerConfig,i=n.width,a=n.viewportHeight,o=n.seriesNumberWidth,s=n.scrollY,c=n.scrollX;return a+s>e.y&&s<e.y+e.height&&i-o+c>e.x&&c-o<e.x+e.width},r.prototype.createCellInstance=function(e){return new bh(e,this.headerConfig.spreadsheet,this.headerConfig)},r.prototype.getCellGroup=function(e){return this},r.prototype.getCustomRowCell=function(){var e,n,i=this.headerConfig.spreadsheet;return(n=(e=i==null?void 0:i.facet)===null||e===void 0?void 0:e.cfg)===null||n===void 0?void 0:n.rowCell},r.prototype.layout=function(){var e=this,n=this.headerConfig,i=n.data,a=n.spreadsheet,o=this.getCustomRowCell();Ae(i,function(s){if(e.rowCellInRect(s)&&s.height!==0){var c=void 0;o&&(c=o(s,a,e.headerConfig)),ve(c)&&a.isPivotMode()&&(c=e.createCellInstance(s)),s.belongsCell=c;var d=e.getCellGroup(s);d.add(c)}})},r.prototype.offset=function(){var e=this.headerConfig,n=e.scrollX,i=e.scrollY,a=e.position,o=e.seriesNumberWidth;Va(this,a.x-n+o,a.y-i)},r.prototype.clip=function(){var e=this.headerConfig,n=e.width,i=e.viewportHeight,a=e.scrollX,o=e.scrollY,s=e.seriesNumberWidth;this.setClip({type:"rect",attrs:{x:a-s,y:o,width:n,height:i}})},r}(G_),yA=function(t){Le(r,t);function r(e){var n=t.call(this,e)||this;n.scrollGroup=n.addGroup({name:ww,zIndex:bd}),n.frozenHeadGroup=n.addGroup({name:_d,zIndex:vo});var i=n.headerConfig,a=i.position,o=i.seriesNumberWidth;return Va(n.frozenHeadGroup,a.x+o,a.y),n}return r.prototype.rowCellInRectXDir=function(e){var n=this.headerConfig,i=n.width,a=n.scrollX,o=n.seriesNumberWidth,s=e.x+o;return i+a>s&&a<s+e.width},r.prototype.rowCellInRectYDir=function(e){var n=this.headerConfig,i=n.viewportHeight,a=n.scrollY,o=e.y-this.getFrozenFirstRowHeight();return i+a>o&&a<o+e.height},r.prototype.rowCellInRect=function(e){var n=this.rowCellInRectXDir(e);return this.isFrozenRow(e)?n:n&&this.rowCellInRectYDir(e)},r.prototype.getCellGroup=function(e){return this.isFrozenRow(e)?this.frozenHeadGroup:this.scrollGroup},r.prototype.offset=function(){var e=this.headerConfig,n=e.scrollX,i=e.scrollY,a=e.position,o=e.seriesNumberWidth,s=a.x-n+o;Va(this.scrollGroup,s,a.y-i),s1(this.frozenHeadGroup,s)},r.prototype.clip=function(){var e=this.headerConfig,n=e.width,i=e.viewportHeight,a=e.scrollX,o=e.scrollY,s=e.seriesNumberWidth,c=a-s;this.scrollGroup.setClip({type:"rect",attrs:{x:c,y:o+this.getFrozenFirstRowHeight(),width:n,height:i}}),this.frozenHeadGroup.setClip({type:"rect",attrs:{x:c,y:0,width:this.headerConfig.width,height:this.getFrozenFirstRowHeight()}})},r.prototype.isFrozenRow=function(e){var n,i=this.headerConfig.spreadsheet,a=i.facet,o=ic(i.options,(n=a.layoutResult)===null||n===void 0?void 0:n.rowNodes).frozenRowCount;return o>0&&e.rowIndex>=0&&e.rowIndex<o},r.prototype.getFrozenFirstRowHeight=function(){var e,n=this.headerConfig.spreadsheet,i=n.facet,a=ic(n.options,(e=i.layoutResult)===null||e===void 0?void 0:e.rowNodes).frozenRowHeight;return a},r.prototype.clear=function(){this.frozenHeadGroup.clear(),this.scrollGroup.clear()},r}(W_),CA=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.getSeriesNumberHeader=function(e){var n,i=e.viewportBBox,a=e.seriesNumberWidth,o=e.leafNodes,s=e.spreadsheet,c=e.cornerWidth,d=i.height,h=i.viewportHeight,v=[],g=s.isHierarchyTreeType();o.forEach(function(M){var D=new Hr({id:"",key:"",value:"".concat(v.length+1)});D.x=M.x,D.y=M.y,D.height=g?M.getTotalHeightForTreeHierarchy():M.height,D.width=a,D.rowIndex=M.rowIndex,D.spreadsheet=s,D.isLeaf=!0,v.push(D)});var C=s.facet,w=ic(s.options,(n=C.layoutResult)===null||n===void 0?void 0:n.rowNodes),S=w.frozenRowCount,_=w.frozenRowHeight,T=!!S;return new r({width:c,height:d,viewportWidth:c,viewportHeight:T?h-_:h,position:{x:0,y:i.y},data:v,spreadsheet:s,seriesNumberWidth:0,hierarchyType:s.options.hierarchyType,linkFields:[]})},r.prototype.createCellInstance=function(e){var n=this.isFrozenRow(e);return new zR(e,this.headerConfig.spreadsheet,k(k({},this.headerConfig),{scrollY:n?0:this.headerConfig.scrollY}),n)},r.prototype.getCustomRowCell=function(){return null},r}(yA),zB=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.createCellInstance=function(e){var n=this.headerConfig,i=n.spreadsheet,a=n.scrollY,o=this.isFrozenRow(e);return new bh(e,i,k(k({},this.headerConfig),{scrollY:o?0:a}),o)},r}(yA),GB=function(){function t(r){var e=this;this.scrollFrameId=null,this.hideScrollBar=function(){var n,i,a;(n=e.hRowScrollBar)===null||n===void 0||n.hide(),(i=e.hScrollBar)===null||i===void 0||i.hide(),(a=e.vScrollBar)===null||a===void 0||a.hide()},this.delayHideScrollBar=l(this.hideScrollBar,1e3),this.delayHideScrollbarOnMobile=function(){br()&&e.delayHideScrollBar()},this.showVerticalScrollBar=function(){var n;(n=e.vScrollBar)===null||n===void 0||n.show()},this.showHorizontalScrollBar=function(){var n,i;(n=e.hRowScrollBar)===null||n===void 0||n.show(),(i=e.hScrollBar)===null||i===void 0||i.show()},this.onContainerWheel=function(){e.onContainerWheelForPc(),e.onContainerWheelForMobile()},this.onContainerWheelForPc=function(){var n=e.spreadsheet.getCanvasElement();n==null||n.addEventListener("wheel",e.onWheel)},this.onContainerWheelForMobile=function(){e.mobileWheel=new o9(e.spreadsheet.container),e.mobileWheel.on("wheel",function(n){e.spreadsheet.hideTooltip();var i=n.event,a=n.deltaX,o=n.deltaY,s=n.x,c=n.y;e.onWheel(k(k({},i),{deltaX:a,deltaY:o,offsetX:s,offsetY:c}))})},this.bindEvents=function(){e.onContainerWheel(),e.emitPaginationEvent()},this.setScrollOffset=function(n){Object.keys(n).forEach(function(i){var a=n[i];Zm(a)||e.spreadsheet.store.set(i,Math.floor(a))})},this.getScrollOffset=function(){var n=e.spreadsheet.store;return{scrollX:n.get("scrollX",0),scrollY:n.get("scrollY",0),rowHeaderScrollX:n.get("rowHeaderScrollX",0)}},this.emitPaginationEvent=function(){var n=e.cfg.pagination;if(n){var i=n.current,a=i===void 0?r_:i,o=n.pageSize,s=e.viewCellHeights.getTotalLength(),c=Math.floor((s-1)/o)+1;e.cfg.spreadsheet.emit(K.LAYOUT_PAGINATION,{pageSize:o,pageCount:c,total:s,current:a})}},this.unbindEvents=function(){var n=e.spreadsheet.getCanvasElement();n==null||n.removeEventListener("wheel",e.onWheel),e.mobileWheel.destroy()},this.clipPanelGroup=function(){var n;e.foregroundGroup=e.spreadsheet.foregroundGroup,e.backgroundGroup=e.spreadsheet.backgroundGroup,e.panelGroup=e.spreadsheet.panelGroup;var i=e.panelBBox,a=i.width,o=i.height;(n=e.spreadsheet.panelScrollGroup)===null||n===void 0||n.setClip({type:"rect",attrs:{x:0,y:e.cornerBBox.height,width:a,height:o}})},this.calculateCellWidthHeight=function(){var n=e.layoutResult.colLeafNodes,i=nh(n,function(a,o){return a.push(Fe(a)+o.width),a},[0]);e.viewCellWidths=i,e.viewCellHeights=e.getViewCellHeights(e.layoutResult)},this.getRealScrollX=function(n,i){return i===void 0&&(i=0),e.cfg.spreadsheet.isScrollContainsRowHeader()?n:i},this.calculatePanelBBox=function(){e.panelBBox=new NB(e,!0)},this.getRealWidth=function(){return Fe(e.viewCellWidths)},this.getRealHeight=function(){var n=e.cfg.pagination,i=e.viewCellHeights;if(n){var a=e.getCellRange(),o=a.start,s=a.end;return i.getCellOffsetY(s+1)-i.getCellOffsetY(o)}return i.getTotalHeight()},this.clearAllGroup=function(){for(var n=e.panelGroup.getChildren()||[],i=n.length-1;i>=0;i--){var a=n[i];a instanceof qn?a.set("children",[]):n[i].remove()}e.foregroundGroup.set("children",[]),e.backgroundGroup.set("children",[])},this.scrollWithAnimation=function(n,i,a){var o,s,c,d;n===void 0&&(n={}),i===void 0&&(i=200);var h=e.getAdjustedScrollOffset({scrollX:((o=n.offsetX)===null||o===void 0?void 0:o.value)||0,scrollY:((s=n.offsetY)===null||s===void 0?void 0:s.value)||0,rowHeaderScrollX:((c=n.rowHeaderOffsetX)===null||c===void 0?void 0:c.value)||0}),v=h.scrollX,g=h.scrollY,C=h.rowHeaderScrollX;(d=e.timer)===null||d===void 0||d.stop();var w=e.getScrollOffset(),S=[v!=null?v:w.scrollX,g!=null?g:w.scrollY,C!=null?C:w.rowHeaderScrollX],_=dv(Object.values(w),S);e.timer=il(function(T){try{var M=Math.min(T/i,1),D=Q(_(M),3),B=D[0],G=D[1],V=D[2];e.setScrollOffset({rowHeaderScrollX:V,scrollX:B,scrollY:G}),e.startScroll(),T>i&&(e.timer.stop(),a==null||a())}catch(q){console.error(q),e.timer.stop()}})},this.scrollImmediately=function(n){var i,a,o;n===void 0&&(n={});var s=e.getAdjustedScrollOffset({scrollX:((i=n.offsetX)===null||i===void 0?void 0:i.value)||0,scrollY:((a=n.offsetY)===null||a===void 0?void 0:a.value)||0,rowHeaderScrollX:((o=n.rowHeaderOffsetX)===null||o===void 0?void 0:o.value)||0}),c=s.scrollX,d=s.scrollY,h=s.rowHeaderScrollX;e.setScrollOffset({scrollX:c,scrollY:d,rowHeaderScrollX:h}),e.startScroll()},this.startScroll=function(n){var i,a,o;n===void 0&&(n=!1);var s=e.getScrollOffset(),c=s.rowHeaderScrollX,d=s.scrollX,h=s.scrollY;(i=e.hRowScrollBar)===null||i===void 0||i.onlyUpdateThumbOffset(e.getScrollBarOffset(c,e.hRowScrollBar)),(a=e.hScrollBar)===null||a===void 0||a.onlyUpdateThumbOffset(e.getScrollBarOffset(d,e.hScrollBar)),(o=e.vScrollBar)===null||o===void 0||o.onlyUpdateThumbOffset(e.getScrollBarOffset(h,e.vScrollBar)),e.dynamicRenderCell(n)},this.getRendererHeight=function(){var n=e.getCellRange(),i=n.start,a=n.end;return e.viewCellHeights.getCellOffsetY(a+1)-e.viewCellHeights.getCellOffsetY(i)},this.getAdjustedScrollOffset=function(n){var i=n.scrollX,a=n.scrollY,o=n.rowHeaderScrollX;return{scrollX:z_(i,e.layoutResult.colsHierarchy.width,e.panelBBox.width),scrollY:z_(a,e.getRendererHeight(),e.panelBBox.height),rowHeaderScrollX:MB(o,e.cornerBBox)}},this.renderRowScrollBar=function(n){if(!e.cfg.spreadsheet.isScrollContainsRowHeader()&&e.cornerBBox.width<e.cornerBBox.originalWidth){var i=e.cornerBBox.originalWidth-e.cornerBBox.width,a=e.getScrollbarPosition().maxY,o=e.spreadsheet.theme,s=o.splitLine,c=o.scrollBar,d=Math.max(e.cornerBBox.width*e.cornerBBox.width/e.cornerBBox.originalWidth,c==null?void 0:c.thumbHorizontalMinSize),h=d-(s==null?void 0:s.verticalBorderWidth);e.hRowScrollBar=new H_({isHorizontal:!0,trackLen:e.cornerBBox.width,thumbLen:h,position:{x:e.cornerBBox.minX+e.scrollBarSize/2,y:a},thumbOffset:n*(e.cornerBBox.width-d)/i,theme:e.scrollBarTheme,scrollTargetMaxOffset:i}),e.hRowScrollBar.on(ls.ScrollChange,function(v){var g,C,w=v.offset,S=e.getValidScrollBarOffset(w,i),_=Math.floor(S);e.setScrollOffset({rowHeaderScrollX:_}),(g=e.rowHeader)===null||g===void 0||g.onRowScrollX(_,po),(C=e.rowIndexHeader)===null||C===void 0||C.onRowScrollX(_,Pp),e.cornerHeader.onRowScrollX(_,hi);var T=e.getScrollBarOffset(_,e.hRowScrollBar),M=e.getScrollOffset(),D=M.scrollX,B=M.scrollY,G={scrollX:D,scrollY:B,rowHeaderScrollX:T};e.hRowScrollBar.updateThumbOffset(T,!1),e.spreadsheet.emit(K.ROW_CELL_SCROLL,G),e.spreadsheet.emit(K.GLOBAL_SCROLL,G)}),e.foregroundGroup.add(e.hRowScrollBar)}},this.getValidScrollBarOffset=function(n,i){return Nu(n,0,i)},this.renderHScrollBar=function(n,i,a){if(Math.floor(n)<Math.floor(i)){var o=e.scrollBarSize/2,s=e.getScrollbarPosition().maxY,c=n+(e.cfg.spreadsheet.isScrollContainsRowHeader()?Math.min(e.cornerBBox.width,e.getCanvasHW().width):0),d={x:e.panelBBox.minX+(e.cfg.spreadsheet.isScrollContainsRowHeader()?-e.cornerBBox.width+o:o),y:s},h=i+(e.cfg.spreadsheet.isScrollContainsRowHeader()?e.cornerBBox.width:0),v=e.spreadsheet.theme.scrollBar,g=h-c,C=Math.max(c/h*c,v==null?void 0:v.thumbHorizontalMinSize);e.hScrollBar=new H_({isHorizontal:!0,trackLen:c,thumbLen:C,position:d,thumbOffset:a*(c-C)/g,theme:e.scrollBarTheme,scrollTargetMaxOffset:g}),e.hScrollBar.on(ls.ScrollChange,function(w){var S=w.offset,_=w.updateThumbOffset,T=e.getValidScrollBarOffset(S,g);_&&e.hScrollBar.updateThumbOffset(e.getScrollBarOffset(T,e.hScrollBar),!1),e.setScrollOffset({scrollX:T}),e.dynamicRenderCell()}),e.foregroundGroup.add(e.hScrollBar)}},this.getScrollbarPosition=function(){var n=e.panelBBox,i=n.maxX,a=n.maxY,o=e.getCanvasHW(),s=o.width,c=o.height,d=e.spreadsheet.options.interaction.scrollbarPosition===Qs.CONTENT;return{maxX:(d?i:s)-e.scrollBarSize,maxY:d?a:c-e.scrollBarSize}},this.renderVScrollBar=function(n,i,a){if(n<i){var o=e.spreadsheet.theme.scrollBar,s=Math.max(n/i*n,o==null?void 0:o.thumbVerticalMinSize),c=i-n,d=e.getScrollbarPosition().maxX;e.vScrollBar=new H_({isHorizontal:!1,trackLen:n,thumbLen:s,thumbOffset:a*(n-s)/c,position:{x:d,y:e.panelBBox.minY},theme:e.scrollBarTheme,scrollTargetMaxOffset:c}),e.vScrollBar.on(ls.ScrollChange,function(h){var v=h.offset,g=h.updateThumbOffset,C=e.getValidScrollBarOffset(v,c);g&&e.vScrollBar.updateThumbOffset(e.getScrollBarOffset(C,e.vScrollBar),!1),e.setScrollOffset({scrollY:C}),e.dynamicRenderCell()}),e.foregroundGroup.add(e.vScrollBar)}},this.getScrollBarOffset=function(n,i){var a=i.trackLen,o=i.thumbLen,s=i.scrollTargetMaxOffset;return n*(a-o)/s},this.isScrollOverThePanelArea=function(n){var i=n.offsetX,a=n.offsetY;return i>e.panelBBox.minX&&i<e.panelBBox.maxX&&a>e.panelBBox.minY&&a<e.panelBBox.maxY},this.isScrollOverTheCornerArea=function(n){var i=n.offsetX,a=n.offsetY;return i>e.cornerBBox.minX&&i<e.cornerBBox.maxX&&a>e.cornerBBox.minY&&a<e.cornerBBox.maxY+e.panelBBox.height},this.updateHorizontalRowScrollOffset=function(n){var i,a=n.offset,o=n.offsetX,s=n.offsetY;e.isScrollOverTheCornerArea({offsetX:o,offsetY:s})&&((i=e.hRowScrollBar)===null||i===void 0||i.emitScrollChange(a))},this.updateHorizontalScrollOffset=function(n){var i,a=n.offset,o=n.offsetX,s=n.offsetY;(!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetX:o,offsetY:s}))&&((i=e.hScrollBar)===null||i===void 0||i.emitScrollChange(a))},this.isScrollToLeft=function(n){var i=n.deltaX,a=n.offsetX,o=n.offsetY;if(!e.hScrollBar&&!e.hRowScrollBar)return!0;var s=!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetY:o,offsetX:a})||e.hRowScrollBar.thumbOffset<=0,c=!e.hScrollBar||e.hScrollBar.thumbOffset<=0;return i<=0&&c&&s},this.isScrollToRight=function(n){var i,a,o,s,c,d,h=n.deltaX,v=n.offsetX,g=n.offsetY;if(!e.hScrollBar&&!e.hRowScrollBar)return!0;var C=e.spreadsheet.isFrozenRowHeader()?(i=e.panelBBox)===null||i===void 0?void 0:i.width:(a=e.panelBBox)===null||a===void 0?void 0:a.maxX,w=!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetY:g,offsetX:v})||((o=e.hRowScrollBar)===null||o===void 0?void 0:o.thumbOffset)+((s=e.hRowScrollBar)===null||s===void 0?void 0:s.thumbLen)>=e.cornerBBox.width,S=e.hRowScrollBar&&e.isScrollOverTheCornerArea({offsetX:v,offsetY:g})||((c=e.hScrollBar)===null||c===void 0?void 0:c.thumbOffset)+((d=e.hScrollBar)===null||d===void 0?void 0:d.thumbLen)>=C;return h>=0&&S&&w},this.isScrollToTop=function(n){var i;return e.vScrollBar?n<=0&&((i=e.vScrollBar)===null||i===void 0?void 0:i.thumbOffset)<=0:!0},this.isScrollToBottom=function(n){var i,a,o;return e.vScrollBar?n>=0&&((i=e.vScrollBar)===null||i===void 0?void 0:i.thumbOffset)+((a=e.vScrollBar)===null||a===void 0?void 0:a.thumbLen)>=((o=e.panelBBox)===null||o===void 0?void 0:o.height):!0},this.isVerticalScrollOverTheViewport=function(n){return!e.isScrollToTop(n)&&!e.isScrollToBottom(n)},this.isHorizontalScrollOverTheViewport=function(n){return!e.isScrollToLeft(n)&&!e.isScrollToRight(n)},this.isScrollOverTheViewport=function(n){var i=n.deltaY,a=n.deltaX,o=n.offsetY,s=o<=e.cornerBBox.maxY;return s?!1:i!==0?e.isVerticalScrollOverTheViewport(i):a!==0?e.isHorizontalScrollOverTheViewport(n):!1},this.cancelScrollFrame=function(){return br()&&e.scrollFrameId?!1:(cancelAnimationFrame(e.scrollFrameId),!0)},this.clearScrollFrameIdOnMobile=function(){br()&&(e.scrollFrameId=null)},this.stopScrollChainingIfNeeded=function(n){var i=e.spreadsheet.options.interaction;i.overscrollBehavior!=="auto"&&e.stopScrollChaining(n)},this.stopScrollChaining=function(n){var i,a;n!=null&&n.cancelable&&((i=n==null?void 0:n.preventDefault)===null||i===void 0||i.call(n));var o=n==null?void 0:n.originalEvent;o!=null&&o.cancelable&&((a=o==null?void 0:o.preventDefault)===null||a===void 0||a.call(o))},this.onWheel=function(n){var i=e.spreadsheet.options.interaction,a=n.deltaX,o=n.deltaY,s=n.offsetX,c=n.offsetY,d=n.shiftKey;d&&n_()&&(s=s-a+o,a=o,c-=o,o=0);var h=Q(P5(a,o,i.scrollSpeedRatio),2),v=h[0],g=h[1];if(e.spreadsheet.hideTooltip(),e.spreadsheet.interaction.clearHoverTimer(),!e.isScrollOverTheViewport({deltaX:v,deltaY:g,offsetX:s,offsetY:c})){e.stopScrollChainingIfNeeded(n);return}e.stopScrollChaining(n),e.spreadsheet.interaction.addIntercepts([Ge.HOVER]),e.cancelScrollFrame()&&(e.scrollFrameId=requestAnimationFrame(function(){var C,w=e.getScrollOffset(),S=w.scrollX,_=w.scrollY,T=w.rowHeaderScrollX;v!==0&&(e.showHorizontalScrollBar(),e.updateHorizontalRowScrollOffset({offsetX:s,offsetY:c,offset:v+T}),e.updateHorizontalScrollOffset({offsetX:s,offsetY:c,offset:v+S})),g!==0&&(e.showVerticalScrollBar(),(C=e.vScrollBar)===null||C===void 0||C.emitScrollChange(g+_)),e.delayHideScrollbarOnMobile(),e.clearScrollFrameIdOnMobile()}))},this.addCell=function(n){var i=e.spreadsheet.panelScrollGroup;i==null||i.add(n)},this.realCellRender=function(n,i){var a=e.calculateXYIndexes(n,i);aa.getInstance().logger("renderIndex:",e.preCellIndexes,a);var o=PB(e.preCellIndexes,a),s=o.add,c=o.remove;aa.getInstance().debugCallback(d5,function(){Ae(s,function(h){var v=Q(h,2),g=v[0],C=v[1],w=e.layoutResult.getCellMeta(C,g);if(w){var S=e.cfg.dataCell(w);S.set("name","".concat(g,"-").concat(C)),e.addCell(S)}});var d=Eh(e.panelGroup.getChildren(),Xa);Ae(c,function(h){var v=Q(h,2),g=v[0],C=v[1],w=Vr(d,function(S){return S.get("name")==="".concat(g,"-").concat(C)});w==null||w.remove(!0)}),aa.getInstance().logger("Render Cell Panel: ".concat(d==null?void 0:d.length,", Add: ").concat(s==null?void 0:s.length,", Remove: ").concat(c==null?void 0:c.length))}),e.preCellIndexes=a,e.spreadsheet.emit(K.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,{add:s,remove:c,spreadsheet:e.spreadsheet})},this.getGridInfo=function(){var n=Q(e.preCellIndexes.center,4),i=n[0],a=n[1],o=n[2],s=n[3],c=hA(i,a,e.layoutResult.colLeafNodes),d=M1(o,s,e.viewCellHeights);return{cols:c,rows:d}},this.onAfterScroll=l(function(){var n=e.spreadsheet,i=n.interaction,a=n.container;if(!i.isSelectedState()&&(i.removeIntercepts([Ge.HOVER]),i.getHoverAfterScroll())){var o=i.eventController.canvasMousemoveEvent;if(o){var s=o.x,c=o.y,d=a.getShape(s,c);d&&a.emit(_r.MOUSE_MOVE,k(k({},o),{shape:d,target:d,timestamp:performance.now()}))}}},300),this.cfg=r,this.spreadsheet=r.spreadsheet,this.init()}return Object.defineProperty(t.prototype,"scrollBarTheme",{get:function(){return this.spreadsheet.theme.scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollBarSize",{get:function(){return this.scrollBarTheme.size},enumerable:!1,configurable:!0}),t.prototype.getCellCustomWidth=function(r,e){return Ce(e)?e==null?void 0:e(r):e},t.prototype.getCellDraggedWidth=function(r){var e=this.cfg.colCfg;return Me(e==null?void 0:e.widthByFieldValue,"".concat(r.value))},t.prototype.render=function(){k5(this.spreadsheet.dataCfg.fields)||(this.adjustScrollOffset(),this.renderHeaders(),this.renderScrollBars(),this.renderBackground(),this.dynamicRenderCell())},t.prototype.adjustScrollOffset=function(){var r=this.getAdjustedScrollOffset(this.getScrollOffset());this.setScrollOffset(r)},t.prototype.getSeriesNumberWidth=function(){var r=this.cfg.showSeriesNumber;return r?this.spreadsheet.theme.rowCell.seriesNumberWidth:0},t.prototype.getCanvasHW=function(){return{width:this.cfg.width,height:this.cfg.height}},t.prototype.updateScrollOffset=function(r){var e,n,i,a,o,s;if(((e=r.rowHeaderOffsetX)===null||e===void 0?void 0:e.value)!==void 0){!((n=r.rowHeaderOffsetX)===null||n===void 0)&&n.animate?this.scrollWithAnimation(r):this.scrollImmediately(r);return}if(((i=r.offsetX)===null||i===void 0?void 0:i.value)!==void 0){!((a=r.offsetX)===null||a===void 0)&&a.animate?this.scrollWithAnimation(r):this.scrollImmediately(r);return}((o=r.offsetY)===null||o===void 0?void 0:o.value)!==void 0&&(!((s=r.offsetY)===null||s===void 0)&&s.animate?this.scrollWithAnimation(r):this.scrollImmediately(r))},t.prototype.getPaginationScrollY=function(){var r=this.cfg.pagination;if(r){var e=r.current,n=e===void 0?r_:e,i=r.pageSize,a=this.viewCellHeights,o=Math.max((n-1)*i,0);return a.getCellOffsetY(o)}return 0},t.prototype.destroy=function(){this.unbindEvents(),this.clearAllGroup(),this.preCellIndexes=null,cancelAnimationFrame(this.scrollFrameId)},t.prototype.calculateXYIndexes=function(r,e){var n=this.panelBBox,i=n.viewportHeight,a=n.viewportWidth,o=s_(r,e,this.viewCellWidths,this.viewCellHeights,{width:a,height:i,x:0,y:0},this.getRealScrollX(this.cornerBBox.width));return{center:o}},t.prototype.calculateCornerBBox=function(){this.cornerBBox=new mA(this,!0)},t.prototype.getCellRange=function(){var r=this.cfg.pagination;return G5(this.viewCellHeights,r)},t.prototype.panelScrollGroupClip=function(r,e){var n,i=this.spreadsheet.isFrozenRowHeader();(n=this.spreadsheet.panelScrollGroup)===null||n===void 0||n.setClip({type:"rect",attrs:{x:i?r:0,y:e,width:this.panelBBox.width+(i?0:r),height:this.panelBBox.height}})},t.prototype.clip=function(r,e){this.panelScrollGroupClip(r,e)},t.prototype.translateRelatedGroups=function(r,e,n){var i,a,o,s,c,d;Va(this.spreadsheet.panelScrollGroup,this.cornerBBox.width-r,this.cornerBBox.height-e),(i=this.rowHeader)===null||i===void 0||i.onScrollXY(this.getRealScrollX(r,n),e,po),(a=this.rowIndexHeader)===null||a===void 0||a.onScrollXY(this.getRealScrollX(r,n),e,Pp),(o=this.cornerHeader)===null||o===void 0||o.onCorScroll(this.getRealScrollX(r,n),hi),(s=this.centerFrame)===null||s===void 0||s.onChangeShadowVisibility(r,this.getRealWidth()-this.panelBBox.width),(c=this.centerFrame)===null||c===void 0||c.onBorderScroll(this.getRealScrollX(r)),(d=this.columnHeader)===null||d===void 0||d.onColScroll(r,Np)},t.prototype.init=function(){var r=this;aa.getInstance().debugCallback(c5,function(){r.layoutResult=r.doLayout(),r.saveInitColumnLeafNodes(r.layoutResult.colLeafNodes),r.spreadsheet.emit(K.LAYOUT_AFTER_HEADER_LAYOUT,r.layoutResult)}),this.calculateCellWidthHeight(),this.calculateCornerBBox(),this.calculatePanelBBox(),this.clipPanelGroup(),this.bindEvents()},t.prototype.renderBackground=function(){var r=this.getCanvasHW(),e=r.width,n=r.height,i=this.spreadsheet.theme.background,a=i.color,o=i.opacity;this.backgroundGroup.addShape("rect",{attrs:{fill:a,opacity:o,x:0,y:0,width:e,height:n}})},t.prototype.renderScrollBars=function(){var r=this.getScrollOffset(),e=r.scrollX,n=r.scrollY,i=r.rowHeaderScrollX,a=this.panelBBox,o=a.width,s=a.height,c=this.layoutResult.colsHierarchy.width,d=this.getRealHeight();this.renderRowScrollBar(i),this.renderHScrollBar(o,c,e),this.renderVScrollBar(s,d,n)},t.prototype.renderHeaders=function(){var r=this.getSeriesNumberWidth();this.rowHeader=this.getRowHeader(),this.columnHeader=this.getColHeader(),r>0&&!this.rowIndexHeader&&(this.rowIndexHeader=this.getSeriesNumberHeader()),this.cornerHeader=this.getCornerHeader(),this.centerFrame=this.getCenterFrame(),this.rowIndexHeader&&this.foregroundGroup.add(this.rowIndexHeader),this.rowHeader&&this.foregroundGroup.add(this.rowHeader),this.foregroundGroup.add(this.columnHeader),this.foregroundGroup.add(this.cornerHeader),this.foregroundGroup.add(this.centerFrame)},t.prototype.getRowHeaderCfg=function(){var r,e,n,i=this.panelBBox,a=i.y,o=i.viewportHeight,s=i.viewportWidth,c=i.height,d=this.getSeriesNumberWidth();return{width:this.cornerBBox.width,height:c,viewportWidth:s,viewportHeight:o,position:{x:0,y:a},data:this.layoutResult.rowNodes,hierarchyType:this.cfg.hierarchyType,linkFields:(n=(e=(r=this.cfg.spreadsheet.options)===null||r===void 0?void 0:r.interaction)===null||e===void 0?void 0:e.linkFields)!==null&&n!==void 0?n:[],seriesNumberWidth:d,spreadsheet:this.spreadsheet}},t.prototype.getRowHeader=function(){return this.rowHeader?this.rowHeader:new W_(this.getRowHeaderCfg())},t.prototype.getColHeader=function(){if(!this.columnHeader){var r=this.panelBBox,e=r.x,n=r.width,i=r.viewportHeight,a=r.viewportWidth;return new $_({width:n,cornerWidth:this.cornerBBox.width,height:this.cornerBBox.height,viewportWidth:a,viewportHeight:i,position:{x:e,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},t.prototype.getCornerHeader=function(){return this.cornerHeader?this.cornerHeader:FB.getCornerHeader(this.panelBBox,this.cornerBBox,this.getSeriesNumberWidth(),this.cfg,this.layoutResult,this.spreadsheet)},t.prototype.getSeriesNumberHeader=function(){return CA.getSeriesNumberHeader({viewportBBox:this.panelBBox,seriesNumberWidth:this.getSeriesNumberWidth(),leafNodes:this.layoutResult.rowsHierarchy.getNodes(0),spreadsheet:this.spreadsheet,cornerWidth:this.cornerBBox.width})},t.prototype.getCenterFrame=function(){var r;if(!this.centerFrame){var e=this.panelBBox,n=e.viewportWidth,i=e.viewportHeight,a=this.cornerBBox.width,o=this.cornerBBox.height,s=(r=this.cfg)===null||r===void 0?void 0:r.frame,c={position:{x:this.cornerBBox.x,y:this.cornerBBox.y},width:a,height:o,viewportWidth:n,viewportHeight:i,showViewportLeftShadow:!1,showViewportRightShadow:!1,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),isPivotMode:this.cfg.spreadsheet.isPivotMode(),spreadsheet:this.cfg.spreadsheet};return s?s(c):new HB(c)}return this.centerFrame},t.prototype.updatePanelScrollGroup=function(){this.gridInfo=this.getGridInfo(),this.spreadsheet.panelScrollGroup.update(this.gridInfo)},t.prototype.dynamicRenderCell=function(r){var e=this.getScrollOffset(),n=e.scrollX,i=e.scrollY,a=e.rowHeaderScrollX,o=i+this.getPaginationScrollY(),s=z_(o,this.viewCellHeights.getTotalHeight(),this.panelBBox.viewportHeight);this.spreadsheet.hideTooltip(),this.spreadsheet.interaction.clearHoverTimer(),this.realCellRender(n,s),this.updatePanelScrollGroup(),this.translateRelatedGroups(n,s,a),this.clip(n,s),r||this.emitScrollEvent({scrollX:n,scrollY:s,rowHeaderScrollX:a}),this.onAfterScroll()},t.prototype.emitScrollEvent=function(r){this.spreadsheet.emit(K.LAYOUT_CELL_SCROLL,r),this.spreadsheet.emit(K.GLOBAL_SCROLL,r)},t.prototype.saveInitColumnLeafNodes=function(r){r===void 0&&(r=[]);var e=this.spreadsheet,n=e.store,i=e.options,a=i.interaction.hiddenColumnFields,o=r.length+a.length,s=n.get("initColumnLeafNodes",[]);o!==s.length&&n.set("initColumnLeafNodes",r)},t.prototype.getHiddenColumnsInfo=function(r){var e=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return ve(e)?null:e.find(function(n){var i;return(i=n==null?void 0:n.hideColumnNodes)===null||i===void 0?void 0:i.some(function(a){return a.id===r.id})})},t.prototype.getCornerNodes=function(){var r;return((r=this.cornerHeader)===null||r===void 0?void 0:r.getNodes())||[]},t}(),wA=function(t){Le(r,t);function r(e){var n,i=t.call(this,e)||this;return i.frozenGroupInfo=(n={},n[vn.FROZEN_COL]={width:0},n[vn.FROZEN_ROW]={height:0},n[vn.FROZEN_TRAILING_ROW]={height:0},n[vn.FROZEN_TRAILING_COL]={width:0},n),i.panelScrollGroupIndexes=[],i.initFrozenGroupPosition=function(){var a=i.getScrollOffset(),o=a.scrollY,s=a.scrollX,c=i.getPaginationScrollY();Va(i.spreadsheet.frozenRowGroup,i.cornerBBox.width-s,i.cornerBBox.height-c),Va(i.spreadsheet.frozenColGroup,i.cornerBBox.width,i.cornerBBox.height-o-c),Va(i.spreadsheet.frozenTrailingColGroup,i.cornerBBox.width,i.cornerBBox.height-o-c),Va(i.spreadsheet.frozenTopGroup,i.cornerBBox.width,i.cornerBBox.height-c)},i.addCell=function(a){var o=i.getBizRevisedFrozenOptions(),s=o.frozenRowCount,c=o.frozenColCount,d=o.frozenTrailingRowCount,h=o.frozenTrailingColCount,v=i.layoutResult.colsHierarchy.getLeaves().length,g=i.getCellRange(),C=i.getRealFrozenColumns(c,h),w=C.colCount,S=C.trailingColCount,_=F5(a.getMeta(),{frozenRowCount:s,frozenColCount:w,frozenTrailingRowCount:d,frozenTrailingColCount:S},v,g),T=kp[_];T&&i.spreadsheet[T]&&i.spreadsheet[T].add(a)},i.renderFrozenGroupSplitLine=function(a,o){var s,c,d,h=i.panelBBox,v=h.width,g=h.height,C=h.viewportWidth,w=h.viewportHeight,S=i.cornerBBox.height,_=i.layoutResult.colNodes.filter(function(Nt){return _i(Nt)}),T=i.getCellRange(),M=T.end-T.start,D=Uo(i.getBizRevisedFrozenOptions(),_.length,M),B=D.frozenRowCount,G=B===void 0?0:B,V=D.frozenColCount,q=V===void 0?0:V,J=D.frozenTrailingColCount,te=J===void 0?0:J,se=D.frozenTrailingRowCount,ue=se===void 0?0:se,ce=Math.floor(o-i.getPaginationScrollY()),me=Math.max(0,((s=Fe(i.viewCellWidths))!==null&&s!==void 0?s:0)-C),Te=Math.max(0,i.viewCellHeights.getCellOffsetY(T.end+1)-i.viewCellHeights.getCellOffsetY(T.start)-w);(c=i.foregroundGroup.findById(Ks))===null||c===void 0||c.remove();var le=Me(i.cfg,"spreadsheet.theme.splitLine"),pe=i.foregroundGroup.addGroup({id:Ks,zIndex:vo}),et={lineWidth:le==null?void 0:le.verticalBorderWidth,stroke:le==null?void 0:le.verticalBorderColor,opacity:le==null?void 0:le.verticalBorderColorOpacity,lineDash:le==null?void 0:le.borderDash},Xe={lineWidth:le==null?void 0:le.horizontalBorderWidth,stroke:le==null?void 0:le.horizontalBorderColor,opacity:le==null?void 0:le.horizontalBorderColorOpacity,lineDash:le==null?void 0:le.borderDash};if(q>0){var ze=_.reduce(function(Nt,ot,ut){return ut<q?Nt+ot.width:Nt},0),Ie=ue>0?g:w;zr(pe,{x1:ze,x2:ze,y1:S,y2:S+Ie},k({},et)),le.showShadow&&a>0&&pe.addShape("rect",{attrs:{x:ze,y:S,width:le.shadowWidth,height:Ie,fill:i.getShadowFill(0)}})}if(G>0){var Je=S+i.getTotalHeightForRange(T.start,T.start+G-1),ke=te>0?v:C;zr(pe,{x1:0,x2:ke,y1:Je,y2:Je},k({},Xe)),le.showShadow&&ce>0&&pe.addShape("rect",{attrs:{x:0,y:Je,width:ke,height:le.shadowWidth,fill:i.getShadowFill(90)}})}if(te>0){var ze=_[_.length-te].x,Ie=ue?g:w;zr(pe,{x1:ze,x2:ze,y1:S,y2:S+Ie},k({},et)),le.showShadow&&Math.floor(a)<Math.floor(me)&&pe.addShape("rect",{attrs:{x:ze-((d=le.shadowWidth)!==null&&d!==void 0?d:0),y:S,width:le.shadowWidth,height:Ie,fill:i.getShadowFill(180)}})}if(ue>0){var Je=i.panelBBox.maxY-i.getTotalHeightForRange(T.end-ue+1,T.end),ke=te>0?v:C;zr(pe,{x1:0,x2:ke,y1:Je,y2:Je},k({},Xe)),le.showShadow&&ce<Math.floor(Te)&&pe.addShape("rect",{attrs:{x:0,y:Je-le.shadowWidth,width:ke,height:le.shadowWidth,fill:i.getShadowFill(270)}})}i.foregroundGroup.sort()},i.getRealFrozenColumns=function(a,o){var s,c=a,d=o;if(a||o){var h=i.layoutResult.colsHierarchy.getNodes();h=h.filter(function(v){return _i(v)}),s=dh(h,a,o),c=s.colCount,d=s.trailingColCount}return{colCount:c,trailingColCount:d}},i.getTotalHeightForRange=function(a,o){if(a<0||o<0)return 0;if(i.rowOffsets)return i.rowOffsets[o+1]-i.rowOffsets[a];for(var s=0,c=a;c<o+1;c++){var d=i.getDefaultCellHeight();s+=d}return s},i.getShadowFill=function(a){var o,s,c=Me(i.cfg,"spreadsheet.theme.splitLine");return"l (".concat(a,") 0:").concat((o=c.shadowColors)===null||o===void 0?void 0:o.left," 1:").concat((s=c.shadowColors)===null||s===void 0?void 0:s.right)},i}return r.prototype.calculateFrozenGroupInfo=function(){var e=this.getFrozenOptionsDirectly(),n=e.frozenColCount,i=e.frozenRowCount,a=e.frozenTrailingColCount,o=e.frozenTrailingRowCount,s=this.layoutResult.colNodes.filter(function(S){return _i(S)}),c=this.viewCellHeights,d=this.getCellRange(),h=this.frozenGroupInfo,v=h.frozenCol,g=h.frozenTrailingCol,C=h.frozenRow,w=h.frozenTrailingRow;n>0&&(v.width=s[n-1].x+s[n-1].width-0,v.range=[0,n-1]),i>0&&(C.height=c.getCellOffsetY(d.start+i)-c.getCellOffsetY(d.start),C.range=[d.start,d.start+i-1]),a>0&&(g.width=s[s.length-1].x-s[s.length-a].x+s[s.length-1].width,g.range=[s.length-a,s.length-1]),o>0&&(w.height=c.getCellOffsetY(d.end+1)-c.getCellOffsetY(d.end+1-o),w.range=[d.end-o+1,d.end])},r.prototype.calculateXYIndexes=function(e,n){var i,a,o,s=this.layoutResult.colLeafNodes.length,c=this.getCellRange(),d=this.panelBBox,h=d.viewportHeight,v=d.viewportWidth,g=this.getFrozenOptionsDirectly(),C=g.frozenColCount,w=C===void 0?0:C,S=g.frozenRowCount,_=S===void 0?0:S,T=g.frozenTrailingColCount,M=T===void 0?0:T,D=g.frozenTrailingRowCount,B=D===void 0?0:D,G={width:v,height:h,x:0,y:0};if(M>0||w>0){var V=this.frozenGroupInfo,q=V.frozenTrailingCol,J=V.frozenCol;G.width-=q.width+J.width,G.x+=(i=J.width)!==null&&i!==void 0?i:0}if(B>0||_>0){var te=this.frozenGroupInfo,se=te.frozenRow,ue=te.frozenTrailingRow;G.height<se.height+ue.height?(G.height=0,G.y=0):(G.height-=se.height+ue.height,G.y+=se.height)}var ce=this.spreadsheet.isTableMode()&&(!((o=(a=this.spreadsheet.dataSet)===null||a===void 0?void 0:a.isEmpty)===null||o===void 0)&&o.call(a))?this.spreadsheet.dataSet.getEmptyViewIndexes():s_(e,n,this.viewCellWidths,this.viewCellHeights,G,this.getRealScrollX(this.cornerBBox.width));this.panelScrollGroupIndexes=ce;var me=this.getRealFrozenColumns(w,M),Te=me.colCount,le=me.trailingColCount;return z5(ce,{frozenColCount:Te,frozenRowCount:_,frozenTrailingColCount:le,frozenTrailingRowCount:B},s,c)},r.prototype.updateFrozenGroupGrid=function(){var e=this;[vn.FROZEN_COL,vn.FROZEN_ROW,vn.FROZEN_TRAILING_COL,vn.FROZEN_TRAILING_ROW].forEach(function(n){if(e.frozenGroupInfo[n].range){var i=[],a=[];if(n.toLowerCase().includes("row")){var o=Q(e.frozenGroupInfo[n].range,2),s=o[0],c=o[1];if(i=e.gridInfo.cols,a=M1(s,c,e.viewCellHeights),n===vn.FROZEN_TRAILING_ROW){var d=e.spreadsheet.frozenTrailingRowGroup.getBBox().minY;a=DB(s,c,Math.ceil(d),e.viewCellHeights)}}else{var h=Q(e.frozenGroupInfo[n].range,2),v=h[0],g=h[1],C=e.layoutResult.colNodes.filter(function(w){return _i(w)});i=hA(v,g,C),a=e.gridInfo.rows}e.spreadsheet["".concat(n,"Group")].updateGrid({cols:i,rows:a},"".concat(n,"Group"))}})},r.prototype.updatePanelScrollGroup=function(){t.prototype.updatePanelScrollGroup.call(this),this.updateFrozenGroupGrid()},r.prototype.translateRelatedGroups=function(e,n,i){var a=this,o=this.spreadsheet,s=o.frozenColGroup,c=o.frozenTrailingColGroup,d=o.frozenRowGroup,h=o.frozenTrailingRowGroup;[d,h].forEach(function(v){s1(v,a.cornerBBox.width-e)}),[s,c].forEach(function(v){N5(v,a.cornerBBox.height-n)}),t.prototype.translateRelatedGroups.call(this,e,n,i),this.updateRowResizeArea(),this.renderFrozenGroupSplitLine(e,n)},r.prototype.updateRowResizeArea=function(){},r.prototype.clip=function(e,n){var i,a,o,s=this.getPaginationScrollY(),c=this.spreadsheet,d=c.frozenRowGroup,h=c.frozenColGroup,v=c.frozenTrailingColGroup,g=c.frozenTrailingRowGroup,C=c.panelScrollGroup,w=0,S=0,_=0;h&&(w=h.getBBox().width),d&&(S=d.getBBox().height);var T;v&&(T=v.getBBox()),g&&(_=g.getBBox().height);var M=this.panelBBox.width-w-((i=T==null?void 0:T.width)!==null&&i!==void 0?i:0),D=this.panelBBox.height-S-_;C.setClip({type:"rect",attrs:{x:e+w,y:n+S,width:M,height:D}}),d.setClip({type:"rect",attrs:{x:e+w,y:s,width:M,height:S}}),g==null||g.setClip({type:"rect",attrs:{x:e+w,y:g.getBBox().minY,width:M,height:_}});var B={y:n+S,height:D};h==null||h.setClip({type:"rect",attrs:k(k({},B),{x:0,width:w})}),v==null||v.setClip({type:"rect",attrs:k(k({},B),{x:(a=T==null?void 0:T.minX)!==null&&a!==void 0?a:0,width:(o=T==null?void 0:T.width)!==null&&o!==void 0?o:0})})},r.prototype.init=function(){t.prototype.init.call(this),this.initRowOffsets()},r.prototype.render=function(){this.calculateFrozenGroupInfo(),t.prototype.render.call(this),this.initFrozenGroupPosition()},r.prototype.getFrozenOptionsDirectly=function(){var e=this.layoutResult.colLeafNodes.length,n=this.getCellRange();return Uo(this.getBizRevisedFrozenOptions(),e,n.end-n.start+1)},r.prototype.getBizRevisedFrozenOptions=function(){var e=this.cfg,n=e.frozenColCount,i=e.frozenRowCount,a=e.frozenTrailingColCount,o=e.frozenTrailingRowCount;return{frozenColCount:n,frozenRowCount:i,frozenTrailingColCount:a,frozenTrailingRowCount:o}},r.prototype.initRowOffsets=function(){var e=this,n=this.cfg.dataSet,i=Me(this.spreadsheet,"options.style.rowCfg.heightByField",{});if(Object.keys(i).length){var a=n.getDisplayDataSet();this.rowOffsets=[0];var o=0;a.forEach(function(s,c){var d,h=(d=i==null?void 0:i[String(c)])!==null&&d!==void 0?d:e.getDefaultCellHeight(),v=o+h;e.rowOffsets.push(v),o=v})}},r.prototype.getDefaultCellHeight=function(){var e,n=this.cfg.cellCfg;return(e=n==null?void 0:n.height)!==null&&e!==void 0?e:0},r}(GB),xA=function(t){var r,e,n,i=t.facetCfg,a=t.customTreeItems,o=a===void 0?[]:a,s=t.level,c=t.parentNode,d=t.hierarchy,h=i.spreadsheet,v=i.collapsedRows,g=i.hierarchyCollapse;try{for(var C=mr(o),w=C.next();!w.done;w=C.next()){var S=w.value,_=S.key,T=S.title,M=S.collapsed,D=S.children,B=ru(S,["key","title","collapsed","children"]),G=(n={},n[Ye]=_,n),V=uh(c.id,T),q=M!=null?M:!1,J=Me(v,V),te=J!=null?J:g||q,se=new Hr({id:V,key:_,label:T,value:T,level:s,parent:c,field:_,isTotals:!1,isCollapsed:te,hierarchy:d,query:G,spreadsheet:h,extra:B});s>d.maxLevel&&(d.maxLevel=s),ve(D)&&(se.isLeaf=!0);var ue=a_(i,c,se,d);!ve(D)&&!te&&ue&&xA({facetCfg:i,parentNode:se,level:s+1,hierarchy:d,customTreeItems:D})}}catch(ce){r={error:ce}}finally{try{w&&!w.done&&(e=C.return)&&e.call(C)}finally{if(r)throw r.error}}},$B=function(t,r,e){var n=t.getTotalsConfig(r);if(n.showGrandTotals){var i=n.reverseLayout?"unshift":"push";e[i](new rc({label:n.label,isSubTotals:!1,isGrandTotals:!0}))}},bA=function(t){var r,e,n,i,a,o,s=t.parentNode,c=t.currentField,d=t.level,h=t.facetCfg,v=t.hierarchy,g=t.pivotMeta,C=h.spreadsheet,w=h.collapsedRows,S=h.hierarchyCollapse,_=h.rowExpandDepth,T=s.query,M=s.id,D=((i=C.dataCfg.fields.rows)===null||i===void 0?void 0:i.length)<=d,B=gD(Array.from(g.keys())),G=HL(B,h,s,c),V=C.store.get("drillItemsNum");D&&V>0&&(G=G.slice(0,V)),d===0&&$B(C,c,G);try{for(var q=mr(G),J=q.next();!J.done;J=q.next()){var te=J.value,se=te instanceof rc,ue=se?null:g.get(te),ce=void 0,me=T,Te=!1,le=!1;if(se){var pe=te;Te=pe.isGrandTotals,le=pe.isSubTotals,ce=ar(te.label),me=T}else ce=te,me=k(k({},T),(n={},n[c]=ce,n));var et=uh(M,ce),Xe=w==null?void 0:w[et],ze=_n(_)?d>_:null,Ie=(a=Xe!=null?Xe:ze)!==null&&a!==void 0?a:S,Je=new Hr({id:et,key:c,label:ce,value:ce,level:d,parent:s,field:c,isTotals:se,isGrandTotals:Te,isSubTotals:le,isCollapsed:Ie,hierarchy:v,query:me,spreadsheet:C});d>v.maxLevel&&(v.maxLevel=d);var ke=!(!((o=ue==null?void 0:ue.children)===null||o===void 0)&&o.size);(ke||se)&&(Je.isLeaf=!0),ke||(Je.isTotals=!0);var Nt=a_(h,s,Je,v);!ke&&!Ie&&!se&&Nt&&bA({level:d+1,currentField:ue.childField,pivotMeta:ue.children,facetCfg:h,parentNode:Je,hierarchy:v})}}catch(ot){r={error:ot}}finally{try{J&&!J.done&&(e=q.return)&&e.call(q)}finally{if(r)throw r.error}}},SA=function(t){var r=t.isValueInCols,e=t.moreThanOneValue,n=t.rootNode,i=t.facetCfg,a=t.hierarchy,o=t.fields,s=t.isRowHeader,c,d;s?(c=!r&&e,d=!r&&!e):(c=r&&e,d=r&&!e),$L({addTotalMeasureInTotal:c,addMeasureInTotalQuery:d,parentNode:n,currentField:o[0],fields:o,facetCfg:i,hierarchy:a})},WB=function(t){var r=t.facetCfg,e=t.rootNode,n=t.hierarchy,i=r.dataSet.fields.customTreeItems;xA({customTreeItems:i,facetCfg:r,level:0,parentNode:e,hierarchy:n})},kB=function(t){var r=t.facetCfg,e=t.rootNode,n=t.hierarchy,i=r.hierarchyType,a=r.rows,o=r.dataSet;i==="tree"?bA({level:0,currentField:a[0],pivotMeta:o.rowPivotMeta,facetCfg:r,parentNode:e,hierarchy:n}):WB(t)},UB=function(t){var r=t.spreadsheet;r.isHierarchyTreeType()?kB(t):SA(t)},YB=function(t){var r=t.isPivotMode,e=t.hierarchy,n=t.rootNode,i=t.facetCfg;r?SA(t):U5({parentNode:n,hierarchy:e,facetCfg:i})},k_=function(t){var r=t.isRowHeader,e=t.facetCfg,n=e.spreadsheet,i=e.rows,a=i===void 0?[]:i,o=e.columns,s=o===void 0?[]:o,c=n.dataCfg.fields.valueInCols,d=n.isPivotMode(),h=e.dataSet.moreThanOneValue(),v=Hr.rootNode(),g=new IL,C={isValueInCols:c,isPivotMode:d,moreThanOneValue:h,rootNode:v,hierarchy:g,spreadsheet:n,facetCfg:e,fields:r?a:s,isRowHeader:r};r?UB(C):YB(C);var w=function(){return r&&n.isHierarchyTreeType()?g.getNodes():g.getLeaves()};return{hierarchy:g,leafNodes:w()}},VB=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.renderFrozenGroupSplitLine=function(n,i){var a;if((a=e.foregroundGroup.findById(Ks))===null||a===void 0||a.remove(),e.enableFrozenFirstRow()){var o=Math.floor(i-e.getPaginationScrollY()),s=e.foregroundGroup.addGroup({id:Ks,zIndex:vo}),c=Me(e.cfg,"spreadsheet.theme.splitLine"),d={lineWidth:c==null?void 0:c.horizontalBorderWidth,stroke:c==null?void 0:c.horizontalBorderColor,opacity:c==null?void 0:c.horizontalBorderColorOpacity},h=e.cornerBBox.height,v=e.getCellRange(),g=h+e.getTotalHeightForRange(v.start,v.start),C=e.panelBBox.viewportWidth+e.layoutResult.rowsHierarchy.width+e.getSeriesNumberWidth();zr(s,{x1:0,x2:C,y1:g,y2:g},k({},d)),c.showShadow&&o>0&&s.addShape("rect",{attrs:{x:0,y:g,width:C,height:c.shadowWidth,fill:e.getShadowFill(90)}})}},e}return r.prototype.updateFrozenGroupGrid=function(){var e=this;[vn.FROZEN_ROW].forEach(function(n){if(e.frozenGroupInfo[n].range){var i=[],a=[];if(n.toLowerCase().includes("row")){var o=Q(e.frozenGroupInfo[n].range,2),s=o[0],c=o[1];i=e.gridInfo.cols,a=M1(s,c,e.viewCellHeights)}e.spreadsheet["".concat(n,"Group")].updateGrid({cols:i,rows:a},"".concat(n,"Group"))}})},r.prototype.getBizRevisedFrozenOptions=function(){return ic(this.cfg,this.layoutResult.rowNodes)},r.prototype.clip=function(e,n){var i=this.spreadsheet,a=i.isFrozenRowHeader,o=i.frozenRowGroup;if(!a.call(this.spreadsheet)){if(this.panelScrollGroupClip(e,n),this.enableFrozenFirstRow()){var s=this.getPaginationScrollY();o.setClip({type:"rect",attrs:{x:0,y:s,width:this.panelBBox.width+e,height:o.getBBox().height}})}return}t.prototype.clip.call(this,e,n)},Object.defineProperty(r.prototype,"rowCellTheme",{get:function(){return this.spreadsheet.theme.rowCell.cell},enumerable:!1,configurable:!0}),r.prototype.getContentHeight=function(){var e=this.layoutResult,n=e.rowsHierarchy,i=e.colsHierarchy;return n.height+i.height},r.prototype.doLayout=function(){var e=k_({isRowHeader:!0,facetCfg:this.cfg}),n=e.leafNodes,i=e.hierarchy,a=k_({isRowHeader:!1,facetCfg:this.cfg}),o=a.leafNodes,s=a.hierarchy;this.calculateNodesCoordinate(n,i,o,s);var c=this.cfg,d=c.dataSet,h=c.spreadsheet,v=function(C,w){var S,_,T,M=C||0,D=w||0,B=n[M],G=o[D];if(!B||!G)return null;var V=B.query,q=G.query,J=B.isTotals||B.isTotalMeasure||G.isTotals||G.isTotalMeasure,te=h.options.hierarchyType,se=(_=Me(h,"facet.cfg.colCfg.hideMeasureColumn"))!==null&&_!==void 0?_:!1,ue=se&&te!=="customTree"?(S={},S[Ye]=(T=d.fields.values)===null||T===void 0?void 0:T[0],S):{},ce=Jm({},V,q,ue),me=ph(B,G),Te=d.getCellData({query:ce,rowNode:B,isTotals:J,totalStatus:me}),le=ce[Ye],pe=Me(Te,kr,null);return{spreadsheet:h,x:G.x,y:B.y,width:G.width,height:B.height,data:Te,rowIndex:M,colIndex:D,isTotals:J,valueField:le,fieldValue:pe,rowQuery:V,colQuery:q,rowId:B.id,colId:G.id,id:m1(B.id,G.id)}},g={colNodes:s.getNodes(),colsHierarchy:s,rowNodes:i.getNodes(),rowsHierarchy:i,rowLeafNodes:n,colLeafNodes:o,getCellMeta:v,spreadsheet:h};return D5(this.cfg,g)},r.prototype.calculateNodesCoordinate=function(e,n,i,a){this.calculateRowNodesCoordinate(e,n,i),this.calculateColNodesCoordinate(i,a,e,n.width)},r.prototype.calculateColNodesCoordinate=function(e,n,i,a){for(var o,s,c,d=Hr.blankNode(),h=n.getNodes(),v=n.sampleNodesForAllLevels,g=0;g<v.length;g++){var C=v[g];if(C.height=this.getColNodeHeight(C),n.height+=C.height,C.level===0)C.y=0;else{var w=v[g-1];C.y=(o=(w==null?void 0:w.y)+(w==null?void 0:w.height))!==null&&o!==void 0?o:0}}for(var S=0,_=function(D){var B=h[D];if(B.isLeaf&&(B.colIndex=S,S+=1,B.x=d.x+d.width,B.width=T.calculateColLeafNodesWidth(B,e,i,a),n.width+=B.width,d=B),B.level===0)B.y=0;else{var G=n.sampleNodesForAllLevels.find(function(V){return V.level===B.level-1});B.y=(s=(G==null?void 0:G.y)+(G==null?void 0:G.height))!==null&&s!==void 0?s:0}B.height=T.getColNodeHeight(B),o_(T.cfg,null,B)},T=this,M=0;M<h.length;M++)_(M);this.autoCalculateColNodeWidthAndX(e),ve((c=this.spreadsheet.options.totals)===null||c===void 0?void 0:c.col)||(this.adjustTotalNodesCoordinate({hierarchy:n,isRowHeader:!1,isSubTotal:!0}),this.adjustTotalNodesCoordinate({hierarchy:n,isRowHeader:!1,isSubTotal:!1}))},r.prototype.autoCalculateColNodeWidthAndX=function(e){for(var n,i=null,a=0,o=e.slice(0);a<o.length;){var s=o[a++],c=s.parent;if(i!==c&&c){o.push(c);var d=(n=c.children)===null||n===void 0?void 0:n.find(function(g){return g.width}),h=d==null?void 0:d.x,v=oL(c.children,"width");c.x=h,c.width=v,i=c}}},r.prototype.calculateColLeafNodesWidth=function(e,n,i,a){var o,s,c,d,h,v=this.cfg,g=v.colCfg,C=v.dataSet,w=v.filterDisplayDataItem,S=this.getCellDraggedWidth(e);if(_n(S))return S;var _=this.getCellCustomWidth(e,g==null?void 0:g.width);if(_n(_))return _;if(this.spreadsheet.getLayoutWidthType()===pi.Compact){for(var T=this.spreadsheet.theme.colCell,M=T.bolderText,D=T.cell,B=T.icon,G=this.spreadsheet.theme.dataCell.text,V=this.spreadsheet.dataSet.getFieldFormatter(e.field),q=(o=V==null?void 0:V(e.value))!==null&&o!==void 0?o:e.label,J=this.getExpectedCellIconWidth(de.COL_CELL,this.spreadsheet.isValueInCols()&&this.spreadsheet.options.showDefaultHeaderActionIcon,B),te=this.spreadsheet.measureTextWidthRoughly(q,M)+J,se=void 0,ue=0,ce=0;ce<Td;ce++){var me=i[ce];if(me){var Te=C.getCellData({query:k(k({},e.query),me.query),rowNode:me,isTotals:e.isTotals||e.isTotalMeasure||me.isTotals||me.isTotalMeasure,totalStatus:ph(me,e)});if(Te){var le=mR(Te,w),pe=(c=(s=this.spreadsheet.dataSet.getFieldFormatter(Te[Ye]))===null||s===void 0?void 0:s(le))!==null&&c!==void 0?c:le,et="".concat(pe),Xe=this.spreadsheet.measureTextWidthRoughly(et,G);Xe>ue&&(se=et,ue=Xe)}}}var ze=te>ue,Ie=ze?q:se,Je=ze?J:0;aa.getInstance().logger("Max Label In Col:",e.field,Ie,ue);var ke=this.spreadsheet.measureTextWidth(Ie,k(k({},M),{fontSize:Math.max(G.fontSize,M.fontSize)}));return ke+((d=D.padding)===null||d===void 0?void 0:d.left)+((h=D.padding)===null||h===void 0?void 0:h.right)+Je}return this.spreadsheet.isHierarchyTreeType()?this.getAdaptTreeColWidth(e,n,i):this.getAdaptGridColWidth(n,a)},r.prototype.getColNodeHeight=function(e){var n=this.cfg.colCfg,i=Me(n,["heightByField",e.key]);return i!=null?i:n==null?void 0:n.height},r.prototype.getExpectedCellIconWidth=function(e,n,i){var a,o=0;if(n)o=1;else{var s=x_(nt(this.spreadsheet.options.headerActionIcons,function(c){return k(k({},c),{displayCondition:function(){return!0}})}),null,e);o=(a=s==null?void 0:s.iconNames.length)!==null&&a!==void 0?a:0}return o?o*(i.size+i.margin.left)+i.margin.right:0},r.prototype.calculateRowNodesCoordinate=function(e,n,i){var a,o,s,c,d,h,v,g,C,w,S=this.cfg,_=S.cellCfg,T=S.spreadsheet,M=T.isHierarchyTreeType(),D=Me(T,"options.style.rowCfg.heightByField",{}),B=(s=n.sampleNodesForAllLevels)!==null&&s!==void 0?s:[];if(M)n.width=this.getTreeRowHeaderWidth();else try{for(var G=mr(n.sampleNodesForAllLevels),V=G.next();!V.done;V=G.next()){var q=V.value;q.width=this.calculateGridRowNodesWidth(q,i),n.width+=q.width;var J=(c=B[q.level-1])!==null&&c!==void 0?c:{x:0,width:0};q.x=(J==null?void 0:J.x)+(J==null?void 0:J.width)}}catch(le){a={error:le}}finally{try{V&&!V.done&&(o=G.return)&&o.call(G)}finally{if(a)throw a.error}}for(var te=Hr.blankNode(),se=n.getNodes(),ue=0;ue<se.length;ue++){var ce=se[ue],me=M||!M&&ce.isLeaf;if(me&&((d=ce.rowIndex)!==null&&d!==void 0||(ce.rowIndex=ue),(h=ce.colIndex)!==null&&h!==void 0||(ce.colIndex=ue),ce.y=te.y+te.height,ce.height=((v=D==null?void 0:D[ce.id])!==null&&v!==void 0?v:_==null?void 0:_.height)+((g=this.rowCellTheme.padding)===null||g===void 0?void 0:g.top)+((C=this.rowCellTheme.padding)===null||C===void 0?void 0:C.bottom),te=ce,n.height+=ce.height),M||ce.level===0)ce.x=0;else{var J=B[ce.level-1];ce.x=(J==null?void 0:J.x)+(J==null?void 0:J.width)}if(M)ce.width=this.getTreeRowHeaderWidth();else{var Te=B[ce.level];ce.width=Te==null?void 0:Te.width}o_(this.cfg,ce,null)}M||(this.autoCalculateRowNodeHeightAndY(e),ve((w=T.options.totals)===null||w===void 0?void 0:w.row)||(this.adjustTotalNodesCoordinate({hierarchy:n,isRowHeader:!0,isSubTotal:!1}),this.adjustTotalNodesCoordinate({hierarchy:n,isRowHeader:!0,isSubTotal:!0})))},r.prototype.autoCalculateRowNodeHeightAndY=function(e){for(var n=null,i=0,a=e.slice(0);i<a.length;){var o=a[i++],s=o.parent;n!==s&&s&&(a.push(s),s.y=s.children[0].y,s.height=s.children.reduce(function(c,d){return c+d.height},0),n=s)}},r.prototype.getMultipleMap=function(e,n,i){for(var a=e.maxLevel,o=this.cfg,s=o.totals,c=o.dataSet,d=c.moreThanOneValue(),h=c.fields,v=h.rows,g=h.columns,C=n?v:g,w=n?s.row:s.col,S=i?w.subTotalsGroupDimensions||[]:w.totalsGroupDimensions||[],_=Array.from({length:a+1},function(){return 1}),T=a;T>0;T--){var M=C[T],D=M===Ye&&d;S.includes(M)||D||(_[T-1]+=_[T],_[T]=0)}return _},r.prototype.adjustTotalNodesCoordinate=function(e){var n=e.hierarchy,i=e.isRowHeader,a=e.isSubTotal,o=this.getMultipleMap(n,i,a),s=Wa(n.getNodes(),function(d){return a?d.isSubTotals:d.isGrandTotals}),c=i?"width":"height";Ae(s,function(d){var h=o[d.level];if(!h&&a)for(var v=1;h<1;)h=o[d.level-v]-v,v++;for(var g=0,C=function(S){g+=n.sampleNodesForAllLevels.find(function(_){return _.level===d.level+S})[c]},w=0;w<h;w++)C(w);d[c]=g})},r.prototype.calculateGridRowNodesWidth=function(e,n){var i=this.cfg,a=i.rowCfg,o=i.spreadsheet,s=Me(a,["widthByField",e.key]);if(_n(s))return s;var c=this.getCellCustomWidth(e,a==null?void 0:a.width);return _n(c)?c:o.getLayoutWidthType()!==pi.Adaptive?this.getCompactGridRowWidth(e):this.getAdaptGridColWidth(n)},r.prototype.getAdaptTreeColWidth=function(e,n,i){var a=this.getCanvasHW().width,o=a-this.getSeriesNumberWidth(),s=Math.min(o/2,this.getTreeRowHeaderWidth()),c=Math.max(1,n.length),d=this.cfg.cellCfg;return Math.max(d_(d,this.getColLabelLength(e,i)),(o-s)/c)},r.prototype.getColLabelLength=function(e,n){var i,a=f_(e==null?void 0:e.value);if(_e(a))return a.length;for(var o=1,s=0;s<Td;s++){var c=n[s];if(!c)return o;for(var d=this.cfg.dataSet.getCellData({query:k(k({},e.query),c.query),rowNode:c,isTotals:e.isTotals||e.isTotalMeasure||c.isTotals||c.isTotalMeasure,totalStatus:ph(c,e)}),h=bt(d==null?void 0:d[xd]),v=0;v<h.length;v++){var g=d[h[v]],C=Ql((i=g==null?void 0:g.values)===null||i===void 0?void 0:i[0]);C>o&&(o=C)}}return o},r.prototype.getAdaptGridColWidth=function(e,n){var i=this.cfg,a=i.rows,o=i.cellCfg,s=a.length,c=e.length,d=this.getCanvasHW().width,h=d-this.getSeriesNumberWidth(),v=Math.max(1,s+c);return n?Math.max(d_(o),(h-n)/c):Math.max(d_(o),h/v)},r.prototype.getTreeRowHeaderWidth=function(){var e,n,i,a,o=this.cfg,s=o.rows,c=o.dataSet,d=o.rowCfg,h=o.treeRowsWidth,v=h!=null?h:d==null?void 0:d.treeRowsWidth;if(v)return v;var g=this.getCellCustomWidth(null,d==null?void 0:d.width);if(g)return g;var C=s.map(function(M){return c.getFieldName(M)}).join("/"),w=this.spreadsheet.theme.cornerCell,S=w.bolderText,_=w.icon,T=1+this.spreadsheet.measureTextWidth(C,S)+_.size*2+((e=_.margin)===null||e===void 0?void 0:e.left)+((n=_.margin)===null||n===void 0?void 0:n.right)+((i=this.rowCellTheme.padding)===null||i===void 0?void 0:i.left)+((a=this.rowCellTheme.padding)===null||a===void 0?void 0:a.right);return Math.max(v!=null?v:Dd,T)},r.prototype.getCompactGridRowWidth=function(e){var n=this,i,a=this.cfg,o=a.dataSet,s=a.spreadsheet,c=s.theme.rowCell,d=c.bolderText,h=c.icon,v=c.cell,g=s.theme.cornerCell,C=g.bolderText,w=g.icon,S=g.cell,_=e.field,T=e.isLeaf,M=this.getExpectedCellIconWidth(de.ROW_CELL,!s.isValueInCols()&&T&&s.options.showDefaultHeaderActionIcon,h),D=(i=o.getDimensionValues(_))===null||i===void 0?void 0:i.slice(0,Td).map(function(te){var se,ue;return(ue=(se=n.spreadsheet.dataSet.getFieldFormatter(_))===null||se===void 0?void 0:se(te))!==null&&ue!==void 0?ue:te}),B=SE(D,function(te){return"".concat(te).length}),G=s.measureTextWidth(B,d)+M+v.padding.left+v.padding.right,V=o.getFieldName(_),q=this.getExpectedCellIconWidth(de.CORNER_CELL,!1,w),J=s.measureTextWidth(V,C)+q+S.padding.left+S.padding.right;return aa.getInstance().logger("Max Label In Row:",_,G>J?B:V),Math.max(G,J)},r.prototype.getViewCellHeights=function(e){var n=e.rowLeafNodes,i=nh(n,function(a,o){return a.push(Fe(a)+o.height),a},[0]);return{getTotalHeight:function(){return Fe(i)},getCellOffsetY:function(a){return i[a]},getTotalLength:function(){return i.length-1},getIndexRange:function(a,o){return fA(i,a,o)}}},r.prototype.getRowHeader=function(){if(!this.rowHeader){var e=this.getRowHeaderCfg(),n=e.viewportHeight,i=ru(e,["viewportHeight"]),a=ic(this.cfg,this.layoutResult.rowNodes).frozenRowHeight;return new zB(k(k({},i),{viewportHeight:n-a}))}},r.prototype.enableFrozenFirstRow=function(){return!!this.getBizRevisedFrozenOptions().frozenRowCount},r}(wA),XB=function(t){Le(r,t);function r(e){var n=this,i;n=t.call(this,e)||this,n.getScrollGroupClipBBox=function(){var c,d=n.headerConfig,h=d.width,v=d.height,g=d.scrollX,C=d.spreadsheet,w=C.options;if(!w.frozenColCount&&!w.frozenTrailingColCount)return{x:g,y:0,width:h,height:v};for(var S=(c=C.facet)===null||c===void 0?void 0:c.layoutResult.colLeafNodes,_=Uo(C.options,S.length),T=_.frozenColCount,M=_.frozenTrailingColCount,D=0,B=0,G=0;G<T;G++)D+=S[G].width;for(var G=0;G<M;G++)B+=S[S.length-1-G].width;var V=h-D-B;return{x:g+D,y:0,width:V,height:v}};var a=(i=n.headerConfig.spreadsheet)===null||i===void 0?void 0:i.options,o=a.frozenColCount,s=a.frozenTrailingColCount;return o&&(n.frozenColGroup=n.addGroup({name:yw,zIndex:vo})),s&&(n.frozenTrailingColGroup=n.addGroup({name:Cw,zIndex:vo})),n}return r.prototype.isFrozenCell=function(e){var n=this.headerConfig.spreadsheet,i=n==null?void 0:n.options,a=i.frozenColCount,o=i.frozenTrailingColCount,s=e.colIndex,c=n==null?void 0:n.facet.layoutResult.colLeafNodes;return Jl(s,a)||es(s,o,c.length)},r.prototype.clear=function(){var e,n,i=this.headerConfig.spreadsheet;t.prototype.clear.call(this),(e=this.frozenTrailingColGroup)===null||e===void 0||e.clear(),(n=this.frozenColGroup)===null||n===void 0||n.clear();var a=i==null?void 0:i.foregroundGroup.findById(Fp);a==null||a.clear()},r.prototype.getCellInstance=function(e,n,i){return e.field===Hi?new V7(e,n,i):new MR(e,n,i)},r.prototype.getCellGroup=function(e){var n,i,a=this.headerConfig.spreadsheet,o=a==null?void 0:a.options,s=o.frozenColCount,c=o.frozenTrailingColCount,d=(n=a==null?void 0:a.facet)===null||n===void 0?void 0:n.layoutResult.colNodes.filter(function(C){return _i(C)}),h=dh(d,s,c),v=h.colCount,g=h.trailingColCount;return Jl(fh(e).colIndex,v)?this.frozenColGroup:es(fh(e).colIndex,g,(i=a==null?void 0:a.facet)===null||i===void 0?void 0:i.layoutResult.colLeafNodes.length)?this.frozenTrailingColGroup:this.scrollGroup},r.prototype.isColCellInRect=function(e){var n,i,a=this.headerConfig.spreadsheet,o=a==null?void 0:a.options,s=o.frozenColCount,c=o.frozenTrailingColCount,d=(n=a==null?void 0:a.facet)===null||n===void 0?void 0:n.layoutResult.colLeafNodes.length,h=(i=a==null?void 0:a.facet)===null||i===void 0?void 0:i.layoutResult.colNodes.filter(function(w){return _i(w)}),v=dh(h,s,c),g=v.colCount,C=v.trailingColCount;return Jl(fh(e).colIndex,g)||es(fh(e).colIndex,C,d)?!0:t.prototype.isColCellInRect.call(this,e)},r.prototype.clip=function(){this.scrollGroup.setClip({type:"rect",attrs:this.getScrollGroupClipBBox()})},r}($_),jB=function(t){Le(r,t);function r(e){var n=t.call(this,e)||this;n.onSortHandler=function(a){var o=n.spreadsheet,s=a;Array.isArray(a)||(s=[a]);var c=o.dataCfg.sortParams||[];s=s.map(function(h){var v,g,C=k(k({},h),{sortFieldId:(v=h.sortKey)!==null&&v!==void 0?v:h.sortFieldId}),w=(g=c.find(function(S){return S.sortFieldId===C.sortFieldId}))!==null&&g!==void 0?g:{};return k(k({},w),C)});var d=c.filter(function(h){var v=s.find(function(g){return g.sortFieldId===h.sortFieldId});return!v});ih(o.dataCfg,"sortParams",re(re([],Q(d),!1),Q(s),!1)),o.setDataCfg(o.dataCfg),o.render(!0),o.emit(K.RANGE_SORTED,o.dataSet.getDisplayDataSet())},n.onFilterHandler=function(a){var o=n.spreadsheet,s=!a.filteredValues||a.filteredValues.length===0,c=o.dataCfg.filterParams||[],d=c.findIndex(function(h){return h.filterKey===a.filterKey});d!==-1?s?c.splice(d,1):c[d]=a:c.push(a),ih(o.dataCfg,"filterParams",c),o.render(!0),o.emit(K.RANGE_FILTERED,o.dataSet.getDisplayDataSet())},n.renderFrozenPanelCornerGroup=function(){var a=n.layoutResult.colNodes.filter(function(_){return _i(_)}),o=n.getCellRange(),s=Uo(n.spreadsheet.options,a.length,o.end-o.start+1),c=s.frozenRowCount,d=s.frozenColCount,h=s.frozenTrailingRowCount,v=s.frozenTrailingColCount,g=dh(a,d,v),C=g.colCount,w=g.trailingColCount,S=H5({frozenRowCount:c,frozenColCount:C,frozenTrailingRowCount:h,frozenTrailingColCount:w},n.layoutResult.colLeafNodes.length,o);Object.keys(S).forEach(function(_){var T=S[_],M=n.spreadsheet[kp[_]];M&&T.forEach(function(D){n.addFrozenCell(D.x,D.y,M)})})},n.addFrozenCell=function(a,o,s){var c=n.layoutResult.getCellMeta(o,a);if(c.isFrozenCorner=!0,c){var d=n.cfg.dataCell(c);s.add(d)}};var i=n.spreadsheet;return i.on(K.RANGE_SORT,n.onSortHandler),i.on(K.RANGE_FILTER,n.onFilterHandler),n}return r.prototype.updateRowResizeArea=function(){var e=this.spreadsheet,n=e.foregroundGroup,i=e.options,a=Me(i,"interaction.resize"),o=na(a)?a:a==null?void 0:a.rowCellVertical;if(o){var s=n.findById(po),c=n.findById(Ed);s&&s.set("children",[]),c&&c.set("children",[]);var d=Eh(this.panelGroup.getChildren(),y1).filter(function(h){return h.shouldDrawResizeArea()});d==null||d.forEach(function(h){h.drawResizeArea()})}},r.prototype.clip=function(e,n){t.prototype.clip.call(this,e,n),this.clipResizeAreaGroup()},r.prototype.clipResizeAreaGroup=function(){var e,n,i=this.spreadsheet.foregroundGroup.findById(po);if(i){var a=this.layoutResult.colLeafNodes,o=this.spreadsheet,s=o.frozenRowGroup,c=o.frozenTrailingRowGroup,d=0,h=0;s&&(d=s.getBBox().height),c&&(h=c.getBBox().height);var v=this.panelBBox.height-d-h;i.setClip({type:"rect",attrs:{x:0,y:d+this.cornerBBox.height,width:(n=(e=a==null?void 0:a[0])===null||e===void 0?void 0:e.width)!==null&&n!==void 0?n:0,height:v}})}},r.prototype.getContentHeight=function(){var e=this.getViewCellHeights().getTotalHeight,n=this.layoutResult.colsHierarchy;return e()+n.height},Object.defineProperty(r.prototype,"dataCellTheme",{get:function(){return this.spreadsheet.theme.dataCell.cell},enumerable:!1,configurable:!0}),r.prototype.destroy=function(){var e=this.spreadsheet;e.off(K.RANGE_SORT,this.onSortHandler),e.off(K.RANGE_FILTER,this.onFilterHandler),t.prototype.destroy.call(this)},r.prototype.calculateCornerBBox=function(){var e=this.layoutResult.colsHierarchy,n=Math.floor(e.height);this.cornerBBox=new mA(this),this.cornerBBox.height=n,this.cornerBBox.maxY=n},r.prototype.doLayout=function(){var e=this,n=this.cfg,i=n.dataSet,a=n.spreadsheet,o=new IL,s=k_({isRowHeader:!1,facetCfg:this.cfg}),c=s.leafNodes,d=s.hierarchy;this.calculateColNodesCoordinate(c,d);var h=function(g,C){var w,S=e.cfg.showSeriesNumber,_=c[C],T=e.getCellHeight(g),M=e.getCellRange(),D=Uo(e.cfg,c.length,M.end-M.start+1).frozenTrailingRowCount,B,G=_.x,V=e.viewCellHeights.getCellOffsetY(g);return ch(g,M.end,D)&&(V=e.panelBBox.maxY-e.getTotalHeightForRange(g,M.end)),S&&_.field===Hi?B="".concat(g+1):B=i.getCellData({query:{field:_.field,rowIndex:g}}),{spreadsheet:a,x:G,y:V,width:_.width,height:T,data:(w={},w[_.field]=B,w),rowIndex:g,colIndex:C,isTotals:!1,colId:_.id,rowId:String(g),valueField:_.field,fieldValue:B,id:m1(String(g),_.id)}},v={colNodes:d.getNodes(),colsHierarchy:d,rowNodes:o.getNodes(),rowsHierarchy:o,rowLeafNodes:o.getLeaves(),colLeafNodes:c,getCellMeta:h,spreadsheet:a};return v},r.prototype.getAdaptiveColWidth=function(e){var n=this.cfg.cellCfg,i=this.cfg.showSeriesNumber;if(this.spreadsheet.getLayoutWidthType()!==pi.Compact){var a=this.getSeriesNumberWidth(),o=e.length-(i?1:0),s=this.getCanvasHW().width-a;return Math.max(n==null?void 0:n.width,s/Math.max(1,o))}return n==null?void 0:n.width},r.prototype.getColNodeHeight=function(e,n){var i=this.cfg.colCfg,a=ka(i==null?void 0:i.heightByField)[0],o=a||(i==null?void 0:i.height);if(!n||e.children&&e.children.length)return o;for(;e.parent;)n-=_i(e)?0:o,e=e.parent;return n},r.prototype.calculateColNodesCoordinate=function(e,n){var i,a,o,s,c,d,h=Hr.blankNode(),v=n.getNodes();try{for(var g=mr(n.sampleNodesForAllLevels),C=g.next();!C.done;C=g.next()){var w=C.value;w.height=this.getColNodeHeight(w),n.height+=w.height}}catch(J){i={error:J}}finally{try{C&&!C.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var S=this.getAdaptiveColWidth(e),_=0,T=0;T<v.length;T++){var M=v[T];M.isLeaf&&(M.colIndex=_,_+=1,M.x=h.x+h.width,M.width=this.calculateColLeafNodesWidth(M,S),o_(this.cfg,null,M),n.width+=M.width,h=M),M.level===0?M.y=0:M.y=(c=((o=M.parent)===null||o===void 0?void 0:o.y)+((s=M.parent)===null||s===void 0?void 0:s.height))!==null&&c!==void 0?c:0,M.height=this.getColNodeHeight(M,n.height)}var D=v.filter(function(J){return _i(J)}),B=Uo((d=this.spreadsheet)===null||d===void 0?void 0:d.options,D.length).frozenTrailingColCount;h=Hr.blankNode();var G=this.getCanvasHW().width;if(B>0)for(var V=dh(D,0,B).trailingColCount,q=v.filter(function(J){return J.isLeaf}),T=1;T<=V;T++){var M=q[q.length-T];T===1?M.x=G-M.width:M.x=h.x-M.width,h=M}this.autoCalculateColNodeWidthAndX(e)},r.prototype.autoCalculateColNodeWidthAndX=function(e){for(var n=null,i=e.slice(0);i.length;){var a=i.shift(),o=a.parent;n!==o&&o&&(i.push(o),o.x=o.children[0].x,o.width=o.children.map(function(s){return s.width}).reduce(function(s,c){return s+c},0),n=o)}},r.prototype.calculateColLeafNodesWidth=function(e,n){var i=this.cfg,a=i.colCfg,o=i.dataSet,s=i.spreadsheet,c=this.spreadsheet.getLayoutWidthType(),d=this.getCellDraggedWidth(e);if(_n(d))return d;var h=this.getCellCustomWidth(e,a==null?void 0:a.width);if(_n(h))return h;var v;if(c===pi.Compact){var g=o.getDisplayDataSet(),C=o.getFieldFormatter(e.field),w=SE(g==null?void 0:g.slice(0,50).map(function(V){var q;return"".concat((q=C==null?void 0:C(V[e.field]))!==null&&q!==void 0?q:V[e.field])}),function(V){return s.measureTextWidthRoughly(V)});aa.getInstance().logger("Max Label In Col:",e.field,w);var S=s.theme.colCell.bolderText,_=s.theme.dataCell,T=_.text,M=_.cell,D=1,B=s.measureTextWidth(w,T)+M.padding.left+M.padding.right+D,G=s.measureTextWidth(e.label,S)+Y7(this.spreadsheet,e,s.theme.colCell);v=Math.max(G,B)}else v=n;return e.field===Hi&&(v=this.getSeriesNumberWidth()),v},r.prototype.getCellHeight=function(e){if(this.rowOffsets){var n=Me(this.spreadsheet,"options.style.rowCfg.heightByField",{}),i=n==null?void 0:n[String(e)];if(_n(i))return i}return this.getDefaultCellHeight()},r.prototype.getViewCellHeights=function(){var e=this,n=this.cfg.dataSet,i=this.getDefaultCellHeight();return{getTotalHeight:function(){return e.rowOffsets?Fe(e.rowOffsets):i*n.getDisplayDataSet().length},getCellOffsetY:function(a){if(a<=0)return 0;if(e.rowOffsets)return e.rowOffsets[a];for(var o=0,s=0;s<a;s++)o+=i;return o},getTotalLength:function(){return n.getDisplayDataSet().length},getIndexRange:function(a,o){if(e.rowOffsets)return fA(e.rowOffsets,a,o);var s=Math.floor(a/i),c=o%i===0?o/i-1:Math.floor(o/i);return{start:Math.max(0,s),end:Math.max(0,c)}}}},r.prototype.init=function(){t.prototype.init.call(this);var e=this.panelBBox,n=e.width,i=e.height;this.spreadsheet.panelGroup.setClip({type:"rect",attrs:{x:0,y:this.cornerBBox.height,width:n,height:i}})},r.prototype.getColHeader=function(){if(!this.columnHeader){var e=this.panelBBox,n=e.x,i=e.width,a=e.viewportHeight,o=e.viewportWidth;return new XB({width:i,height:this.cornerBBox.height,viewportWidth:o,viewportHeight:a,cornerWidth:this.cornerBBox.width,position:{x:n,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},r.prototype.render=function(){this.renderFrozenPanelCornerGroup(),t.prototype.render.call(this)},r.prototype.getRowHeader=function(){return null},r.prototype.getSeriesNumberHeader=function(){return null},r}(wA),EA=function(t){Le(r,t);function r(e){var n=t.call(this,e)||this;return n.gridInfo={cols:[],rows:[]},n.updateGrid=function(i,a){a===void 0&&(a=vl);var o=n.getBBox(),s=n.s2,c=s.theme,d=s.isTableMode,h=c.dataCell.cell,v=d()&&(a===vl||a===Dp);(!n.gridGroup||!n.findById(a))&&(n.gridGroup=n.addGroup({id:a})),n.gridGroup.clear(),n.gridInfo=i,v&&n.gridInfo.cols.unshift(0);var g=h.verticalBorderWidth,C=h.verticalBorderWidth/2;n.gridInfo.cols.forEach(function(_){zr(n.gridGroup,{x1:_,x2:_,y1:Math.ceil(o.minY+C),y2:Math.floor(o.maxY-C)},{stroke:h.verticalBorderColor,strokeOpacity:h.verticalBorderColorOpacity,lineWidth:g,lineCap:$i,lineDash:h.borderDash})});var w=h.horizontalBorderWidth,S=h.horizontalBorderWidth/2;n.gridInfo.rows.forEach(function(_){zr(n.gridGroup,{x1:Math.ceil(o.minX+S),x2:Math.floor(o.maxX-S),y1:_,y2:_},{stroke:h.horizontalBorderColor,strokeOpacity:h.horizontalBorderColorOpacity,lineWidth:w,lineCap:$i,lineDash:h.borderDash})}),n.gridGroup.toFront()},n.s2=e.s2,n}return r}(qn),_A=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(EA),qB=function(t){Le(r,t);function r(e){var n=t.call(this,e)||this;return n.initMergedCellsGroup(),n}return r.prototype.initMergedCellsGroup=function(){this.mergedCellsGroup&&this.findById(Sd)||(this.mergedCellsGroup=this.addGroup({id:Sd}))},r.prototype.updateMergedCells=function(){this.initMergedCellsGroup(),A7(this.s2,this.mergedCellsGroup),this.mergedCellsGroup.toFront()},r.prototype.addMergeCell=function(e){var n;(n=this.mergedCellsGroup)===null||n===void 0||n.add(e)},r.prototype.update=function(e){this.updateGrid(e),this.updateMergedCells()},r}(EA),Ii=function(){function t(r){var e=this;this.isLinkFieldText=function(n){var i=e.getCellAppendInfo(n);return i==null?void 0:i.isLinkFieldText},this.spreadsheet=r,this.bindEvents()}return t.prototype.getCellAppendInfo=function(r){var e,n;return((e=r==null?void 0:r.attr)===null||e===void 0?void 0:e.call(r,"appendInfo"))||((n=r==null?void 0:r.attrs)===null||n===void 0?void 0:n.appendInfo)||{}},t.prototype.reset=function(){},t}(),KB=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.bindEvents=function(){this.bindDataCellClick()},r.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(K.DATA_CELL_CLICK,function(n){var i;n.stopPropagation();var a=e.spreadsheet.interaction;if(a.clearHoverTimer(),!a.hasIntercepts([Ge.CLICK])){if(e.isLinkFieldText(n.target)){e.emitLinkFieldClickEvent(n);return}var o=e.spreadsheet.getCell(n.target),s=o.getMeta();if(s){if(a.addIntercepts([Ge.HOVER]),a.isSelectedCell(o)){((i=n.originalEvent)===null||i===void 0?void 0:i.detail)===1&&(a.reset(),e.spreadsheet.emit(K.GLOBAL_SELECTED,a.getActiveCells()));return}a.changeState({cells:[Ti(o)],stateName:Se.SELECTED,onUpdateCells:__}),e.spreadsheet.emit(K.GLOBAL_SELECTED,[o]),e.showTooltip(n,s);var c=s.rowId,d=s.colId,h=s.spreadsheet,v=a.getSelectedCellHighlight(),g=v.colHeader,C=v.rowHeader;if(g&&gR(d,a.getAllColHeaderCells(),Se.SELECTED),C&&c){var w=c9(s,h);Ae(w,function(S){S.updateByState(Se.SELECTED)})}}}})},r.prototype.getTooltipOperator=function(e,n){var i=this,a=r5(),o=this.spreadsheet.getCell(e.target),s=O1(this.spreadsheet,e).operation,c=s.trend&&k(k({},a),{onClick:function(){i.spreadsheet.emit(K.DATA_CELL_TREND_ICON_CLICK,k(k({},n),{record:i.spreadsheet.isTableMode()?i.spreadsheet.dataSet.getCellData({query:{rowIndex:n.rowIndex}}):void 0})),i.spreadsheet.hideTooltip()}});return uA(s,{defaultMenus:[c],cell:o})},r.prototype.showTooltip=function(e,n){var i=n.data,a=n.isTotals,o=a===void 0?!1:a,s=n.value,c=n.fieldValue,d=n.field,h=n.valueField,v=i,g=this.spreadsheet.isTableMode(),C=g?k(k({},v),{value:s||c,valueField:d||h}):v,w=[C||k(k({},n.rowQuery),n.colQuery)],S=this.getTooltipOperator(e,n);this.spreadsheet.showTooltipWithInfo(e,w,{isTotals:o,operator:S,enterable:!0,hideSummary:!0,showSingleTips:g})},r.prototype.emitLinkFieldClickEvent=function(e){var n=this.getCellAppendInfo(e.target).cellData,i=n.valueField,a=n.data;this.spreadsheet.emit(K.GLOBAL_LINK_FIELD_JUMP,{key:i,cellData:n,record:Object.assign({rowIndex:n.rowIndex},a)})},r}(Ii),ZB=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.bindEvents=function(){this.bindDataCellClick()},r.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(K.MERGED_CELLS_CLICK,function(n){n.stopPropagation();var i=e.spreadsheet.interaction;i.hasIntercepts([Ge.CLICK])||i.addIntercepts([Ge.HOVER])})},r}(Ii),QB=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.isMultiSelection=!1,e.handleRowColClick=function(n){if(n.stopPropagation(),!e.isLinkFieldText(n.target)){var i=e.spreadsheet,a=i.interaction,o=i.options,s=e.spreadsheet.getCell(n.target),c=o.interaction.multiSelection,d=!!(c&&e.isMultiSelection),h=a.selectHeaderCell({cell:s,isMultiSelection:d});h&&e.showTooltip(n)}},e.getHideColumnField=function(n){return e.spreadsheet.isTableMode()?n.field:n.id},e}return r.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindKeyboardUp(),this.bindColCellClick(),this.bindRowCellClick(),this.bindTableColExpand(),this.bindMouseMove()},r.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Ge.CLICK])},r.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(K.GLOBAL_KEYBOARD_DOWN,function(n){w1(n)&&(e.isMultiSelection=!0)})},r.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(K.GLOBAL_KEYBOARD_UP,function(n){w1(n)&&e.reset()})},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(K.GLOBAL_MOUSE_MOVE,function(n){e.isMultiSelection&&!GR(n)&&e.reset()})},r.prototype.bindRowCellClick=function(){var e=this;this.spreadsheet.on(K.ROW_CELL_CLICK,function(n){e.handleRowColClick(n)})},r.prototype.bindColCellClick=function(){var e=this;this.spreadsheet.on(K.COL_CELL_CLICK,function(n){e.handleRowColClick(n)})},r.prototype.showTooltip=function(e){var n=O1(this.spreadsheet,e),i=n.operation,a=n.showTooltip;if(a){var o=this.spreadsheet.interaction,s=o.isSelectedState()?EB(o.getActiveCells()):[],c=this.getTooltipOperator(e,i);this.spreadsheet.showTooltipWithInfo(e,s,{showSingleTips:!0,operator:c})}},r.prototype.getTooltipOperator=function(e,n){var i=this,a=this.spreadsheet.getCell(e.target),o=a.getMeta(),s=a.cellType===de.COL_CELL,c=this.spreadsheet.getColumnLeafNodes().length===1,d=t5(),h=s&&!c&&o.isLeaf&&n.hiddenColumns,v=h&&k(k({},d),{onClick:function(){i.hideSelectedColumns()}});return uA(n,{defaultMenus:[v],cell:a})},r.prototype.bindTableColExpand=function(){var e=this;this.spreadsheet.on(K.LAYOUT_COLS_EXPANDED,function(n){e.handleExpandIconClick(n)})},r.prototype.hideSelectedColumns=function(){var e=this.spreadsheet.interaction,n=e.getActiveCells().map(function(a){return a.getMeta()}),i=n.map(this.getHideColumnField);y_(this.spreadsheet,i,!0)},r.prototype.handleExpandIconClick=function(e){var n=this.spreadsheet.store.get("hiddenColumnsDetail",[]),i=(jm(n,function(h){var v=h.displaySiblingNode;return C_(v,e.id)})||{}).hideColumnNodes,a=i===void 0?[]:i,o=this.spreadsheet.options.interaction.hiddenColumnFields,s=a.map(this.getHideColumnField),c=Ke(o,s),d=n.filter(function(h){var v=h.displaySiblingNode;return!C_(v,e.id)});this.spreadsheet.setOptions({interaction:{hiddenColumnFields:c}}),this.spreadsheet.store.set("hiddenColumnsDetail",d),this.spreadsheet.interaction.reset(),this.spreadsheet.render(!1)},r}(Ii),JB=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.getRowData=function(n){var i,a=n.getHeadLeafChild(),o=e.spreadsheet.dataSet.getMultiData(a==null?void 0:a.query)[0];return k(k({},o),{rowIndex:(i=n.rowIndex)!==null&&i!==void 0?i:a.rowIndex})},e}return r.prototype.bindEvents=function(){this.bindRowCellClick()},r.prototype.bindRowCellClick=function(){var e=this;this.spreadsheet.on(K.ROW_CELL_CLICK,function(n){if(!e.spreadsheet.interaction.hasIntercepts([Ge.CLICK])&&e.isLinkFieldText(n.target)){var i=e.getCellAppendInfo(n.target).cellData,a=i.key,o=e.getRowData(i);e.spreadsheet.emit(K.GLOBAL_LINK_FIELD_JUMP,{key:a,cellData:i,record:o})}})},r}(Ii),eP=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.bindEvents=function(){this.bindCornerCellClick()},r.prototype.bindCornerCellClick=function(){var e=this;this.spreadsheet.on(K.CORNER_CELL_CLICK,function(n){var i,a=e.spreadsheet.interaction,o=e.spreadsheet.getCell(n.target);if(o){var s=o.getMeta(),c=e.getRowNodesByField(s==null?void 0:s.field),d=(i=c[0])===null||i===void 0?void 0:i.belongsCell,h=e.getRowCells(c);if(d&&a.isSelectedCell(d)){a.reset(),e.spreadsheet.emit(K.GLOBAL_SELECTED,a.getActiveCells());return}ve(c)||ve(h)||(a.addIntercepts([Ge.HOVER]),a.changeState({cells:h,stateName:Se.SELECTED}),a.highlightNodes(c),e.showTooltip(n),e.spreadsheet.emit(K.GLOBAL_SELECTED,a.getActiveCells()))}})},r.prototype.getRowNodesByField=function(e){return this.spreadsheet.getRowNodes().filter(function(n){return n.field===e})},r.prototype.getRowCells=function(e){return e.map(function(n){return{id:n.id,colIndex:-1,rowIndex:-1,type:de.ROW_CELL}})},r.prototype.showTooltip=function(e){var n=this.spreadsheet.interaction.getActiveCells();this.spreadsheet.showTooltipWithInfo(e,[],{data:{summaries:[{selectedData:n,name:"",value:null}]}})},r}(Ii),tP=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.bindEvents=function(){this.bindCornerCellHover(),this.bindDataCellHover(),this.bindRowCellHover(),this.bindColCellHover()},r.prototype.updateRowColCells=function(e){var n=e.rowId,i=e.colId,a=this.spreadsheet.interaction,o=a.getHoverHighlight(),s=o.rowHeader,c=o.colHeader;if(c&&gR(i,a.getAllColHeaderCells(),Se.HOVER),s&&n){var d=p_(n,a.getAllRowHeaderCells(),this.spreadsheet.isHierarchyTreeType());Ae(d,function(h){h.updateByState(Se.HOVER)})}},r.prototype.changeStateToHoverFocus=function(e,n,i){var a=this,o,s=this.spreadsheet.interaction,c=this.spreadsheet.options.interaction,d=c.hoverFocus;s.clearHoverTimer();var h=function(){if(!s.hasIntercepts([Ge.HOVER])){s.changeState({cells:[Ti(e)],stateName:Se.HOVER_FOCUS});var C=a.spreadsheet.isTableMode(),w={isTotals:i.isTotals,enterable:!0,hideSummary:!0,showSingleTips:C},S=s.getHoverHighlight(),_=S.rowHeader,T=S.colHeader;(_||T)&&a.updateRowColCells(i);var M=a.getCellData(i,C);a.spreadsheet.showTooltipWithInfo(n,M,w)}},v=Od;if(na(d)||(v=(o=d==null?void 0:d.duration)!==null&&o!==void 0?o:Od),v===0)h();else{var g=window.setTimeout(function(){return h()},v);s.setHoverTimer(g)}},r.prototype.handleHeaderHover=function(e){var n=this.spreadsheet.getCell(e.target);if(!ve(n)){var i=this.spreadsheet.interaction;i.clearHoverTimer(),!i.isActiveCell(n)&&(i.changeState({cells:[Ti(n)],stateName:Se.HOVER}),n.update(),this.showEllipsisTooltip(e,n))}},r.prototype.showEllipsisTooltip=function(e,n){if(!n||!n.isTextOverflowing()){this.spreadsheet.hideTooltip();return}var i=n.getMeta(),a=!0,o={isTotals:i.isTotals,enterable:!0,hideSummary:!0,showSingleTips:a,enableFormat:!0},s=this.getCellData(i,a);this.spreadsheet.showTooltipWithInfo(e,s,o)},r.prototype.getCellData=function(e,n){e===void 0&&(e={});var i=e.data,a=e.query,o=e.value,s=e.field,c=e.fieldValue,d=e.valueField,h=e.rowQuery,v=e.colQuery,g=i,C=n?[k(k({},a),{value:o||c,valueField:s||d})]:[g||k(k({},h),v)];return C},r.prototype.bindDataCellHover=function(){var e=this;this.spreadsheet.on(K.DATA_CELL_HOVER,function(n){var i=e.spreadsheet.getCell(n.target);if(!ve(i)){var a=e.spreadsheet,o=a.interaction,s=a.options,c=s.interaction,d=i==null?void 0:i.getMeta();if(!o.isActiveCell(i)){o.changeState({cells:[Ti(i)],stateName:Se.HOVER});var h=o.getHoverHighlight(),v=h.rowHeader,g=h.colHeader;(v||g)&&e.updateRowColCells(d),c.hoverFocus&&e.changeStateToHoverFocus(i,n,d)}}})},r.prototype.bindRowCellHover=function(){var e=this;this.spreadsheet.on(K.ROW_CELL_HOVER,function(n){e.handleHeaderHover(n)})},r.prototype.bindColCellHover=function(){var e=this;this.spreadsheet.on(K.COL_CELL_HOVER,function(n){e.handleHeaderHover(n)})},r.prototype.bindCornerCellHover=function(){var e=this;this.spreadsheet.on(K.CORNER_CELL_HOVER,function(n){e.handleHeaderHover(n)})},r}(Ii),U_=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.brushSelectionStage=pr.UN_DRAGGED,e.brushSelectionMinimumMoveDistance=5,e.scrollAnimationComplete=!0,e.mouseMoveDistanceFromCanvas=0,e.setMoveDistanceFromCanvas=function(n,i,a){var o=0;if(i&&(o=n.x),a){var s=n.y;i?o=Math.max(s,o):o=s}e.mouseMoveDistanceFromCanvas=Math.abs(o)},e.formatBrushPointForScroll=function(n,i){var a,o,s,c;i===void 0&&(i=!1);var d=n.x,h=n.y,v=e.spreadsheet.facet,g=i?v.cornerBBox:v.panelBBox,C=g.minX,w=g.maxX,S=v.panelBBox,_=S.minY,T=S.maxY,M=((a=e.endBrushPoint)===null||a===void 0?void 0:a.x)+d,D=((o=e.endBrushPoint)===null||o===void 0?void 0:o.y)+h,B=!0,G=!0,V=(c=(s=v.vScrollBar)===null||s===void 0?void 0:s.getBBox())===null||c===void 0?void 0:c.width,q=2;return M>w?M=w-V-q:M<C?M=C+q:B=!1,D>T?D=T-q:D<=_?D=_+q:G=!1,{x:{value:M,needScroll:B},y:{value:D,needScroll:G}}},e.rectanglesIntersect=function(n,i){return n.maxX>i.minX&&n.minX<i.maxX&&n.minY<i.maxY&&n.maxY>i.minY},e.autoScrollIntervalId=null,e.autoScrollConfig=jl(Yp),e.validateYIndex=function(n){var i,a,o=e.spreadsheet.facet,s=o.frozenGroupInfo,c=0,d=(i=s==null?void 0:s.frozenRow)===null||i===void 0?void 0:i.range;if(d&&(c=d[1]+1),n<c)return null;var h=o.getCellRange().end,v=(a=s==null?void 0:s.frozenTrailingRow)===null||a===void 0?void 0:a.range;return v&&(h=v[0]-1),n>h?null:n},e.validateXIndex=function(n){var i,a,o=e.spreadsheet.facet,s=o.frozenGroupInfo,c=0,d=(i=s==null?void 0:s.frozenCol)===null||i===void 0?void 0:i.range;if(d&&(c=d[1]+1),n<c)return null;var h=o.layoutResult.colLeafNodes.length-1,v=(a=s==null?void 0:s.frozenTrailingCol)===null||a===void 0?void 0:a.range;return v&&(h=v[0]-1),n>h?null:n},e.adjustNextColIndexWithFrozen=function(n,i){var a=e.spreadsheet,o=a.facet,s=a.dataSet,c=a.options,d=s.getDisplayDataSet().length,h=o.layoutResult.colLeafNodes.length,v=Uo(c,h,d),g=v.frozenTrailingColCount,C=v.frozenColCount,w=o.panelScrollGroupIndexes;return g>0&&i===Ur.SCROLL_DOWN&&es(n,g,h)?w[1]:C>0&&i===Ur.SCROLL_UP&&Jl(n,C)?w[0]:n},e.adjustNextRowIndexWithFrozen=function(n,i){var a=e.spreadsheet,o=a.facet,s=a.dataSet,c=a.options,d=s.getDisplayDataSet().length,h=o.layoutResult.colLeafNodes.length,v=o.getCellRange(),g=Uo(c,h,d),C=g.frozenTrailingRowCount,w=g.frozenRowCount,S=o.panelScrollGroupIndexes;return C>0&&i===Ur.SCROLL_DOWN&&ch(n,v.end,C)?S[3]:w>0&&i===Ur.SCROLL_UP&&l1(n,v.start,w)?S[2]:n},e.getWillScrollRowIndexDiff=function(n){return n===Ur.SCROLL_DOWN?Js.SCROLL_DOWN:Js.SCROLL_UP},e.getDefaultWillScrollToRowIndex=function(n){var i=e.adjustNextRowIndexWithFrozen(e.endBrushPoint.rowIndex,n),a=i+e.getWillScrollRowIndexDiff(n);return e.validateYIndex(a)},e.getWillScrollToRowIndex=function(n){return e.getDefaultWillScrollToRowIndex(n)},e.getNextScrollDelta=function(n){var i=e.spreadsheet.facet.getScrollOffset(),a=i.scrollX,o=i.scrollY,s=0,c=0;if(n.y.scroll){var d=n.y.value>0?Ur.SCROLL_DOWN:Ur.SCROLL_UP,h=e.getWillScrollToRowIndex(d),v=g9(h,d,e.spreadsheet)-o,g=Qt(h)||Qt(v)||Number.isNaN(v);c=g?0:v}if(n.x.scroll){var d=n.x.value>0?Ur.SCROLL_DOWN:Ur.SCROLL_UP,C=e.adjustNextColIndexWithFrozen(e.endBrushPoint.colIndex,d),w=e.validateXIndex(C+(n.x.value>0?1:-1));s=Qt(w)?0:p9(w,d,e.spreadsheet)-a}return{x:s,y:c}},e.onScrollAnimationComplete=function(){e.scrollAnimationComplete=!0,e.brushSelectionStage!==pr.UN_DRAGGED&&e.renderPrepareSelected(e.endBrushPoint)},e.autoScroll=function(n){if(n===void 0&&(n=!1),!(e.brushSelectionStage===pr.UN_DRAGGED||!e.scrollAnimationComplete)){var i=e.autoScrollConfig,a=e.spreadsheet.facet.getScrollOffset(),o=n?"rowHeaderOffsetX":"offsetX",s={rowHeaderOffsetX:{value:a.rowHeaderScrollX,animate:!0},offsetX:{value:a.scrollX,animate:!0},offsetY:{value:a.scrollY,animate:!0}},c=e.getNextScrollDelta(i),d=c.x,h=c.y;if(h===0&&d===0){e.clearAutoScroll();return}if(i.y.scroll&&(s.offsetY.value+=h),i.x.scroll){var v=s[o];v.value+=d,v.value<0&&(v.value=0)}e.scrollAnimationComplete=!1;var g=i.x.scroll?1:3,C=Math.max(16,300-e.mouseMoveDistanceFromCanvas*g);e.spreadsheet.facet.scrollWithAnimation(s,C,e.onScrollAnimationComplete)}},e.handleScroll=kE(function(n,i,a){if(a===void 0&&(a=!1),e.brushSelectionStage!==pr.UN_DRAGGED){var o=e.formatBrushPointForScroll({x:n,y:i},a),s=o.x,c=s.value,d=s.needScroll,h=o.y,v=h.value,g=h.needScroll,C=e.autoScrollConfig;g&&(C.y.value=i,C.y.scroll=!0),d&&(C.x.value=n,C.x.scroll=!0),e.setMoveDistanceFromCanvas({x:n,y:i},d,g),e.renderPrepareSelected({x:c,y:v}),(g||d)&&(e.clearAutoScroll(),e.autoScroll(a),e.autoScrollIntervalId=setInterval(function(){e.autoScroll(a)},16))}},30),e.clearAutoScroll=function(){e.autoScrollIntervalId&&(clearInterval(e.autoScrollIntervalId),e.autoScrollIntervalId=null,e.resetScrollDelta())},e.onUpdateCells=function(n,i){return i()},e.showPrepareSelectedCells=function(){e.brushRangeCells=e.getBrushRangeCells(),e.spreadsheet.interaction.changeState({cells:nt(e.brushRangeCells,function(n){return Ti(n)}),stateName:Se.PREPARE_SELECT,force:!0,onUpdateCells:e.onUpdateCells})},e.renderPrepareSelected=function(n){var i=n.x,a=n.y,o=e.spreadsheet.container.getShape(i,a),s=e.spreadsheet.getCell(o),c=s instanceof Xa||s instanceof bh||s instanceof xh;if(!(!s||!c)){var d=s.getMeta(),h=d.rowIndex,v=d.colIndex;e.endBrushPoint={x:i,y:a,rowIndex:h,colIndex:v};var g=e.spreadsheet.interaction;g.addIntercepts([Ge.HOVER]),g.clearStyleIndependent(),e.isValidBrushSelection()&&(e.showPrepareSelectedCells(),e.updatePrepareSelectMask())}},e}return r.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},r.prototype.getPrepareSelectMaskTheme=function(){var e;return(e=this.spreadsheet.theme)===null||e===void 0?void 0:e.prepareSelectMask},r.prototype.initPrepareSelectMaskShape=function(){var e=this.spreadsheet.foregroundGroup;if(e){e.removeChild(this.prepareSelectMaskShape);var n=this.getPrepareSelectMaskTheme();this.prepareSelectMaskShape=e.addShape("rect",{visible:!1,attrs:{width:0,height:0,x:0,y:0,fill:n==null?void 0:n.backgroundColor,fillOpacity:n==null?void 0:n.backgroundOpacity,zIndex:uw},capture:!1})}},r.prototype.setBrushSelectionStage=function(e){this.brushSelectionStage=e},r.prototype.isPointInCanvas=function(e){var n=this.spreadsheet.facet.getCanvasHW(),i=n.height,a=n.width,o=this.spreadsheet.facet.panelBBox,s=o.minX,c=o.minY;return e.x>s&&e.x<a&&e.y>c&&e.y<i},r.prototype.resetDrag=function(){this.hidePrepareSelectMaskShape(),this.setBrushSelectionStage(pr.UN_DRAGGED)},r.prototype.isValidBrushSelection=function(){var e=this.getBrushRange(),n=e.start,i=e.end,a=i.x-n.x>this.brushSelectionMinimumMoveDistance||i.y-n.y>this.brushSelectionMinimumMoveDistance;return a},r.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getPanelGroupAllDataCells()},r.prototype.updatePrepareSelectMask=function(){var e=this.getBrushRange(),n=this.getPrepareSelectMaskPosition(e),i=n.x,a=n.y;this.prepareSelectMaskShape.attr({x:i,y:a,width:e.width,height:e.height}),this.prepareSelectMaskShape.show()},r.prototype.hidePrepareSelectMaskShape=function(){var e;(e=this.prepareSelectMaskShape)===null||e===void 0||e.hide()},r.prototype.resetScrollDelta=function(){this.autoScrollConfig=jl(Yp)},r.prototype.getBrushPoint=function(e){var n=this.spreadsheet.facet.getScrollOffset(),i=n.scrollY,a=n.scrollX,o={x:e==null?void 0:e.x,y:e==null?void 0:e.y},s=this.spreadsheet.getCell(e.target),c=s.getMeta(),d=c.colIndex,h=c.rowIndex;return k(k({},o),{rowIndex:h,colIndex:d,scrollY:i,scrollX:a})},r.prototype.getBrushRange=function(){var e,n,i,a,o,s,c,d,h=this.spreadsheet.facet.getScrollOffset(),v=h.scrollX,g=h.scrollY,C=Math.min(this.startBrushPoint.rowIndex,(e=this.endBrushPoint)===null||e===void 0?void 0:e.rowIndex),w=Math.max(this.startBrushPoint.rowIndex,(n=this.endBrushPoint)===null||n===void 0?void 0:n.rowIndex),S=Math.min(this.startBrushPoint.colIndex,(i=this.endBrushPoint)===null||i===void 0?void 0:i.colIndex),_=Math.max(this.startBrushPoint.colIndex,(a=this.endBrushPoint)===null||a===void 0?void 0:a.colIndex),T=this.startBrushPoint.x+this.startBrushPoint.scrollX-v,M=this.startBrushPoint.y+this.startBrushPoint.scrollY-g,D=Math.min(T,(o=this.endBrushPoint)===null||o===void 0?void 0:o.x),B=Math.max(T,(s=this.endBrushPoint)===null||s===void 0?void 0:s.x),G=Math.min(M,(c=this.endBrushPoint)===null||c===void 0?void 0:c.y),V=Math.max(M,(d=this.endBrushPoint)===null||d===void 0?void 0:d.y);return{start:{rowIndex:C,colIndex:S,x:D,y:G},end:{rowIndex:w,colIndex:_,x:B,y:V},width:B-D,height:V-G}},r.prototype.getBrushRangeCells=function(){var e=this;return this.setDisplayedCells(),this.displayedCells.filter(function(n){var i=n.getMeta();return e.isInBrushRange(i)})},r.prototype.mouseDown=function(e){var n;(n=e==null?void 0:e.preventDefault)===null||n===void 0||n.call(e),!this.spreadsheet.interaction.hasIntercepts([Ge.CLICK])&&(this.setBrushSelectionStage(pr.CLICK),this.initPrepareSelectMaskShape(),this.setDisplayedCells(),this.startBrushPoint=this.getBrushPoint(e))},r.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Ge.BRUSH_SELECTION])},r.prototype.bindMouseUp=function(e){var n=this;e===void 0&&(e=!1),this.spreadsheet.on(K.GLOBAL_MOUSE_UP,function(i){if(n.brushSelectionStage!==pr.DRAGGED){n.resetDrag();return}if(e&&n.clearAutoScroll(),n.isValidBrushSelection()){n.addBrushIntercepts(),n.updateSelectedCells();var a=P_(n.spreadsheet);n.spreadsheet.showTooltipWithInfo(i,a)}n.spreadsheet.interaction.getCurrentStateName()===Se.PREPARE_SELECT&&n.spreadsheet.interaction.reset(),n.resetDrag()}),this.spreadsheet.on(K.GLOBAL_CONTEXT_MENU,function(){n.brushSelectionStage!==pr.UN_DRAGGED&&(n.spreadsheet.interaction.removeIntercepts([Ge.HOVER]),n.resetDrag())})},r.prototype.autoBrushScroll=function(e,n){var i,a;if(n===void 0&&(n=!1),this.clearAutoScroll(),!this.isPointInCanvas(e)){var o=(e==null?void 0:e.x)-((i=this.endBrushPoint)===null||i===void 0?void 0:i.x),s=(e==null?void 0:e.y)-((a=this.endBrushPoint)===null||a===void 0?void 0:a.y);return this.handleScroll(o,s,n),!0}return!1},r.prototype.emitBrushSelectionEvent=function(e,n){this.spreadsheet.emit(e,n),this.spreadsheet.emit(K.GLOBAL_SELECTED,n),ve(n)&&this.spreadsheet.interaction.removeIntercepts([Ge.HOVER])},r.prototype.getVisibleBrushRangeCells=function(e){return this.brushRangeCells.find(function(n){var i=n.getMeta();return(i==null?void 0:i.id)===e})},r.prototype.isInBrushRange=function(e){return!1},r.prototype.bindMouseDown=function(){},r.prototype.bindMouseMove=function(){},r.prototype.updateSelectedCells=function(){},r.prototype.getPrepareSelectMaskPosition=function(e){return{x:e.start.x,y:e.start.y}},r}(Ii),rP=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.onUpdateCells=function(n){return n.updateCells(n.getAllColHeaderCells())},e}return r.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},r.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(K.COL_CELL_MOUSE_DOWN,function(n){e.spreadsheet.interaction.getBrushSelection().col&&t.prototype.mouseDown.call(e,n)})},r.prototype.isPointInCanvas=function(e){var n=this.spreadsheet.facet.getCanvasHW().width,i=this.spreadsheet.facet.cornerBBox,a=i.width,o=i.minY,s=i.maxY;return e.x>=a&&e.x<=n&&e.y>=o&&e.y<=s},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(K.COL_CELL_MOUSE_MOVE,function(n){if(e.brushSelectionStage!==pr.UN_DRAGGED){e.setBrushSelectionStage(pr.DRAGGED);var i=e.spreadsheet.container.getPointByEvent(n.originalEvent);e.isPointInCanvas(i)&&e.renderPrepareSelected(i)}})},r.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllColHeaderCells()},r.prototype.isInBrushRange=function(e){var n=this.getBrushRange(),i=n.start,a=n.end,o=this.spreadsheet.facet.getScrollOffset().scrollX,s=this.spreadsheet.facet.cornerBBox,c=e.x,d=c===void 0?0:c,h=e.y,v=h===void 0?0:h,g=e.width,C=g===void 0?0:g,w=e.height,S=w===void 0?0:w;return this.rectanglesIntersect({minX:i.x-s.width+o,minY:i.y,maxX:a.x-s.width+o,maxY:a.y},{minX:d,maxX:d+C,minY:v,maxY:v+S})},r.prototype.updateSelectedCells=function(){var e=this.spreadsheet.interaction;e.changeState({cells:nt(this.brushRangeCells,Ti),stateName:Se.BRUSH_SELECTED,onUpdateCells:this.onUpdateCells}),this.spreadsheet.emit(K.COL_CELL_BRUSH_SELECTION,this.brushRangeCells),this.spreadsheet.emit(K.GLOBAL_SELECTED,this.brushRangeCells),ve(this.brushRangeCells)&&e.removeIntercepts([Ge.HOVER])},r.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Ge.COL_BRUSH_SELECTION])},r}(U_),nP=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.getSelectedCellMetas=function(n){var i=[],a=e.spreadsheet.facet.layoutResult,o=a.rowLeafNodes,s=o===void 0?[]:o,c=a.colLeafNodes,d=c===void 0?[]:c,h=tc(n.start.rowIndex,n.end.rowIndex+1),v=tc(n.start.colIndex,n.end.colIndex+1);return h.forEach(function(g){v.forEach(function(C){var w=String(d[C].id),S=ve(s)?String(g):String(s[g].id);i.push({colIndex:C,rowIndex:g,id:"".concat(S,"-").concat(w),type:de.DATA_CELL,rowId:S,colId:w,spreadsheet:e.spreadsheet})})}),i},e}return r.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(K.DATA_CELL_MOUSE_DOWN,function(n){e.spreadsheet.interaction.getBrushSelection().data&&(t.prototype.mouseDown.call(e,n),e.resetScrollDelta())})},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(K.GLOBAL_MOUSE_MOVE,function(n){if(e.brushSelectionStage!==pr.UN_DRAGGED){e.setBrushSelectionStage(pr.DRAGGED);var i=e.spreadsheet.container.getPointByEvent(n);e.autoBrushScroll(i)||e.renderPrepareSelected(i)}})},r.prototype.isInBrushRange=function(e){var n=this.getBrushRange(),i=n.start,a=n.end,o=e.rowIndex,s=e.colIndex;return o>=i.rowIndex&&o<=a.rowIndex&&s>=i.colIndex&&s<=a.colIndex},r.prototype.updateSelectedCells=function(){var e=this.getBrushRange(),n=this.getSelectedCellMetas(e);this.spreadsheet.interaction.changeState({cells:n,stateName:Se.SELECTED,onUpdateCells:__});var i=this.getScrollBrushRangeCells(n);this.emitBrushSelectionEvent(K.DATA_CELL_BRUSH_SELECTION,i)},r.prototype.getScrollBrushRangeCells=function(e){var n=this;return e.map(function(i){var a=n.getVisibleBrushRangeCells(i.id);if(a)return a;var o=n.spreadsheet.facet.layoutResult.getCellMeta(i.rowIndex,i.colIndex),s=n.spreadsheet.isTableMode()?y1:Xa;return new s(o,n.spreadsheet)})},r.prototype.bindMouseUp=function(){t.prototype.bindMouseUp.call(this,!0)},r.prototype.getPrepareSelectMaskPosition=function(e){var n=this.spreadsheet.facet.panelBBox,i=n.minX,a=n.minY,o=Math.max(e.start.x,i),s=Math.max(e.start.y,a);return{x:o,y:s}},r}(U_),iP=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.isInBrushRange=function(n){var i=e.getBrushRange(),a=i.start,o=i.end,s=e.spreadsheet.facet.getScrollOffset(),c=s.scrollY,d=s.rowHeaderScrollX,h=e.spreadsheet.facet.cornerBBox,v=n.x,g=v===void 0?0:v,C=n.y,w=C===void 0?0:C,S=n.width,_=S===void 0?0:S,T=n.height,M=T===void 0?0:T;return e.rectanglesIntersect({minX:a.x+d,minY:a.y-h.height+c,maxX:o.x+d,maxY:o.y-h.height+c},{minX:g,maxX:g+_,minY:w,maxY:w+M})},e.onUpdateCells=function(n){return n.updateCells(n.getAllRowHeaderCells())},e.getSelectedRowNodes=function(){return e.spreadsheet.getRowNodes().filter(e.isInBrushRange)},e.getVisibleRowLeafCellByScrollDirection=function(n){var i=e.spreadsheet.interaction.getAllRowHeaderCells();return n===Ur.SCROLL_DOWN?Fe(i):i.find(function(a){var o=a.getMeta();return o.isLeaf})},e.getWillScrollToRowIndex=function(n){var i,a;if(!Qt(e.endBrushPoint.rowIndex))return e.getDefaultWillScrollToRowIndex(n);var o=e.getVisibleRowLeafCellByScrollDirection(n),s=(a=(i=o==null?void 0:o.getMeta())===null||i===void 0?void 0:i.rowIndex)!==null&&a!==void 0?a:0,c=s+e.getWillScrollRowIndexDiff(n);return e.validateYIndex(c)},e}return r.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(K.ROW_CELL_MOUSE_DOWN,function(n){e.spreadsheet.interaction.getBrushSelection().row&&t.prototype.mouseDown.call(e,n)})},r.prototype.isPointInCanvas=function(e){var n=this.spreadsheet.facet.getCanvasHW().height,i=this.spreadsheet.facet.cornerBBox,a=i.minX,o=i.height,s=i.maxX;return e.x>=a&&e.x<=s&&e.y>=o&&e.y<=n},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(K.GLOBAL_MOUSE_MOVE,function(n){if(e.brushSelectionStage!==pr.UN_DRAGGED){e.setBrushSelectionStage(pr.DRAGGED);var i=e.spreadsheet.container.getPointByEvent(n);e.autoBrushScroll(i,!0)||e.renderPrepareSelected(i)}})},r.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllRowHeaderCells()},r.prototype.updateSelectedCells=function(){var e=this.getSelectedRowNodes(),n=this.getScrollBrushRangeCells(e),i=nt(n,Ti);this.spreadsheet.interaction.changeState({cells:i,stateName:Se.BRUSH_SELECTED,onUpdateCells:this.onUpdateCells}),this.emitBrushSelectionEvent(K.ROW_CELL_BRUSH_SELECTION,n)},r.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Ge.ROW_BRUSH_SELECTION])},r.prototype.getScrollBrushRangeCells=function(e){var n=this;return e.map(function(i){var a=n.getVisibleBrushRangeCells(i.id);return a||n.spreadsheet.facet.rowHeader.createCellInstance(i)})},r.prototype.getPrepareSelectMaskPosition=function(e){var n=this.spreadsheet.facet.panelBBox.minY,i=e.start.x,a=Math.max(e.start.y,n);return{x:i,y:a}},r}(U_),aP=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.isMultiSelection=!1,e}return r.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},r.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Ge.CLICK])},r.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(K.GLOBAL_KEYBOARD_DOWN,function(n){w1(n)&&(e.isMultiSelection=!0,e.spreadsheet.interaction.addIntercepts([Ge.CLICK]))})},r.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(K.GLOBAL_KEYBOARD_UP,function(n){w1(n)&&e.reset()})},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(K.GLOBAL_MOUSE_MOVE,function(n){e.isMultiSelection&&!GR(n)&&e.reset()})},r.prototype.getSelectedCells=function(e){var n=e.getMeta().id,i=this.spreadsheet.interaction,a=i.getCells([de.DATA_CELL]),o=[];return i.getCurrentStateName()!==Se.SELECTED&&(a=[]),a.find(function(s){return s.id===n})?o=a.filter(function(s){return s.id!==n}):o=re(re([],Q(a),!1),[Ti(e)],!1),o},r.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(K.DATA_CELL_CLICK,function(n){n.stopPropagation();var i=e.spreadsheet.getCell(n.target),a=i.getMeta(),o=e.spreadsheet.interaction;if(e.isMultiSelection&&a){var s=e.getSelectedCells(i);if(ve(s)){o.clearState(),e.spreadsheet.hideTooltip(),e.spreadsheet.emit(K.GLOBAL_SELECTED,o.getActiveCells());return}o.addIntercepts([Ge.CLICK,Ge.HOVER]),e.spreadsheet.hideTooltip(),o.changeState({cells:s,stateName:Se.SELECTED,onUpdateCells:__}),e.spreadsheet.emit(K.GLOBAL_SELECTED,o.getActiveCells()),e.spreadsheet.showTooltipWithInfo(n,P_(e.spreadsheet))}})},r}(Ii),oP=function(){function t(r){var e=this;this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[],this.isCanvasEffect=!1,this.isGuiIconShape=function(n){return n instanceof md&&n.attrs.type===sh.type},this.onCanvasMousedown=function(n){if(e.target=n.target,e.spreadsheet.interaction.clearHoverTimer(),e.isResizeArea(n)){e.spreadsheet.emit(K.LAYOUT_RESIZE_MOUSE_DOWN,n);var i=function(o){if(!e.spreadsheet.getCanvasElement())return!1;e.spreadsheet.getCanvasElement()!==o.target&&(n.clientX=o.clientX,n.clientY=o.clientY,n.originalEvent=o,e.spreadsheet.emit(K.LAYOUT_RESIZE_MOUSE_MOVE,n))};window.addEventListener("mousemove",i),window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",i)},{once:!0});return}var a=e.spreadsheet.getCellType(n.target);switch(a){case de.DATA_CELL:e.spreadsheet.emit(K.DATA_CELL_MOUSE_DOWN,n);break;case de.ROW_CELL:e.spreadsheet.emit(K.ROW_CELL_MOUSE_DOWN,n);break;case de.COL_CELL:e.spreadsheet.emit(K.COL_CELL_MOUSE_DOWN,n);break;case de.CORNER_CELL:e.spreadsheet.emit(K.CORNER_CELL_MOUSE_DOWN,n);break;case de.MERGED_CELL:e.spreadsheet.emit(K.MERGED_CELLS_MOUSE_DOWN,n);break}},this.onCanvasMousemove=function(n){if(e.canvasMousemoveEvent=n,e.isResizeArea(n)){e.activeResizeArea(n),e.spreadsheet.emit(K.LAYOUT_RESIZE_MOUSE_MOVE,n);return}e.resetResizeArea();var i=e.spreadsheet.getCell(n.target);if(i){var a=i.cellType;switch(a){case de.DATA_CELL:e.spreadsheet.emit(K.DATA_CELL_MOUSE_MOVE,n);break;case de.ROW_CELL:e.spreadsheet.emit(K.ROW_CELL_MOUSE_MOVE,n);break;case de.COL_CELL:e.spreadsheet.emit(K.COL_CELL_MOUSE_MOVE,n);break;case de.CORNER_CELL:e.spreadsheet.emit(K.CORNER_CELL_MOUSE_MOVE,n);break;case de.MERGED_CELL:e.spreadsheet.emit(K.MERGED_CELLS_MOUSE_MOVE,n);break}if(!e.hasBrushSelectionIntercepts())switch(e.spreadsheet.emit(K.GLOBAL_HOVER,n),a){case de.DATA_CELL:e.spreadsheet.emit(K.DATA_CELL_HOVER,n);break;case de.ROW_CELL:e.spreadsheet.emit(K.ROW_CELL_HOVER,n);break;case de.COL_CELL:e.spreadsheet.emit(K.COL_CELL_HOVER,n);break;case de.CORNER_CELL:e.spreadsheet.emit(K.CORNER_CELL_HOVER,n);break;case de.MERGED_CELL:e.spreadsheet.emit(K.MERGED_CELLS_HOVER,n);break}}},this.onCanvasMouseup=function(n){if(e.isResizeArea(n)){e.spreadsheet.emit(K.LAYOUT_RESIZE_MOUSE_UP,n);return}var i=e.spreadsheet.getCell(n.target);if(i){var a=i.cellType;if(e.target===n.target){var o=e.isGuiIconShape(n.target);switch(a){case de.DATA_CELL:e.spreadsheet.emit(K.DATA_CELL_CLICK,n);break;case de.ROW_CELL:if(o)break;e.spreadsheet.emit(K.ROW_CELL_CLICK,n);break;case de.COL_CELL:if(o)break;e.spreadsheet.emit(K.COL_CELL_CLICK,n);break;case de.CORNER_CELL:if(o)break;e.spreadsheet.emit(K.CORNER_CELL_CLICK,n);break;case de.MERGED_CELL:e.spreadsheet.emit(K.MERGED_CELLS_CLICK,n);break}}switch(a){case de.DATA_CELL:e.spreadsheet.emit(K.DATA_CELL_MOUSE_UP,n);break;case de.ROW_CELL:e.spreadsheet.emit(K.ROW_CELL_MOUSE_UP,n);break;case de.COL_CELL:e.spreadsheet.emit(K.COL_CELL_MOUSE_UP,n);break;case de.CORNER_CELL:e.spreadsheet.emit(K.CORNER_CELL_MOUSE_UP,n);break;case de.MERGED_CELL:e.spreadsheet.emit(K.MERGED_CELLS_MOUSE_UP,n);break}}},this.onCanvasClick=function(n){e.spreadsheet.emit(K.GLOBAL_CLICK,n)},this.onCanvasDoubleClick=function(n){var i=e.spreadsheet;if(e.isResizeArea(n)){i.emit(K.LAYOUT_RESIZE_MOUSE_UP,n);return}i.emit(K.GLOBAL_DOUBLE_CLICK,n);var a=i.getCell(n.target);if(a){var o=a.cellType;if(e.target===n.target)switch(o){case de.DATA_CELL:i.emit(K.DATA_CELL_DOUBLE_CLICK,n);break;case de.ROW_CELL:i.emit(K.ROW_CELL_DOUBLE_CLICK,n);break;case de.COL_CELL:i.emit(K.COL_CELL_DOUBLE_CLICK,n);break;case de.CORNER_CELL:i.emit(K.CORNER_CELL_DOUBLE_CLICK,n);break;case de.MERGED_CELL:i.emit(K.MERGED_CELLS_DOUBLE_CLICK,n);break}}},this.onCanvasMouseout=function(n){if(!(!e.isAutoResetSheetStyle||n!=null&&n.shape)){var i=e.spreadsheet.interaction;!i.isSelectedState()&&!(i.intercepts.size>0)&&i.reset()}},this.onCanvasContextMenu=function(n){var i=e.spreadsheet;if(e.isResizeArea(n)){i.emit(K.LAYOUT_RESIZE_MOUSE_UP,n);return}i.emit(K.GLOBAL_CONTEXT_MENU,n);var a=e.spreadsheet.getCellType(n.target);switch(a){case de.DATA_CELL:e.spreadsheet.emit(K.DATA_CELL_CONTEXT_MENU,n);break;case de.ROW_CELL:e.spreadsheet.emit(K.ROW_CELL_CONTEXT_MENU,n);break;case de.COL_CELL:e.spreadsheet.emit(K.COL_CELL_CONTEXT_MENU,n);break;case de.CORNER_CELL:e.spreadsheet.emit(K.CORNER_CELL_CONTEXT_MENU,n);break;case de.MERGED_CELL:e.spreadsheet.emit(K.MERGED_CELLS_CONTEXT_MENU,n);break}},this.spreadsheet=r,this.bindEvents()}return Object.defineProperty(t.prototype,"canvasContainer",{get:function(){return this.spreadsheet.container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAutoResetSheetStyle",{get:function(){return this.spreadsheet.options.interaction.autoResetSheetStyle},enumerable:!1,configurable:!0}),t.prototype.bindEvents=function(){var r=this;this.clearAllEvents(),this.addCanvasEvent(_r.CLICK,this.onCanvasClick),this.addCanvasEvent(_r.MOUSE_DOWN,this.onCanvasMousedown),this.addCanvasEvent(_r.MOUSE_MOVE,this.onCanvasMousemove),this.addCanvasEvent(_r.MOUSE_OUT,this.onCanvasMouseout),this.addCanvasEvent(_r.MOUSE_UP,this.onCanvasMouseup),this.addCanvasEvent(_r.DOUBLE_CLICK,this.onCanvasDoubleClick),this.addCanvasEvent(_r.CONTEXT_MENU,this.onCanvasContextMenu),this.addS2Event(K.GLOBAL_ACTION_ICON_CLICK,function(){r.spreadsheet.interaction.addIntercepts([Ge.HOVER]),r.spreadsheet.interaction.clearState()}),this.addDomEventListener(window,_r.CLICK,function(e){r.resetSheetStyle(e),r.isCanvasEffect=r.isMouseOnTheCanvasContainer(e)}),this.addDomEventListener(window,_r.KEY_DOWN,function(e){r.onKeyboardCopy(e),r.onKeyboardEsc(e),r.spreadsheet.emit(K.GLOBAL_KEYBOARD_DOWN,e)}),this.addDomEventListener(window,_r.KEY_UP,function(e){r.spreadsheet.emit(K.GLOBAL_KEYBOARD_UP,e)}),this.addDomEventListener(window,_r.MOUSE_UP,function(e){r.spreadsheet.emit(K.GLOBAL_MOUSE_UP,e)}),this.addDomEventListener(window,_r.MOUSE_MOVE,function(e){r.spreadsheet.emit(K.GLOBAL_MOUSE_MOVE,e)})},t.prototype.onKeyboardCopy=function(r){if(this.isCanvasEffect&&this.spreadsheet.options.interaction.enableCopy&&aR(r.key,gr.COPY)&&(r.metaKey||r.ctrlKey)){var e=ZD(this.spreadsheet);Qt(e)||this.spreadsheet.emit(K.GLOBAL_COPIED,e)}},t.prototype.onKeyboardEsc=function(r){this.isCanvasEffect&&aR(r.key,gr.ESC)&&this.resetSheetStyle(r)},t.prototype.resetSheetStyle=function(r){if(!(!this.isAutoResetSheetStyle||!this.spreadsheet)){var e=this.spreadsheet.interaction;if(e.hasIntercepts([Ge.BRUSH_SELECTION,Ge.COL_BRUSH_SELECTION,Ge.ROW_BRUSH_SELECTION])){e.removeIntercepts([Ge.BRUSH_SELECTION,Ge.ROW_BRUSH_SELECTION,Ge.COL_BRUSH_SELECTION]);return}this.isMouseOnTheTooltip(r)||this.isMouseOnTheCanvasContainer(r)||(e.reset(),this.spreadsheet.emit(K.GLOBAL_RESET,r),this.spreadsheet.emit(K.GLOBAL_SELECTED,e.getActiveCells()))}},t.prototype.isMouseEvent=function(r){return Ji(r,"clientX")&&Ji(r,"clientY")},t.prototype.isMouseOnTheCanvasContainer=function(r){if(this.isMouseEvent(r)){var e=this.spreadsheet.getCanvasElement();if(!e)return!1;var n=e.getBoundingClientRect()||{},i=n.x,a=n.y,o=this.getContainerRect(),s=o.width,c=o.height;return e.contains(r.target)&&r.clientX<=i+s&&r.clientY<=a+c}return!1},t.prototype.getContainerRect=function(){var r,e=this.spreadsheet,n=e.facet,i=e.options,a=n.hRowScrollBar||n.hScrollBar,o=(n==null?void 0:n.panelBBox)||{},s=o.maxX,c=o.maxY,d=i.width,h=i.height,v=((r=a==null?void 0:a.theme)===null||r===void 0?void 0:r.size)||0;return{width:Math.min(d,s),height:Math.min(h,c+v)}},t.prototype.isMouseOnTheTooltip=function(r){var e,n,i,a,o=this.spreadsheet.tooltip;if(!(o!=null&&o.visible))return!1;var s=((i=(n=(e=this.spreadsheet.tooltip)===null||e===void 0?void 0:e.container)===null||n===void 0?void 0:n.getBoundingClientRect)===null||i===void 0?void 0:i.call(n))||{},c=s.x,d=s.y,h=s.width,v=s.height;return r.target instanceof Node?TB((a=this.spreadsheet.tooltip)===null||a===void 0?void 0:a.container,r.target):this.isMouseEvent(r)?r.clientX>=c&&r.clientX<=c+h&&r.clientY>=d&&r.clientY<=d+v:!1},t.prototype.isResizeArea=function(r){var e=Me(r.target,"attrs.appendInfo");return e==null?void 0:e.isResizeArea},t.prototype.activeResizeArea=function(r){this.resetResizeArea();var e=r.target;this.spreadsheet.store.set("activeResizeArea",e),e.attr(tt.backgroundOpacity,this.spreadsheet.theme.resizeArea.interactionState.hover.backgroundOpacity)},t.prototype.resetResizeArea=function(){var r=this.spreadsheet.store.get("activeResizeArea");ve(r)||r.attr(tt.backgroundOpacity,this.spreadsheet.theme.resizeArea.backgroundOpacity),this.spreadsheet.store.set("activeResizeArea",r)},t.prototype.hasBrushSelectionIntercepts=function(){return this.spreadsheet.interaction.hasIntercepts([Ge.HOVER,Ge.BRUSH_SELECTION,Ge.ROW_BRUSH_SELECTION,Ge.COL_BRUSH_SELECTION])},t.prototype.clear=function(){this.unbindEvents()},t.prototype.unbindEvents=function(){this.clearAllEvents()},t.prototype.addCanvasEvent=function(r,e){var n;(n=this.canvasContainer)===null||n===void 0||n.on(r,e),this.canvasEventHandlers.push({type:r,handler:e})},t.prototype.addS2Event=function(r,e){this.spreadsheet.on(r,e),this.s2EventHandlers.push({type:r,handler:e})},t.prototype.addDomEventListener=function(r,e,n){if(r.addEventListener){var i=this.spreadsheet.options.interaction.eventListenerOptions;r.addEventListener(e,n,i),this.domEventListeners.push({target:r,type:e,handler:n,options:i})}else console.error("Please make sure ".concat(r," has addEventListener function"))},t.prototype.clearAllEvents=function(){var r=this;Ae(this.canvasEventHandlers,function(e){var n,i=e.type,a=e.handler;(n=r.canvasContainer)===null||n===void 0||n.off(i,a)}),Ae(this.s2EventHandlers,function(e){var n=e.type,i=e.handler;r.spreadsheet.off(n,i)}),Ae(this.domEventListeners,function(e){e.target.removeEventListener(e.type,e.handler,e.options)}),this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[]},t}(),lP=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.isRangeSelection=!1,e.handleColClick=function(n){n.stopPropagation();var i=e.spreadsheet.interaction,a=e.spreadsheet.getCell(n.target),o=a==null?void 0:a.getMeta();if(!Qt(o==null?void 0:o.x)){i.addIntercepts([Ge.HOVER]);var s=[Ti(a)],c=e.spreadsheet.store.get("lastClickedCell");if(e.isRangeSelection&&c&&c.cellType===a.cellType&&c.getMeta().level===a.getMeta().level){var d=Q([e.spreadsheet.facet.layoutResult.rowsHierarchy.maxLevel,e.spreadsheet.facet.layoutResult.colsHierarchy.maxLevel],2),h=d[0],v=d[1],g=E_(c.getMeta(),a.getMeta()),C=g.start,w=g.end;a instanceof Xa?s=e.handleSeriesNumberRowSelected(C.rowIndex,w.rowIndex,a):a.cellType===de.ROW_CELL&&a.getMeta().level===h?s=e.handleRowSelected(C.rowIndex,w.rowIndex,a):a.cellType===de.COL_CELL&&a.getMeta().level===v&&(s=e.handleColSelected(C.colIndex,w.colIndex,a)),i.changeState({cells:s,stateName:Se.SELECTED})}else ve(i.getCells())&&i.removeIntercepts([Ge.HOVER]),e.spreadsheet.store.set("lastClickedCell",a);var S=s.map(function(_){var T=_.id;return T});i.updateCells(i.getRowColActiveCells(S)),e.spreadsheet.emit(K.GLOBAL_SELECTED,i.getActiveCells())}},e}return r.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindColCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},r.prototype.reset=function(){this.isRangeSelection=!1,this.spreadsheet.interaction.removeIntercepts([Ge.CLICK])},r.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(K.GLOBAL_KEYBOARD_DOWN,function(n){n.key===gr.SHIFT&&(e.isRangeSelection=!0,e.spreadsheet.interaction.addIntercepts([Ge.CLICK]))})},r.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(K.GLOBAL_KEYBOARD_UP,function(n){n.key===gr.SHIFT&&e.reset()})},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(K.GLOBAL_MOUSE_MOVE,function(n){e.isRangeSelection&&!n.shiftKey&&e.reset()})},r.prototype.bindColCellClick=function(){var e=this;this.spreadsheet.isTableMode()&&this.spreadsheet.on(K.ROW_CELL_CLICK,function(n){e.handleColClick(n)}),this.spreadsheet.on(K.COL_CELL_CLICK,function(n){e.handleColClick(n)})},r.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(K.DATA_CELL_CLICK,function(n){n.stopPropagation();var i=e.spreadsheet.getCell(n.target),a=i.getMeta(),o=e.spreadsheet.interaction;if(a){var s=e.spreadsheet.store.get("lastClickedCell"),c=e.isRangeSelection&&(s==null?void 0:s.cellType)===i.cellType;if(!c){e.spreadsheet.store.set("lastClickedCell",i);return}var d=E_(s.getMeta(),i.getMeta()),h=d.start,v=d.end,g=tc(h.colIndex,v.colIndex+1).flatMap(function(C){var w=e.spreadsheet.facet.layoutResult.colLeafNodes[C].id;return tc(h.rowIndex,v.rowIndex+1).map(function(S){var _=e.spreadsheet.facet.getSeriesNumberWidth()||e.spreadsheet.isTableMode()?String(S):e.spreadsheet.facet.layoutResult.rowLeafNodes[S].id;return{id:_+"-"+w,colIndex:C,rowIndex:S,type:i.cellType}})});o.addIntercepts([Ge.CLICK,Ge.HOVER]),o.changeState({cells:g,stateName:Se.SELECTED}),e.spreadsheet.showTooltipWithInfo(n,P_(e.spreadsheet)),e.spreadsheet.emit(K.GLOBAL_SELECTED,o.getActiveCells())}})},r.prototype.handleSeriesNumberRowSelected=function(e,n,i){var a=this.spreadsheet.facet.layoutResult.colLeafNodes[0].id;return tc(e,n+1).map(function(o){var s=String(o);return{id:s+"-"+a,colIndex:0,rowIndex:o,type:i.cellType}})},r.prototype.handleRowSelected=function(e,n,i){return this.spreadsheet.facet.layoutResult.rowNodes.filter(function(a){var o=a.rowIndex;return vE(o,e,n+1)}).map(function(a){return{id:a.id,colIndex:a.colIndex,rowIndex:a.rowIndex,type:i.cellType}})},r.prototype.handleColSelected=function(e,n,i){return this.spreadsheet.facet.layoutResult.colLeafNodes.filter(function(a){var o=a.colIndex;return vE(o,e,n+1)}).map(function(a){return{id:a.id,colIndex:a.colIndex,rowIndex:a.rowIndex,type:i.cellType}})},r}(Ii),sP=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.resizeStartPosition={},e.resizeMouseMove=function(n){var i,a;if(!((i=e.resizeReferenceGroup)===null||i===void 0)&&i.get("visible")){(a=n==null?void 0:n.preventDefault)===null||a===void 0||a.call(n);var o=n.originalEvent,s=e.getResizeInfo(),c=e.resizeReferenceGroup.getChildren()||[];if(!ve(c)){var d=Q(c,2),h=d[1],v=Q(Fo(h.attr("path")),2),g=v[0],C=v[1];s.type===pn.Horizontal?e.updateHorizontalResizingEndGuideLinePosition(o,s,g,C):e.updateVerticalResizingEndGuideLinePosition(o,s,g,C),e.updateResizeGuideLineTheme(h),h.attr("path",[g,C])}}},e}return r.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},r.prototype.initResizeGroup=function(){if(!this.resizeReferenceGroup){this.resizeReferenceGroup=this.spreadsheet.foregroundGroup.addGroup();var e=this.spreadsheet.options,n=e.width,i=e.height,a=this.getResizeAreaTheme(),o=a.guideLineColor,s=a.guideLineDash,c=a.size,d={path:"",lineDash:s,stroke:o,lineWidth:c};this.resizeReferenceGroup.addShape("path",{id:Vp,attrs:d}),this.resizeReferenceGroup.addShape("path",{id:Tw,attrs:d}),this.resizeReferenceGroup.addShape("rect",{id:Lw,attrs:{appendInfo:{isResizeArea:!0},x:0,y:0,width:n,height:i,fill:"transparent"}})}},r.prototype.getResizeAreaTheme=function(){return this.spreadsheet.theme.resizeArea},r.prototype.setResizeTarget=function(e){this.resizeTarget=e},r.prototype.getGuideLineWidthAndHeight=function(){var e=this.spreadsheet.options,n=e.width,i=e.height,a=this.spreadsheet.facet.panelBBox,o=a.maxY,s=a.maxX,c=Math.min(s,n),d=Math.min(o,i);return{width:c,height:d}},r.prototype.getResizeShapes=function(){var e;return((e=this.resizeReferenceGroup)===null||e===void 0?void 0:e.get("children"))||[]},r.prototype.setResizeMaskCursor=function(e){var n=Q(this.getResizeShapes(),3),i=n[2];i==null||i.attr("cursor",e)},r.prototype.updateResizeGuideLinePosition=function(e,n){var i=this.getResizeShapes();if(!ve(i)){var a=Q(i,2),o=a[0],s=a[1],c=n.type,d=n.offsetX,h=n.offsetY,v=n.width,g=n.height,C=this.getGuideLineWidthAndHeight(),w=C.width,S=C.height;if(this.setResizeMaskCursor("".concat(c,"-resize")),c===pn.Horizontal){o.attr("path",[["M",d,h],["L",d,S]]),s.attr("path",[["M",d+v,h],["L",d+v,S]]),this.resizeStartPosition.offsetX=e.offsetX,this.resizeStartPosition.clientX=e.clientX;return}o.attr("path",[["M",d,h],["L",w,h]]),s.attr("path",[["M",d,h+g],["L",w,h+g]]),this.resizeStartPosition.offsetY=e.offsetY,this.resizeStartPosition.clientY=e.clientY}},r.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(K.LAYOUT_RESIZE_MOUSE_DOWN,function(n){var i=n.target,a=n.originalEvent,o=e.getCellAppendInfo(n.target);e.spreadsheet.store.set("resized",!1),o!=null&&o.isResizeArea&&(e.spreadsheet.interaction.reset(),e.spreadsheet.interaction.addIntercepts([Ge.RESIZE]),e.setResizeTarget(i),e.showResizeGroup(),e.updateResizeGuideLinePosition(a,o))})},r.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(K.LAYOUT_RESIZE_MOUSE_MOVE,function(n){kE(e.resizeMouseMove,33)(n)})},r.prototype.getResizeGuideLinePosition=function(){var e=Q(this.resizeReferenceGroup.getChildren()||[],2),n=e[0],i=e[1],a=(n==null?void 0:n.attr("path"))||[],o=(i==null?void 0:i.attr("path"))||[],s=Q(a[0]||[],3),c=s[1],d=c===void 0?0:c,h=s[2],v=h===void 0?0:h,g=Q(o[0]||[],3),C=g[1],w=C===void 0?0:C,S=g[2],_=S===void 0?0:S;return{start:{x:d,y:v},end:{x:w,y:_}}},r.prototype.getDisAllowResizeInfo=function(){var e,n=this.getResizeInfo(),i=this.spreadsheet.options.interaction.resize,a=n.width,o=n.height,s=n.resizedWidth,c=n.resizedHeight,d=(e=i==null?void 0:i.disable)===null||e===void 0?void 0:e.call(i,n),h=d?a:s,v=d?o:c;return{displayWidth:h,displayHeight:v,isDisabled:d}},r.prototype.getResizeWidthDetail=function(){var e,n,i=this.getResizeInfo(),a=this.getDisAllowResizeInfo().displayWidth;switch(i.effect){case Lr.Field:return{eventType:K.LAYOUT_RESIZE_ROW_WIDTH,style:{rowCfg:{widthByField:(e={},e[i.id]=a,e)}}};case Lr.Tree:return{eventType:K.LAYOUT_RESIZE_TREE_WIDTH,style:{treeRowsWidth:a,rowCfg:{treeRowsWidth:a}}};case Lr.Cell:return{eventType:K.LAYOUT_RESIZE_COL_WIDTH,style:{colCfg:{widthByFieldValue:(n={},n[i.id]=a,n)}}};case Lr.Series:return{eventType:K.LAYOUT_RESIZE_SERIES_WIDTH,seriesNumberWidth:a};default:return null}},r.prototype.getResizeHeightDetail=function(){var e,n,i=this.spreadsheet.options,a=i.interaction.resize,o=i.style.rowCfg.heightByField,s=this.spreadsheet.theme.rowCell.cell.padding,c=this.getResizeInfo(),d=this.getDisAllowResizeInfo().displayHeight,h=d-s.top-s.bottom,v;switch(c.effect){case Lr.Field:return{eventType:K.LAYOUT_RESIZE_COL_HEIGHT,style:{colCfg:{heightByField:(e={},e[c.id]=d,e)}}};case Lr.Cell:return o!=null&&o[String(c.id)]||(a==null?void 0:a.rowResizeType)===eu.CURRENT?v={rowCfg:{heightByField:(n={},n[c.id]=h,n)}}:v={cellCfg:{height:h}},{eventType:K.LAYOUT_RESIZE_ROW_HEIGHT,style:v};default:return null}},r.prototype.getResizeDetail=function(){var e=this.getResizeInfo();return e.type===pn.Horizontal?this.getResizeWidthDetail():this.getResizeHeightDetail()},r.prototype.showResizeGroup=function(){this.initResizeGroup(),this.resizeReferenceGroup.set("visible",!0)},r.prototype.hideResizeGroup=function(){this.resizeReferenceGroup.set("visible",!1)},r.prototype.bindMouseUp=function(){var e=this;this.spreadsheet.on(K.GLOBAL_MOUSE_UP,function(){var n;e.setResizeMaskCursor("default"),!(!e.resizeReferenceGroup||ve((n=e.resizeReferenceGroup)===null||n===void 0?void 0:n.getChildren()))&&(e.hideResizeGroup(),e.renderResizedResult())})},r.prototype.updateResizeGuideLineTheme=function(e){var n=this.getResizeAreaTheme(),i=n.guideLineColor,a=n.guideLineDisableColor,o=this.getDisAllowResizeInfo().isDisabled;e.attr("stroke",o?a:i),this.setResizeMaskCursor(o?"no-drop":"default")},r.prototype.updateHorizontalResizingEndGuideLinePosition=function(e,n,i,a){var o=e.clientX-this.resizeStartPosition.clientX;n.width+o<Gp&&(o=-(n.width-Gp));var s=n.offsetX+n.width+o;i[1]=s,a[1]=s,this.resizeTarget.attr({x:s-n.size/2})},r.prototype.updateVerticalResizingEndGuideLinePosition=function(e,n,i,a){var o=e.clientY-this.resizeStartPosition.clientY;n.height+o<$p&&(o=-(n.height-$p));var s=n.offsetY+n.height+o;i[2]=s,a[2]=s,this.resizeTarget.attr({y:s-n.size/2})},r.prototype.renderResizedResult=function(){var e=this.getResizeInfo(),n=this.getResizeDetail()||{},i=n.style,a=n.seriesNumberWidth,o=n.eventType,s={info:e,style:i};this.spreadsheet.emit(K.LAYOUT_RESIZE,s),this.spreadsheet.emit(o,s),i&&this.spreadsheet.setOptions({style:i}),a&&this.spreadsheet.setTheme({rowCell:{seriesNumberWidth:a}}),this.spreadsheet.store.set("resized",!0),this.render()},r.prototype.getResizeInfo=function(){var e=this.getCellAppendInfo(this.resizeTarget),n=this.getResizeGuideLinePosition(),i=n.start,a=n.end,o=Math.floor(a.x-i.x),s=Math.floor(a.y-i.y);return k(k({},e),{resizedWidth:o,resizedHeight:s})},r.prototype.render=function(){this.resizeStartPosition={},this.resizeTarget=null,this.resizeReferenceGroup=null,this.spreadsheet.render(!1)},r}(Ii),uP=[gr.ARROW_LEFT,gr.ARROW_RIGHT,gr.ARROW_UP,gr.ARROW_DOWN],cP=function(t){Le(r,t);function r(e){return t.call(this,e)||this}return r.prototype.isCanvasEffect=function(){return this.spreadsheet.interaction.eventController.isCanvasEffect},r.prototype.bindEvents=function(){var e=this;this.spreadsheet.on(K.GLOBAL_KEYBOARD_DOWN,function(n){if(e.isCanvasEffect()){var i=n.shiftKey,a=n.metaKey,o=uP.includes(n.key),s=!1,c=!1,d=!1;o&&(a&&i?(s=!1,c=!0,d=!1):a?(s=!0,c=!0,d=!0):i?(s=!1,c=!1,d=!1):(s=!0,c=!1,d=!0),e.handleMove({event:n,changeStartCell:s,isJumpMode:c,isSingleSelection:d}))}}),this.spreadsheet.on(K.DATA_CELL_CLICK,function(n){var i=e.spreadsheet.getCell(n.target).getMeta();i&&(e.startCell=e.getCellMetaFromViewMeta(i),e.endCell=e.startCell)})},r.prototype.getCellMetaFromViewMeta=function(e){return{rowIndex:e.rowIndex,colIndex:e.colIndex,id:e.id,type:de.DATA_CELL}},r.prototype.handleMove=function(e){var n=e.event,i=e.changeStartCell,a=e.isJumpMode,o=e.isSingleSelection,s=this,c=s.spreadsheet,d=s.startCell,h=s.endCell,v=i?d:h,g=this.getMoveInfo(n.key,v,a);if(g){var C=Q([g.row,g.col],2),w=C[0],S=C[1];this.scrollToActiveCell(c,w,S);var _=this.generateCellMeta(c,w,S),T=o?[_]:this.getRangeCells(c,d,_);u9(c,T),i&&(this.startCell=_),this.endCell=_,this.spreadsheet.emit(K.DATA_CELL_SELECT_MOVE,T)}},r.prototype.generateCellMeta=function(e,n,i){var a=e.isTableMode,o=e.facet.layoutResult,s=o.colLeafNodes,c=o.rowLeafNodes,d=a()?String(n):c[n].id,h=s[i].id;return{rowIndex:n,colIndex:i,id:m1(d,h),type:de.DATA_CELL}},r.prototype.getRangeCells=function(e,n,i){for(var a=E_(n,i),o=a.start,s=o.rowIndex,c=o.colIndex,d=a.end,h=d.rowIndex,v=d.colIndex,g=[],C=s;C<=h;C++)for(var w=c;w<=v;w++)g.push(this.generateCellMeta(e,C,w));return g},r.prototype.getMoveInfo=function(e,n,i){var a=this.spreadsheet,o=a.options,s=o.frozenColCount,c=s===void 0?0:s,d=o.frozenRowCount,h=d===void 0?0:d,v=o.frozenTrailingColCount,g=v===void 0?0:v,C=o.frozenTrailingRowCount,w=C===void 0?0:C,S=a.facet.layoutResult,_=S.rowLeafNodes,T=S.colLeafNodes,M=Q([0+c,T.length-g-1],2),D=M[0],B=M[1],G=Q([0+h,(a.isTableMode()?a.dataSet.getDisplayDataSet().length:_.length)-w-1],2),V=G[0],q=G[1];if(n)switch(e){case gr.ARROW_RIGHT:return n.colIndex+1>B?void 0:{row:n.rowIndex,col:i?B:n.colIndex+1};case gr.ARROW_LEFT:return n.colIndex-1<D?void 0:{row:n.rowIndex,col:i?D:n.colIndex-1};case gr.ARROW_UP:return n.rowIndex-1<V?void 0:{row:i?V:n.rowIndex-1,col:n.colIndex};case gr.ARROW_DOWN:return n.rowIndex+1>q?void 0:{row:i?q:n.rowIndex+1,col:n.colIndex}}},r.prototype.calculateOffset=function(e,n,i){var a=e.options,o=a.frozenRowCount,s=o===void 0?0:o,c=a.frozenTrailingRowCount,d=c===void 0?0:c,h=e.facet,v=e.frozenColGroup,g=e.frozenTrailingColGroup,C=e.frozenRowGroup,w=e.frozenTrailingRowGroup,S=h.layoutResult.colLeafNodes,_=h.getScrollOffset(),T=_.scrollX,M=_.scrollY,D=h.panelBBox,B=D.viewportHeight,G=D.viewportWidth,V=Me(e,"theme.splitLine"),q=v?Math.floor(v.getBBox().width-V.verticalBorderWidth/2):0,J=g?Math.floor(g.getBBox().width):0,te=C?Math.floor(C.getBBox().height-V.horizontalBorderWidth/2):0,se=w?Math.floor(w.getBBox().height):0,ue=s_(T,M,h.viewCellWidths,h.viewCellHeights,{width:G-q-J,height:B-te-se,x:q,y:te},h.getRealScrollX(h.cornerBBox.width)),ce=-1,me=-1,Te=S.find(function(pe){return pe.colIndex===i});if(i<=ue[0]?ce=Te.x-q:i>=ue[1]&&i<S.length-d&&(ce=Te.x+Te.width-G+J),n<=ue[2])me=h.viewCellHeights.getCellOffsetY(n-s);else if(n>=ue[3]){var le=h.viewCellHeights.getCellOffsetY(n+1);me=le+se-B}return{offsetX:ce,offsetY:me}},r.prototype.scrollToActiveCell=function(e,n,i){var a=this.calculateOffset(e,n,i),o=a.offsetX,s=a.offsetY,c=e.facet,d=e.facet.getScrollOffset(),h=d.scrollX,v=d.scrollY;c.scrollWithAnimation({offsetX:{value:o>-1?o:h},offsetY:{value:s>-1?s:v}})},r}(Ii),dP=function(){function t(r){var e=this;this.interactions=new Map,this.intercepts=new Set,this.hoverTimer=null,this.defaultState={cells:[],force:!1},this.onTriggerInteractionsResetEffect=function(){e.interactions.forEach(function(n){n.reset()})},this.selectAll=function(){e.changeState({stateName:Se.ALL_SELECTED})},this.getCellChildrenNodes=function(n){var i,a=(i=n==null?void 0:n.getMeta)===null||i===void 0?void 0:i.call(n),o=(n==null?void 0:n.cellType)===de.ROW_CELL,s=e.spreadsheet.isHierarchyTreeType();return s&&o?Hr.getAllLeaveNodes(a).filter(function(c){return c.rowIndex===a.rowIndex}):Hr.getAllChildrenNodes(a)},this.selectHeaderCell=function(n){var i;n===void 0&&(n={});var a=n.cell;if(!ve(a)){var o=(i=a==null?void 0:a.getMeta)===null||i===void 0?void 0:i.call(a);if(!(!o||Qt(o==null?void 0:o.x))){e.addIntercepts([Ge.HOVER]);var s=e.spreadsheet.isHierarchyTreeType(),c=(a==null?void 0:a.cellType)===de.COL_CELL,d=e.getState(),h=e.isSelectedCell(a),v=(n==null?void 0:n.isMultiSelection)&&e.isSelectedState(),g=h?[]:e.getCellChildrenNodes(a),C=h?[]:[Ti(a)];if(v&&(C=Ho(d==null?void 0:d.cells,C),g=Ho(d==null?void 0:d.nodes,g),h&&(C=C.filter(function(_){var T=_.id;return T!==o.id}),g=g.filter(function(_){return!(_!=null&&_.id.includes(o.id))}))),ve(C)){e.reset(),e.spreadsheet.emit(K.GLOBAL_SELECTED,e.getActiveCells());return}var w=g.filter(function(_){return _==null?void 0:_.isLeaf});e.changeState({cells:C,nodes:w,stateName:Se.SELECTED});var S=C.map(function(_){var T=_.id;return T});return e.updateCells(e.getRowColActiveCells(S)),(!s||c)&&e.highlightNodes(g),e.spreadsheet.emit(K.GLOBAL_SELECTED,e.getActiveCells()),!0}}},this.highlightNodes=function(n){n===void 0&&(n=[]),n.forEach(function(i){var a;(a=i==null?void 0:i.belongsCell)===null||a===void 0||a.updateByState(Se.SELECTED,i.belongsCell)})},this.mergeCells=function(n,i){_7(e.spreadsheet,n,i)},this.unmergeCell=function(n){L7(e.spreadsheet,n)},this.spreadsheet=r,this.registerEventController(),this.registerInteractions(),window.addEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)}return t.prototype.destroy=function(){this.interactions.clear(),this.intercepts.clear(),this.eventController.clear(),this.clearHoverTimer(),this.resetState(),window.removeEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)},t.prototype.reset=function(){this.clearState(),this.clearHoverTimer(),this.intercepts.clear(),this.spreadsheet.hideTooltip()},t.prototype.setState=function(r){v9(this.spreadsheet,r)},t.prototype.getState=function(){return this.spreadsheet.store.get(Zs)||this.defaultState},t.prototype.setInteractedCells=function(r){var e=this.getInteractedCells().concat([r]),n=this.getState();n.interactedCells=e,this.setState(n)},t.prototype.getInteractedCells=function(){var r=this.getState();return(r==null?void 0:r.interactedCells)||[]},t.prototype.resetState=function(){this.spreadsheet.store.set(Zs,this.defaultState)},t.prototype.getCurrentStateName=function(){return this.getState().stateName},t.prototype.isEqualStateName=function(r){return this.getCurrentStateName()===r},t.prototype.isStateOf=function(r){var e=this.getState();return(e==null?void 0:e.stateName)===r},t.prototype.isSelectedState=function(){return this.isStateOf(Se.SELECTED)||this.isStateOf(Se.BRUSH_SELECTED)},t.prototype.isAllSelectedState=function(){return this.isStateOf(Se.ALL_SELECTED)},t.prototype.isHoverFocusState=function(){return this.isStateOf(Se.HOVER_FOCUS)},t.prototype.isHoverState=function(){return this.isStateOf(Se.HOVER)},t.prototype.isActiveCell=function(r){return!!this.getCells().find(function(e){return r.getMeta().id===e.id})},t.prototype.isSelectedCell=function(r){return this.isSelectedState()&&this.isActiveCell(r)},t.prototype.getCells=function(r){var e=this.getState(),n=(e==null?void 0:e.cells)||[];return Qt(r)?n:n.filter(function(i){return r.includes(i.type)})},t.prototype.getActiveCells=function(){var r=this.getCells().map(function(n){return n.id}),e=this.getAllCells();return nt(r,function(n){return Vr(e,function(i){var a;return((a=i==null?void 0:i.getMeta())===null||a===void 0?void 0:a.id)===n})}).filter(function(n){return n})},t.prototype.clearStyleIndependent=function(){!this.isSelectedState()&&!this.isHoverState()&&!this.isAllSelectedState()||this.getPanelGroupAllDataCells().forEach(function(r){r.hideInteractionShape()})},t.prototype.getPanelGroupAllUnSelectedDataCells=function(){var r=this;return this.getPanelGroupAllDataCells().filter(function(e){return!r.isActiveCell(e)})},t.prototype.getPanelGroupAllDataCells=function(){var r;return Eh((r=this.spreadsheet.panelGroup)===null||r===void 0?void 0:r.getChildren(),Xa)},t.prototype.getAllRowHeaderCells=function(){var r,e,n=((r=this.spreadsheet.foregroundGroup)===null||r===void 0?void 0:r.getChildren())||[],i=n.find(function(o){return o instanceof W_&&!(o instanceof CA)}),a=((e=i==null?void 0:i.cfg)===null||e===void 0?void 0:e.children)||[];return Eh(a,bh).filter(function(o){return o.cellType===de.ROW_CELL})},t.prototype.getAllColHeaderCells=function(){var r,e,n=((r=this.spreadsheet.foregroundGroup)===null||r===void 0?void 0:r.getChildren())||[],i=n.find(function(o){return o instanceof $_}),a=((e=i==null?void 0:i.cfg)===null||e===void 0?void 0:e.children)||[];return Eh(a,xh).filter(function(o){return o.cellType===de.COL_CELL})},t.prototype.getRowColActiveCells=function(r){return Ho(this.getAllRowHeaderCells(),this.getAllColHeaderCells()).filter(function(e){return r.includes(e.getMeta().id)})},t.prototype.getAllCells=function(){return Ho(this.getPanelGroupAllDataCells(),this.getAllRowHeaderCells(),this.getAllColHeaderCells())},t.prototype.hideColumns=function(r,e){r===void 0&&(r=[]),e===void 0&&(e=!0),y_(this.spreadsheet,r,e)},t.prototype.getBrushSelectionInfo=function(r){var e,n,i;return na(r)?{dataBrushSelection:r,rowBrushSelection:r,colBrushSelection:r}:{dataBrushSelection:(e=r==null?void 0:r.data)!==null&&e!==void 0?e:!1,rowBrushSelection:(n=r==null?void 0:r.row)!==null&&n!==void 0?n:!1,colBrushSelection:(i=r==null?void 0:r.col)!==null&&i!==void 0?i:!1}},t.prototype.getDefaultInteractions=function(){var r=this.spreadsheet.options.interaction,e=r.resize,n=r.brushSelection,i=r.multiSelection,a=r.rangeSelection,o=r.selectedCellMove,s=this.getBrushSelectionInfo(n),c=s.dataBrushSelection,d=s.rowBrushSelection,h=s.colBrushSelection;return[{key:Tr.CORNER_CELL_CLICK,interaction:eP},{key:Tr.DATA_CELL_CLICK,interaction:KB},{key:Tr.ROW_COLUMN_CLICK,interaction:QB},{key:Tr.ROW_TEXT_CLICK,interaction:JB},{key:Tr.MERGED_CELLS_CLICK,interaction:ZB},{key:Tr.HOVER,interaction:tP,enable:!br()},{key:Tr.BRUSH_SELECTION,interaction:nP,enable:!br()&&c},{key:Tr.ROW_BRUSH_SELECTION,interaction:iP,enable:!br()&&d},{key:Tr.COL_BRUSH_SELECTION,interaction:rP,enable:!br()&&h},{key:Tr.COL_ROW_RESIZE,interaction:sP,enable:!br()&&e},{key:Tr.DATA_CELL_MULTI_SELECTION,interaction:aP,enable:!br()&&i},{key:Tr.RANGE_SELECTION,interaction:lP,enable:!br()&&a},{key:Tr.SELECTED_CELL_MOVE,interaction:cP,enable:!br()&&o}]},t.prototype.registerInteractions=function(){var r=this,e=this.spreadsheet.options.interaction.customInteractions;this.interactions.clear();var n=this.getDefaultInteractions();n.forEach(function(i){var a=i.key,o=i.interaction,s=i.enable;s!==!1&&r.interactions.set(a,new o(r.spreadsheet))}),ve(e)||Ae(e,function(i){var a=i.interaction;r.interactions.set(i.key,new a(r.spreadsheet))})},t.prototype.registerEventController=function(){this.eventController=new oP(this.spreadsheet)},t.prototype.draw=function(){this.spreadsheet.container.draw()},t.prototype.clearState=function(){$R(this.spreadsheet)&&this.draw()},t.prototype.changeState=function(r){var e=this,n=this.spreadsheet.interaction,i=r.cells,a=i===void 0?[]:i,o=r.force,s=r.stateName,c=r.onUpdateCells;if(ve(a)&&s===Se.SELECTED){o&&n.changeState({cells:[],stateName:Se.UNSELECTED});return}this.getCurrentStateName()===Se.ALL_SELECTED&&this.clearStyleIndependent(),this.clearState(),this.setState(r);var d=function(){e.updatePanelGroupAllDataCells()};c?c(this,d):d(),this.draw()},t.prototype.updatePanelGroupAllDataCells=function(){this.updateCells(this.getPanelGroupAllDataCells())},t.prototype.updateCells=function(r){r===void 0&&(r=[]),r.forEach(function(e){e.update()})},t.prototype.addIntercepts=function(r){var e=this;r===void 0&&(r=[]),r.forEach(function(n){e.intercepts.add(n)})},t.prototype.hasIntercepts=function(r){var e=this;return r===void 0&&(r=[]),r.some(function(n){return e.intercepts.has(n)})},t.prototype.removeIntercepts=function(r){var e=this;r===void 0&&(r=[]),r.forEach(function(n){e.intercepts.delete(n)})},t.prototype.clearHoverTimer=function(){clearTimeout(this.hoverTimer)},t.prototype.setHoverTimer=function(r){this.hoverTimer=r},t.prototype.getHoverTimer=function(){return this.hoverTimer},t.prototype.getSelectedCellHighlight=function(){var r=this.spreadsheet.options.interaction.selectedCellHighlight;if(na(r))return{rowHeader:r,colHeader:r,currentRow:!1,currentCol:!1};var e=r!=null?r:{},n=e.rowHeader,i=n===void 0?!1:n,a=e.colHeader,o=a===void 0?!1:a,s=e.currentRow,c=s===void 0?!1:s,d=e.currentCol,h=d===void 0?!1:d;return{rowHeader:i,colHeader:o,currentRow:c,currentCol:h}},t.prototype.getHoverAfterScroll=function(){return this.spreadsheet.options.interaction.hoverAfterScroll},t.prototype.getHoverHighlight=function(){var r=this.spreadsheet.options.interaction.hoverHighlight;if(na(r))return{rowHeader:r,colHeader:r,currentRow:r,currentCol:r};var e=r!=null?r:{},n=e.rowHeader,i=n===void 0?!1:n,a=e.colHeader,o=a===void 0?!1:a,s=e.currentRow,c=s===void 0?!1:s,d=e.currentCol,h=d===void 0?!1:d;return{rowHeader:i,colHeader:o,currentRow:c,currentCol:h}},t.prototype.getBrushSelection=function(){var r=this.spreadsheet.options.interaction.brushSelection;if(na(r))return{data:r,row:r,col:r};var e=r!=null?r:{},n=e.data,i=n===void 0?!1:n,a=e.row,o=a===void 0?!1:a,s=e.col,c=s===void 0?!1:s;return{data:i,row:o,col:c}},t}(),fP=function(){function t(r){var e=this;this.viewport=window,this.isDevicePixelRatioChange=!1,this.init=function(){e.initDevicePixelRatioListener(),e.initDeviceZoomListener()},this.destroy=function(){e.removeDevicePixelRatioListener(),e.removeDeviceZoomListener()},this.removeDevicePixelRatioListener=function(){var n;!((n=e.devicePixelRatioMedia)===null||n===void 0)&&n.removeEventListener?e.devicePixelRatioMedia.removeEventListener("change",e.renderByDevicePixelRatioChanged):e.devicePixelRatioMedia.removeListener(e.renderByDevicePixelRatioChanged)},this.initDeviceZoomListener=function(){var n,i;br()||(i=(n=e.viewport)===null||n===void 0?void 0:n.visualViewport)===null||i===void 0||i.addEventListener("resize",e.renderByZoomScaleWithoutResizeEffect)},this.removeDeviceZoomListener=function(){var n,i;br()||(i=(n=e.viewport)===null||n===void 0?void 0:n.visualViewport)===null||i===void 0||i.removeEventListener("resize",e.renderByZoomScaleWithoutResizeEffect)},this.renderByZoomScaleWithoutResizeEffect=function(n){e.isDevicePixelRatioChange=!1,e.renderByZoomScale(n)},this.renderByDevicePixelRatioChanged=function(){e.isDevicePixelRatioChange=!0,e.renderByDevicePixelRatio()},this.renderByDevicePixelRatio=function(n){n===void 0&&(n=window.devicePixelRatio);var i=e.spreadsheet,a=i.container,o=i.options,s=o.width,c=o.height,d=o.devicePixelRatio,h=e.spreadsheet.getCanvasElement(),v=a.get("pixelRatio");if(!(v===n||!h)){var g=Math.max(n,d,Xp);a.set("pixelRatio",g),a.changeSize(s,c),e.spreadsheet.render(!1)}},this.renderByZoomScale=l(function(n){var i=Math.ceil(n.target.scale);i>=1&&!e.isDevicePixelRatioChange&&e.renderByDevicePixelRatio(i)},350),this.spreadsheet=r}return t.prototype.initDevicePixelRatioListener=function(){var r;this.devicePixelRatioMedia=window.matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)")),!((r=this.devicePixelRatioMedia)===null||r===void 0)&&r.addEventListener?this.devicePixelRatioMedia.addEventListener("change",this.renderByDevicePixelRatioChanged):this.devicePixelRatioMedia.addListener(this.renderByDevicePixelRatioChanged)},t}(),Y_=function(){function t(r){this.visible=!1,this.position={x:0,y:0},this.spreadsheet=r}return t.prototype.show=function(r){var e,n,i,a=r.position,o=r.options,s=r.content,c=r.event,d=oA(o).enterable,h=this.spreadsheet.options.tooltip||{},v=h.autoAdjustBoundary,g=h.adjustPosition;this.visible=!0,this.options=r;var C=this.getContainer();this.renderContent(s);var w=vB({spreadsheet:this.spreadsheet,position:a,tooltipContainer:C,autoAdjustBoundary:v}),S=w.x,_=w.y;this.position=(e=g==null?void 0:g({position:{x:S,y:_},event:c}))!==null&&e!==void 0?e:{x:S,y:_},A1(C,{style:{left:"".concat((n=this.position)===null||n===void 0?void 0:n.x,"px"),top:"".concat((i=this.position)===null||i===void 0?void 0:i.y,"px"),pointerEvents:d?"all":"none"},visible:!0})},t.prototype.hide=function(){this.visible=!1,this.container&&(A1(this.container,{style:{pointerEvents:"none"},visible:!1}),this.resetPosition())},t.prototype.destroy=function(){var r,e;this.visible=!1,this.container&&(this.resetPosition(),(e=(r=this.container).remove)===null||e===void 0||e.call(r),this.container=null)},t.prototype.renderContent=function(r){if(this.container){this.clearContent();var e=(this.spreadsheet.options.tooltip||{}).content,n=r!=null?r:e;if(!Qt(n)){if(typeof n=="string"){this.container.innerHTML=n;return}n instanceof Element&&this.container.appendChild(n)}}},t.prototype.clearContent=function(){this.container&&(this.container.innerHTML="")},t.prototype.disablePointerEvent=function(){this.container&&this.container.style.pointerEvents!=="none"&&A1(this.container,{style:{pointerEvents:"none"}})},t.prototype.resetPosition=function(){this.position={x:0,y:0}},t.prototype.getContainer=function(){var r;if(!this.container){var e=this.spreadsheet.options.tooltip,n=((r=e.getContainer)===null||r===void 0?void 0:r.call(e))||document.body,i=document.createElement("div");return A1(i,{style:e.style,className:[t_].concat(e.className)}),n.appendChild(i),this.container=i,this.container}return this.container},t}(),TA=function(t){Le(r,t);function r(e,n,i){var a=t.call(this)||this;return a.store=new M5,a.untypedOn=a.on,a.untypedEmit=a.emit,a.on=function(o,s){return a.untypedOn(o,s)},a.emit=function(o){for(var s=[],c=1;c<arguments.length;c++)s[c-1]=arguments[c];return a.untypedEmit.apply(a,re([o],Q(s),!1))},a.initHiddenColumnsDetail=function(){var o=a.options.interaction.hiddenColumnFields,s=a.store.get("hiddenColumnsDetail");ve(o)&&ve(s)||y_(a,o,!0)},a.measureText=Yi(function(o,s){var c;if(o===void 0&&(o=""),!s)return null;var d=(c=a.getCanvasElement())===null||c===void 0?void 0:c.getContext("2d"),h=s,v=h.fontSize,g=h.fontFamily,C=h.fontWeight,w=h.fontStyle,S=h.fontVariant;return d.font=[w,S,C,"".concat(v,"px"),g].join(" ").trim(),d.measureText(String(o))},function(o,s){return re([o],Q(ka(s)),!1).join("")}),a.measureTextWidth=function(o,s){o===void 0&&(o="");var c=a.measureText(o,s);return(c==null?void 0:c.width)||0},a.measureTextHeight=function(o,s){o===void 0&&(o="");var c=a.measureText(o,s);return c?c.actualBoundingBoxAscent+c.actualBoundingBoxDescent:0},a.measureTextWidthRoughly=function(o,s){var c,d;s===void 0&&(s={});var h=a.measureTextWidth("a",s),v=a.measureTextWidth("\u8682",s),g=0;if(!o)return g;try{for(var C=mr(o),w=C.next();!w.done;w=C.next()){var S=w.value,_=S.charCodeAt(0);g+=_>=0&&_<=255?h:v}}catch(T){c={error:T}}finally{try{w&&!w.done&&(d=C.return)&&d.call(C)}finally{if(c)throw c.error}}return g},a.dataCfg=x1(n),a.options=WR(i),a.dataSet=a.getDataSet(a.options),a.setDebug(),a.initTooltip(),a.initGroups(e),a.bindEvents(),a.initInteraction(),a.initTheme(),a.initHdAdapter(),a.registerIcons(),a.setOverscrollBehavior(),a}return r.prototype.setOverscrollBehavior=function(){var e=this.options.interaction.overscrollBehavior,n=window.getComputedStyle(document.body).getPropertyValue("overscroll-behavior"),i=n&&n!=="auto";i?this.store.set("initOverscrollBehavior",n):e&&(document.body.style.overscrollBehavior=e)},r.prototype.restoreOverscrollBehavior=function(){document.body.style.overscrollBehavior=this.store.get("initOverscrollBehavior")||""},r.prototype.setDebug=function(){aa.getInstance().setDebug(this.options.debug)},r.prototype.initTheme=function(){this.setThemeCfg({name:"default"})},r.prototype.getMountContainer=function(e){var n=Ju(e)?document.querySelector(e):e;if(!n)throw new Error("Target mount container is not a DOM element");return n},r.prototype.initHdAdapter=function(){this.options.hdAdapter&&(this.hdAdapter=new fP(this),this.hdAdapter.init())},r.prototype.initInteraction=function(){var e,n;(n=(e=this.interaction)===null||e===void 0?void 0:e.destroy)===null||n===void 0||n.call(e),this.interaction=new dP(this)},r.prototype.initTooltip=function(){var e,n,i,a;(n=(e=this.tooltip)===null||e===void 0?void 0:e.destroy)===null||n===void 0||n.call(e),this.tooltip=this.renderTooltip(),this.tooltip instanceof Y_||console.warn("[Custom Tooltip]: ".concat((a=(i=this.tooltip)===null||i===void 0?void 0:i.constructor)===null||a===void 0?void 0:a.toString()," should be extends from BaseTooltip"))},r.prototype.renderTooltip=function(){var e,n;return((n=(e=this.options.tooltip)===null||e===void 0?void 0:e.renderTooltip)===null||n===void 0?void 0:n.call(e,this))||new Y_(this)},r.prototype.showTooltip=function(e){var n,i,a=e.content,o=e.event,s=this.getCell(o==null?void 0:o.target),c=Ce(a)?a(s,e):a;(i=(n=this.tooltip).show)===null||i===void 0||i.call(n,k(k({},e),{content:c}))},r.prototype.showTooltipWithInfo=function(e,n,i){var a,o=O1(this,e),s=o.showTooltip,c=o.content;if(s){var d=this.getCell(e==null?void 0:e.target),h=(a=i==null?void 0:i.data)!==null&&a!==void 0?a:SB({spreadsheet:this,cellInfos:n,targetCell:d,options:k({enableFormat:!0},i)});this.showTooltip({data:h,position:{x:e.clientX,y:e.clientY},options:k({enterable:!0},i),event:e,content:c})}},r.prototype.hideTooltip=function(){var e,n;(n=(e=this.tooltip).hide)===null||n===void 0||n.call(e)},r.prototype.destroyTooltip=function(){var e,n;(n=(e=this.tooltip).destroy)===null||n===void 0||n.call(e)},r.prototype.registerIcons=function(){var e=this.options.customSVGIcons;ve(e)||Ae(e,function(n){DL(n.name,n.svg)})},r.prototype.setDataCfg=function(e,n){this.store.set("originalDataCfg",e),n?this.dataCfg=x1(e):this.dataCfg=x1(this.dataCfg,e),RB(this)},r.prototype.setOptions=function(e,n){var i;this.hideTooltip(),n?this.options=WR(e):this.options=oa(this.options,e),(n||!((i=e.tooltip)===null||i===void 0)&&i.renderTooltip)&&this.initTooltip(),this.registerIcons()},r.prototype.render=function(e,n){if(e===void 0&&(e=!0),n===void 0&&(n={}),!!this.getCanvasElement()){var i=n.reBuildDataSet,a=i===void 0?!1:i,o=n.reBuildHiddenColumnsDetail,s=o===void 0?!0:o;this.emit(K.LAYOUT_BEFORE_RENDER),a&&(this.dataSet=this.getDataSet(this.options)),e&&(this.clearDrillDownData("",!0),this.dataSet.setDataCfg(this.dataCfg)),this.buildFacet(),s&&this.initHiddenColumnsDetail(),this.emit(K.LAYOUT_AFTER_RENDER)}},r.prototype.destroy=function(){var e,n,i,a,o;this.restoreOverscrollBehavior(),this.emit(K.LAYOUT_DESTROY),(e=this.facet)===null||e===void 0||e.destroy(),(n=this.hdAdapter)===null||n===void 0||n.destroy(),(i=this.interaction)===null||i===void 0||i.destroy(),(a=this.store)===null||a===void 0||a.clear(),this.destroyTooltip(),this.clearCanvasEvent(),(o=this.container)===null||o===void 0||o.destroy(),j5()},r.prototype.setThemeCfg=function(e){e===void 0&&(e={});var n=(e==null?void 0:e.theme)||{},i=l5(k(k({},e),{spreadsheet:this}));this.theme=oa(i,n)},r.prototype.setTheme=function(e){this.theme=oa(this.theme,e)},r.prototype.updatePagination=function(e){this.options=oa(this.options,{pagination:e}),this.store.set("scrollX",0),this.store.set("scrollY",0)},r.prototype.getContentHeight=function(){return this.facet.getContentHeight()},r.prototype.changeSize=function(e,n){e===void 0&&(e=this.options.width),n===void 0&&(n=this.options.height),this.changeSheetSize(e,n)},r.prototype.changeSheetSize=function(e,n){e===void 0&&(e=this.options.width),n===void 0&&(n=this.options.height);var i=this.getCanvasElement(),a=this.container.get("width"),o=this.container.get("height"),s=e!==a||n!==o;!s||!i||(this.options=oa(this.options,{width:e,height:n}),this.container.changeSize(e,n))},r.prototype.getCanvasElement=function(){return this.container.get("el")},r.prototype.getLayoutWidthType=function(){return this.options.style.layoutWidthType},r.prototype.getRowNodes=function(e){return e===void 0&&(e=-1),e===-1?this.facet.layoutResult.rowNodes:this.facet.layoutResult.rowNodes.filter(function(n){return n.level===e})},r.prototype.getRowLeafNodes=function(){var e;return((e=this.facet)===null||e===void 0?void 0:e.layoutResult.rowLeafNodes)||[]},r.prototype.getColumnNodes=function(e){var n;e===void 0&&(e=-1);var i=((n=this.facet)===null||n===void 0?void 0:n.layoutResult.colNodes)||[];return e===-1?i:i.filter(function(a){return a.level===e})},r.prototype.getColumnLeafNodes=function(){var e;return((e=this.facet)===null||e===void 0?void 0:e.layoutResult.colLeafNodes)||[]},r.prototype.updateScrollOffset=function(e){var n={offsetX:{value:void 0,animate:!1},offsetY:{value:void 0,animate:!1},rowHeaderOffsetX:{value:void 0,animate:!1}};this.facet.updateScrollOffset(oa(n,e))},r.prototype.getTooltipDataItemMappingCallback=function(){var e;return(e=this.options)===null||e===void 0?void 0:e.mappingDisplayDataItem},r.prototype.isCellType=function(e){return e instanceof g1},r.prototype.getCell=function(e){for(var n,i=e;i&&!(i instanceof Rp);){if(this.isCellType(i))return i;i=(n=i.get)===null||n===void 0?void 0:n.call(i,"parent")}return null},r.prototype.getCellType=function(e){var n=this.getCell(e);return n==null?void 0:n.cellType},r.prototype.getTotalsConfig=function(e){var n=this.options.totals,i=this.dataSet.fields.rows,a=Me(n,un(i,e)?"row":"col",{}),o=a.showSubTotals&&un(a.subTotalsDimensions,e)?a.showSubTotals:!1;return k(k({label:ar("\u603B\u8BA1"),subLabel:ar("\u5C0F\u8BA1"),totalsGroupDimensions:[],subTotalsGroupDimensions:[]},a),{showSubTotals:o})},r.prototype.initGroups=function(e){var n=this.options,i=n.width,a=n.height,o=n.supportCSSTransform,s=n.devicePixelRatio;this.container=new Rp({container:this.getMountContainer(e),width:i,height:a,localRefresh:!1,supportCSSTransform:o,pixelRatio:Math.max(s,Xp)}),this.backgroundGroup=this.container.addGroup({name:dw,zIndex:lw}),this.panelGroup=this.container.addGroup({name:Op,zIndex:Ip}),this.foregroundGroup=this.container.addGroup({name:fw,zIndex:sw}),this.initPanelGroupChildren(),this.updateContainerStyle()},r.prototype.updateContainerStyle=function(){var e=this.getCanvasElement();e&&(e.style.display="block")},r.prototype.initPanelGroupChildren=function(){this.panelScrollGroup=new qB({name:hw,zIndex:cw,s2:this}),this.panelGroup.add(this.panelScrollGroup)},r.prototype.getInitColumnLeafNodes=function(){return this.store.get("initColumnLeafNodes",[])},r.prototype.clearColumnLeafNodes=function(){this.store.set("initColumnLeafNodes",void 0)},r.prototype.clearCanvasEvent=function(){var e=this,n=this.getEvents();bT(n,function(i,a){e.off(a)})},r.prototype.updateSortMethodMap=function(e,n,i){var a;i===void 0&&(i=!1);var o=i?null:this.store.get("sortMethodMap");this.store.set("sortMethodMap",k(k({},o),(a={},a[e]=n,a)))},r.prototype.getMenuDefaultSelectedKeys=function(e){var n=this.store.get("sortMethodMap"),i=Me(n,e);return i?[i]:[]},r}(gs),hP=function(t){Le(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getDataSet=function(e){var n=e.dataSet,i=e.hierarchyType;if(n)return n(this);var a=i==="customTree"?new dA(this):new F_(this);return a},r.prototype.getContentHeight=function(){return this.facet.getContentHeight()},r.prototype.isPivotMode=function(){return!0},r.prototype.isTableMode=function(){return!1},r.prototype.isHierarchyTreeType=function(){var e=this.options.hierarchyType;return e==="tree"||e==="customTree"},r.prototype.isScrollContainsRowHeader=function(){return!this.isFrozenRowHeader()},r.prototype.isFrozenRowHeader=function(){var e;return(e=this.options)===null||e===void 0?void 0:e.frozenRowHeader},r.prototype.isValueInCols=function(){return this.dataSet.fields.valueInCols},r.prototype.clearDrillDownData=function(e,n){if(this.dataSet instanceof F_){var i=this.dataSet.clearDrillDownData(e);i&&!n&&(this.interaction.reset(),this.render(!1))}},r.prototype.getFacetCfgFromDataSetAndOptions=function(){var e=this,n=this.dataSet,i=n.fields,a=n.meta,o=this.options,s=o.style,c=o.dataCell,d=function(h){return new Xa(h,e)};return k(k(k(k({},this.options),i),s),{meta:a,spreadsheet:this,dataSet:this.dataSet,dataCell:c!=null?c:d})},r.prototype.buildFacet=function(){var e,n=this.getFacetCfgFromDataSetAndOptions();(e=this.facet)===null||e===void 0||e.destroy(),this.facet=new VB(n),this.facet.render()},r.prototype.bindEvents=function(){this.off(K.ROW_CELL_COLLAPSE_TREE_ROWS),this.off(K.LAYOUT_TREE_ROWS_COLLAPSE_ALL),this.on(K.ROW_CELL_COLLAPSE_TREE_ROWS,this.handleRowCellCollapseTreeRows),this.on(K.LAYOUT_TREE_ROWS_COLLAPSE_ALL,this.handleTreeRowsCollapseAll)},r.prototype.handleRowCellCollapseTreeRows=function(e){var n,i=e.id,a=e.isCollapsed,o={style:{collapsedRows:(n={},n[i]=a,n)}};this.emit(K.LAYOUT_COLLAPSE_ROWS,{collapsedRows:o.style.collapsedRows,meta:e==null?void 0:e.node}),this.setOptions(o),this.render(!1),this.emit(K.LAYOUT_AFTER_COLLAPSE_ROWS,{collapsedRows:o.style.collapsedRows,meta:e==null?void 0:e.node})},r.prototype.handleTreeRowsCollapseAll=function(e){var n={style:{hierarchyCollapse:!e,collapsedRows:null,rowExpandDepth:null}};this.setOptions(n),this.render(!1)},r.prototype.groupSortByMethod=function(e,n){var i=this.dataCfg.fields,a=i.rows,o=i.columns,s=this.options.style.colCfg.hideMeasureColumn,c=this.isValueInCols()?Fe(a):Fe(o),d=n.query,h=n.value,v=Fo(d),g=h;s&&this.isValueInCols()&&(g=this.dataSet.fields.values[0],v[Ye]=g);var C={sortFieldId:c,sortMethod:e,sortByMeasure:g,query:v},w=this.dataCfg.sortParams.filter(function(_){return(_==null?void 0:_.sortFieldId)!==c});this.updateSortMethodMap(n.id,e,!0);var S=re(re([],Q(w),!1),[C],!1);this.emit(K.RANGE_SORT,S),this.setDataCfg(k(k({},this.dataCfg),{sortParams:S})),this.render()},r.prototype.handleGroupSort=function(e,n){var i=this;e.stopPropagation(),this.interaction.addIntercepts([Ge.HOVER]);var a=this.getMenuDefaultSelectedKeys(n==null?void 0:n.id),o={onClick:function(s){var c=s.key,d=c;i.groupSortByMethod(d,n),i.emit(K.RANGE_SORTED,e)},menus:n5(),defaultSelectedKeys:a};this.showTooltipWithInfo(e,[],{operator:o,onlyMenu:!0,forceRender:!0})},r.prototype.initPanelGroupChildren=function(){t.prototype.initPanelGroupChildren.call(this);var e={zIndex:hl,s2:this};this.frozenRowGroup=new _A(k({KEY_GROUP_PANEL_FROZEN_ROW:Mp},e)),this.panelGroup.add(this.frozenRowGroup)},r.prototype.isCellType=function(e){return e instanceof g1&&!(e instanceof zR)},r}(TA),vP=function(t){Le(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.onSortTooltipClick=function(n,i){var a=n.key,o=i.field,s={sortFieldId:o,sortMethod:a};e.updateSortMethodMap(i.id,a),e.emit(K.RANGE_SORT,[s])},e}return r.prototype.getDataSet=function(e){var n=e.dataSet;return n?n(this):new OB(this)},r.prototype.isPivotMode=function(){return!1},r.prototype.isTableMode=function(){return!0},r.prototype.isHierarchyTreeType=function(){return!1},r.prototype.isScrollContainsRowHeader=function(){return!1},r.prototype.isFrozenRowHeader=function(){return!1},r.prototype.clearDrillDownData=function(){},r.prototype.isValueInCols=function(){return!1},r.prototype.bindEvents=function(){},r.prototype.initPanelGroupChildren=function(){var e,n=this;t.prototype.initPanelGroupChildren.call(this);var i={zIndex:hl,s2:this};e=Q([Mp,Dp,vw,Bp,pw,gw].map(function(a){var o=new _A(k({name:a},i));return n.panelGroup.add(o),o}),6),this.frozenRowGroup=e[0],this.frozenColGroup=e[1],this.frozenTrailingRowGroup=e[2],this.frozenTrailingColGroup=e[3],this.frozenTopGroup=e[4],this.frozenBottomGroup=e[5]},r.prototype.getFacetCfgFromDataSetAndOptions=function(){var e=this,n=this.dataSet,i=n.fields,a=n.meta,o=this.options,s=o.style,c=o.dataCell,d=function(h){return e.options.showSeriesNumber&&h.colIndex===0?new DR(h,e):new y1(h,e)};return k(k(k(k({},this.options),i),s),{meta:a,spreadsheet:this,dataSet:this.dataSet,dataCell:c!=null?c:d})},r.prototype.buildFacet=function(){var e,n=this.getFacetCfgFromDataSetAndOptions();(e=this.facet)===null||e===void 0||e.destroy(),this.facet=new jB(n),this.facet.render()},r.prototype.clearFrozenGroups=function(){this.frozenRowGroup.set("children",[]),this.frozenColGroup.set("children",[]),this.frozenTrailingRowGroup.set("children",[]),this.frozenTrailingColGroup.set("children",[]),this.frozenTopGroup.set("children",[]),this.frozenBottomGroup.set("children",[])},r.prototype.destroy=function(){t.prototype.destroy.call(this),this.clearFrozenGroups(),this.off(K.RANGE_SORT),this.off(K.RANGE_FILTER)},r.prototype.handleGroupSort=function(e,n){var i=this;e.stopPropagation(),this.interaction.addIntercepts([Ge.HOVER]);var a=this.getMenuDefaultSelectedKeys(n==null?void 0:n.id),o={onClick:function(s){var c=s.key,d=c;i.onSortTooltipClick({key:d},n)},menus:i5(),defaultSelectedKeys:a};this.showTooltipWithInfo(e,[],{operator:o,onlyMenu:!0,forceRender:!0})},r}(TA),TP="@antv/s2-v1.54.2"},2477:function(){}}]);
