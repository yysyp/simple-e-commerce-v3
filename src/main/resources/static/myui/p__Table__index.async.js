"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[311],{39228:function(se,D,e){e.r(D),e.d(D,{default:function(){return Ce}});var B=e(5574),Z=e.n(B),W=e(15009),n=e.n(W),N=e(97857),c=e.n(N),z=e(99289),p=e.n(z),T=e(26514),K=e(1524),P=e(39285),Y=e(2236),b=e(98097),g=e(45360),O=e(96074),H=e(2058),E=e(15867),J=e(85265),x=e(62435),I=e(5914),r=e(86074),Q=function(i){var d=i.modalVisible,m=i.onCancel;return(0,r.jsx)(I.Z,{destroyOnClose:!0,title:"\u65B0\u5EFA",width:420,open:d,onCancel:function(){return m()},footer:null,children:i.children})},o=Q,t=e(38020),y=e(5966),F=e(90672),s=e(64317),j=e(86615),$=e(22452),le=function(i){return(0,r.jsxs)(t.L0,{stepsProps:{size:"small"},stepsFormRender:function(m,U){return(0,r.jsx)(I.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",open:i.updateModalVisible,footer:U,onCancel:function(){return i.onCancel()},children:m})},onFinish:i.onSubmit,children:[(0,r.jsxs)(t.L0.StepForm,{initialValues:{name:i.values.name,nickName:i.values.nickName},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,r.jsx)(y.Z,{width:"md",name:"name",label:"\u89C4\u5219\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,r.jsx)(F.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,r.jsxs)(t.L0.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,r.jsx)(s.Z,{width:"md",name:"target",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,r.jsx)(s.Z,{width:"md",name:"template",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,r.jsx)(j.Z.Group,{name:"type",width:"md",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,r.jsxs)(t.L0.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,r.jsx)($.Z,{name:"time",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,r.jsx)(s.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"xs",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},ie=le,oe=e(88484),G=T.Z.UserController,de=G.addUser,ce=G.queryUserList,me=G.deleteUser,fe=G.modifyUser,pe=function(){var w=p()(n()().mark(function i(d){var m;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m=g.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),u.prev=1,u.next=4,de(c()({},d));case 4:return m(),g.ZP.success("\u6DFB\u52A0\u6210\u529F"),u.abrupt("return",!0);case 9:return u.prev=9,u.t0=u.catch(1),m(),g.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),u.abrupt("return",!1);case 14:case"end":return u.stop()}},i,null,[[1,9]])}));return function(d){return w.apply(this,arguments)}}(),ve=function(){var w=p()(n()().mark(function i(d){var m;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m=g.ZP.loading("\u6B63\u5728\u914D\u7F6E"),u.prev=1,u.next=4,fe({userId:d.id||""},{name:d.name||"",nickName:d.nickName||"",email:d.email||""});case 4:return m(),g.ZP.success("\u914D\u7F6E\u6210\u529F"),u.abrupt("return",!0);case 9:return u.prev=9,u.t0=u.catch(1),m(),g.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),u.abrupt("return",!1);case 14:case"end":return u.stop()}},i,null,[[1,9]])}));return function(d){return w.apply(this,arguments)}}(),he=function(){var w=p()(n()().mark(function i(d){var m,U;return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(m=g.ZP.loading("\u6B63\u5728\u5220\u9664"),d){v.next=3;break}return v.abrupt("return",!0);case 3:return v.prev=3,v.next=6,me({userId:((U=d.find(function(X){return X.id}))===null||U===void 0?void 0:U.id)||""});case 6:return m(),g.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),v.abrupt("return",!0);case 11:return v.prev=11,v.t0=v.catch(3),m(),g.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),v.abrupt("return",!1);case 16:case"end":return v.stop()}},i,null,[[3,11]])}));return function(d){return w.apply(this,arguments)}}(),ye=function(){var i=(0,x.useState)(!1),d=Z()(i,2),m=d[0],U=d[1],u=(0,x.useState)(!1),v=Z()(u,2),X=v[0],k=v[1],ge=(0,x.useState)({}),re=Z()(ge,2),q=re[0],_=re[1],R=(0,x.useRef)(),Fe=(0,x.useState)(),ne=Z()(Fe,2),S=ne[0],je=ne[1],Ue=(0,x.useState)([]),ae=Z()(Ue,2),V=ae[0],te=ae[1],ee=[{title:"\u540D\u79F0",dataIndex:"name",tip:"\u540D\u79F0\u662F\u552F\u4E00\u7684 key",formItemProps:{rules:[{required:!0,message:"\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u6635\u79F0",dataIndex:"nickName",valueType:"text"},{title:"\u6027\u522B",dataIndex:"gender",hideInForm:!0,valueEnum:{0:{text:"\u7537",status:"MALE"},1:{text:"\u5973",status:"FEMALE"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(a,l){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("a",{onClick:function(){k(!0),_(l)},children:"\u914D\u7F6E"}),(0,r.jsx)(O.Z,{type:"vertical"}),(0,r.jsx)("a",{href:"",children:"\u8BA2\u9605\u8B66\u62A5"})]})}}],Se={name:"file",action:"/api/upload/file?key=umi4-max-ui",maxCount:1,method:"POST",accept:".xls,.xlsx",headers:{authorization:"authorization-text"},onChange:function(a){a.file.status!=="uploading"&&console.log(a.file,a.fileList),a.file.status==="done"?setTimeout(function(){var l,C;g.ZP.success("".concat(a.file.name," file uploaded successfully")),(l=R.current)===null||l===void 0||l.reset(),(C=R.current)===null||C===void 0||C.reload()},3e3):a.file.status==="error"&&g.ZP.error("".concat(a.file.name," file upload failed."))},progress:{strokeColor:{"0%":"#108ee9","100%":"#87d068"},strokeWidth:3,format:function(a){return a&&"".concat(parseFloat(a.toFixed(2)),"%")}}};return(0,r.jsxs)(K._z,{header:{title:"CRUD \u793A\u4F8B :pages/Table"},children:[(0,r.jsx)(H.Z,c()(c()({},Se),{},{children:(0,r.jsx)(E.ZP,{icon:(0,r.jsx)(oe.Z,{}),children:"Click to Upload"})})),(0,r.jsx)(P.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:R,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,r.jsx)(E.ZP,{type:"primary",onClick:function(){return U(!0)},children:"\u65B0\u5EFA"},"1")]},request:function(){var f=p()(n()().mark(function a(l,C,A){var h,M,ue;return n()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,ce(c()(c()({},l),{},{sorter:C,filter:A}));case 2:return h=L.sent,M=h.data,ue=h.success,L.abrupt("return",{data:(M==null?void 0:M.list)||[],success:ue});case 6:case"end":return L.stop()}},a)}));return function(a,l,C){return f.apply(this,arguments)}}(),columns:ee,rowSelection:{onChange:function(a,l){return te(l)}}}),(V==null?void 0:V.length)>0&&(0,r.jsxs)(Y.S,{extra:(0,r.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,r.jsx)("a",{style:{fontWeight:600},children:V.length})," ","\u9879\xA0\xA0"]}),children:[(0,r.jsx)(E.ZP,{onClick:p()(n()().mark(function f(){var a,l;return n()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,he(V);case 2:te([]),(a=R.current)===null||a===void 0||(l=a.reloadAndRest)===null||l===void 0||l.call(a);case 4:case"end":return A.stop()}},f)})),children:"\u6279\u91CF\u5220\u9664"}),(0,r.jsx)(E.ZP,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,r.jsx)(o,{onCancel:function(){return U(!1)},modalVisible:m,children:(0,r.jsx)(P.Z,{onSubmit:function(){var f=p()(n()().mark(function a(l){var C;return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,pe(l);case 2:C=h.sent,C&&(U(!1),R.current&&R.current.reload());case 4:case"end":return h.stop()}},a)}));return function(a){return f.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:ee})}),q&&Object.keys(q).length?(0,r.jsx)(ie,{onSubmit:function(){var f=p()(n()().mark(function a(l){var C;return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,ve(l);case 2:C=h.sent,C&&(k(!1),_({}),R.current&&R.current.reload());case 4:case"end":return h.stop()}},a)}));return function(a){return f.apply(this,arguments)}}(),onCancel:function(){k(!1),_({})},updateModalVisible:X,values:q}):null,(0,r.jsx)(J.Z,{width:600,open:!!S,onClose:function(){je(void 0)},closable:!1,children:(S==null?void 0:S.name)&&(0,r.jsx)(b.vY,{column:2,title:S==null?void 0:S.name,request:p()(n()().mark(function f(){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{data:S||{}});case 1:case"end":return l.stop()}},f)})),params:{id:S==null?void 0:S.name},columns:ee})})]})},Ce=ye},26514:function(se,D,e){e.d(D,{Z:function(){return Q}});var B={};e.r(B),e.d(B,{queryOlympicWinnerList:function(){return K}});var Z={};e.r(Z),e.d(Z,{addUser:function(){return g},deleteUser:function(){return I},getUserDetail:function(){return H},modifyUser:function(){return J},queryUserList:function(){return Y}});var W=e(15009),n=e.n(W),N=e(97857),c=e.n(N),z=e(99289),p=e.n(z),T=e(3835);function K(o,t){return P.apply(this,arguments)}function P(){return P=p()(n()().mark(function o(t,y){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/api/v1/queryOlympicWinnerList",c()({method:"GET",params:c()({},t)},y||{})));case 1:case"end":return s.stop()}},o)})),P.apply(this,arguments)}function Y(o,t){return b.apply(this,arguments)}function b(){return b=p()(n()().mark(function o(t,y){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/api/v1/queryUserList",c()({method:"GET",params:c()({},t)},y||{})));case 1:case"end":return s.stop()}},o)})),b.apply(this,arguments)}function g(o,t){return O.apply(this,arguments)}function O(){return O=p()(n()().mark(function o(t,y){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/api/v1/user",c()({method:"POST",headers:{"Content-Type":"application/json"},data:t},y||{})));case 1:case"end":return s.stop()}},o)})),O.apply(this,arguments)}function H(o,t){return E.apply(this,arguments)}function E(){return E=p()(n()().mark(function o(t,y){var F;return n()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return F=t.userId,j.abrupt("return",(0,T.request)("/api/v1/user/".concat(F),c()({method:"GET",params:c()({},t)},y||{})));case 2:case"end":return j.stop()}},o)})),E.apply(this,arguments)}function J(o,t,y){return x.apply(this,arguments)}function x(){return x=p()(n()().mark(function o(t,y,F){var s;return n()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return s=t.userId,$.abrupt("return",(0,T.request)("/api/v1/user/".concat(s),c()({method:"PUT",headers:{"Content-Type":"application/json"},params:c()({},t),data:y},F||{})));case 2:case"end":return $.stop()}},o)})),x.apply(this,arguments)}function I(o,t){return r.apply(this,arguments)}function r(){return r=p()(n()().mark(function o(t,y){var F;return n()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return F=t.userId,j.abrupt("return",(0,T.request)("/api/v1/user/".concat(F),c()({method:"DELETE",params:c()({},t)},y||{})));case 2:case"end":return j.stop()}},o)})),r.apply(this,arguments)}var Q={UserController:Z,OlympicController:B}}}]);
